From nobody at sheep.berlios.de  Wed Mar  2 16:26:43 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 2 Mar 2005 16:26:43 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_agerestrictions.php,1.1,1.2
Message-ID: <200503021526.j22FQhN06387@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv18053/_source/tier.data

Modified Files:
	class.phpmediadb_data_agerestrictions.php 
Log Message:
* Changed some comments

Index: class.phpmediadb_data_agerestrictions.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_agerestrictions.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- class.phpmediadb_data_agerestrictions.php	22 Feb 2005 15:14:09 -0000	1.1
+++ class.phpmediadb_data_agerestrictions.php	2 Mar 2005 15:26:41 -0000	1.2
@@ -33,7 +33,6 @@
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param phpmediadb_data
-	 * @return void
 	 */
 	public function __construct()
 	{
@@ -47,7 +46,6 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return void
 	 */
 	public function __destruct()
 	{



From nobody at sheep.berlios.de  Wed Mar  2 16:27:00 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 2 Mar 2005 16:27:00 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_audios.php,1.1,1.2
Message-ID: <200503021527.j22FR0N06409@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv18162/_source/tier.data

Modified Files:
	class.phpmediadb_data_audios.php 
Log Message:
* Changed some comments

Index: class.phpmediadb_data_audios.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_audios.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- class.phpmediadb_data_audios.php	22 Feb 2005 15:14:09 -0000	1.1
+++ class.phpmediadb_data_audios.php	2 Mar 2005 15:26:58 -0000	1.2
@@ -33,7 +33,6 @@
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param phpmediadb_data
-	 * @return void
 	 */
 	public function __construct()
 	{
@@ -47,7 +46,6 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return void
 	 */
 	public function __destruct()
 	{



From nobody at sheep.berlios.de  Wed Mar  2 16:27:15 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 2 Mar 2005 16:27:15 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_categories.php,1.1,1.2
Message-ID: <200503021527.j22FRFN06422@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv18188/_source/tier.data

Modified Files:
	class.phpmediadb_data_categories.php 
Log Message:
* Changed some comments

Index: class.phpmediadb_data_categories.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_categories.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- class.phpmediadb_data_categories.php	22 Feb 2005 15:14:09 -0000	1.1
+++ class.phpmediadb_data_categories.php	2 Mar 2005 15:27:13 -0000	1.2
@@ -33,7 +33,6 @@
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param phpmediadb_data
-	 * @return void
 	 */
 	public function __construct()
 	{
@@ -47,7 +46,6 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return void
 	 */
 	public function __destruct()
 	{



From nobody at sheep.berlios.de  Wed Mar  2 16:27:27 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 2 Mar 2005 16:27:27 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_codecs.php,1.1,1.2
Message-ID: <200503021527.j22FRRN06431@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv18213/_source/tier.data

Modified Files:
	class.phpmediadb_data_codecs.php 
Log Message:
* Changed some comments

Index: class.phpmediadb_data_codecs.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_codecs.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- class.phpmediadb_data_codecs.php	22 Feb 2005 15:14:09 -0000	1.1
+++ class.phpmediadb_data_codecs.php	2 Mar 2005 15:27:25 -0000	1.2
@@ -33,7 +33,6 @@
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param phpmediadb_data
-	 * @return void
 	 */
 	public function __construct()
 	{
@@ -47,7 +46,6 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return void
 	 */
 	public function __destruct()
 	{



From nobody at sheep.berlios.de  Wed Mar  2 16:28:54 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 2 Mar 2005 16:28:54 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_sql.php,1.1,1.2
Message-ID: <200503021528.j22FSsN06470@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv18296/_source/tier.data

Modified Files:
	class.phpmediadb_data_sql.php 
Log Message:
* Changed some comments
* Added method dbConnection

Index: class.phpmediadb_data_sql.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_sql.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- class.phpmediadb_data_sql.php	22 Feb 2005 16:29:01 -0000	1.1
+++ class.phpmediadb_data_sql.php	2 Mar 2005 15:28:52 -0000	1.2
@@ -33,7 +33,6 @@
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param phpmediadb_data
-	 * @return void
 	 */
 	public function __construct()
 	{
@@ -47,11 +46,25 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return void
 	 */
 	public function __destruct()
 	{
 		/* nothing to do yet */
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * This function provide the connection to the database
+	 *
+	 * @access protected
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param String
+	 * @return String
+	*/
+	protected function dbConnection($dns)
+	{
+		$conn = Creole::getConnection($dsn, Creole::PERSISTENT);
+		return $conn;
 	}
 }
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---



From nobody at sheep.berlios.de  Wed Mar  2 16:29:11 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 2 Mar 2005 16:29:11 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_prints.php,1.1,1.2
Message-ID: <200503021529.j22FTBN06482@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv18363/_source/tier.data

Modified Files:
	class.phpmediadb_data_prints.php 
Log Message:
* Changed some comments

Index: class.phpmediadb_data_prints.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_prints.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- class.phpmediadb_data_prints.php	22 Feb 2005 15:14:09 -0000	1.1
+++ class.phpmediadb_data_prints.php	2 Mar 2005 15:29:09 -0000	1.2
@@ -33,7 +33,6 @@
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param phpmediadb_data
-	 * @return void
 	 */
 	public function __construct()
 	{
@@ -47,7 +46,6 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return void
 	 */
 	public function __destruct()
 	{



From nobody at sheep.berlios.de  Wed Mar  2 16:29:21 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 2 Mar 2005 16:29:21 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_status.php,1.1,1.2
Message-ID: <200503021529.j22FTLN06490@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv18387/_source/tier.data

Modified Files:
	class.phpmediadb_data_status.php 
Log Message:
* Changed some comments

Index: class.phpmediadb_data_status.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_status.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- class.phpmediadb_data_status.php	22 Feb 2005 15:14:09 -0000	1.1
+++ class.phpmediadb_data_status.php	2 Mar 2005 15:29:19 -0000	1.2
@@ -33,7 +33,6 @@
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param phpmediadb_data
-	 * @return void
 	 */
 	public function __construct()
 	{
@@ -47,7 +46,6 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return void
 	 */
 	public function __destruct()
 	{



From nobody at sheep.berlios.de  Wed Mar  2 16:29:35 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 2 Mar 2005 16:29:35 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_videos.php,1.1,1.2
Message-ID: <200503021529.j22FTZN06498@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv18435/_source/tier.data

Modified Files:
	class.phpmediadb_data_videos.php 
Log Message:
* Changed some comments

Index: class.phpmediadb_data_videos.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_videos.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- class.phpmediadb_data_videos.php	22 Feb 2005 15:14:09 -0000	1.1
+++ class.phpmediadb_data_videos.php	2 Mar 2005 15:29:33 -0000	1.2
@@ -33,7 +33,6 @@
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param phpmediadb_data
-	 * @return void
 	 */
 	public function __construct()
 	{
@@ -47,7 +46,6 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return void
 	 */
 	public function __destruct()
 	{



From nobody at sheep.berlios.de  Wed Mar  2 16:29:47 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 2 Mar 2005 16:29:47 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_formats.php,1.2,1.3
Message-ID: <200503021529.j22FTlN06526@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv18464/_source/tier.data

Modified Files:
	class.phpmediadb_data_formats.php 
Log Message:
* Changed some comments

Index: class.phpmediadb_data_formats.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_formats.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- class.phpmediadb_data_formats.php	22 Feb 2005 15:15:35 -0000	1.2
+++ class.phpmediadb_data_formats.php	2 Mar 2005 15:29:45 -0000	1.3
@@ -33,7 +33,6 @@
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param phpmediadb_data
-	 * @return void
 	 */
 	public function __construct()
 	{
@@ -47,7 +46,6 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return void
 	 */
 	public function __destruct()
 	{



From nobody at sheep.berlios.de  Wed Mar  2 16:36:30 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 2 Mar 2005 16:36:30 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data.php,1.5,1.6
Message-ID: <200503021536.j22FaUN06830@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv19080/_source/tier.data

Modified Files:
	class.phpmediadb_data.php 
Log Message:
* Added basic class
* Implemented all attributes

Index: class.phpmediadb_data.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- class.phpmediadb_data.php	27 Feb 2005 16:03:16 -0000	1.5
+++ class.phpmediadb_data.php	2 Mar 2005 15:36:28 -0000	1.6
@@ -41,6 +41,17 @@
     	 
 		/* assign parent */
 		$this->PHPMEDIADB		= $sender;
+		
+		/* assign childs */
+		$this->AGERESTRICTIONS	= new phpmediadb_data_agerestrictions( $this );
+		$this->AUDIOS			= new phpmediadb_data_audios( $this );
+		$this->CATEGORIES		= new phpmediadb_data_categories( $this );
+		$this->CODECS			= new phpmediadb_data_codecs( $this );
+		$this->FORMATS			= new phpmediadb_data_formats( $this );
+		$this->PRINTS			= new phpmediadb_data_prints( $this );
+		$this->SQL				= new phpmediadb_data_sql( $this );
+		$this->STATUS			= new phpmediadb_data_status( $this );
+		$this->VIDEOS			= new phpmediadb_data_videos( $this );
 	}
 
 	/**



From nobody at sheep.berlios.de  Mon Mar  7 12:37:39 2005
From: nobody at sheep.berlios.de (bruf)
Date: Mon, 7 Mar 2005 12:37:39 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data.php,1.6,1.7
Message-ID: <200503071137.j27BbdN05933@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv2413/_source/tier.data

Modified Files:
	class.phpmediadb_data.php 
Log Message:
* Added some attributes

Index: class.phpmediadb_data.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data.php,v
retrieving revision 1.6
retrieving revision 1.7
diff -u -d -r1.6 -r1.7
--- class.phpmediadb_data.php	2 Mar 2005 15:36:28 -0000	1.6
+++ class.phpmediadb_data.php	7 Mar 2005 11:37:37 -0000	1.7
@@ -16,6 +16,87 @@
 	public $PHPMEDIADB = null;
 
 	/**
+	 * Reference to class phpmediadb_data_agerestrictions
+	 *
+	 * @access public
+	 * @see phpmediadb_data_agerestrictions
+	 * @var phpmediadb_data_agerestrictions
+	 */
+	public $AGERESTRICTIONS = null;
+
+	/**
+	 * Reference to class phpmediadb_data_audios
+	 *
+	 * @access public
+	 * @see phpmediadb_data_audios
+	 * @var phpmediadb_data_audios
+	 */
+	public $AUDIOS = null;
+	
+	/**
+	 * Reference to class phpmediadb_data_categories
+	 *
+	 * @access public
+	 * @see phpmediadb_data_categories
+	 * @var phpmediadb_data_categories
+	 */
+	public $CATEGORIES = null;
+	
+	/**
+	 * Reference to class phpmediadb_data_codecs
+	 *
+	 * @access public
+	 * @see phpmediadb_data_codecs
+	 * @var phpmediadb_data_codecs
+	 */
+	public $CODECS = null;
+	
+	/**
+	 * Reference to class phpmediadb_data_formats
+	 *
+	 * @access public
+	 * @see phpmediadb_data_formats
+	 * @var phpmediadb_data_formats
+	 */
+	public $FORMATS = null;
+	
+	/**
+	 * Reference to class phpmediadb_data_prints
+	 *
+	 * @access public
+	 * @see phpmediadb_data_prints
+	 * @var phpmediadb_data_prints
+	 */
+	public $PPRINTS = null;
+	
+	/**
+	 * Reference to class phpmediadb_data_sql
+	 *
+	 * @access public
+	 * @see phpmediadb_data_sql
+	 * @var phpmediadb_data_sql
+	 */
+	public $SQL = null;
+	
+	/**
+	 * Reference to class phpmediadb_data_status
+	 *
+	 * @access public
+	 * @see phpmediadb_data_status
+	 * @var phpmediadb_data_status
+	 */
+	public $STATUS = null;
+	
+	/**
+	 * Reference to class phpmediadb_data_videos
+	 *
+	 * @access public
+	 * @see phpmediadb_data_videos
+	 * @var phpmediadb_data_videos
+	 */
+	public $VIDEOS = null;
+	
+	/**
 	 * Container of configuration for the whole tier
 	 *
 	 * @access public



From nobody at sheep.berlios.de  Tue Mar  8 14:37:34 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 8 Mar 2005 14:37:34 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source phpmediadb.php,1.5,1.6
Message-ID: <200503081337.j28DbYN21748@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source
In directory sheep:/tmp/cvs-serv7283/_source

Modified Files:
	phpmediadb.php 
Log Message:
* Included all class-files in tier.data

Index: phpmediadb.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/phpmediadb.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- phpmediadb.php	27 Feb 2005 21:48:19 -0000	1.5
+++ phpmediadb.php	8 Mar 2005 13:37:32 -0000	1.6
@@ -32,6 +32,15 @@
 
 /* include tier.data */
 require_once( 'tier.data/class.phpmediadb_data.php' );
+require_once( 'tier.data/class.phpmediadb_data_agerestrictions.php' );
+require_once( 'tier.data/class.phpmediadb_data_audios.php' );
+require_once( 'tier.data/class.phpmediadb_data_categories.php' );
+require_once( 'tier.data/class.phpmediadb_data_codecs.php' );
+require_once( 'tier.data/class.phpmediadb_data_formats.php' );
+require_once( 'tier.data/class.phpmediadb_data_prints.php' );
+require_once( 'tier.data/class.phpmediadb_data_sql.php' );
+require_once( 'tier.data/class.phpmediadb_data_status.php' );
+require_once( 'tier.data/class.phpmediadb_data_videos.php' );
 
 /* run postinit */
 require_once( 'tier.configuration/config.postinit.php' );



From nobody at sheep.berlios.de  Tue Mar  8 18:50:50 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 8 Mar 2005 18:50:50 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_layout/stylesheet default.css,1.2,1.3
Message-ID: <200503081750.j28HooN00046@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_layout/stylesheet
In directory sheep:/tmp/cvs-serv20859/_layout/stylesheet

Modified Files:
	default.css 
Log Message:
* Added basic styles

Index: default.css
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_layout/stylesheet/default.css,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- default.css	26 Sep 2004 15:01:47 -0000	1.2
+++ default.css	8 Mar 2005 17:50:47 -0000	1.3
@@ -1,4 +1,38 @@
 /* phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/ */
 /* $Id$ */
+BODY { margin:0px 0px 0px 0px;padding:0px 0px 0px 0px; font-family:Helvetica,Arial; }
+
+IMG { border:0px; vertical-align:baseline;}
+
+A, A:visited  { color:#0033CC;text-decoration: none; }
+A:hover {  color:#CC0033;  text-decoration: none; }
+
+/* HEADER */
+#phpmediadb-header { background-color:#EEEEEE; margin:0px 0px 0px 0px; padding:5px;height:30px;border-bottom:1px solid grey; }
+#phpmediadb-header-title { font-weight:bold; }
+#phpmediadb-header-date { text-align:right;font-size: 0.8em; }
+
+/* MENU */
+#phpmediadb-menu A, #phpmediadb-menu A:visited { color:black;padding:3px;border:1px solid #F3F3F3;text-decoration: none; }
+#phpmediadb-menu A:hover { color:black; background-color:#CCCCCC; padding:3px; border:1px solid #666666; text-decoration: none; }
+#phpmediadb-menu A:active { color:black; background-color:#E6E6E6; padding:3px; border:1px solid #666666; text-decoration: none; }
+
+#phpmediadb-menu { background-color:#EEEEEE;position:absolute;top:50px;left:5px; margin:0px; padding:5px; border:1px solid grey; width:125px; }
 
+/* BODY */
+#phpmediadb-body { background-color:#EEEEEE;padding: 10px;border: 0px;margin: 10px 0px 0px 150px;border:1px solid grey; }
+
+#phpmediadb-body-menu A, #phpmediadb-body-menu A:visited { color:black;padding:3px;border:1px solid #F3F3F3;text-decoration: none; }
+#phpmediadb-body-menu A:hover { color:black; background-color:#CCCCCC; padding:3px; border:1px solid #666666; text-decoration: none; }
+#phpmediadb-body-menu A:active { color:black; background-color:#E6E6E6; padding:3px; border:1px solid #666666; text-decoration: none; }
+
+/* FOOTER */
+#phpmediadb-footer { background-color:#EEEEEE; position:absolute; bottom:0px; left:0px; right:0px; text-align:center;border-top:1px solid grey; }
+
+
+/* SITE SPECIFIC */
+#phpmediadb-body-home { text-align: center; }
+
+
+#phpmediadb-body-about-copyright{ } 
 /*--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---*/



From nobody at sheep.berlios.de  Tue Mar  8 18:51:29 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 8 Mar 2005 18:51:29 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration config.presentation.php,1.2,1.3
Message-ID: <200503081751.j28HpTN00075@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration
In directory sheep:/tmp/cvs-serv20884/_source/tier.configuration

Modified Files:
	config.presentation.php 
Log Message:
* Added templates_c as path

Index: config.presentation.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/config.presentation.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- config.presentation.php	9 Feb 2005 21:12:50 -0000	1.2
+++ config.presentation.php	8 Mar 2005 17:51:26 -0000	1.3
@@ -12,21 +12,24 @@
 /*
  * Configuration of directories
  */
-$phpMediaDbConfig['PRESENTATION']['directory']['root']			= realpath("./") . "/";
-$phpMediaDbConfig['PRESENTATION']['directory']['i18n']			= $phpMediaDbConfig['PRESENTATION']['directory']['root'] . "_source/tier.configuration/i18n/";
-$phpMediaDbConfig['PRESENTATION']['directory']['templates']	= $phpMediaDbConfig['PRESENTATION']['directory']['root'] . "_source/tier.configuration/templates";
+$phpMediaDbConfig['PRESENTATION']['directory']['root']			= realpath('./') . '/';
+$phpMediaDbConfig['PRESENTATION']['directory']['i18n']			= $phpMediaDbConfig['PRESENTATION']['directory']['root'] . '_source/tier.configuration/i18n/';
+$phpMediaDbConfig['PRESENTATION']['directory']['templates']	= $phpMediaDbConfig['PRESENTATION']['directory']['root'] . '_source/tier.configuration/templates';
+$phpMediaDbConfig['PRESENTATION']['directory']['templates_c']	= $phpMediaDbConfig['PRESENTATION']['directory']['root'] . 'var/templates_c';
 
-/*
- * Configuration of directories
- */
-$phpMediaDbConfig['PRESENTATION']['webpath']['server']		= "";
-$phpMediaDbConfig['PRESENTATION']['webpath']['root-path']	= "";
+/**
+  * Configuration of directories
+  */
+$phpMediaDbConfig['PRESENTATION']['webpath']['server']		= '';
+$phpMediaDbConfig['PRESENTATION']['webpath']['root-path']	= '';
 
-/*
- * i18n - Configuration
- */
-$phpMediaDbConfig['PRESENTATION']['i18n']['defaultLanguage']	= "en";
+/**
+  * i18n - Configuration
+  */
+$phpMediaDbConfig['PRESENTATION']['i18n']['defaultLanguage']	= "de";
 $phpMediaDbConfig['PRESENTATION']['i18n']['forcedLanguage']		= true;
+
+
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Tue Mar  8 18:52:11 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 8 Mar 2005 18:52:11 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration/i18n i18n.de.php,1.1,1.2
Message-ID: <200503081752.j28HqBN00103@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/i18n
In directory sheep:/tmp/cvs-serv20939/_source/tier.configuration/i18n

Modified Files:
	i18n.de.php 
Log Message:
* Added some i18n variables

Index: i18n.de.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/i18n/i18n.de.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- i18n.de.php	9 Feb 2005 16:17:06 -0000	1.1
+++ i18n.de.php	8 Mar 2005 17:52:07 -0000	1.2
@@ -4,5 +4,37 @@
 
 // $i18n['STRING-ID'] = "";
 
+/* default i18ns */
+	$i18n['OK'] = 'Akzeptieren';
+	$i18n['CANCEL'] = 'Abbrechen';
+	$i18n['DELETE'] = 'L?schen';
+	$i18n['DELETE'] = 'L?schen';
+	
+	
+/* media data */
+	$i18n['MEDIA_TITLE'] = 'Medientitel';
+	$i18n['MEDIA_ARTIST'] = 'Artist';
+	$i18n['MEDIA_CATEGORY'] = 'Kategorie';
+	
+/* projectdata */
+	$i18n['PROJECT_SUBTITLE'] = 'Die Mediendatenbank';
+	$i18n['PROJECT_LICENSED_UNDER'] = 'Lizenziert unter';
+	$i18n['PROJECT_DESCRIPTION'] = 'Dieses Projekt dient zur Erfassung von auditiven, visuellen und Printmedien. Initiert wurde dieses Projekt von Boris Ruf und Markus Blaschke im Rahmen eines Technikerprojekts an der Werner-Siemens-Schule in Stuttgart.';
+	
+/* Menu items */
+	$i18n['MENU_TITLE'] = 'Navigation';
+	$i18n['MENU_HOME'] = 'Startseite';
+	$i18n['MENU_SEARCH'] = 'Suche';
+	$i18n['MENU_LIST'] = 'Liste';
+	$i18n['MENU_ABOUT'] = '?ber uns';
+
+
+/* Itemtypes */
+	$i18n['ITEM_AUDIO'] = 'Audio';
+	$i18n['ITEM_VIDEO'] = 'Video';
+	$i18n['ITEM_PRINT'] = 'Print';
+
+/* Site: HOME */
+	$i18n['HOME_WELCOME'] = 'Willkommen zu phpMediaDB';
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
-?>
\ No newline at end of file
+?>



From nobody at sheep.berlios.de  Tue Mar  8 18:53:28 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 8 Mar 2005 18:53:28 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.presentation class.phpmediadb_presentation_htmlservice.php,1.3,1.4
Message-ID: <200503081753.j28HrSN00139@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation
In directory sheep:/tmp/cvs-serv21113/_source/tier.presentation

Modified Files:
	class.phpmediadb_presentation_htmlservice.php 
Log Message:
* Added function compile
* Added function display
* Added setupTemplateEngine
* Removed function compileTemplate

Index: class.phpmediadb_presentation_htmlservice.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_htmlservice.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- class.phpmediadb_presentation_htmlservice.php	27 Feb 2005 16:05:10 -0000	1.3
+++ class.phpmediadb_presentation_htmlservice.php	8 Mar 2005 17:53:26 -0000	1.4
@@ -48,28 +48,87 @@
 		/* assign parent */
 		$this->PRESENTATION	= $sender;
 		$this->PHPMEDIADB		= $sender->PHPMEDIADB;
+			
+		/* setup smarty object */
+		$this->setupTemplateEngine();
 		
-		/* create smarty object */
-		$this->templateEngine = new Smarty();
 	}
 
 //-----------------------------------------------------------------------------
-	public function compileTemplate( $template )
+	public function compile( $template )
 	{
 		/* init */
 		$returnValue = null;
+		$content		= array();
+		
 		
 		/* set up template engine */
-		initTemplateEngine();
-
-		/* return compiled template */
-		return $returnValue;
+		$this->initTemplateEngine();
+		
+		/* compile specified templates */
+		switch( gettype( $template ) )
+		{
+			case 'string':
+					$content['DOCUMENT']['BODY'] = $this->templateEngine->fetch( $template );
+				break;
+			
+			case 'array';
+				$content['DOCUMENT']['BODY'] = '';
+					foreach( $template as $value )
+						$content['DOCUMENT']['BODY'] .= $this->templateEngine->fetch( $value );
+				break;	
+		}
+		
+		/* compile header */
+		$content['DOCUMENT']['HEADER'] = $this->templateEngine->fetch( 'overall.header.tpl' );
+		/* compile menu */
+		$content['DOCUMENT']['MENU'] = $this->templateEngine->fetch( 'overall.menu.tpl' );
+		/* compile footer */
+		$content['DOCUMENT']['FOOTER'] = $this->templateEngine->fetch( 'overall.footer.tpl' );
+		
+		
+		/* compile pre-template */
+		$this->templateEngine->assign( $content );
+		$returnValue = $this->templateEngine->fetch( 'overall.body.tpl' );
+		
+ 		/* return compiled template */
+	 	return $returnValue;
 	}
-
+//-----------------------------------------------------------------------------
+	public function display( $template )
+	{
+		/* init */
+		$returnValue = null;
+		
+		/* delegate */
+		$returnValue = $this->compile( $template );
+		
+		/* output */
+		echo $returnValue;
+	}
+	
 //-----------------------------------------------------------------------------
 	protected function initTemplateEngine()
 	{
+		/* clear vars */
+		$this->templateEngine->clear_all_assign();
+		
+		/* set contentvars */
+		$this->templateEngine->assign( $this->PRESENTATION->CONTENTVARS->getNode() );
+		
+		/* set i18n-vars */
+		$this->templateEngine->assign( 'I18N', $this->PRESENTATION->I18N->getLanguageArray() );
+			
+	}
+//-----------------------------------------------------------------------------
+	protected function setupTemplateEngine()
+	{
+		/* create templateengine-object */
+		$this->templateEngine = new Smarty();
 		
+		/* setup configuration */
+		$this->templateEngine->template_dir	= $this->PRESENTATION->configuration['directory']['templates'];
+		$this->templateEngine->compile_dir	= $this->PRESENTATION->configuration['directory']['templates_c'];
 	}
 } /* end of class phpmediadb_presentation_htmlservice */
 



From nobody at sheep.berlios.de  Tue Mar  8 18:54:19 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 8 Mar 2005 18:54:19 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs about.php,NONE,1.1 index.php,NONE,1.1 list.php,NONE,1.1 search.php,NONE,1.1
Message-ID: <200503081754.j28HsJN00161@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs
In directory sheep:/tmp/cvs-serv22088

Added Files:
	about.php index.php list.php search.php 
Log Message:
* Initial revision

--- NEW FILE: about.php ---
<?php
// phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
/* $Id: about.php,v 1.1 2005/03/08 17:54:14 mblaschke Exp $ */

require_once( '_source/phpmediadb.php' );

/* create object */
$PHPMEDIADB	= new phpmediadb();

/* display site */
$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( 'body.about.tpl' );

//--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
?>
--- NEW FILE: index.php ---
<?php
// phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
/* $Id: index.php,v 1.1 2005/03/08 17:54:16 mblaschke Exp $ */

require_once( '_source/phpmediadb.php' );

/* create object */
$PHPMEDIADB	= new phpmediadb();

/* display site */
$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( 'body.home.tpl' );

//--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
?>
--- NEW FILE: list.php ---
<?php
// phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
/* $Id: list.php,v 1.1 2005/03/08 17:54:16 mblaschke Exp $ */

require_once( '_source/phpmediadb.php' );

/* create object */
$PHPMEDIADB	= new phpmediadb();


/* setup templates */
$templates = array();
$templates[] = 'body.list.header.tpl';

switch( @$_GET['list'] )
{
		case 'audio':
				/* display site */
				$templates[] = 'body.list.audio.tpl';
				$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( $templates );
			break;
			
		case 'video':
				/* display site */
				$templates[] = 'body.list.video.tpl';
				$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( $templates );
			break;
			
		case 'print':
				/* display site */
				$templates[] = 'body.list.print.tpl';
				$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( $templates );
			break;
			
		default:
				/* display site */
				$templates[] = 'body.list.tpl';
				$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( $templates );
			break;
}

//--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
?>
--- NEW FILE: search.php ---
 



From nobody at sheep.berlios.de  Tue Mar  8 18:54:55 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 8 Mar 2005 18:54:55 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration/templates body.about.tpl,NONE,1.1 body.home.tpl,NONE,1.1 body.list.audio.tpl,NONE,1.1 body.list.header.tpl,NONE,1.1 body.list.print.tpl,NONE,1.1 body.list.tpl,NONE,1.1 body.list.video.tpl,NONE,1.1 body.search.tpl,NONE,1.1 overall.body.tpl,NONE,1.1 overall.footer.tpl,NONE,1.1 overall.header.tpl,NONE,1.1 overall.menu.tpl,NONE,1.1
Message-ID: <200503081754.j28HstN00189@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/templates
In directory sheep:/tmp/cvs-serv23610/_source/tier.configuration/templates

Added Files:
	body.about.tpl body.home.tpl body.list.audio.tpl 
	body.list.header.tpl body.list.print.tpl body.list.tpl 
	body.list.video.tpl body.search.tpl overall.body.tpl 
	overall.footer.tpl overall.header.tpl overall.menu.tpl 
Log Message:
* Initial revision

--- NEW FILE: body.about.tpl ---
<div id="phpmediadb-body-about-copyright">
 <h1>phpMediaDB :: {$I18N.PROJECT_SUBTITLE|default:"%PROJECT_SUBTITLE%"}</h1>
 {$I18N.PROJECT_LICENSED_UNDER|default:"%PROJECT_LICENSED_UNDER%"} <a href="{$CONFIGURATION.ROOTPATH}help/license-gpl.html">GNU General Public License</a>.<br />
 <br />
 {$I18N.PROJECT_DESCRIPTION|default:"%PROJECT_DESCRIPTION%"}
</div> 
--- NEW FILE: body.home.tpl ---
<div id="phpmediadb-body-home">
	<h1>{$I18N.HOME_WELCOME|default:"%HOME_WELCOME%"}</h1>
		<h2>{$I18N.PROJECT_SUBTITLE|default:"%PROJECT_SUBTITLE%"}</h2>

	<img src="{$CONFIGURATION.ROOTPATH}_layout/images/phpmediadb.jpg" alt="{$I18N.MENU_SEARCH|default:"%MENU_SEARCH%"}" />
</div>
--- NEW FILE: body.list.audio.tpl ---
<div id="phpmediadb-body-list-audio" class="phpmediadb-body-list">
	<table width="100%" border="0">
		<tr>
			<th>{$I18N.MEDIA_TITLE|default:"%MEDIA_TITLE%"}</th>
			<th>{$I18N.MEDIA_ARTIST|default:"%MEDIA_ARTIST%"}</th>
			<th>{$I18N.LIST_TITLE_TITLE|default:"%LIST_TITLE_TITLE%"}</th>
			<th></th>
		</tr>
		
		<td>
			<td></td>
			<td></td>
			<td></td>
			<td>
				<img src="{$CONFIGURATION.ROOTPATH}_layout/images/icons/action-modify.png" alt="{$I18N.ACTION_MODIFY|default:"%ACTION_MODIFY%"}" />
				<img src="{$CONFIGURATION.ROOTPATH}_layout/images/icons/action-remove.png" alt="{$I18N.ACTION_DELETE|default:"%ACTION_DELETE%"}" />
			</td>
		</td>
		
	</table>
</div> 

--- NEW FILE: body.list.header.tpl ---
<div id="phpmediadb-body-menu">
	<table>
	<tr>
		<td class="phpmediadb-body-menu-item">
			<a href="{$CONFIGURATION.ROOTPATH}list.php?list=audio" onFocus="javascript:if(this.blur)this.blur()">{$I18N.ITEM_AUDIO|default:"%ITEM_AUDIO%"}</a>
		</td>
		
		<td class="phpmediadb-body-menu-item">
			<a href="{$CONFIGURATION.ROOTPATH}list.php?list=video" onFocus="javascript:if(this.blur)this.blur()">{$I18N.ITEM_VIDEO|default:"%ITEM_VIDEO%"}</a>
		</td>

		<td class="phpmediadb-body-menu-item">
			<a href="{$CONFIGURATION.ROOTPATH}list.php?list=print" onFocus="javascript:if(this.blur)this.blur()">{$I18N.ITEM_PRINT|default:"%ITEM_PRINT%"}</a>
		</td>
	
	</tr>
	</table>
</div> 
--- NEW FILE: body.list.print.tpl ---
<div id="phpmediadb-body-list-print" class="phpmediadb-body-list">
 PRINT
</div> 

--- NEW FILE: body.list.tpl ---
 

--- NEW FILE: body.list.video.tpl ---
<div id="phpmediadb-body-list-video" class="phpmediadb-body-list">
 VIDEO
</div> 

--- NEW FILE: body.search.tpl ---
 

--- NEW FILE: overall.body.tpl ---
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
	<title>phpMedaDB :: {$DOCUMENT.TITLE|default:$I18N.PROJECT_SUBTITLE|default:"%PROJECT_SUBTITLE%"}</title>
	<link rel="StyleSheet"  href="{$CONFIGURATION.ROOTPATH}_layout/stylesheet/default.css" type="text/css" />
	<link rel="icon" href="{$CONFIGURATION.ROOTPATH}_layout/images/icons/favicon.png" />
	{$DOCUMENT.HTML.HEADER}
</head>

<body>
	<div id="phpmediadb-header">{$DOCUMENT.HEADER}</div>

	<div id="phpmediadb-menu">{$DOCUMENT.MENU}</div>
	
	<div id="phpmediadb-body">{$DOCUMENT.BODY}</div>
	
	<div id="phpmediadb-footer">{$DOCUMENT.FOOTER}</div>

</body>

</html> 

--- NEW FILE: overall.footer.tpl ---
(This appears to be a binary file; contents omitted.)

--- NEW FILE: overall.header.tpl ---
<table width="100%" border="0">
	<tr>
		<td id="phpmediadb-header-title">
			<img src="{$CONFIGURATION.ROOTPATH}_layout/images/icons/favicon.png" alt="" />
			phpMediaDB :: {$DOCUMENT.TITLE|default:$I18N.PROJECT_SUBTITLE|default:"%PROJECT_SUBTITLE%"}
		</td>
		<td id="phpmediadb-header-date">{$smarty.now|date_format:"%A, %B %e, %Y %H:%M:%S"}</td>
	</tr>
</table>

--- NEW FILE: overall.menu.tpl ---
<table>
	<tr><th class="phpmediadb-menu-title">{$I18N.MENU_TITLE|default:"%MENU_TITLE%"}</th></tr>
	<tr><td class="phpmediadb-menu-item" id="phpmediadb-menu-item-home">
		<a href="{$CONFIGURATION.ROOTPATH}index.php" onFocus="javascript:if(this.blur)this.blur()">
			<img src="{$CONFIGURATION.ROOTPATH}_layout/images/icons/nav-home.png" alt="{$I18N.MENU_HOME|default:"%MENU_HOME%"}" />
			{$I18N.MENU_HOME|default:"%MENU_HOME%"}
		</a>
	</td></tr>
	
	<tr><td class="phpmediadb-menu-item" id="phpmediadb-menu-item-list">
		<a href="{$CONFIGURATION.ROOTPATH}list.php" onFocus="javascript:if(this.blur)this.blur()">
			<img src="{$CONFIGURATION.ROOTPATH}_layout/images/icons/nav-list.png" alt="{$I18N.MENU_LIST|default:"%MENU_LIST%"}" />
			{$I18N.MENU_LIST|default:"%MENU_LIST%"}
		</a>
	</td></tr>
	
	<tr><td class="phpmediadb-menu-item" id="phpmediadb-menu-item-search">
		<a href="{$CONFIGURATION.ROOTPATH}search.php" onFocus="javascript:if(this.blur)this.blur()">
			<img src="{$CONFIGURATION.ROOTPATH}_layout/images/icons/nav-search.png" alt="{$I18N.MENU_SEARCH|default:"%MENU_SEARCH%"}" />
			{$I18N.MENU_SEARCH|default:"%MENU_SEARCH%"}
		</a>
	</td></tr>
	
	<tr><td class="phpmediadb-menu-item" id="phpmediadb-menu-item-about">
		<a href="{$CONFIGURATION.ROOTPATH}about.php" onFocus="javascript:if(this.blur)this.blur()">
			<img src="{$CONFIGURATION.ROOTPATH}_layout/images/icons/nav-about.png" alt="{$I18N.MENU_ABOUT|default:"%MENU_ABOUT%"}" />
			{$I18N.MENU_ABOUT|default:"%MENU_ABOUT%"}
		</a>
	</td></tr>
	
</table>


From nobody at sheep.berlios.de  Tue Mar  8 21:45:52 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 8 Mar 2005 21:45:52 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_layout/stylesheet default.css,1.3,1.4
Message-ID: <200503082045.j28KjqN04538@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_layout/stylesheet
In directory sheep:/tmp/cvs-serv19184/_layout/stylesheet

Modified Files:
	default.css 
Log Message:
* Changed phpmediadb-body-menu from ID to CLASS
* Added some comments

Index: default.css
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_layout/stylesheet/default.css,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- default.css	8 Mar 2005 17:50:47 -0000	1.3
+++ default.css	8 Mar 2005 20:45:50 -0000	1.4
@@ -1,5 +1,7 @@
 /* phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/ */
 /* $Id$ */
+
+/*** BASIC ELEMENTS **********************************************************/
 BODY { margin:0px 0px 0px 0px;padding:0px 0px 0px 0px; font-family:Helvetica,Arial; }
 
 IMG { border:0px; vertical-align:baseline;}
@@ -7,32 +9,43 @@
 A, A:visited  { color:#0033CC;text-decoration: none; }
 A:hover {  color:#CC0033;  text-decoration: none; }
 
-/* HEADER */
+/* ------------------------------------------------------------------------- */
+/* ------------------------------------------------------------------------- */
+/* ------------------------------------------------------------------------- */
+
+/*** PHPMEDIADB-HEADER *******************************************************/
 #phpmediadb-header { background-color:#EEEEEE; margin:0px 0px 0px 0px; padding:5px;height:30px;border-bottom:1px solid grey; }
 #phpmediadb-header-title { font-weight:bold; }
 #phpmediadb-header-date { text-align:right;font-size: 0.8em; }
 
-/* MENU */
+/*** PHPMEDIADB-MENU *********************************************************/
 #phpmediadb-menu A, #phpmediadb-menu A:visited { color:black;padding:3px;border:1px solid #F3F3F3;text-decoration: none; }
 #phpmediadb-menu A:hover { color:black; background-color:#CCCCCC; padding:3px; border:1px solid #666666; text-decoration: none; }
 #phpmediadb-menu A:active { color:black; background-color:#E6E6E6; padding:3px; border:1px solid #666666; text-decoration: none; }
 
 #phpmediadb-menu { background-color:#EEEEEE;position:absolute;top:50px;left:5px; margin:0px; padding:5px; border:1px solid grey; width:125px; }
 
-/* BODY */
+/*** PHPMEDIADB-BODY *********************************************************/
 #phpmediadb-body { background-color:#EEEEEE;padding: 10px;border: 0px;margin: 10px 0px 0px 150px;border:1px solid grey; }
 
-#phpmediadb-body-menu A, #phpmediadb-body-menu A:visited { color:black;padding:3px;border:1px solid #F3F3F3;text-decoration: none; }
-#phpmediadb-body-menu A:hover { color:black; background-color:#CCCCCC; padding:3px; border:1px solid #666666; text-decoration: none; }
-#phpmediadb-body-menu A:active { color:black; background-color:#E6E6E6; padding:3px; border:1px solid #666666; text-decoration: none; }
+.phpmediadb-body-menu A, .phpmediadb-body-menu A:visited { color:black;padding:3px;border:1px solid #F3F3F3;text-decoration: none; }
+.phpmediadb-body-menu A:hover { color:black; background-color:#CCCCCC; padding:3px; border:1px solid #666666; text-decoration: none; }
+.phpmediadb-body-menu A:active { color:black; background-color:#E6E6E6; padding:3px; border:1px solid #666666; text-decoration: none; }
 
-/* FOOTER */
+/*** PHPMEDIADB-FOOTER *******************************************************/
 #phpmediadb-footer { background-color:#EEEEEE; position:absolute; bottom:0px; left:0px; right:0px; text-align:center;border-top:1px solid grey; }
 
+/* ------------------------------------------------------------------------- */
+/* ------------------------------------------------------------------------- */
+/* ------------------------------------------------------------------------- */
 
-/* SITE SPECIFIC */
+/*** PHPMEDIADB-BODY-HOME ****************************************************/
 #phpmediadb-body-home { text-align: center; }
 
+/*** PHPMEDIADB-BODY-LIST ****************************************************/
 
+/*** PHPMEDIADB-BODY-SEARCH **************************************************/
+
+/*** PHPMEDIADB-BODY-ABOUT ***************************************************/
 #phpmediadb-body-about-copyright{ } 
 /*--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---*/



From nobody at sheep.berlios.de  Tue Mar  8 21:47:19 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 8 Mar 2005 21:47:19 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration/templates body.search.header.tpl,NONE,1.1
Message-ID: <200503082047.j28KlJN04575@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/templates
In directory sheep:/tmp/cvs-serv19227/_source/tier.configuration/templates

Added Files:
	body.search.header.tpl 
Log Message:
* Initial revision

--- NEW FILE: body.search.header.tpl ---
<form action="search.php">
<div id="phpmediadb-body-search-header">
 SUCHFELD
</div>
</form>


From nobody at sheep.berlios.de  Tue Mar  8 21:47:45 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 8 Mar 2005 21:47:45 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration/templates body.list.header.tpl,1.1,1.2
Message-ID: <200503082047.j28KliN04586@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/templates
In directory sheep:/tmp/cvs-serv19245/_source/tier.configuration/templates

Modified Files:
	body.list.header.tpl 
Log Message:
* Added ID to DIV-element

Index: body.list.header.tpl
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/templates/body.list.header.tpl,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- body.list.header.tpl	8 Mar 2005 17:54:52 -0000	1.1
+++ body.list.header.tpl	8 Mar 2005 20:47:42 -0000	1.2
@@ -1,4 +1,4 @@
-<div id="phpmediadb-body-menu">
+<div class="phpmediadb-body-menu" id="phpmediadb-body-list-header">
 	<table>
 	<tr>
 		<td class="phpmediadb-body-menu-item">



From nobody at sheep.berlios.de  Tue Mar  8 21:48:52 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 8 Mar 2005 21:48:52 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs search.php,1.1,1.2
Message-ID: <200503082048.j28KmqN04647@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs
In directory sheep:/tmp/cvs-serv19338

Modified Files:
	search.php 
Log Message:
* Added basic functionality

Index: search.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/search.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- search.php	8 Mar 2005 17:54:16 -0000	1.1
+++ search.php	8 Mar 2005 20:48:49 -0000	1.2
@@ -1 +1,30 @@
- 
+<?php
+// phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
+/* $Id$ */
+
+require_once( '_source/phpmediadb.php' );
+
+/* create object */
+$PHPMEDIADB	= new phpmediadb(); 
+
+/* setup templates */
+$templates = array();
+$templates[] = 'body.search.header.tpl';
+
+switch( @$_GET['action'] )
+{
+		case 'search':
+				/* display site */
+				/* TODO */
+				$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( $templates );
+			break;
+					
+		default:
+				/* display site */
+				/* TODO */
+				$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( $templates );
+			break;
+}
+
+//--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
+?>
\ No newline at end of file



From nobody at sheep.berlios.de  Tue Mar  8 21:48:00 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 8 Mar 2005 21:48:00 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration/templates overall.body.tpl,1.1,1.2
Message-ID: <200503082048.j28Km0N04596@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/templates
In directory sheep:/tmp/cvs-serv19266/_source/tier.configuration/templates

Modified Files:
	overall.body.tpl 
Log Message:
* Added some html-comments

Index: overall.body.tpl
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/templates/overall.body.tpl,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- overall.body.tpl	8 Mar 2005 17:54:52 -0000	1.1
+++ overall.body.tpl	8 Mar 2005 20:47:58 -0000	1.2
@@ -8,13 +8,21 @@
 </head>
 
 <body>
+<!-- PHPMEDIADB-HEADER BEGIN -->
 	<div id="phpmediadb-header">{$DOCUMENT.HEADER}</div>
+<!-- PHPMEDIADB-HEADER END -->
 
+<!-- PHPMEDIADB-MENU BEGIN -->
 	<div id="phpmediadb-menu">{$DOCUMENT.MENU}</div>
-	
+<!-- PHPMEDIADB-MENU END -->
+
+<!-- PHPMEDIADB-BODY BEGIN -->
 	<div id="phpmediadb-body">{$DOCUMENT.BODY}</div>
-	
+<!-- PHPMEDIADB-BODY END -->
+
+<!-- PHPMEDIADB-FOOTER BEGIN -->
 	<div id="phpmediadb-footer">{$DOCUMENT.FOOTER}</div>
+<!-- PHPMEDIADB-FOOTER END -->
 
 </body>
 



From nobody at sheep.berlios.de  Tue Mar  8 22:22:41 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 8 Mar 2005 22:22:41 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration/templates body.home.tpl,1.1,1.2
Message-ID: <200503082122.j28LMfN05430@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/templates
In directory sheep:/tmp/cvs-serv21795/_source/tier.configuration/templates

Modified Files:
	body.home.tpl 
Log Message:
* Fixed wrong logo alternative-text

Index: body.home.tpl
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/templates/body.home.tpl,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- body.home.tpl	8 Mar 2005 17:54:52 -0000	1.1
+++ body.home.tpl	8 Mar 2005 21:22:38 -0000	1.2
@@ -2,5 +2,5 @@
 	<h1>{$I18N.HOME_WELCOME|default:"%HOME_WELCOME%"}</h1>
 		<h2>{$I18N.PROJECT_SUBTITLE|default:"%PROJECT_SUBTITLE%"}</h2>
 
-	<img src="{$CONFIGURATION.ROOTPATH}_layout/images/phpmediadb.jpg" alt="{$I18N.MENU_SEARCH|default:"%MENU_SEARCH%"}" />
+	<img src="{$CONFIGURATION.ROOTPATH}_layout/images/phpmediadb.jpg" alt="phpMediaDB" />
 </div>



From nobody at sheep.berlios.de  Tue Mar  8 22:37:23 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 8 Mar 2005 22:37:23 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/var - New directory
Message-ID: <200503082137.j28LbNN06310@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/var
In directory sheep:/tmp/cvs-serv22586/var

Log Message:
Directory /cvsroot/phpmediadb/phpmediadb-cvs/var added to the repository




From nobody at sheep.berlios.de  Tue Mar  8 22:37:32 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 8 Mar 2005 22:37:32 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/var/templates_c - New directory
Message-ID: <200503082137.j28LbWN06314@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/var/templates_c
In directory sheep:/tmp/cvs-serv22595/var/templates_c

Log Message:
Directory /cvsroot/phpmediadb/phpmediadb-cvs/var/templates_c added to the repository




From nobody at sheep.berlios.de  Tue Mar  8 22:38:10 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 8 Mar 2005 22:38:10 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_layout/images - New directory
Message-ID: <200503082138.j28LcAN06344@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_layout/images
In directory sheep:/tmp/cvs-serv22627/_layout/images

Log Message:
Directory /cvsroot/phpmediadb/phpmediadb-cvs/_layout/images added to the repository




From nobody at sheep.berlios.de  Thu Mar 10 14:02:33 2005
From: nobody at sheep.berlios.de (bruf)
Date: Thu, 10 Mar 2005 14:02:33 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/help/development erm-model.xml,1.13,1.14
Message-ID: <200503101302.j2AD2XN15559@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/help/development
In directory sheep:/tmp/cvs-serv15249/help/development

Modified Files:
	erm-model.xml 
Log Message:
* Changed the layout and some comments

Index: erm-model.xml
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/help/development/erm-model.xml,v
retrieving revision 1.13
retrieving revision 1.14
diff -u -d -r1.13 -r1.14
--- erm-model.xml	28 Dec 2004 13:49:33 -0000	1.13
+++ erm-model.xml	10 Mar 2005 13:02:31 -0000	1.14
@@ -258,17 +258,17 @@
 </SETTINGS>
 <METADATA>
 <REGIONS>
-<REGION ID="1690" RegionName="Binary Data Information" XPos="1500" YPos="340" Width="608" Height="258" RegionColor="0" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="53" />
-<REGION ID="1672" RegionName="Person Information" XPos="680" YPos="600" Width="927" Height="315" RegionColor="4" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="46" />
-<REGION ID="1671" RegionName="General Item Information" XPos="682" YPos="14" Width="800" Height="580" RegionColor="2" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="45" />
-<REGION ID="1670" RegionName="Item Specific Information" XPos="293" YPos="12" Width="374" Height="824" RegionColor="0" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="44" />
-<REGION ID="1667" RegionName="Track Information" XPos="11" YPos="183" Width="270" Height="653" RegionColor="3" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="43" />
-<REGION ID="1668" RegionName="Language Information" XPos="10" YPos="11" Width="269" Height="156" RegionColor="4" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="43" />
-<REGION ID="1686" RegionName="Media Information" XPos="1500" YPos="20" Width="680" Height="300" RegionColor="1" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="51" />
-<REGION ID="1744" RegionName="File Information" XPos="13" YPos="927" Width="1452" Height="144" RegionColor="5" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="54" />
+<REGION ID="1690" RegionName="Binary Data Information" XPos="1489" YPos="512" Width="440" Height="200" RegionColor="0" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="53" />
+<REGION ID="1672" RegionName="Person Information" XPos="682" YPos="721" Width="1020" Height="460" RegionColor="4" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="46" />
+<REGION ID="1671" RegionName="General Item Information" XPos="682" YPos="15" Width="800" Height="700" RegionColor="2" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="45" />
+<REGION ID="1670" RegionName="Item Specific Information" XPos="15" YPos="14" Width="660" Height="580" RegionColor="0" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="44" />
+<REGION ID="1686" RegionName="Media Information" XPos="1489" YPos="16" Width="460" Height="480" RegionColor="1" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="51" />
+<REGION ID="1744" RegionName="File Information" XPos="13" YPos="1054" Width="660" Height="120" RegionColor="5" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="54" />
+<REGION ID="1808" RegionName="Track Information" XPos="14" YPos="604" Width="340" Height="440" RegionColor="2" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="56" />
+<REGION ID="1809" RegionName="Language Information" XPos="356" YPos="603" Width="320" Height="440" RegionColor="3" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="57" />
 </REGIONS>
 <TABLES>
-<TABLE ID="1491" Tablename="Languages" PrevTableName="Table_01" XPos="42" YPos="51" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="3" >
+<TABLE ID="1491" Tablename="Languages" PrevTableName="Table_01" XPos="416" YPos="823" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="3" >
 <COLUMNS>
 <COLUMN ID="1493" ColName="LanguageID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -302,7 +302,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1497" Tablename="TrackSubtitles" PrevTableName="Table_02" XPos="34" YPos="252" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="3" >
+<TABLE ID="1497" Tablename="TrackSubtitles" PrevTableName="Table_02" XPos="34" YPos="904" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="3" >
 <COLUMNS>
 <COLUMN ID="1499" ColName="LanguageSubtitle" PrevColName="SubtitleID" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -333,7 +333,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1502" Tablename="TrackSounds" PrevTableName="Table_03" XPos="37" YPos="666" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="4" >
+<TABLE ID="1502" Tablename="TrackSounds" PrevTableName="Table_03" XPos="34" YPos="784" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="4" >
 <COLUMNS>
 <COLUMN ID="1504" ColName="TrackSoundID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -364,7 +364,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1506" Tablename="PrintDatas" PrevTableName="Table_04" XPos="356" YPos="52" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="5" >
+<TABLE ID="1506" Tablename="PrintDatas" PrevTableName="Table_04" XPos="260" YPos="180" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="5" >
 <COLUMNS>
 <COLUMN ID="1508" ColName="PrintDataID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -418,7 +418,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1512" Tablename="AudioDatas" PrevTableName="Table_05" XPos="351" YPos="268" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="6" >
+<TABLE ID="1512" Tablename="AudioDatas" PrevTableName="Table_05" XPos="35" YPos="54" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="6" >
 <COLUMNS>
 <COLUMN ID="1514" ColName="AudioDataID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -484,7 +484,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1520" Tablename="VideoDatas" PrevTableName="Table_06" XPos="351" YPos="550" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="7" >
+<TABLE ID="1520" Tablename="VideoDatas" PrevTableName="Table_06" XPos="420" YPos="360" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="7" >
 <COLUMNS>
 <COLUMN ID="1522" ColName="VideoDataID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -539,7 +539,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1526" Tablename="Tracks" PrevTableName="Table_07" XPos="54" YPos="457" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="8" >
+<TABLE ID="1526" Tablename="Tracks" PrevTableName="Table_07" XPos="34" YPos="664" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="8" >
 <COLUMNS>
 <COLUMN ID="1528" ColName="TrackID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -575,7 +575,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1553" Tablename="ItemTypes" PrevTableName="Table_08" XPos="1080" YPos="40" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="15" >
+<TABLE ID="1553" Tablename="ItemTypes" PrevTableName="Table_08" XPos="1080" YPos="20" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="15" >
 <COLUMNS>
 <COLUMN ID="1555" ColName="ItemTypeID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -602,7 +602,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1558" Tablename="Categories" PrevTableName="Table_09" XPos="1080" YPos="300" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="16" >
+<TABLE ID="1558" Tablename="Categories" PrevTableName="Table_09" XPos="1142" YPos="340" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="16" >
 <COLUMNS>
 <COLUMN ID="1560" ColName="CategoryID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -627,7 +627,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1563" Tablename="Categories_has_Items" PrevTableName="Table_10" XPos="1060" YPos="380" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="17" >
+<TABLE ID="1563" Tablename="Categories_has_Items" PrevTableName="Table_10" XPos="1142" YPos="480" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="17" >
 <COLUMNS>
 <COLUMN ID="1591" ColName="ItemID" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -659,7 +659,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1565" Tablename="Items" PrevTableName="Table_11" XPos="740" YPos="60" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="18" >
+<TABLE ID="1565" Tablename="Items" PrevTableName="Table_11" XPos="742" YPos="73" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="18" >
 <COLUMNS>
 <COLUMN ID="1567" ColName="ItemID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -770,7 +770,7 @@
 <INDEXCOLUMN idColumn="1585" LengthParam="0" />
 </INDEXCOLUMNS>
 </INDEX>
-<INDEX ID="1779" IndexName="Items_FKIndex6" IndexKind="1" FKRefDef_Obj_id="1770">
+<INDEX ID="1779" IndexName="Items_FKIndex2" IndexKind="1" FKRefDef_Obj_id="1770">
 <INDEXCOLUMNS>
 <INDEXCOLUMN idColumn="1778" LengthParam="0" />
 </INDEXCOLUMNS>
@@ -797,7 +797,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1593" Tablename="Publishers" PrevTableName="Table_12" XPos="760" YPos="640" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="25" >
+<TABLE ID="1593" Tablename="Publishers" PrevTableName="Table_12" XPos="704" YPos="779" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="25" >
 <COLUMNS>
 <COLUMN ID="1595" ColName="PublisherID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -833,7 +833,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1598" Tablename="PersonDirectors" PrevTableName="Table_13" XPos="960" YPos="640" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="26" >
+<TABLE ID="1598" Tablename="PersonDirectors" PrevTableName="Table_13" XPos="884" YPos="779" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="26" >
 <COLUMNS>
 <COLUMN ID="1600" ColName="PersonDirectorID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -876,7 +876,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1603" Tablename="PersonActors" PrevTableName="Table_14" XPos="1180" YPos="640" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="27" >
+<TABLE ID="1603" Tablename="PersonActors" PrevTableName="Table_14" XPos="1104" YPos="779" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="27" >
 <COLUMNS>
 <COLUMN ID="1605" ColName="PersonActorID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -919,7 +919,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1607" Tablename="PersonAuthors" PrevTableName="Table_15" XPos="1380" YPos="640" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="28" >
+<TABLE ID="1607" Tablename="PersonAuthors" PrevTableName="Table_15" XPos="1304" YPos="779" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="28" >
 <COLUMNS>
 <COLUMN ID="1609" ColName="PersonAuthorID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -962,7 +962,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1611" Tablename="Persons" PrevTableName="Table_16" XPos="1160" YPos="820" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="29" >
+<TABLE ID="1611" Tablename="Persons" PrevTableName="Table_16" XPos="1104" YPos="1019" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="29" >
 <COLUMNS>
 <COLUMN ID="1613" ColName="PersonID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -994,7 +994,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1638" Tablename="MediaFormats" PrevTableName="Table_17" XPos="1540" YPos="60" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="37" >
+<TABLE ID="1638" Tablename="MediaFormats" PrevTableName="Table_17" XPos="1541" YPos="184" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="37" >
 <COLUMNS>
 <COLUMN ID="1640" ColName="MediaFormatID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -1033,7 +1033,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1643" Tablename="MediaAgeRestrictions" PrevTableName="Table_18" XPos="1760" YPos="200" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="38" >
+<TABLE ID="1643" Tablename="MediaAgeRestrictions" PrevTableName="Table_18" XPos="1541" YPos="302" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="38" >
 <COLUMNS>
 <COLUMN ID="1645" ColName="MediaAgeRestrictionID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -1058,7 +1058,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1648" Tablename="MediaStatus" PrevTableName="Table_19" XPos="1540" YPos="180" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="39" >
+<TABLE ID="1648" Tablename="MediaStatus" PrevTableName="Table_19" XPos="1542" YPos="373" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="39" >
 <COLUMNS>
 <COLUMN ID="1650" ColName="MediaStatusID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -1093,7 +1093,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1655" Tablename="MediaCodecs" PrevTableName="Table_20" XPos="1760" YPos="60" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="40" >
+<TABLE ID="1655" Tablename="MediaCodecs" PrevTableName="Table_20" XPos="1541" YPos="36" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="40" >
 <COLUMNS>
 <COLUMN ID="1657" ColName="MediaCodecID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -1138,7 +1138,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1661" Tablename="BinaryDatas" PrevTableName="Table_21" XPos="1580" YPos="380" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="41" >
+<TABLE ID="1661" Tablename="BinaryDatas" PrevTableName="Table_21" XPos="1549" YPos="552" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="41" >
 <COLUMNS>
 <COLUMN ID="1663" ColName="ItemPicturesID" PrevColName="BinaryDataID" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -1171,35 +1171,35 @@
 </TABLE>
 </TABLES>
 <RELATIONS>
-<RELATION ID="1533" RelationName="Rel_01" Kind="2" SrcTable="1491" DestTable="1506" FKFields="LanguageID=LanguageID\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1535" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="9" />
-<RELATION ID="1536" RelationName="Rel_02" Kind="2" SrcTable="1491" DestTable="1512" FKFields="LanguageID=LanguageID\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1538" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="10" />
-<RELATION ID="1539" RelationName="Rel_03" Kind="2" SrcTable="1491" DestTable="1520" FKFields="LanguageID=LanguageID\n" FKFieldsComments="\n" relDirection="3" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1541" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="11" />
-<RELATION ID="1542" RelationName="Rel_04" Kind="2" SrcTable="1526" DestTable="1512" FKFields="TrackID=TrackID\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1544" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="12" />
-<RELATION ID="1545" RelationName="Rel_05" Kind="2" SrcTable="1491" DestTable="1497" FKFields="LanguageID=LanguageID\n" FKFieldsComments="\n" relDirection="3" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1547" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="13" />
-<RELATION ID="1550" RelationName="Rel_07" Kind="2" SrcTable="1491" DestTable="1502" FKFields="LanguageID=LanguageID\n" FKFieldsComments="\n" relDirection="3" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1552" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="14" />
+<RELATION ID="1533" RelationName="Rel_01" Kind="2" SrcTable="1491" DestTable="1506" FKFields="LanguageID=LanguageID\n" FKFieldsComments="\n" relDirection="1" MidOffset="8" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1535" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="9" />
+<RELATION ID="1536" RelationName="Rel_02" Kind="2" SrcTable="1491" DestTable="1512" FKFields="LanguageID=LanguageID\n" FKFieldsComments="\n" relDirection="1" MidOffset="88" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1538" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="10" />
+<RELATION ID="1539" RelationName="Rel_03" Kind="2" SrcTable="1491" DestTable="1520" FKFields="LanguageID=LanguageID\n" FKFieldsComments="\n" relDirection="1" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1541" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="11" />
+<RELATION ID="1542" RelationName="Rel_04" Kind="2" SrcTable="1526" DestTable="1512" FKFields="TrackID=TrackID\n" FKFieldsComments="\n" relDirection="1" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1544" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="12" />
+<RELATION ID="1545" RelationName="Rel_05" Kind="2" SrcTable="1491" DestTable="1497" FKFields="LanguageID=LanguageID\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1547" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="13" />
+<RELATION ID="1550" RelationName="Rel_07" Kind="2" SrcTable="1491" DestTable="1502" FKFields="LanguageID=LanguageID\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1552" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="14" />
 <RELATION ID="1575" RelationName="Rel_08" Kind="5" SrcTable="1565" DestTable="1520" FKFields="ItemID=ItemID\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1577" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="19" />
-<RELATION ID="1578" RelationName="Rel_09" Kind="5" SrcTable="1565" DestTable="1512" FKFields="ItemID=ItemID\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1580" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="20" />
+<RELATION ID="1578" RelationName="Rel_09" Kind="5" SrcTable="1565" DestTable="1512" FKFields="ItemID=ItemID\n" FKFieldsComments="\n" relDirection="4" MidOffset="108" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1580" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="20" />
 <RELATION ID="1581" RelationName="Rel_10" Kind="5" SrcTable="1565" DestTable="1506" FKFields="ItemID=ItemID\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1583" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="21" />
-<RELATION ID="1584" RelationName="Rel_11" Kind="2" SrcTable="1553" DestTable="1565" FKFields="ItemTypeID=ItemTypeID\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1586" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="22" />
-<RELATION ID="1587" RelationName="Rel_12" Kind="2" SrcTable="1558" DestTable="1563" FKFields="CategoryID=CategoryID\n" FKFieldsComments="\n" relDirection="3" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1589" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="23" />
-<RELATION ID="1590" RelationName="Rel_13" Kind="2" SrcTable="1565" DestTable="1563" FKFields="ItemID=ItemID\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1592" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="24" />
-<RELATION ID="1617" RelationName="Rel_14" Kind="2" SrcTable="1611" DestTable="1607" FKFields="PersonID=PersonID\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1619" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="30" />
-<RELATION ID="1620" RelationName="Rel_15" Kind="2" SrcTable="1611" DestTable="1603" FKFields="PersonID=PersonID\n" FKFieldsComments="\n" relDirection="1" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1622" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="31" />
-<RELATION ID="1623" RelationName="Rel_16" Kind="2" SrcTable="1611" DestTable="1598" FKFields="PersonID=PersonID\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1625" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="32" />
-<RELATION ID="1626" RelationName="Rel_17" Kind="2" SrcTable="1565" DestTable="1593" FKFields="ItemID=ItemID\n" FKFieldsComments="\n" relDirection="3" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1628" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="33" />
-<RELATION ID="1629" RelationName="Rel_18" Kind="2" SrcTable="1565" DestTable="1598" FKFields="ItemID=ItemID\n" FKFieldsComments="\n" relDirection="3" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1631" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="34" />
-<RELATION ID="1632" RelationName="Rel_19" Kind="2" SrcTable="1565" DestTable="1603" FKFields="ItemID=ItemID\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1634" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="35" />
-<RELATION ID="1635" RelationName="Rel_20" Kind="2" SrcTable="1565" DestTable="1607" FKFields="ItemID=ItemID\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1637" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="36" />
-<RELATION ID="1770" RelationName="Rel_28" Kind="2" SrcTable="1661" DestTable="1565" FKFields="ItemPicturesID=ItemPicturesID\n" FKFieldsComments="\n" relDirection="4" MidOffset="98" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1779" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="56" />
-<RELATION ID="1789" RelationName="Rel_24" Kind="2" SrcTable="1638" DestTable="1565" FKFields="MediaFormatID=MediaFormatID\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1791" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="52" />
-<RELATION ID="1792" RelationName="Rel_25" Kind="2" SrcTable="1655" DestTable="1565" FKFields="MediaCodecID=MediaCodecID\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1794" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="53" />
-<RELATION ID="1795" RelationName="Rel_26" Kind="2" SrcTable="1643" DestTable="1565" FKFields="MediaAgeRestrictionID=MediaAgeRestrictionID\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1797" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="54" />
-<RELATION ID="1798" RelationName="Rel_27" Kind="2" SrcTable="1648" DestTable="1565" FKFields="MediaStatusID=MediaStatusID\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1800" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="55" />
-<RELATION ID="1801" RelationName="Rel_28" Kind="2" SrcTable="1553" DestTable="1638" FKFields="ItemTypeID=ItemTypeID\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1803" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="56" />
-<RELATION ID="1804" RelationName="Rel_29" Kind="2" SrcTable="1553" DestTable="1655" FKFields="ItemTypeID=ItemTypeID\n" FKFieldsComments="\n" relDirection="2" MidOffset="-42" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="3" CaptionOffsetY="1" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1806" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="57" />
+<RELATION ID="1584" RelationName="Rel_11" Kind="2" SrcTable="1553" DestTable="1565" FKFields="ItemTypeID=ItemTypeID\n" FKFieldsComments="\n" relDirection="4" MidOffset="-5" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1586" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="22" />
+<RELATION ID="1587" RelationName="Rel_12" Kind="2" SrcTable="1558" DestTable="1563" FKFields="CategoryID=CategoryID\n" FKFieldsComments="\n" relDirection="3" MidOffset="9" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1589" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="23" />
+<RELATION ID="1590" RelationName="Rel_13" Kind="2" SrcTable="1565" DestTable="1563" FKFields="ItemID=ItemID\n" FKFieldsComments="\n" relDirection="2" MidOffset="11" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1592" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="24" />
+<RELATION ID="1617" RelationName="Rel_14" Kind="2" SrcTable="1611" DestTable="1607" FKFields="PersonID=PersonID\n" FKFieldsComments="\n" relDirection="2" MidOffset="5" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1619" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="30" />
+<RELATION ID="1620" RelationName="Rel_15" Kind="2" SrcTable="1611" DestTable="1603" FKFields="PersonID=PersonID\n" FKFieldsComments="\n" relDirection="1" MidOffset="8" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1622" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="31" />
+<RELATION ID="1623" RelationName="Rel_16" Kind="2" SrcTable="1611" DestTable="1598" FKFields="PersonID=PersonID\n" FKFieldsComments="\n" relDirection="4" MidOffset="3" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1625" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="32" />
+<RELATION ID="1626" RelationName="Rel_17" Kind="2" SrcTable="1565" DestTable="1593" FKFields="ItemID=ItemID\n" FKFieldsComments="\n" relDirection="3" MidOffset="8" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1628" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="33" />
+<RELATION ID="1629" RelationName="Rel_18" Kind="2" SrcTable="1565" DestTable="1598" FKFields="ItemID=ItemID\n" FKFieldsComments="\n" relDirection="3" MidOffset="34" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1631" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="34" />
+<RELATION ID="1632" RelationName="Rel_19" Kind="2" SrcTable="1565" DestTable="1603" FKFields="ItemID=ItemID\n" FKFieldsComments="\n" relDirection="3" MidOffset="-5" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1634" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="35" />
+<RELATION ID="1635" RelationName="Rel_20" Kind="2" SrcTable="1565" DestTable="1607" FKFields="ItemID=ItemID\n" FKFieldsComments="\n" relDirection="2" MidOffset="138" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1637" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="36" />
+<RELATION ID="1770" RelationName="Rel_28" Kind="2" SrcTable="1661" DestTable="1565" FKFields="ItemPicturesID=ItemPicturesID\n" FKFieldsComments="\n" relDirection="4" MidOffset="126" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1779" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="56" />
+<RELATION ID="1789" RelationName="Rel_24" Kind="2" SrcTable="1638" DestTable="1565" FKFields="MediaFormatID=MediaFormatID\n" FKFieldsComments="\n" relDirection="4" MidOffset="104" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1791" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="52" />
+<RELATION ID="1792" RelationName="Rel_25" Kind="2" SrcTable="1655" DestTable="1565" FKFields="MediaCodecID=MediaCodecID\n" FKFieldsComments="\n" relDirection="4" MidOffset="-97" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1794" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="53" />
+<RELATION ID="1795" RelationName="Rel_26" Kind="2" SrcTable="1643" DestTable="1565" FKFields="MediaAgeRestrictionID=MediaAgeRestrictionID\n" FKFieldsComments="\n" relDirection="4" MidOffset="109" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1797" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="54" />
+<RELATION ID="1798" RelationName="Rel_27" Kind="2" SrcTable="1648" DestTable="1565" FKFields="MediaStatusID=MediaStatusID\n" FKFieldsComments="\n" relDirection="4" MidOffset="81" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1800" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="55" />
+<RELATION ID="1801" RelationName="Rel_28" Kind="2" SrcTable="1553" DestTable="1638" FKFields="ItemTypeID=ItemTypeID\n" FKFieldsComments="\n" relDirection="2" MidOffset="23" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1803" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="56" />
+<RELATION ID="1804" RelationName="Rel_29" Kind="2" SrcTable="1553" DestTable="1655" FKFields="ItemTypeID=ItemTypeID\n" FKFieldsComments="\n" relDirection="2" MidOffset="51" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="3" CaptionOffsetY="1" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1806" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="57" />
 </RELATIONS>
 <NOTES>
-<NOTE ID="1745" NoteName="Note_01" XPos="55" YPos="983" NoteText="phpMediaDB\n$Id$\n" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="55" />
+<NOTE ID="1745" NoteName="Note_01" XPos="40" YPos="1100" NoteText="phpMediaDB\n$Id$\n" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="55" />
 </NOTES>
 <IMAGES>
 </IMAGES>



From nobody at sheep.berlios.de  Fri Mar 11 13:13:21 2005
From: nobody at sheep.berlios.de (bruf)
Date: Fri, 11 Mar 2005 13:13:21 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_agerestrictions.php,1.2,1.3
Message-ID: <200503111213.j2BCDLN25818@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv27342/_source/tier.data

Modified Files:
	class.phpmediadb_data_agerestrictions.php 
Log Message:
* Added method getAgeRestriction and getallAgeRestriction

Index: class.phpmediadb_data_agerestrictions.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_agerestrictions.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- class.phpmediadb_data_agerestrictions.php	2 Mar 2005 15:26:41 -0000	1.2
+++ class.phpmediadb_data_agerestrictions.php	11 Mar 2005 12:13:19 -0000	1.3
@@ -51,6 +51,48 @@
 	{
 		/* nothing to do yet */
 	}
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns a specified record from the table MediaAgeRestrictions
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @return String
+	 */
+	public function getAgeRestriction( $MediaAgeRestrictionID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'SELECT *
+		FROM MediaAgeRestrictions,
+		WHERE MediaAgeRestrictions.MediaAgeRestrictionID = :marid' );
+		$stmt->setString( ':marid', $MediaAgeRestrictionID );
+		$stmt->executeQuery();
+		
+		return $stmt;
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns all records from the table MediaAgeRestrictions
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @return String
+	 */
+	public function getallAgeRestrictions()
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'SELECT *
+		FROM MediaAgeRestrictions,
+		WHERE MediaAgeRestrictions.MediaRestrictionID = :marid' );
+		$stmt->setString( ':marid', '%' );
+		$stmt->executeQuery();
+		
+		return $stmt;
+	}
+
+//-----------------------------------------------------------------------------
 }
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Fri Mar 11 13:13:49 2005
From: nobody at sheep.berlios.de (bruf)
Date: Fri, 11 Mar 2005 13:13:49 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_codecs.php,1.2,1.3
Message-ID: <200503111213.j2BCDnN25828@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv27405/_source/tier.data

Modified Files:
	class.phpmediadb_data_codecs.php 
Log Message:
* Added method getCodec and getallCodecs

Index: class.phpmediadb_data_codecs.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_codecs.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- class.phpmediadb_data_codecs.php	2 Mar 2005 15:27:25 -0000	1.2
+++ class.phpmediadb_data_codecs.php	11 Mar 2005 12:13:47 -0000	1.3
@@ -51,6 +51,48 @@
 	{
 		/* nothing to do yet */
 	}
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns a specified record from the table MediaCodecs
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @return String
+	 */
+	public function getCodec( $MediaCodecID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'SELECT *
+		FROM MediaCodecs,
+		WHERE MediaCodecs.MediaCodecID = :mcid' );
+		$stmt->setString( ':mcid', $MediaCodecID );
+		$stmt->executeQuery();
+		
+		return $stmt;
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns all records from the table MediaCodecs
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @return String
+	 */
+	public function getallCodecs()
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'SELECT *
+		FROM MediaCodecs,
+		WHERE MediaCodecs.MediaCodecID = :mcid' );
+		$stmt->setString( ':mcid', '%' );
+		$stmt->executeQuery();
+		
+		return $stmt;
+	}
+
+//-----------------------------------------------------------------------------
 }
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Fri Mar 11 13:14:11 2005
From: nobody at sheep.berlios.de (bruf)
Date: Fri, 11 Mar 2005 13:14:11 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_formats.php,1.3,1.4
Message-ID: <200503111214.j2BCEBN25843@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv27435/_source/tier.data

Modified Files:
	class.phpmediadb_data_formats.php 
Log Message:
* Added method getFormat and getallFormats

Index: class.phpmediadb_data_formats.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_formats.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- class.phpmediadb_data_formats.php	2 Mar 2005 15:29:45 -0000	1.3
+++ class.phpmediadb_data_formats.php	11 Mar 2005 12:14:09 -0000	1.4
@@ -51,6 +51,48 @@
 	{
 		/* nothing to do yet */
 	}
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns a specified record from the table MediaFormats
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @return String
+	 */
+	public function getFormat( $MediaFormatID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'SELECT *
+		FROM MediaFormats,
+		WHERE MediaFormats.MediaFormatID = :mfid' );
+		$stmt->setString( ':mfid', $MediaFormatID );
+		$stmt->executeQuery();
+		
+		return $stmt;
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns all records from the table MediaStatus
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @return String
+	 */
+	public function getallStatus()
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'SELECT *
+		FROM MediaFormats,
+		WHERE MediaFormats.MediaFormatID = :mfid' );
+		$stmt->setString( ':mfid', '%' );
+		$stmt->executeQuery();
+		
+		return $stmt;
+	}
+
+//-----------------------------------------------------------------------------
 }
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Fri Mar 11 13:14:38 2005
From: nobody at sheep.berlios.de (bruf)
Date: Fri, 11 Mar 2005 13:14:38 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_status.php,1.2,1.3
Message-ID: <200503111214.j2BCEcN25859@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv27475/_source/tier.data

Modified Files:
	class.phpmediadb_data_status.php 
Log Message:
* Added method getStatus and getallStatus

Index: class.phpmediadb_data_status.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_status.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- class.phpmediadb_data_status.php	2 Mar 2005 15:29:19 -0000	1.2
+++ class.phpmediadb_data_status.php	11 Mar 2005 12:14:35 -0000	1.3
@@ -51,6 +51,48 @@
 	{
 		/* nothing to do yet */
 	}
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns a specified record from the table MediaStatus
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @return String
+	 */
+	public function getStatus( $MediaStatusID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'SELECT *
+		FROM MediaStatus,
+		WHERE MediaStatus.MediaStatusID = :msid' );
+		$stmt->setString( ':msid', $MediaStatusID );
+		$stmt->executeQuery();
+		
+		return $stmt;
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns all records from the table MediaStatus
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @return String
+	 */
+	public function getallStatus()
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'SELECT *
+		FROM MediaStatus,
+		WHERE MediaStatus.MediaStatusID = :msid' );
+		$stmt->setString( ':msid', '%' );
+		$stmt->executeQuery();
+		
+		return $stmt;
+	}
+
+//-----------------------------------------------------------------------------
 }
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Fri Mar 11 13:16:04 2005
From: nobody at sheep.berlios.de (bruf)
Date: Fri, 11 Mar 2005 13:16:04 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_audios.php,1.2,1.3
Message-ID: <200503111216.j2BCG4N25946@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv27543/_source/tier.data

Modified Files:
	class.phpmediadb_data_audios.php 
Log Message:
* Added method getAudio, getallAudios, createAudio, modifyAudio and deleteAudio

Index: class.phpmediadb_data_audios.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_audios.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- class.phpmediadb_data_audios.php	2 Mar 2005 15:26:58 -0000	1.2
+++ class.phpmediadb_data_audios.php	11 Mar 2005 12:16:01 -0000	1.3
@@ -51,6 +51,216 @@
 	{
 		/* nothing to do yet */
 	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns a specified record from the table AudioDatas
+	 * and all required data from the other tables
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @return String
+	 */
+	public function getAudio( $ID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
+		FROM AudioDatas a,
+		Languages b,
+		Items c,
+		ItemTypes d,
+		MediaCodecs e,
+		MediaFormats f,
+		MediaAgeRestrictions g,
+		MediaStatus h,
+		BinaryDatas i
+		WHERE a.AudioDataID = :id 
+		AND a.LanguageID = b.LanguageID
+		AND a.ItemID = c.ItemID
+		AND c.ItemTypeID = d.ItemTypeID
+		AND c.MediaCodecID = e.MediaCodecID
+		AND c.MediaFormatID = f.MediaFormatID
+		AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
+		AND c.MediaStatusID = h.MediaStatusID
+		AND c.ItemPicturesID = i.ItemPicturesID' );
+		$stmt->setString( ':id', $ID );
+		$stmt->executeQuery();
+		
+		return $stmt;
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns all records from the table AudioDatas
+	 * and all required data from the other tables
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @return String
+	 */
+	public function getallAudios()
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
+		FROM AudioDatas a,
+		Languages b,
+		Items c,
+		ItemTypes d,
+		MediaCodecs e,
+		MediaFormats f,
+		MediaAgeRestrictions g,
+		MediaStatus h,
+		BinaryDatas i
+		WHERE a.AudioDataID = :id 
+		AND a.LanguageID = b.LanguageID
+		AND a.ItemID = c.ItemID
+		AND c.ItemTypeID = d.ItemTypeID
+		AND c.MediaCodecID = e.MediaCodecID
+		AND c.MediaFormatID = f.MediaFormatID
+		AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
+		AND c.MediaStatusID = h.MediaStatusID
+		AND c.ItemPicturesID = i.ItemPicturesID' );
+		$stmt->setString( ':id', '%' );
+		$stmt->executeQuery();
+		
+		return $stmt;
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function delete a specified record from the table AudioDatas
+	 * and all depending data from the other tables
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 */
+	public function deleteAudio( $ID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'DELETE AudioDatas, Items, BinaryDatas, Categories_has_Items
+		FROM AudioDatas, Items, BinaryDatas, Categories_has_Items
+		WHERE AudioDatas.AudioDataID = :id
+		AND AudioDatas.ItemID = Items.ItemID
+		AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID
+		AND Items.ItemID = Categories_has_Items.ItemID' );
+		$stmt->setString( ':id', $ID );
+		$stmt->executeUpdate();
+	}
+
+//-----------------------------------------------------------------------------
+/**
+	 * This function create a new record into the table AudioDatas
+	 * and all required data into the other tables
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @param String
+	 * @param String
+	 * @param String
+	 * @param Integer
+	 * @param String
+	 * @param Integer
+	 * @param Integer
+	 * @param Blob
+	 */
+	public function createAudio( $AudioDataMediaCount, $AudioDataDiscID, $ItemTitle, $ItemOriginalTitle,
+	$ItemRelease, $ItemMediaName, $ItemCreationDate, $ItemModificationDate, $ItemComment )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'INSERT INTO AudioDatas ( AudioDataMediaCount, AudioDataDiscID ) VALUES( :admc, :addi )' );
+		$stmt->setString( ':admc', $AudioDataMediaCount );
+		$stmt->setString( ':addi', $AudioDataDiscID );
+		$stmt->executeUpdate();
+		
+		$stmt = $conn->preparedStatement( 'INSERT INTO Items
+		( ItemTitle, ItemOriginalTitle, ItemRelease, ItemMediaName, ItemCreationDate, ItemModificationDate, ItemComment )
+		VALUES( :it, :iot, :ir, :imn, :icd, :imd, :ic )' );
+		$stmt->setString( ':it', $ItemTitle );
+		$stmt->setString( ':iot', $ItemOriginalTitle );
+		$stmt->setString( ':ir', $ItemRelease );
+		$stmt->setString( ':imn', $ItemMediaName );
+		$stmt->setString( ':icd', $ItemCreationDate );
+		$stmt->setString( ':imd', $ItemModificationDate );
+		$stmt->setString( ':ic' , $ItemComment );
+		$stmt->executeUpdate(); 
+		
+	}
+
+//-----------------------------------------------------------------------------
+/**
+	 * This function modify a specified record from the table AudioDatas
+	 * and all required data from other tables
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @param String
+	 * @param String
+	 * @param String
+	 * @param Integer
+	 * @param String
+	 * @param Integer
+	 * @param Blob
+	 * @param Integer
+	 */
+	public function modifyAudio( $AudioDataID, $AudioDataMediaCount, $AudioDataDiscID, $ItemTitle, $ItemOriginalTitle,
+	$ItemRelease, $ItemMediaName, $ItemModificationDate, $ItemComment, $MediaCodecID, $MediaFormatID,
+	$MediaAgeRestrictionID, $MediaStatusID, $ItemPicturesID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'UPDATE AudioDatas,
+		Languages,
+		Items,
+		ItemTypes,
+		MediaCodecs,
+		MediaFormats,
+		MediaAgeRestrictions,
+		MediaStatus,
+		BinaryDatas
+		SET AudioDatas.AudioDataMediaCount = :admc,
+		AudioDatas.AudioDataDiscID = :addid,
+		Items.ItemTitle = :it,
+		Items.ItemOriginalTitle = :iot,
+		Items.ItemRelease = :ir,
+		Items.ItemMediaName = :imn,
+		Items.ItemModificationDate = :imd,
+		Items.ItemComment = :ic,
+		Items.MediaCodecID = :mcid,
+		Items.MediaFormatID = :mfid,
+		Items.MediaAgeRestrictionID = :marid,
+		Items.MediaStatusID = :msid,
+		Items.ItemPicturesID = :ipid
+		WHERE AudioDatas.AudioDataID = :adid 
+		AND AudioDatas.LanguageID = Languages.LanguageID
+		AND AudioDatas.ItemID = Items.ItemID
+		AND Items.ItemTypeID = ItemTypes.ItemTypeID
+		AND Items.MediaCodecID = MediaCodecs.MediaCodecID
+		AND Items.MediaFormatID = MediaFormats.MediaFormatID
+		AND Items.MediaAgeRestrictionID = MediaAgeRestrictions.MediaAgeRestrictionID
+		AND Items.MediaStatusID = MediaStatus.MediaStatusID
+		AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID' );
+		$stmt->setString( ':admc', $AudioDataMediaCount );
+		$stmt->setString( ':addid', $AudioDataDiscID );
+		$stmt->setString( ':it', $ItemTitle );
+		$stmt->setString( ':iot', $ItemOriginalTitle );
+		$stmt->setString( ':ir', $ItemRelease );
+		$stmt->setString( ':imn', $ItemMediaName );
+		$stmt->setString( ':imd', $ItemModificatioDate );
+		$stmt->setString( ':ic', $ItemComment );
+		$stmt->setString( ':mcid', $MediaCodecID );
+		$stmt->setString( ':mfid', $MediaFormatID );
+		$stmt->setString( ':marid', $MediaAgeRestrictionID );
+		$stmt->setString( ':msid', $MediaStatusID );
+		$stmt->setString( ':ipid', $ItemPicturesID );
+		$stmt->setString( ':adid', $AudioDataID );
+		$stmt->executeQuery();
+		
+	}
+
+//-----------------------------------------------------------------------------
 }
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Fri Mar 11 13:17:10 2005
From: nobody at sheep.berlios.de (bruf)
Date: Fri, 11 Mar 2005 13:17:10 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_prints.php,1.2,1.3
Message-ID: <200503111217.j2BCHAN25956@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv27576/_source/tier.data

Modified Files:
	class.phpmediadb_data_prints.php 
Log Message:
* Added method getPrint getallPrints, createPrint, modifyPrint and deletePrint

Index: class.phpmediadb_data_prints.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_prints.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- class.phpmediadb_data_prints.php	2 Mar 2005 15:29:09 -0000	1.2
+++ class.phpmediadb_data_prints.php	11 Mar 2005 12:17:04 -0000	1.3
@@ -51,6 +51,215 @@
 	{
 		/* nothing to do yet */
 	}
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns a specified record from the table PrintDatas
+	 * and all required data from the other tables
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @return String
+	 */
+	public function getPrint( $PrintDataID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
+		FROM PrintDatas a,
+		Languages b,
+		Items c,
+		ItemTypes d,
+		MediaCodecs e,
+		MediaFormats f,
+		MediaAgeRestrictions g,
+		MediaStatus h,
+		BinaryDatas i
+		WHERE a.PrintDataID = :pdid 
+		AND a.LanguageID = b.LanguageID
+		AND a.ItemID = c.ItemID
+		AND c.ItemTypeID = d.ItemTypeID
+		AND c.MediaCodecID = e.MediaCodecID
+		AND c.MediaFormatID = f.MediaFormatID
+		AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
+		AND c.MediaStatusID = h.MediaStatusID
+		AND c.ItemPicturesID = i.ItemPicturesID' );
+		$stmt->setString( ':pdid', $PrintDataID );
+		$stmt->executeQuery();
+		
+		return $stmt;
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns all records from the table PrintDatas
+	 * and all required data from the other tables
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @return String
+	 */
+	public function getallPrints()
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
+		FROM PrintDatas a,
+		Languages b,
+		Items c,
+		ItemTypes d,
+		MediaCodecs e,
+		MediaFormats f,
+		MediaAgeRestrictions g,
+		MediaStatus h,
+		BinaryDatas i
+		WHERE a.PrintDataID = :pdid 
+		AND a.LanguageID = b.LanguageID
+		AND a.ItemID = c.ItemID
+		AND c.ItemTypeID = d.ItemTypeID
+		AND c.MediaCodecID = e.MediaCodecID
+		AND c.MediaFormatID = f.MediaFormatID
+		AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
+		AND c.MediaStatusID = h.MediaStatusID
+		AND c.ItemPicturesID = i.ItemPicturesID' );
+		$stmt->setString( ':pdid', '%' );
+		$stmt->executeQuery();
+		
+		return $stmt;
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function delete a specified record from the table PrintDatas
+	 * and all depending data from the other tables
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 */
+	public function deletePrint( $PrintDataID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'DELETE PrintDatas, Items, BinaryDatas, Categories_has_Items
+		FROM PrintDatas, Items, BinaryDatas, Categories_has_Items
+		WHERE PrintDatas.PrintDataID = :pdid
+		AND PrintDatas.ItemID = Items.ItemID
+		AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID
+		AND Items.ItemID = Categories_has_Items.ItemID' );
+		$stmt->setString( ':pdid', $PrintDataID );
+		$stmt->executeUpdate();
+	}
+
+//-----------------------------------------------------------------------------
+/**
+	 * This function create a new record into the table PrintDatas
+	 * and all required data into the other tables
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @param String
+	 * @param String
+	 * @param String
+	 * @param Integer
+	 * @param String
+	 * @param Integer
+	 * @param Integer
+	 * @param Blob
+	 */
+	public function createPrint( $PrintDataMediaCount, $PrintDataISBN, $ItemTitle, $ItemOriginalTitle,
+	$ItemRelease, $ItemMediaName, $ItemCreationDate, $ItemModificationDate, $ItemComment )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'INSERT INTO PrintDatas ( PrintDataMediaCount, PrintDataISBN ) VALUES( :pdmc, :pdisbn )' );
+		$stmt->setString( ':pdmc', $PrintDataMediaCount );
+		$stmt->setString( ':pdisbn', $PrintDataISBN );
+		$stmt->executeUpdate();
+		
+		$stmt = $conn->preparedStatement( 'INSERT INTO Items
+		( ItemTitle, ItemOriginalTitle, ItemRelease, ItemMediaName, ItemCreationDate, ItemModificationDate, ItemComment )
+		VALUES( :it, :iot, :ir, :imn, :icd, :imd, :ic )' );
+		$stmt->setString( ':it', $ItemTitle );
+		$stmt->setString( ':iot', $ItemOriginalTitle );
+		$stmt->setString( ':ir', $ItemRelease );
+		$stmt->setString( ':imn', $ItemMediaName );
+		$stmt->setString( ':icd', $ItemCreationDate );
+		$stmt->setString( ':imd', $ItemModificationDate );
+		$stmt->setString( ':ic' , $ItemComment );
+		$stmt->executeUpdate(); 
+		
+	}
+
+//-----------------------------------------------------------------------------
+/**
+	 * This function modify a specified record from the table PrintDatas
+	 * and all required data from other tables
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @param String
+	 * @param String
+	 * @param String
+	 * @param Integer
+	 * @param String
+	 * @param Integer
+	 * @param Blob
+	 * @param Integer
+	 */
+	public function modifyPrint( $PrintDataID, $PrintDataMediaCount, $PrintDataISBN, $ItemTitle, $ItemOriginalTitle,
+	$ItemRelease, $ItemMediaName, $ItemModificationDate, $ItemComment, $MediaCodecID, $MediaFormatID,
+	$MediaAgeRestrictionID, $MediaStatusID, $ItemPicturesID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'UPDATE PrintDatas,
+		Languages,
+		Items,
+		ItemTypes,
+		MediaCodecs,
+		MediaFormats,
+		MediaAgeRestrictions,
+		MediaStatus,
+		BinaryDatas
+		SET PrintDatas.PrintDataMediaCount = :pdmc,
+		PrintDatas.PrintDataISBN = :pdisbn,
+		Items.ItemTitle = :it,
+		Items.ItemOriginalTitle = :iot,
+		Items.ItemRelease = :ir,
+		Items.ItemMediaName = :imn,
+		Items.ItemModificationDate = :imd,
+		Items.ItemComment = :ic
+		Items.MediaCodecID = :mcid,
+		Items.MediaFormatID = :mfid,
+		Items.MediaAgeRestrictionID = :marid,
+		Items.MediaStatusID = :msid,
+		Items.ItemPicturesID = :ipid
+		WHERE PrintDatas.PrintDataID = :pdid 
+		AND PrintDatas.LanguageID = Languages.LanguageID
+		AND PrintDatas.ItemID = Items.ItemID
+		AND Items.ItemTypeID = ItemTypes.ItemTypeID
+		AND Items.MediaCodecID = MediaCodecs.MediaCodecID
+		AND Items.MediaFormatID = MediaFormats.MediaFormatID
+		AND Items.MediaAgeRestrictionID = MediaAgeRestrictions.MediaAgeRestrictionID
+		AND Items.MediaStatusID = MediaStatus.MediaStatusID
+		AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID' );
+		$stmt->setString( ':pdmc', $PrintDataMediaCount );
+		$stmt->setString( ':pdisbn', $PrintDataISBN );
+		$stmt->setString( ':it', $ItemTitle );
+		$stmt->setString( ':iot', $ItemOriginalTitle );
+		$stmt->setString( ':ir', $ItemRelease );
+		$stmt->setString( ':imn', $ItemMediaName );
+		$stmt->setString( ':imd', $ItemModificatioDate );
+		$stmt->setString( ':ic', $ItemComment );
+		$stmt->setString( ':mcid', $MediaCodecID );
+		$stmt->setString( ':mfid', $MediaFormatID );
+		$stmt->setString( ':marid', $MediaAgeRestrictionID );
+		$stmt->setString( ':msid', $MediaStatusID );
+		$stmt->setString( ':ipid', $ItemPicturesID );
+		$stmt->setString( ':pdid', $PrintDataID );
+		$stmt->executeQuery();
+		
+	}
+
+//-----------------------------------------------------------------------------
 }
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Fri Mar 11 13:17:45 2005
From: nobody at sheep.berlios.de (bruf)
Date: Fri, 11 Mar 2005 13:17:45 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_videos.php,1.2,1.3
Message-ID: <200503111217.j2BCHjN25967@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv27664/_source/tier.data

Modified Files:
	class.phpmediadb_data_videos.php 
Log Message:
* Added method getVideo getallVideos, createVideo, modifyVideo and deleteVideo

Index: class.phpmediadb_data_videos.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_videos.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- class.phpmediadb_data_videos.php	2 Mar 2005 15:29:33 -0000	1.2
+++ class.phpmediadb_data_videos.php	11 Mar 2005 12:17:43 -0000	1.3
@@ -51,6 +51,217 @@
 	{
 		/* nothing to do yet */
 	}
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns a specified record from the table VideoDatas
+	 * and all required data from the other tables
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @return String
+	 */
+	public function getVideo( $VideoDataID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
+		FROM VideoDatas a,
+		Languages b,
+		Items c,
+		ItemTypes d,
+		MediaCodecs e,
+		MediaFormats f,
+		MediaAgeRestrictions g,
+		MediaStatus h,
+		BinaryDatas i
+		WHERE a.VideoDataID = :vdid 
+		AND a.LanguageID = b.LanguageID
+		AND a.ItemID = c.ItemID
+		AND c.ItemTypeID = d.ItemTypeID
+		AND c.MediaCodecID = e.MediaCodecID
+		AND c.MediaFormatID = f.MediaFormatID
+		AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
+		AND c.MediaStatusID = h.MediaStatusID
+		AND c.ItemPicturesID = i.ItemPicturesID' );
+		$stmt->setString( ':vdid', $VideoDataID );
+		$stmt->executeQuery();
+		
+		return $stmt;
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns all records from the table VideoDatas
+	 * and all required data from the other tables
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @return String
+	 */
+	public function getallVideos()
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
+		FROM VideoDatas a,
+		Languages b,
+		Items c,
+		ItemTypes d,
+		MediaCodecs e,
+		MediaFormats f,
+		MediaAgeRestrictions g,
+		MediaStatus h,
+		BinaryDatas i
+		WHERE a.VideoDataID = :vdid 
+		AND a.LanguageID = b.LanguageID
+		AND a.ItemID = c.ItemID
+		AND c.ItemTypeID = d.ItemTypeID
+		AND c.MediaCodecID = e.MediaCodecID
+		AND c.MediaFormatID = f.MediaFormatID
+		AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
+		AND c.MediaStatusID = h.MediaStatusID
+		AND c.ItemPicturesID = i.ItemPicturesID' );
+		$stmt->setString( ':vdid', '%' );
+		$stmt->executeQuery();
+		
+		return $stmt;
+		
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function delete a specified record from the table VideoDatas
+	 * and all depending data from the other tables
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 */
+	public function deleteVideo( $VideoDataID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'DELETE VideoDatas, Items, BinaryDatas, Categories_has_Items
+		FROM AudioDatas, Items, BinaryDatas, Categories_has_Items
+		WHERE VideoDatas.VideoDataID = :vdid
+		AND VideoDatas.ItemID = Items.ItemID
+		AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID
+		AND Items.ItemID = Categories_has_Items.ItemID' );
+		$stmt->setString( ':vdid', $VideoDataID );
+		$stmt->executeUpdate();
+		
+	}
+
+//-----------------------------------------------------------------------------
+/**
+	 * This function create a new record into the table VideoDatas
+	 * and all required data into the other tables
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @param String
+	 * @param String
+	 * @param String
+	 * @param Integer
+	 * @param String
+	 * @param Integer
+	 * @param Integer
+	 * @param Blob
+	 */
+	public function createVideo( $VideoDataMediaCount, $AudioDataImdbID, $ItemTitle, $ItemOriginalTitle,
+	$ItemRelease, $ItemMediaName, $ItemCreationDate, $ItemModificationDate, $ItemComment )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'INSERT INTO VideoDatas ( VideoDataMediaCount, VideoDataImdbID ) VALUES( :vdmc, :vdii )' );
+		$stmt->setString( ':vdmc', $VideoDataMediaCount );
+		$stmt->setString( ':vdii', $VideoDataImdbID );
+		$stmt->executeUpdate();
+		
+		$stmt = $conn->preparedStatement( 'INSERT INTO Items
+		( ItemTitle, ItemOriginalTitle, ItemRelease, ItemMediaName, ItemCreationDate, ItemModificationDate, ItemComment )
+		VALUES( :it, :iot, :ir, :imn, :icd, :imd, :ic )' );
+		$stmt->setString( ':it', $ItemTitle );
+		$stmt->setString( ':iot', $ItemOriginalTitle );
+		$stmt->setString( ':ir', $ItemRelease );
+		$stmt->setString( ':imn', $ItemMediaName );
+		$stmt->setString( ':icd', $ItemCreationDate );
+		$stmt->setString( ':imd', $ItemModificationDate );
+		$stmt->setString( ':ic' , $ItemComment );
+		$stmt->executeUpdate(); 
+
+	}
+
+//-----------------------------------------------------------------------------
+/**
+	 * This function modify a specified record from the table VideoDatas
+	 * and all required data from other tables
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @param String
+	 * @param String
+	 * @param String
+	 * @param Integer
+	 * @param String
+	 * @param Integer
+	 * @param Blob
+	 * @param Integer
+	 */
+	public function modifyVideo( $VideoDataID, $VideoDataMediaCount, $VideoDataImdbID, $ItemTitle, $ItemOriginalTitle,
+	$ItemRelease, $ItemMediaName, $ItemModificationDate, $ItemComment, $MediaCodecID, $MediaFormatID,
+	$MediaAgeRestrictionID, $MediaStatusID, $ItemPicturesID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'UPDATE VideoDatas,
+		Languages,
+		Items,
+		ItemTypes,
+		MediaCodecs,
+		MediaFormats,
+		MediaAgeRestrictions,
+		MediaStatus,
+		BinaryDatas
+		SET VideoDatas.VideoDataMediaCount = :vdmc,
+		VideoDatas.VideoDataImdbID = :vdii,
+		Items.ItemTitle = :it,
+		Items.ItemOriginalTitle = :iot,
+		Items.ItemRelease = :ir,
+		Items.ItemMediaName = :imn,
+		Items.ItemModificationDate = :imd,
+		Items.ItemComment = :ic
+		Items.MediaCodecID = :mcid,
+		Items.MediaFormatID = :mfid,
+		Items.MediaAgeRestrictionID = :marid,
+		Items.MediaStatusID = :msid,
+		Items.ItemPicturesID = :ipid
+		WHERE VideoDatas.VideoDataID = :vdid 
+		AND VideoDatas.LanguageID = Languages.LanguageID
+		AND VideoDatas.ItemID = Items.ItemID
+		AND Items.ItemTypeID = ItemTypes.ItemTypeID
+		AND Items.MediaCodecID = MediaCodecs.MediaCodecID
+		AND Items.MediaFormatID = MediaFormats.MediaFormatID
+		AND Items.MediaAgeRestrictionID = MediaAgeRestrictions.MediaAgeRestrictionID
+		AND Items.MediaStatusID = MediaStatus.MediaStatusID
+		AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID' );
+		$stmt->setString( ':vdmc', $VideoDataMediaCount );
+		$stmt->setString( ':vdii', $VideoDataImdbID );
+		$stmt->setString( ':it', $ItemTitle );
+		$stmt->setString( ':iot', $ItemOriginalTitle );
+		$stmt->setString( ':ir', $ItemRelease );
+		$stmt->setString( ':imn', $ItemMediaName );
+		$stmt->setString( ':imd', $ItemModificatioDate );
+		$stmt->setString( ':ic', $ItemComment );
+		$stmt->setString( ':mcid', $MediaCodecID );
+		$stmt->setString( ':mfid', $MediaFormatID );
+		$stmt->setString( ':marid', $MediaAgeRestrictionID );
+		$stmt->setString( ':msid', $MediaStatusID );
+		$stmt->setString( ':ipid', $ItemPicturesID );
+		$stmt->setString( ':vdid', $VideoDataID );
+		$stmt->executeQuery();
+		
+	}
+
+//-----------------------------------------------------------------------------
 }
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Fri Mar 11 13:19:00 2005
From: nobody at sheep.berlios.de (bruf)
Date: Fri, 11 Mar 2005 13:19:00 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_sql.php,1.2,1.3
Message-ID: <200503111219.j2BCJ0N26006@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv27759/_source/tier.data

Modified Files:
	class.phpmediadb_data_sql.php 
Log Message:
* Renamed method dbConnection to getConnection

Index: class.phpmediadb_data_sql.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_sql.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- class.phpmediadb_data_sql.php	2 Mar 2005 15:28:52 -0000	1.2
+++ class.phpmediadb_data_sql.php	11 Mar 2005 12:18:57 -0000	1.3
@@ -61,8 +61,13 @@
 	 * @param String
 	 * @return String
 	*/
-	protected function dbConnection($dns)
+	public function getConnection()
 	{
+		$dsn = array('phptype' => 'mysql',
+             'hostspec' => 'localhost',
+             'username' => 'dbuser',
+             'password' => 'dbpass',
+             'database' => 'testdb');
 		$conn = Creole::getConnection($dsn, Creole::PERSISTENT);
 		return $conn;
 	}



From nobody at sheep.berlios.de  Sat Mar 12 09:41:24 2005
From: nobody at sheep.berlios.de (bruf)
Date: Sat, 12 Mar 2005 09:41:24 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/help/development erm-model.xml,1.14,1.15
Message-ID: <200503120841.j2C8fON31787@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/help/development
In directory sheep:/tmp/cvs-serv3399/help/development

Modified Files:
	erm-model.xml 
Log Message:
* Changed datatype char to varchar(255)

Index: erm-model.xml
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/help/development/erm-model.xml,v
retrieving revision 1.14
retrieving revision 1.15
diff -u -d -r1.14 -r1.15
--- erm-model.xml	10 Mar 2005 13:02:31 -0000	1.14
+++ erm-model.xml	12 Mar 2005 08:41:22 -0000	1.15
@@ -276,12 +276,12 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1495" ColName="LanguageName" PrevColName="" Pos="1" idDatatype="19" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1495" ColName="LanguageName" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1496" ColName="LanguageCode" PrevColName="" Pos="2" idDatatype="19" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1496" ColName="LanguageCode" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
@@ -378,7 +378,7 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1511" ColName="PrintDataISBN" PrevColName="" Pos="2" idDatatype="19" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1511" ColName="PrintDataISBN" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
@@ -432,7 +432,7 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1517" ColName="AudioDataDiscID" PrevColName="" Pos="2" idDatatype="19" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1517" ColName="AudioDataDiscID" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
@@ -547,12 +547,12 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1530" ColName="TrackName" PrevColName="" Pos="1" idDatatype="19" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1530" ColName="TrackName" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1531" ColName="TrackArtist" PrevColName="" Pos="2" idDatatype="19" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1531" ColName="TrackArtist" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
@@ -583,7 +583,7 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1557" ColName="ItemTypeCode" PrevColName="" Pos="1" idDatatype="19" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1557" ColName="ItemTypeCode" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
@@ -602,7 +602,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1558" Tablename="Categories" PrevTableName="Table_09" XPos="1142" YPos="340" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="16" >
+<TABLE ID="1558" Tablename="Categories" PrevTableName="Table_09" XPos="1114" YPos="343" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="16" >
 <COLUMNS>
 <COLUMN ID="1560" ColName="CategoryID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -610,7 +610,7 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1562" ColName="CategoryName" PrevColName="" Pos="1" idDatatype="19" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1562" ColName="CategoryName" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
@@ -697,12 +697,12 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1569" ColName="ItemTitle" PrevColName="" Pos="1" idDatatype="19" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1569" ColName="ItemTitle" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1570" ColName="ItemOriginalTitle" PrevColName="" Pos="2" idDatatype="19" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1570" ColName="ItemOriginalTitle" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
@@ -713,7 +713,7 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1753" ColName="ItemMediaName" PrevColName="" Pos="14" idDatatype="19" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1753" ColName="ItemMediaName" PrevColName="" Pos="14" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
@@ -797,7 +797,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1593" Tablename="Publishers" PrevTableName="Table_12" XPos="704" YPos="779" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="25" >
+<TABLE ID="1593" Tablename="Publishers" PrevTableName="Table_12" XPos="692" YPos="780" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="25" >
 <COLUMNS>
 <COLUMN ID="1595" ColName="PublisherID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -805,7 +805,7 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1597" ColName="PublisherName" PrevColName="" Pos="1" idDatatype="19" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1597" ColName="PublisherName" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
@@ -833,7 +833,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1598" Tablename="PersonDirectors" PrevTableName="Table_13" XPos="884" YPos="779" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="26" >
+<TABLE ID="1598" Tablename="PersonDirectors" PrevTableName="Table_13" XPos="919" YPos="779" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="26" >
 <COLUMNS>
 <COLUMN ID="1600" ColName="PersonDirectorID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -876,7 +876,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1603" Tablename="PersonActors" PrevTableName="Table_14" XPos="1104" YPos="779" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="27" >
+<TABLE ID="1603" Tablename="PersonActors" PrevTableName="Table_14" XPos="1131" YPos="779" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="27" >
 <COLUMNS>
 <COLUMN ID="1605" ColName="PersonActorID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -919,7 +919,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1607" Tablename="PersonAuthors" PrevTableName="Table_15" XPos="1304" YPos="779" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="28" >
+<TABLE ID="1607" Tablename="PersonAuthors" PrevTableName="Table_15" XPos="1350" YPos="779" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="28" >
 <COLUMNS>
 <COLUMN ID="1609" ColName="PersonAuthorID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -962,7 +962,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1611" Tablename="Persons" PrevTableName="Table_16" XPos="1104" YPos="1019" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="29" >
+<TABLE ID="1611" Tablename="Persons" PrevTableName="Table_16" XPos="1120" YPos="1020" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="29" >
 <COLUMNS>
 <COLUMN ID="1613" ColName="PersonID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -970,12 +970,12 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1615" ColName="PersonFirstName" PrevColName="" Pos="1" idDatatype="19" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1615" ColName="PersonFirstName" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1616" ColName="PersonLastName" PrevColName="" Pos="2" idDatatype="19" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1616" ColName="PersonLastName" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
@@ -994,7 +994,7 @@
 </INDEX>
 </INDICES>
 </TABLE>
-<TABLE ID="1638" Tablename="MediaFormats" PrevTableName="Table_17" XPos="1541" YPos="184" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="37" >
+<TABLE ID="1638" Tablename="MediaFormats" PrevTableName="Table_17" XPos="1540" YPos="180" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="37" >
 <COLUMNS>
 <COLUMN ID="1640" ColName="MediaFormatID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
@@ -1008,7 +1008,7 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1642" ColName="MediaFormatName" PrevColName="" Pos="1" idDatatype="19" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1642" ColName="MediaFormatName" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
@@ -1041,7 +1041,7 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1647" ColName="MediaAgeRestriction" PrevColName="" Pos="1" idDatatype="19" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1647" ColName="MediaAgeRestriction" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
@@ -1066,17 +1066,17 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1652" ColName="MediaStatus" PrevColName="" Pos="1" idDatatype="19" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1652" ColName="MediaStatus" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1653" ColName="MediaStatusOwner" PrevColName="" Pos="2" idDatatype="19" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1653" ColName="MediaStatusOwner" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1654" ColName="MediaStatusHolder" PrevColName="" Pos="3" idDatatype="19" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1654" ColName="MediaStatusHolder" PrevColName="" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
@@ -1107,7 +1107,7 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1659" ColName="MediaCodecName" PrevColName="" Pos="1" idDatatype="19" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1659" ColName="MediaCodecName" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
@@ -1146,7 +1146,7 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1749" ColName="BinaryDataMimeType" PrevColName="" Pos="1" idDatatype="19" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1749" ColName="BinaryDataMimeType" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
@@ -1183,9 +1183,9 @@
 <RELATION ID="1584" RelationName="Rel_11" Kind="2" SrcTable="1553" DestTable="1565" FKFields="ItemTypeID=ItemTypeID\n" FKFieldsComments="\n" relDirection="4" MidOffset="-5" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1586" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="22" />
 <RELATION ID="1587" RelationName="Rel_12" Kind="2" SrcTable="1558" DestTable="1563" FKFields="CategoryID=CategoryID\n" FKFieldsComments="\n" relDirection="3" MidOffset="9" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1589" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="23" />
 <RELATION ID="1590" RelationName="Rel_13" Kind="2" SrcTable="1565" DestTable="1563" FKFields="ItemID=ItemID\n" FKFieldsComments="\n" relDirection="2" MidOffset="11" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1592" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="24" />
-<RELATION ID="1617" RelationName="Rel_14" Kind="2" SrcTable="1611" DestTable="1607" FKFields="PersonID=PersonID\n" FKFieldsComments="\n" relDirection="2" MidOffset="5" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1619" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="30" />
+<RELATION ID="1617" RelationName="Rel_14" Kind="2" SrcTable="1611" DestTable="1607" FKFields="PersonID=PersonID\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1619" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="30" />
 <RELATION ID="1620" RelationName="Rel_15" Kind="2" SrcTable="1611" DestTable="1603" FKFields="PersonID=PersonID\n" FKFieldsComments="\n" relDirection="1" MidOffset="8" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1622" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="31" />
-<RELATION ID="1623" RelationName="Rel_16" Kind="2" SrcTable="1611" DestTable="1598" FKFields="PersonID=PersonID\n" FKFieldsComments="\n" relDirection="4" MidOffset="3" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1625" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="32" />
+<RELATION ID="1623" RelationName="Rel_16" Kind="2" SrcTable="1611" DestTable="1598" FKFields="PersonID=PersonID\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1625" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="32" />
 <RELATION ID="1626" RelationName="Rel_17" Kind="2" SrcTable="1565" DestTable="1593" FKFields="ItemID=ItemID\n" FKFieldsComments="\n" relDirection="3" MidOffset="8" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1628" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="33" />
 <RELATION ID="1629" RelationName="Rel_18" Kind="2" SrcTable="1565" DestTable="1598" FKFields="ItemID=ItemID\n" FKFieldsComments="\n" relDirection="3" MidOffset="34" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1631" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="34" />
 <RELATION ID="1632" RelationName="Rel_19" Kind="2" SrcTable="1565" DestTable="1603" FKFields="ItemID=ItemID\n" FKFieldsComments="\n" relDirection="3" MidOffset="-5" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1634" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="35" />



From nobody at sheep.berlios.de  Sun Mar 13 14:24:51 2005
From: nobody at sheep.berlios.de (bruf)
Date: Sun, 13 Mar 2005 14:24:51 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_agerestrictions.php,1.3,1.4
Message-ID: <200503131324.j2DDOpN04671@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv6372/_source/tier.data

Modified Files:
	class.phpmediadb_data_agerestrictions.php 
Log Message:
* Added methods createAgeRestriction, modifyAgeRestriction and deleteAgeRestriction

Index: class.phpmediadb_data_agerestrictions.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_agerestrictions.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- class.phpmediadb_data_agerestrictions.php	11 Mar 2005 12:13:19 -0000	1.3
+++ class.phpmediadb_data_agerestrictions.php	13 Mar 2005 13:24:49 -0000	1.4
@@ -93,6 +93,64 @@
 	}
 
 //-----------------------------------------------------------------------------
+	/**
+	 * This function creates a new record in the table MediaAgeRestrictions
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param String
+	 */
+	public function createAgeRestriction( $MediaAgeRestriction )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'INSERT INTO MediaAgeRestrictions
+		( MediaAgeRestriction ) VALUES( :mar )' );
+		$stmt->setString( ':mar', $MediaAgeRestriction );
+		$stmt->executeUpdate();
+		
+		return $stmt;
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function modifies a specified record from the table MediaAgeRestrictions
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @param String
+	 */
+	public function modifyAgeRestriction( $MediaAgeRestrictionID, $MediaAgeRestriction )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'UPDATE MediaAgeRestrictions
+		SET MediaAgeRestrictions.MediaAgeRestriction = :mar
+		WHERE MediaAgeRestrictions.MediaAgeRestrictionID = :marid' );
+		$stmt->setString( ':mar', $MediaAgeRestriction );
+		$stmt->setString( ':marid', $MediaAgeRestrictionID );
+		$stmt->executeUpdate();
+		
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function deletes a specified record from the table MediaAgeRestrictions
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 */
+	public function deleteAgeRestriction( $MediaAgeRestrictionID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'DELETE FROM MediaAgeRestrictions
+		WHERE MediaAgeRestrictions.MediaAgeRestrictionID = :marid' );
+		$stmt->setString( ':marid', $MediaAgeRestrictionID );
+		$stmt->executeUpdate();
+		
+	}
+
+//-----------------------------------------------------------------------------
 }
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Sun Mar 13 14:25:19 2005
From: nobody at sheep.berlios.de (bruf)
Date: Sun, 13 Mar 2005 14:25:19 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_codecs.php,1.3,1.4
Message-ID: <200503131325.j2DDPJN04683@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv6398/_source/tier.data

Modified Files:
	class.phpmediadb_data_codecs.php 
Log Message:
* Added methods createCodec, modifyCodec and deleteCodec

Index: class.phpmediadb_data_codecs.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_codecs.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- class.phpmediadb_data_codecs.php	11 Mar 2005 12:13:47 -0000	1.3
+++ class.phpmediadb_data_codecs.php	13 Mar 2005 13:25:17 -0000	1.4
@@ -93,6 +93,74 @@
 	}
 
 //-----------------------------------------------------------------------------
+	/**
+	 * This function creates a new record in the table MediaCodecs
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param String
+	 * @param Integer
+	 * @param Integer
+	 */
+	public function createCodec( $MediaCodecName, $MediaCodecBitrate, $ItemTypeID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'INSERT INTO MediaCodecs
+		( MediaCodecName, MediaCodecBitrate, ItemTypeID )
+		VALUES( :mcn, :mcb, :itid )' );
+		$stmt->setString( ':mcn', $MediaCodecName );
+		$stmt->setString( ':mcb', $MediaCodecBitrate );
+		$stmt->setString( ':itid', $ItemTypeID );
+		$stmt->executeUpdate();
+		
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function modifies a specified record from the table MediaCodecs
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @param String
+	 * @param Integer
+	 * @param Integer
+	 */
+	public function createCodec( $MediaCodecID, $MediaCodecName, $MediaCodecBitrate, $ItemTypeID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'UPDATE MediaCodecs
+		SET MediaCodecs.MediaCodecName = :mcn,
+		MediaCodecs.MediaCodecBitrate = :mcb,
+		MediaCodecs.ItemTypeID = :itid
+		WHERE MediaCodecs.MediaCodecID = :mcid' );
+		$stmt->setString( ':mcn', $MediaCodecName );
+		$stmt->setString( ':mcb', $MediaCodecBitrate );
+		$stmt->setString( ':itid', $ItemTypeID );
+		$stmt->setString( ':mcid', $MediaCodecID );
+		$stmt->executeUpdate();
+		
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function deletes a specified record from the table MediaCodecs
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 */
+	public function deleteCodec( $MediaCodecID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'DELETE FROM MediaCodecs
+		WHERE MediaCodecs.MediaCodecID = :mcid' );
+		$stmt->setString( ':mcid', $MediaCodecID );
+		$stmt->executeUpdate();
+		
+	}
+
+//-----------------------------------------------------------------------------
 }
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Sun Mar 13 14:25:41 2005
From: nobody at sheep.berlios.de (bruf)
Date: Sun, 13 Mar 2005 14:25:41 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_formats.php,1.4,1.5
Message-ID: <200503131325.j2DDPfN04693@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv6452/_source/tier.data

Modified Files:
	class.phpmediadb_data_formats.php 
Log Message:
* Added methods createFormat, modifyFormat and deleteFormat

Index: class.phpmediadb_data_formats.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_formats.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- class.phpmediadb_data_formats.php	11 Mar 2005 12:14:09 -0000	1.4
+++ class.phpmediadb_data_formats.php	13 Mar 2005 13:25:38 -0000	1.5
@@ -80,7 +80,7 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return String
 	 */
-	public function getallStatus()
+	public function getallFormats()
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'SELECT *
@@ -90,6 +90,68 @@
 		$stmt->executeQuery();
 		
 		return $stmt;
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function creates a new records in the table MediaStatus
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param String
+	 * @param Integer
+	 */
+	public function createFormat( $MediaFormatName, $ItemTypeID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'INSERT INTO MediaFormats
+		( MediaFormatName, ItemTypeID ) VALUES( :mfn, :itid )' );
+		$stmt->setString( ':mfn', $MediaFormatName );
+		$stmt->setString( ':itid', $ItemTypeID );
+		$stmt->executeUpdate();
+		
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function modifies a specified record from the table MediaStatus
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @param String
+	 * @param Integer
+	 */
+	public function modifyFormat( $MediaFormatID, $MediaFormatName, $ItemTypeID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'UPDATE MediaFormats
+		SET MediaFormats.MediaFormatName = :mfn,
+		MediaFormats.ItemTypeID = :itid
+		WHERE MediaFormats.MediaFormatID = :mfid' );
+		$stmt->setString( ':mfn', $MediaFormatName );
+		$stmt->setString( ':itid', $ItemTypeID );
+		$stmt->setString( ':mfid', $MediaFormatID );
+		$stmt->executeUpdate();
+		
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function deletes a specified record from the table MediaStatus
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 */
+	public function deleteFormat( $MediaFormatID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'DELETE FROM MediaFormats
+		WHERE MediaFormats.MediaFormatID = :mfid' );
+		$stmt->setString( ':mfid', $MediaFormatID );
+		$stmt->executeUpdate();
+		
 	}
 
 //-----------------------------------------------------------------------------



From nobody at sheep.berlios.de  Sun Mar 13 14:26:04 2005
From: nobody at sheep.berlios.de (bruf)
Date: Sun, 13 Mar 2005 14:26:04 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_status.php,1.3,1.4
Message-ID: <200503131326.j2DDQ4N04709@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv6490/_source/tier.data

Modified Files:
	class.phpmediadb_data_status.php 
Log Message:
* Added methods createStatus, modifyStatus and deleteStatus

Index: class.phpmediadb_data_status.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_status.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- class.phpmediadb_data_status.php	11 Mar 2005 12:14:35 -0000	1.3
+++ class.phpmediadb_data_status.php	13 Mar 2005 13:26:02 -0000	1.4
@@ -93,6 +93,74 @@
 	}
 
 //-----------------------------------------------------------------------------
+	/**
+	 * This function creates a new record in the table MediaStatus
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param String
+	 * @param String
+	 * @param String
+	 */
+	public function createStatus( $MediaStatus, $MediaStatusOwner, $MediaStatusHolder )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'INSERT INTO MediaStatus
+		( MediaStatus, MediaStatusOwner, MediaStatusHolder )
+		VALUES( :ms, :mso, :msh )' );
+		$stmt->setString( ':ms', $MediaStatus );
+		$stmt->setString( ':mso', $MediaStatusOwner );
+		$stmt->setString( ':msh', $MediaStatusHolder );
+		$stmt->executeUpdate();
+		
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function modifies a specified record from the table MediaStatus
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @param String
+	 * @param String
+	 * @param String
+	 */
+	public function modifyStatus( $MediaStatusID, $MediaStatus, $MediaStatusOwner, $MediaStatusHolder )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'UPDATE MediaStatus
+		SET MediaStatus.MediaStatus = :ms,
+		MediaStatus.MediaStatusOwner = :mso,
+		MediaStatus.MediaStatusHolder = :msh
+		WHERE MediaStatus.MediaStatusID = :msid' );
+		$stmt->setString( ':ms', $MediaStatus );
+		$stmt->setString( ':mso', $MediaStatusOwner );
+		$stmt->setString( ':msh', $MediaStatusHolder );
+		$stmt->setString( ':msid', $MediaStatusID );
+		$stmt->executeUpdate();
+		
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function deletes a specified record from the table MediaStatus
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 */
+	public function deleteStatus( $MediaStatusID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->preparedStatement( 'DELETE FROM MediaStatus
+		WHERE MediaStatus.MediaStatusID = :msid' );
+		$stmt->setString( ':msid', $MediaStatusID );
+		$stmt->executeUpdate();
+		
+	}
+
+//-----------------------------------------------------------------------------
 }
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Mon Mar 14 19:40:35 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Mon, 14 Mar 2005 19:40:35 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration config.data.php,1.1,1.2
Message-ID: <200503141840.j2EIeZN31120@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration
In directory sheep:/tmp/cvs-serv12270/_source/tier.configuration

Modified Files:
	config.data.php 
Log Message:
* Added sql-connection configuration

Index: config.data.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/config.data.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- config.data.php	9 Feb 2005 16:16:22 -0000	1.1
+++ config.data.php	14 Mar 2005 18:40:32 -0000	1.2
@@ -4,5 +4,19 @@
 
 // $phpMediaDbConfig['DATA']['example-config'] = "abc";
 
+/**
+ * SQL Connection
+ *   phptype:   SQL Datbase Type
+ *   hostspec:  Serveraddress (eg. localhost)
+ *   username:  SQL User
+ *   password:  SQL User Password
+ *   database:  SQL Database
+ */
+$phpMediaDbConfig['DATA']['sql-connection']['phptype']  = 'mysql';
+$phpMediaDbConfig['DATA']['sql-connection']['hostspec'] = 'localhost';
+$phpMediaDbConfig['DATA']['sql-connection']['username'] = 'dbuser';
+$phpMediaDbConfig['DATA']['sql-connection']['password'] = 'dbpass';
+$phpMediaDbConfig['DATA']['sql-connection']['database'] = 'phpmediadb';
+
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Mon Mar 14 19:42:31 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Mon, 14 Mar 2005 19:42:31 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_sql.php,1.3,1.4
Message-ID: <200503141842.j2EIgVN31185@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv12358/_source/tier.data

Modified Files:
	class.phpmediadb_data_sql.php 
Log Message:
* Modificated getConnection -> now using global configuration

Index: class.phpmediadb_data_sql.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_sql.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- class.phpmediadb_data_sql.php	11 Mar 2005 12:18:57 -0000	1.3
+++ class.phpmediadb_data_sql.php	14 Mar 2005 18:42:29 -0000	1.4
@@ -63,11 +63,7 @@
 	*/
 	public function getConnection()
 	{
-		$dsn = array('phptype' => 'mysql',
-             'hostspec' => 'localhost',
-             'username' => 'dbuser',
-             'password' => 'dbpass',
-             'database' => 'testdb');
+		$dsn = $this->DATA->configuration['sqlconnection'];
 		$conn = Creole::getConnection($dsn, Creole::PERSISTENT);
 		return $conn;
 	}



From nobody at sheep.berlios.de  Tue Mar 15 11:12:05 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 11:12:05 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.presentation class.phpmediadb_presentation_contentvars.php,1.4,1.5 class.phpmediadb_presentation_htmlservice.php,1.4,1.5 class.phpmediadb_presentation_i18n.php,1.4,1.5
Message-ID: <200503151012.j2FAC5N22800@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation
In directory sheep:/tmp/cvs-serv29552/_source/tier.presentation

Modified Files:
	class.phpmediadb_presentation_contentvars.php 
	class.phpmediadb_presentation_htmlservice.php 
	class.phpmediadb_presentation_i18n.php 
Log Message:
* Changed some comments

Index: class.phpmediadb_presentation_contentvars.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_contentvars.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- class.phpmediadb_presentation_contentvars.php	27 Feb 2005 16:04:44 -0000	1.4
+++ class.phpmediadb_presentation_contentvars.php	15 Mar 2005 10:12:02 -0000	1.5
@@ -25,7 +25,7 @@
 	protected $PRESENTATION = null;
 
 	/**
-	 * This container contains all variables used by the template-engine
+	 * Contains all variables used by the template-engine
 	 *
 	 * @access private
 	 * @var mixed
@@ -94,6 +94,7 @@
 //-----------------------------------------------------------------------------
 	/**
 	 * This function returns a complete node or only a value specified by
+	 * the parameter
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
@@ -124,6 +125,7 @@
 //-----------------------------------------------------------------------------
 	/**
 	 * This function deletes a nodevalue or a compelte nodetree from the
+	 * container
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
@@ -143,7 +145,8 @@
 	
 //-----------------------------------------------------------------------------
 	/**
-	 * This internal function will recursivly insert a node into the
+	 * This internal function recursivlys insert a node into the
+	 * container
 	 *
 	 * @access protected
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
@@ -203,7 +206,7 @@
 	}
 //-----------------------------------------------------------------------------
 	/**
-	 * This internal function will recursivly insert a node into the
+	 * This internal function recursivly reads a node from the container
 	 *
 	 * @access protected
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
@@ -263,8 +266,8 @@
 		
 //-----------------------------------------------------------------------------
 	/**
-	 * This function checks the validity of nodeName and returns the
-	 * (TRUE=ok, FALSE=check failed),
+	 * Checks the validity of nodeName and returns the status
+	 * (TRUE=ok, FALSE=check failed)
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
@@ -284,7 +287,7 @@
 	
 //-----------------------------------------------------------------------------
 	/**
-	 * This function converts the nodeValue in the format of nodeFormat
+	 * Converts the nodeValue in the format of nodeFormat
 	 *
 	 * @access protected
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/

Index: class.phpmediadb_presentation_htmlservice.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_htmlservice.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- class.phpmediadb_presentation_htmlservice.php	8 Mar 2005 17:53:26 -0000	1.4
+++ class.phpmediadb_presentation_htmlservice.php	15 Mar 2005 10:12:02 -0000	1.5
@@ -25,11 +25,9 @@
 	protected $PRESENTATION = null;
 
 	/**
-	 * Reference to template engine
+	 * Reference to template engine (tier.lib)
 	 *
-	 * @access protected
-	 * @see phpmediadb_presentation
-	 * @var phpmediadb_presentation
+	 * @access private
 	 */
 	private $templateEngine = null;
 
@@ -55,6 +53,13 @@
 	}
 
 //-----------------------------------------------------------------------------
+	/**
+	 * Compiles one or more templates via template-engine and return it
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param String
+	 */
 	public function compile( $template )
 	{
 		/* init */
@@ -95,6 +100,13 @@
 	 	return $returnValue;
 	}
 //-----------------------------------------------------------------------------
+	/**
+	 * Compiles one or more templates via template-engine and sends it to client
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param String
+	 */	
 	public function display( $template )
 	{
 		/* init */
@@ -108,6 +120,12 @@
 	}
 	
 //-----------------------------------------------------------------------------
+	/**
+	 * Initalizes the template engine
+	 *
+	 * @access protected
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 */
 	protected function initTemplateEngine()
 	{
 		/* clear vars */
@@ -121,6 +139,13 @@
 			
 	}
 //-----------------------------------------------------------------------------
+	/**
+	 * Setup the template engine for the first time
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param String
+	 */
 	protected function setupTemplateEngine()
 	{
 		/* create templateengine-object */

Index: class.phpmediadb_presentation_i18n.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_i18n.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- class.phpmediadb_presentation_i18n.php	27 Feb 2005 16:05:51 -0000	1.4
+++ class.phpmediadb_presentation_i18n.php	15 Mar 2005 10:12:02 -0000	1.5
@@ -73,7 +73,7 @@
   
 //-----------------------------------------------------------------------------
 	/**
-	 * This function returns the language of the client browser
+	 * Returns the language of the client browser
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
@@ -97,7 +97,7 @@
   
 //-----------------------------------------------------------------------------
 	/**
-	 * This function returns the i18n string specified by the langID
+	 * Returns the i18n string specified by the langID
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
@@ -118,7 +118,7 @@
   
 //-----------------------------------------------------------------------------
 	/**
-	 * This function returns the whole i18n array
+	 * Returns the whole i18n array
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
@@ -136,7 +136,7 @@
   
 //-----------------------------------------------------------------------------
 	/**
-	 * This function returns a array with the available languages
+	 * Returns a array with the available languages
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
@@ -156,7 +156,7 @@
   
 //-----------------------------------------------------------------------------
 	/**
-	 * This function returns the currently used language as langcode
+	 * Returns the currently used language as langcode
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
@@ -172,7 +172,7 @@
 	 
 //-----------------------------------------------------------------------------
 	/**
-	 * This function sets the currently used language as langcode
+	 * Sets the currently used language as langcode
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
@@ -195,8 +195,8 @@
   
 //-----------------------------------------------------------------------------
 	/**
-	 * This function returns the language of the client browser
-	 * specified by the allowed languages and the default language
+	 * Returns the language of the client browser specified by the 
+	 * allowed languages and the default language
 	 *
 	 * @access protected
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
@@ -277,7 +277,7 @@
   
 //-----------------------------------------------------------------------------
 	/**
-	 * This function read the i18n directory and detect the available languages
+	 * Reads the i18n directory and detect the available languages
 	 *
 	 * @access protected
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
@@ -321,7 +321,7 @@
 	}
 //-----------------------------------------------------------------------------
 	/**
-	 * This function loads the languagefile into the languagecontainer
+	 * Loads the languagefile into the languagecontainer
 	 *
 	 * @access protected
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/



From nobody at sheep.berlios.de  Tue Mar 15 11:13:08 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 11:13:08 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_codecs.php,1.4,1.5
Message-ID: <200503151013.j2FAD8N22838@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv29595/_source/tier.data

Modified Files:
	class.phpmediadb_data_codecs.php 
Log Message:
* Fixed redeclaration, wrong methodname in last version

Index: class.phpmediadb_data_codecs.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_codecs.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- class.phpmediadb_data_codecs.php	13 Mar 2005 13:25:17 -0000	1.4
+++ class.phpmediadb_data_codecs.php	15 Mar 2005 10:13:06 -0000	1.5
@@ -126,7 +126,7 @@
 	 * @param Integer
 	 * @param Integer
 	 */
-	public function createCodec( $MediaCodecID, $MediaCodecName, $MediaCodecBitrate, $ItemTypeID )
+	public function modify( $MediaCodecID, $MediaCodecName, $MediaCodecBitrate, $ItemTypeID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'UPDATE MediaCodecs



From nobody at sheep.berlios.de  Tue Mar 15 14:28:45 2005
From: nobody at sheep.berlios.de (bruf)
Date: Tue, 15 Mar 2005 14:28:45 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_agerestrictions.php,1.4,1.5
Message-ID: <200503151328.j2FDSjN29737@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv27084/_source/tier.data

Modified Files:
	class.phpmediadb_data_agerestrictions.php 
Log Message:
* Renamed all methods

Index: class.phpmediadb_data_agerestrictions.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_agerestrictions.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- class.phpmediadb_data_agerestrictions.php	13 Mar 2005 13:24:49 -0000	1.4
+++ class.phpmediadb_data_agerestrictions.php	15 Mar 2005 13:28:42 -0000	1.5
@@ -60,7 +60,7 @@
 	 * @param Integer
 	 * @return String
 	 */
-	public function getAgeRestriction( $MediaAgeRestrictionID )
+	public function get( $MediaAgeRestrictionID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'SELECT *
@@ -80,7 +80,7 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return String
 	 */
-	public function getallAgeRestrictions()
+	public function getall()
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'SELECT *
@@ -100,7 +100,7 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param String
 	 */
-	public function createAgeRestriction( $MediaAgeRestriction )
+	public function create( $MediaAgeRestriction )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'INSERT INTO MediaAgeRestrictions
@@ -120,7 +120,7 @@
 	 * @param Integer
 	 * @param String
 	 */
-	public function modifyAgeRestriction( $MediaAgeRestrictionID, $MediaAgeRestriction )
+	public function modify( $MediaAgeRestrictionID, $MediaAgeRestriction )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'UPDATE MediaAgeRestrictions
@@ -140,7 +140,7 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param Integer
 	 */
-	public function deleteAgeRestriction( $MediaAgeRestrictionID )
+	public function delete( $MediaAgeRestrictionID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'DELETE FROM MediaAgeRestrictions



From nobody at sheep.berlios.de  Tue Mar 15 14:29:35 2005
From: nobody at sheep.berlios.de (bruf)
Date: Tue, 15 Mar 2005 14:29:35 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_audios.php,1.3,1.4
Message-ID: <200503151329.j2FDTZN29745@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv27342/_source/tier.data

Modified Files:
	class.phpmediadb_data_audios.php 
Log Message:
* Renamed all methods
* ItemCreationDate and ItemModificationDate set by the SQL function now()

Index: class.phpmediadb_data_audios.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_audios.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- class.phpmediadb_data_audios.php	11 Mar 2005 12:16:01 -0000	1.3
+++ class.phpmediadb_data_audios.php	15 Mar 2005 13:29:33 -0000	1.4
@@ -62,7 +62,7 @@
 	 * @param Integer
 	 * @return String
 	 */
-	public function getAudio( $ID )
+	public function get( $AudioDataID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
@@ -75,7 +75,7 @@
 		MediaAgeRestrictions g,
 		MediaStatus h,
 		BinaryDatas i
-		WHERE a.AudioDataID = :id 
+		WHERE a.AudioDataID = :adid 
 		AND a.LanguageID = b.LanguageID
 		AND a.ItemID = c.ItemID
 		AND c.ItemTypeID = d.ItemTypeID
@@ -84,7 +84,7 @@
 		AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
 		AND c.MediaStatusID = h.MediaStatusID
 		AND c.ItemPicturesID = i.ItemPicturesID' );
-		$stmt->setString( ':id', $ID );
+		$stmt->setString( ':adid', $AudioDataID );
 		$stmt->executeQuery();
 		
 		return $stmt;
@@ -99,7 +99,7 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return String
 	 */
-	public function getallAudios()
+	public function getall()
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
@@ -129,30 +129,30 @@
 
 //-----------------------------------------------------------------------------
 	/**
-	 * This function delete a specified record from the table AudioDatas
+	 * This function deletes a specified record from the table AudioDatas
 	 * and all depending data from the other tables
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param Integer
 	 */
-	public function deleteAudio( $ID )
+	public function delete( $AudioDataID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'DELETE AudioDatas, Items, BinaryDatas, Categories_has_Items
 		FROM AudioDatas, Items, BinaryDatas, Categories_has_Items
-		WHERE AudioDatas.AudioDataID = :id
+		WHERE AudioDatas.AudioDataID = :adid
 		AND AudioDatas.ItemID = Items.ItemID
 		AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID
 		AND Items.ItemID = Categories_has_Items.ItemID' );
-		$stmt->setString( ':id', $ID );
+		$stmt->setString( ':adid', $AudioDataID );
 		$stmt->executeUpdate();
 	}
 
 //-----------------------------------------------------------------------------
 /**
-	 * This function create a new record into the table AudioDatas
-	 * and all required data into the other tables
+	 * This function creates a new record in the table AudioDatas
+	 * and all required data in the other tables
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
@@ -162,12 +162,10 @@
 	 * @param String
 	 * @param Integer
 	 * @param String
-	 * @param Integer
-	 * @param Integer
 	 * @param Blob
 	 */
-	public function createAudio( $AudioDataMediaCount, $AudioDataDiscID, $ItemTitle, $ItemOriginalTitle,
-	$ItemRelease, $ItemMediaName, $ItemCreationDate, $ItemModificationDate, $ItemComment )
+	public function create( $AudioDataMediaCount, $AudioDataDiscID, $ItemTitle, $ItemOriginalTitle,
+	$ItemRelease, $ItemMediaName, $ItemComment )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'INSERT INTO AudioDatas ( AudioDataMediaCount, AudioDataDiscID ) VALUES( :admc, :addi )' );
@@ -177,13 +175,11 @@
 		
 		$stmt = $conn->preparedStatement( 'INSERT INTO Items
 		( ItemTitle, ItemOriginalTitle, ItemRelease, ItemMediaName, ItemCreationDate, ItemModificationDate, ItemComment )
-		VALUES( :it, :iot, :ir, :imn, :icd, :imd, :ic )' );
+		VALUES( :it, :iot, :ir, :imn, now(), now(), :ic )' );
 		$stmt->setString( ':it', $ItemTitle );
 		$stmt->setString( ':iot', $ItemOriginalTitle );
 		$stmt->setString( ':ir', $ItemRelease );
 		$stmt->setString( ':imn', $ItemMediaName );
-		$stmt->setString( ':icd', $ItemCreationDate );
-		$stmt->setString( ':imd', $ItemModificationDate );
 		$stmt->setString( ':ic' , $ItemComment );
 		$stmt->executeUpdate(); 
 		
@@ -191,23 +187,27 @@
 
 //-----------------------------------------------------------------------------
 /**
-	 * This function modify a specified record from the table AudioDatas
-	 * and all required data from other tables
+	 * This function modifies a specified record from the table AudioDatas
+	 * and all required data from the other tables
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param Integer
+	 * @param Integer
 	 * @param String
 	 * @param String
 	 * @param String
 	 * @param Integer
 	 * @param String
-	 * @param Integer
 	 * @param Blob
 	 * @param Integer
+	 * @param Integer
+	 * @param Integer
+	 * @param Integer
+	 * @param Integer
 	 */
-	public function modifyAudio( $AudioDataID, $AudioDataMediaCount, $AudioDataDiscID, $ItemTitle, $ItemOriginalTitle,
-	$ItemRelease, $ItemMediaName, $ItemModificationDate, $ItemComment, $MediaCodecID, $MediaFormatID,
+	public function modify( $AudioDataID, $AudioDataMediaCount, $AudioDataDiscID, $ItemTitle, $ItemOriginalTitle,
+	$ItemRelease, $ItemMediaName, $ItemComment, $MediaCodecID, $MediaFormatID,
 	$MediaAgeRestrictionID, $MediaStatusID, $ItemPicturesID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
@@ -226,7 +226,7 @@
 		Items.ItemOriginalTitle = :iot,
 		Items.ItemRelease = :ir,
 		Items.ItemMediaName = :imn,
-		Items.ItemModificationDate = :imd,
+		Items.ItemModificationDate = now(),
 		Items.ItemComment = :ic,
 		Items.MediaCodecID = :mcid,
 		Items.MediaFormatID = :mfid,
@@ -248,7 +248,6 @@
 		$stmt->setString( ':iot', $ItemOriginalTitle );
 		$stmt->setString( ':ir', $ItemRelease );
 		$stmt->setString( ':imn', $ItemMediaName );
-		$stmt->setString( ':imd', $ItemModificatioDate );
 		$stmt->setString( ':ic', $ItemComment );
 		$stmt->setString( ':mcid', $MediaCodecID );
 		$stmt->setString( ':mfid', $MediaFormatID );
@@ -256,7 +255,7 @@
 		$stmt->setString( ':msid', $MediaStatusID );
 		$stmt->setString( ':ipid', $ItemPicturesID );
 		$stmt->setString( ':adid', $AudioDataID );
-		$stmt->executeQuery();
+		$stmt->executeUpdate();
 		
 	}
 



From nobody at sheep.berlios.de  Tue Mar 15 14:29:46 2005
From: nobody at sheep.berlios.de (bruf)
Date: Tue, 15 Mar 2005 14:29:46 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_prints.php,1.3,1.4
Message-ID: <200503151329.j2FDTkN29752@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv27399/_source/tier.data

Modified Files:
	class.phpmediadb_data_prints.php 
Log Message:
* Renamed all methods
* ItemCreationDate and ItemModificationDate set by the SQL function now()

Index: class.phpmediadb_data_prints.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_prints.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- class.phpmediadb_data_prints.php	11 Mar 2005 12:17:04 -0000	1.3
+++ class.phpmediadb_data_prints.php	15 Mar 2005 13:29:43 -0000	1.4
@@ -61,7 +61,7 @@
 	 * @param Integer
 	 * @return String
 	 */
-	public function getPrint( $PrintDataID )
+	public function get( $PrintDataID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
@@ -98,7 +98,7 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return String
 	 */
-	public function getallPrints()
+	public function getall()
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
@@ -128,14 +128,14 @@
 
 //-----------------------------------------------------------------------------
 	/**
-	 * This function delete a specified record from the table PrintDatas
+	 * This function deletes a specified record from the table PrintDatas
 	 * and all depending data from the other tables
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param Integer
 	 */
-	public function deletePrint( $PrintDataID )
+	public function delete( $PrintDataID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'DELETE PrintDatas, Items, BinaryDatas, Categories_has_Items
@@ -150,7 +150,7 @@
 
 //-----------------------------------------------------------------------------
 /**
-	 * This function create a new record into the table PrintDatas
+	 * This function creates a new record into the table PrintDatas
 	 * and all required data into the other tables
 	 *
 	 * @access public
@@ -161,12 +161,10 @@
 	 * @param String
 	 * @param Integer
 	 * @param String
-	 * @param Integer
-	 * @param Integer
 	 * @param Blob
 	 */
-	public function createPrint( $PrintDataMediaCount, $PrintDataISBN, $ItemTitle, $ItemOriginalTitle,
-	$ItemRelease, $ItemMediaName, $ItemCreationDate, $ItemModificationDate, $ItemComment )
+	public function create( $PrintDataMediaCount, $PrintDataISBN, $ItemTitle, $ItemOriginalTitle,
+	$ItemRelease, $ItemMediaName, $ItemComment )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'INSERT INTO PrintDatas ( PrintDataMediaCount, PrintDataISBN ) VALUES( :pdmc, :pdisbn )' );
@@ -176,13 +174,11 @@
 		
 		$stmt = $conn->preparedStatement( 'INSERT INTO Items
 		( ItemTitle, ItemOriginalTitle, ItemRelease, ItemMediaName, ItemCreationDate, ItemModificationDate, ItemComment )
-		VALUES( :it, :iot, :ir, :imn, :icd, :imd, :ic )' );
+		VALUES( :it, :iot, :ir, :imn, now(), now(), :ic )' );
 		$stmt->setString( ':it', $ItemTitle );
 		$stmt->setString( ':iot', $ItemOriginalTitle );
 		$stmt->setString( ':ir', $ItemRelease );
 		$stmt->setString( ':imn', $ItemMediaName );
-		$stmt->setString( ':icd', $ItemCreationDate );
-		$stmt->setString( ':imd', $ItemModificationDate );
 		$stmt->setString( ':ic' , $ItemComment );
 		$stmt->executeUpdate(); 
 		
@@ -190,23 +186,27 @@
 
 //-----------------------------------------------------------------------------
 /**
-	 * This function modify a specified record from the table PrintDatas
-	 * and all required data from other tables
+	 * This function modifies a specified record from the table PrintDatas
+	 * and all required data from the other tables
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param Integer
+	 * @param Integer
 	 * @param String
 	 * @param String
 	 * @param String
 	 * @param Integer
 	 * @param String
-	 * @param Integer
 	 * @param Blob
 	 * @param Integer
+	 * @param Integer
+	 * @param Integer
+	 * @param Integer
+	 * @param Integer
 	 */
-	public function modifyPrint( $PrintDataID, $PrintDataMediaCount, $PrintDataISBN, $ItemTitle, $ItemOriginalTitle,
-	$ItemRelease, $ItemMediaName, $ItemModificationDate, $ItemComment, $MediaCodecID, $MediaFormatID,
+	public function modify( $PrintDataID, $PrintDataMediaCount, $PrintDataISBN, $ItemTitle, $ItemOriginalTitle,
+	$ItemRelease, $ItemMediaName, $ItemComment, $MediaCodecID, $MediaFormatID,
 	$MediaAgeRestrictionID, $MediaStatusID, $ItemPicturesID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
@@ -225,7 +225,7 @@
 		Items.ItemOriginalTitle = :iot,
 		Items.ItemRelease = :ir,
 		Items.ItemMediaName = :imn,
-		Items.ItemModificationDate = :imd,
+		Items.ItemModificationDate = now(,
 		Items.ItemComment = :ic
 		Items.MediaCodecID = :mcid,
 		Items.MediaFormatID = :mfid,
@@ -247,7 +247,6 @@
 		$stmt->setString( ':iot', $ItemOriginalTitle );
 		$stmt->setString( ':ir', $ItemRelease );
 		$stmt->setString( ':imn', $ItemMediaName );
-		$stmt->setString( ':imd', $ItemModificatioDate );
 		$stmt->setString( ':ic', $ItemComment );
 		$stmt->setString( ':mcid', $MediaCodecID );
 		$stmt->setString( ':mfid', $MediaFormatID );
@@ -255,7 +254,7 @@
 		$stmt->setString( ':msid', $MediaStatusID );
 		$stmt->setString( ':ipid', $ItemPicturesID );
 		$stmt->setString( ':pdid', $PrintDataID );
-		$stmt->executeQuery();
+		$stmt->executeUpdate();
 		
 	}
 



From nobody at sheep.berlios.de  Tue Mar 15 14:29:57 2005
From: nobody at sheep.berlios.de (bruf)
Date: Tue, 15 Mar 2005 14:29:57 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_videos.php,1.3,1.4
Message-ID: <200503151329.j2FDTuN29756@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv27459/_source/tier.data

Modified Files:
	class.phpmediadb_data_videos.php 
Log Message:
* Renamed all methods
* ItemCreationDate and ItemModificationDate set by the SQL function now()

Index: class.phpmediadb_data_videos.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_videos.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- class.phpmediadb_data_videos.php	11 Mar 2005 12:17:43 -0000	1.3
+++ class.phpmediadb_data_videos.php	15 Mar 2005 13:29:54 -0000	1.4
@@ -61,7 +61,7 @@
 	 * @param Integer
 	 * @return String
 	 */
-	public function getVideo( $VideoDataID )
+	public function get( $VideoDataID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
@@ -98,7 +98,7 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return String
 	 */
-	public function getallVideos()
+	public function getall()
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
@@ -129,14 +129,14 @@
 
 //-----------------------------------------------------------------------------
 	/**
-	 * This function delete a specified record from the table VideoDatas
+	 * This function deletes a specified record from the table VideoDatas
 	 * and all depending data from the other tables
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param Integer
 	 */
-	public function deleteVideo( $VideoDataID )
+	public function delete( $VideoDataID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'DELETE VideoDatas, Items, BinaryDatas, Categories_has_Items
@@ -152,23 +152,21 @@
 
 //-----------------------------------------------------------------------------
 /**
-	 * This function create a new record into the table VideoDatas
-	 * and all required data into the other tables
+	 * This function creates a new record in the table VideoDatas
+	 * and all required data in the other tables
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param Integer
-	 * @param String
+	 * @param Integer
 	 * @param String
 	 * @param String
 	 * @param Integer
 	 * @param String
-	 * @param Integer
-	 * @param Integer
 	 * @param Blob
 	 */
-	public function createVideo( $VideoDataMediaCount, $AudioDataImdbID, $ItemTitle, $ItemOriginalTitle,
-	$ItemRelease, $ItemMediaName, $ItemCreationDate, $ItemModificationDate, $ItemComment )
+	public function create( $VideoDataMediaCount, $AudioDataImdbID, $ItemTitle, $ItemOriginalTitle,
+	$ItemRelease, $ItemMediaName, $ItemComment )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'INSERT INTO VideoDatas ( VideoDataMediaCount, VideoDataImdbID ) VALUES( :vdmc, :vdii )' );
@@ -178,13 +176,11 @@
 		
 		$stmt = $conn->preparedStatement( 'INSERT INTO Items
 		( ItemTitle, ItemOriginalTitle, ItemRelease, ItemMediaName, ItemCreationDate, ItemModificationDate, ItemComment )
-		VALUES( :it, :iot, :ir, :imn, :icd, :imd, :ic )' );
+		VALUES( :it, :iot, :ir, :imn, now(), now(), :ic )' );
 		$stmt->setString( ':it', $ItemTitle );
 		$stmt->setString( ':iot', $ItemOriginalTitle );
 		$stmt->setString( ':ir', $ItemRelease );
 		$stmt->setString( ':imn', $ItemMediaName );
-		$stmt->setString( ':icd', $ItemCreationDate );
-		$stmt->setString( ':imd', $ItemModificationDate );
 		$stmt->setString( ':ic' , $ItemComment );
 		$stmt->executeUpdate(); 
 
@@ -192,23 +188,26 @@
 
 //-----------------------------------------------------------------------------
 /**
-	 * This function modify a specified record from the table VideoDatas
-	 * and all required data from other tables
+	 * This function modifies a specified record from the table VideoDatas
+	 * and all required data from the other tables
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param Integer
-	 * @param String
-	 * @param String
-	 * @param String
+	 * @param Integer
 	 * @param Integer
 	 * @param String
+	 * @param String
 	 * @param Integer
 	 * @param Blob
 	 * @param Integer
+	 * @param Integer
+	 * @param Integer
+	 * @param Integer
+	 * @param Integer
 	 */
-	public function modifyVideo( $VideoDataID, $VideoDataMediaCount, $VideoDataImdbID, $ItemTitle, $ItemOriginalTitle,
-	$ItemRelease, $ItemMediaName, $ItemModificationDate, $ItemComment, $MediaCodecID, $MediaFormatID,
+	public function modify( $VideoDataID, $VideoDataMediaCount, $VideoDataImdbID, $ItemTitle, $ItemOriginalTitle,
+	$ItemRelease, $ItemMediaName, $ItemComment, $MediaCodecID, $MediaFormatID,
 	$MediaAgeRestrictionID, $MediaStatusID, $ItemPicturesID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
@@ -227,7 +226,7 @@
 		Items.ItemOriginalTitle = :iot,
 		Items.ItemRelease = :ir,
 		Items.ItemMediaName = :imn,
-		Items.ItemModificationDate = :imd,
+		Items.ItemModificationDate = now(),
 		Items.ItemComment = :ic
 		Items.MediaCodecID = :mcid,
 		Items.MediaFormatID = :mfid,
@@ -249,7 +248,6 @@
 		$stmt->setString( ':iot', $ItemOriginalTitle );
 		$stmt->setString( ':ir', $ItemRelease );
 		$stmt->setString( ':imn', $ItemMediaName );
-		$stmt->setString( ':imd', $ItemModificatioDate );
 		$stmt->setString( ':ic', $ItemComment );
 		$stmt->setString( ':mcid', $MediaCodecID );
 		$stmt->setString( ':mfid', $MediaFormatID );
@@ -257,7 +255,7 @@
 		$stmt->setString( ':msid', $MediaStatusID );
 		$stmt->setString( ':ipid', $ItemPicturesID );
 		$stmt->setString( ':vdid', $VideoDataID );
-		$stmt->executeQuery();
+		$stmt->executeUpdate();
 		
 	}
 



From nobody at sheep.berlios.de  Tue Mar 15 14:30:16 2005
From: nobody at sheep.berlios.de (bruf)
Date: Tue, 15 Mar 2005 14:30:16 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_codecs.php,1.5,1.6
Message-ID: <200503151330.j2FDUGN29803@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv27592/_source/tier.data

Modified Files:
	class.phpmediadb_data_codecs.php 
Log Message:
* Renamed all methods

Index: class.phpmediadb_data_codecs.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_codecs.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- class.phpmediadb_data_codecs.php	15 Mar 2005 10:13:06 -0000	1.5
+++ class.phpmediadb_data_codecs.php	15 Mar 2005 13:30:13 -0000	1.6
@@ -60,7 +60,7 @@
 	 * @param Integer
 	 * @return String
 	 */
-	public function getCodec( $MediaCodecID )
+	public function get( $MediaCodecID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'SELECT *
@@ -80,7 +80,7 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return String
 	 */
-	public function getallCodecs()
+	public function getall()
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'SELECT *
@@ -102,7 +102,7 @@
 	 * @param Integer
 	 * @param Integer
 	 */
-	public function createCodec( $MediaCodecName, $MediaCodecBitrate, $ItemTypeID )
+	public function create( $MediaCodecName, $MediaCodecBitrate, $ItemTypeID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'INSERT INTO MediaCodecs
@@ -150,7 +150,7 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param Integer
 	 */
-	public function deleteCodec( $MediaCodecID )
+	public function delete( $MediaCodecID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'DELETE FROM MediaCodecs



From nobody at sheep.berlios.de  Tue Mar 15 14:30:25 2005
From: nobody at sheep.berlios.de (bruf)
Date: Tue, 15 Mar 2005 14:30:25 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_formats.php,1.5,1.6
Message-ID: <200503151330.j2FDUPN29814@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv27639/_source/tier.data

Modified Files:
	class.phpmediadb_data_formats.php 
Log Message:
* Renamed all methods

Index: class.phpmediadb_data_formats.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_formats.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- class.phpmediadb_data_formats.php	13 Mar 2005 13:25:38 -0000	1.5
+++ class.phpmediadb_data_formats.php	15 Mar 2005 13:30:23 -0000	1.6
@@ -60,7 +60,7 @@
 	 * @param Integer
 	 * @return String
 	 */
-	public function getFormat( $MediaFormatID )
+	public function get( $MediaFormatID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'SELECT *
@@ -80,7 +80,7 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return String
 	 */
-	public function getallFormats()
+	public function getall()
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'SELECT *
@@ -101,7 +101,7 @@
 	 * @param String
 	 * @param Integer
 	 */
-	public function createFormat( $MediaFormatName, $ItemTypeID )
+	public function create( $MediaFormatName, $ItemTypeID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'INSERT INTO MediaFormats
@@ -122,7 +122,7 @@
 	 * @param String
 	 * @param Integer
 	 */
-	public function modifyFormat( $MediaFormatID, $MediaFormatName, $ItemTypeID )
+	public function modify( $MediaFormatID, $MediaFormatName, $ItemTypeID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'UPDATE MediaFormats
@@ -144,7 +144,7 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param Integer
 	 */
-	public function deleteFormat( $MediaFormatID )
+	public function delete( $MediaFormatID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'DELETE FROM MediaFormats



From nobody at sheep.berlios.de  Tue Mar 15 14:30:36 2005
From: nobody at sheep.berlios.de (bruf)
Date: Tue, 15 Mar 2005 14:30:36 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_status.php,1.4,1.5
Message-ID: <200503151330.j2FDUaN29818@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv27676/_source/tier.data

Modified Files:
	class.phpmediadb_data_status.php 
Log Message:
* Renamed all methods

Index: class.phpmediadb_data_status.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_status.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- class.phpmediadb_data_status.php	13 Mar 2005 13:26:02 -0000	1.4
+++ class.phpmediadb_data_status.php	15 Mar 2005 13:30:34 -0000	1.5
@@ -60,7 +60,7 @@
 	 * @param Integer
 	 * @return String
 	 */
-	public function getStatus( $MediaStatusID )
+	public function get( $MediaStatusID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'SELECT *
@@ -80,7 +80,7 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return String
 	 */
-	public function getallStatus()
+	public function getall()
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'SELECT *
@@ -102,7 +102,7 @@
 	 * @param String
 	 * @param String
 	 */
-	public function createStatus( $MediaStatus, $MediaStatusOwner, $MediaStatusHolder )
+	public function create( $MediaStatus, $MediaStatusOwner, $MediaStatusHolder )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'INSERT INTO MediaStatus
@@ -126,7 +126,7 @@
 	 * @param String
 	 * @param String
 	 */
-	public function modifyStatus( $MediaStatusID, $MediaStatus, $MediaStatusOwner, $MediaStatusHolder )
+	public function modify( $MediaStatusID, $MediaStatus, $MediaStatusOwner, $MediaStatusHolder )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'UPDATE MediaStatus
@@ -150,7 +150,7 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param Integer
 	 */
-	public function deleteStatus( $MediaStatusID )
+	public function delete( $MediaStatusID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->preparedStatement( 'DELETE FROM MediaStatus



From nobody at sheep.berlios.de  Tue Mar 15 18:37:15 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 18:37:15 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/admin - New directory
Message-ID: <200503151737.j2FHbFN08174@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/admin
In directory sheep:/tmp/cvs-serv27702/admin

Log Message:
Directory /cvsroot/phpmediadb/phpmediadb-cvs/admin added to the repository




From nobody at sheep.berlios.de  Tue Mar 15 18:37:32 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 18:37:32 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/admin item-add.php,NONE,1.1 item-del.php,NONE,1.1 item-mod.php,NONE,1.1 item-session.php,NONE,1.1
Message-ID: <200503151737.j2FHbWN08182@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/admin
In directory sheep:/tmp/cvs-serv28039/admin

Added Files:
	item-add.php item-del.php item-mod.php item-session.php 
Log Message:
* Initial revision

--- NEW FILE: item-add.php ---
<?php
// phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
/* $Id: item-add.php,v 1.1 2005/03/15 17:37:30 mblaschke Exp $ */

require_once( '../_source/phpmediadb.php' );

/* create object */
$PHPMEDIADB	= new phpmediadb();

switch( @$_GET['type'] )
{
	case('audio'):
			/* create session-item */
			$sessionItem = array();
			$sessionItem['type'] = PHPMEDIADB_ITEM_AUDIO;
			$sessionItem['id']	 = NULL;
			$PHPMEDIADB->PRESENTATION->SESSION->register( 'sessionitem' ,$sessionItem );
			
			/* redirect */
			header( 'Location: item-session.php' );
		break;
	
	case('video'):
			/* create session-item */
			$sessionItem = array();
			$sessionItem['type'] = PHPMEDIADB_ITEM_VIDEO;
			$sessionItem['id']	 = NULL;
			$sessionItem['data'] = array();
			$PHPMEDIADB->PRESENTATION->SESSION->register( 'sessionitem' ,$sessionItem );
			
			/* redirect */
			header( 'Location: item-session.php' );
		break;

	case('print'):
			/* create session-item */
			$sessionItem = array();
			$sessionItem['type'] = PHPMEDIADB_ITEM_PRINT;
			$sessionItem['id']	 = NULL;
			$sessionItem['data'] = array();
			$PHPMEDIADB->PRESENTATION->SESSION->register( 'sessionitem' ,$sessionItem );
			
			/* redirect */
			header( 'Location: item-session.php' );
		break;

	default:
			/* display site */
			$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( 'body.item.add.choice.tpl' );
		break;
}




//--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
?>
--- NEW FILE: item-del.php ---

--- NEW FILE: item-mod.php ---

--- NEW FILE: item-session.php ---
<?php
// phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
/* $Id: item-session.php,v 1.1 2005/03/15 17:37:30 mblaschke Exp $ */

require_once( '../_source/phpmediadb.php' );

/* create object */
$PHPMEDIADB	= new phpmediadb();

//-----------------------------------------------------------------------------
function itemShow( $sessionItem )
{
	global $PHPMEDIADB;
	
	/* get and set input-size */
	$itemSize = $PHPMEDIADB->BUSINESS->INSPECTOR->getSize( $sessionItem['type'] );
	@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'INPUTSIZE', $itemSize );
	
	switch( $sessionItem['type'] )
	{
		case(PHPMEDIADB_ITEM_AUDIO):
			/* assign data */
			@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'ITEMDATA', $sessionItem['data'] );
			/* display site */
			$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( 'body.item.audio.formular.tpl' );
		break;
	
	
		case(PHPMEDIADB_ITEM_VIDEO):
			/* assign data */
			@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'ITEMDATA', $sessionItem['data'] );
			/* display site */
			$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( 'body.item.video.formular.tpl' );
		break;
	
	
		case(PHPMEDIADB_ITEM_PRINT):
			/* assign data */
			@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'ITEMDATA', $sessionItem['data'] );
			/* display site */
			$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( 'body.item.print.formular.tpl' );
		break;
	}
}
//-----------------------------------------------------------------------------
function itemGet()
{
	global $PHPMEDIADB;
	/* get session data first*/
	return $PHPMEDIADB->PRESENTATION->SESSION->get( 'sessionitem' );
}
//-----------------------------------------------------------------------------
function itemSave( $sessionItem )
{
	global $PHPMEDIADB;
	switch( $sessionItem['type'] )
	{
		case(PHPMEDIADB_ITEM_AUDIO):
		
		if( $sessionItem['id'] === NULL )
			$errorData = $PHPMEDIADB->BUSINESS->AUDIOS->create( $sessionItem['data'] );
		else 
			$errorData = $PHPMEDIADB->BUSINESS->AUDIOS->modify( $sessionItem['id'], $sessionItem['data'] );
			
		if( $errorData === NULL || $errorData === TRUE )
		{
			/* happy, no error :) */
			@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'MESSAGE', $PHPMEDIADB->PRESENTATION->I18N->getLanguageString( 'MESSAGE_SUCCESS_SAVE' ) );
			$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( 'body.message.tpl' );
			die();
		}
		else
		{
			/* too bad, error occurred */
			@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'INPUTERROR', $errorData );
			itemShow( $sessionItem );
			die();
		}
	
//
//		/* check data */
//		$errorData = $PHPMEDIADB->BUSINESS->AUDIOS->check( $sessionItem['data'] );
//		
//		/* error occured? */
//		if( $errorData !== NULL )
//		{
//			/* error occurred */
//			@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'INPUTERROR', $errorData );
//
//			/* display error-site */
//			itemShow( $sessionItem );
//		}
//		else
//		{
//			/* ready to save */
//			if( $sessionItem['id'] === NULL )
//				$PHPMEDIADB->BUSINESS->AUDIOS->create( $sessionItem['data'] );
//			else
//				$PHPMEDIADB->BUSINESS->AUDIOS->create( $sessionItem['modify'] );
//		}
		break;
	
	
		case(PHPMEDIADB_ITEM_VIDEO):
		break;
	
	
		case(PHPMEDIADB_ITEM_PRINT):
		break;
	}
}

//-----------------------------------------------------------------------------


$sessionItem = itemGet();
if( isset( $_POST['buttonsave'] ) )
{
	/* set itemdata to sessionItem */
	$sessionItem['data'] = $_POST['itemdata'];
	$PHPMEDIADB->PRESENTATION->SESSION->register( 'sessionitem' ,$sessionItem );
	
	
	/* try to save */
	itemSave( $sessionItem );
}
else
{
	/* only show */
	itemShow( $sessionItem );
}

//--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
?>


From nobody at sheep.berlios.de  Tue Mar 15 18:38:12 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 18:38:12 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.business class.phpmediadb_business_agerestrictions.php,NONE,1.1 class.phpmediadb_business_audios.php,NONE,1.1 class.phpmediadb_business_inspector.php,NONE,1.1
Message-ID: <200503151738.j2FHcCN08210@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business
In directory sheep:/tmp/cvs-serv29478/_source/tier.business

Added Files:
	class.phpmediadb_business_agerestrictions.php 
	class.phpmediadb_business_audios.php 
	class.phpmediadb_business_inspector.php 
Log Message:
* Initial revision

--- NEW FILE: class.phpmediadb_business_agerestrictions.php ---
<?php
// phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
/* $Id: class.phpmediadb_business_agerestrictions.php,v 1.1 2005/03/15 17:38:08 mblaschke Exp $ */

class phpmediadb_business_agerestrictions
{
	// --- ATTRIBUTES ---

	/**
	 * Reference to class phpmediadb
	 *
	 * @access protected
	 * @see phpmediadb
	 * @var phpmediadb
	 */
	protected $PHPMEDIADB = null;

	/**
	 * Reference to class phpmediadb_business
	 *
	 * @access protected
	 * @see phpmediadb_business
	 * @var phpmediadb_business
	 */
	protected $BUSINESS = null;
	
	/**
	 * Reference to class phpmediadb_data
	 *
	 * @access protected
	 * @see phpmediadb_data
	 * @var phpmediadb_data
	 */
	protected $DATA = null;
	
	// --- OPERATIONS ---
	
	/**
	 * The constructor __construct initalizes the Class.
	 *
	 * @access public
	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
	 * @param phpmediadb
	 */
	public function __construct( $sender )
	{
		/* init */
    	 
		/* assign parent */
		$this->BUSINESS		= $sender;
		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
		$this->DATA				= $sender->PHPMEDIADB->DATA;
	}

//-----------------------------------------------------------------------------
	/**
	 * Returns the complete list
	 *
	 *
	 */
	public function getList()
	{
		/* init */
		$returnValue = null;
		
		/* delegate */
		$this->DATA->AGERESTRICTIONS->getList();
		
		/* return data */
		return $returnValue;
	}
	
} /* end of class phpmediadb_business_agerestrictions */

//--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
?>
--- NEW FILE: class.phpmediadb_business_audios.php ---
<?php
// phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
/* $Id: class.phpmediadb_business_audios.php,v 1.1 2005/03/15 17:38:08 mblaschke Exp $ */

class phpmediadb_business_audios
{
	// --- ATTRIBUTES ---

	/**
	 * Reference to class phpmediadb
	 *
	 * @access protected
	 * @see phpmediadb
	 * @var phpmediadb
	 */
	protected $PHPMEDIADB = null;

	/**
	 * Reference to class phpmediadb_business
	 *
	 * @access protected
	 * @see phpmediadb_business
	 * @var phpmediadb_business
	 */
	protected $BUSINESS = null;
	
	/**
	 * Reference to class phpmediadb_data
	 *
	 * @access protected
	 * @see phpmediadb_data
	 * @var phpmediadb_data
	 */
	protected $DATA = null;
	
	// --- OPERATIONS ---
	
	/**
	 * The constructor __construct initalizes the Class.
	 *
	 * @access public
	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
	 * @param phpmediadb
	 */
	public function __construct( $sender )
	{
		/* init */
    	 
		/* assign parent */
		$this->BUSINESS		= $sender;
		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
		$this->DATA				= $sender->PHPMEDIADB->DATA;
	}

//-----------------------------------------------------------------------------
	/**
	 *
	 *
	 *
	 *
	 */
	 public function check( $data )
	 {
		/* init */
		$returnValue = NULL;
		
		/* delegate */
		$returnValue = $this->BUSINESS->INSPECTOR->check( PHPMEDIADB_ITEM_AUDIO, $data );

		
		return $returnValue;
	 }

//-----------------------------------------------------------------------------
	/**
	 *
	 *
	 *
	 */
	 public function createEmpty()
	 {
		/* init */
		$returnValue = array();
	 	
		$returnValue['id'] = NULL;
		$returnValue['title']	= '';
		$returnValue['originaltitle']	= '';
		$returnValue['medianame']	= '';
		$returnValue['']	= '';
		$returnValue['']	= '';
		$returnValue['']	= '';
		$returnValue['']	= '';
		$returnValue['']	= '';
		$returnValue['']	= '';
		$returnValue['']	= '';
			
		/* return data */
		return $returnValue;
	 }

//-----------------------------------------------------------------------------
	/**
	 * Returns the complete list
	 *
	 *
	 */
	public function getList()
	{
		/* init */
		$returnValue = null;
		
		/* delegate */
		$this->DATA->AGERESTRICTIONS->getList();
		
		/* return data */
		return $returnValue;
	}
	
//-----------------------------------------------------------------------------
	public function modify( $id, $data )
	{
		/* init */
		$returnValue = NULL;
		
		/* check data */
		$returnValue = $this->check( $data );
		
		/* no input-error, ready to save */
		if( $returnValue === NULL )
		{
			/* delegate */
			//$this->DATA->AUDIOS->modify( $id, $data );
			
			$returnValue = TRUE;
		}
		
		/* return data */
		return $returnValue;
	}
//-----------------------------------------------------------------------------
	public function create( $data )
	{
		/* init */
		$returnValue = NULL;
		
		/* check data */
		$returnValue = $this->check( $data );
		
		/* no input-error, ready to save */
		if( $returnValue === NULL )
		{
			/* delegate */
			//$this->DATA->AUDIOS->create( $id, $data );
			
			$returnValue = TRUE;
		}
		
		/* return data */
		return $returnValue;
	}
//-----------------------------------------------------------------------------
} /* end of class phpmediadb_business_audios */

//--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
?>
--- NEW FILE: class.phpmediadb_business_inspector.php ---
<?php
// phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
/* $Id: class.phpmediadb_business_inspector.php,v 1.1 2005/03/15 17:38:08 mblaschke Exp $ */

class phpmediadb_business_inspector
{
	// --- ATTRIBUTES ---

	/**
	 * Reference to class phpmediadb
	 *
	 * @access protected
	 * @see phpmediadb
	 * @var phpmediadb
	 */
	protected $PHPMEDIADB = null;

	/**
	 * Reference to class phpmediadb_business
	 *
	 * @access protected
	 * @see phpmediadb_business
	 * @var phpmediadb_business
	 */
	protected $BUSINESS = null;
	
	/**
	 * Reference to class phpmediadb_data
	 *
	 * @access protected
	 * @see phpmediadb_data
	 * @var phpmediadb_data
	 */
	protected $DATA = null;
	
	// --- OPERATIONS ---
	
	/**
	 * The constructor __construct initalizes the Class.
	 *
	 * @access public
	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
	 * @param phpmediadb
	 */
	public function __construct( $sender )
	{
		/* init */
    	 
		/* assign parent */
		$this->BUSINESS		= $sender;
		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
	}

//-----------------------------------------------------------------------------
	/**
	 * Returns the complete list
	 *
	 *
	 */
	public function check( $type, $data )
	{
		/* init */
		$returnValue	= NULL;
		$inputSize		= $this->getSize( $type );
		$checkRegex		= $this->getRegex( $type );
		/*
		$error['general'] = true;
		$error['flag']['title'] = true;
		$error['message']['title']['size'] = true;
		$error['message']['title']['regex'] = true;
		*/
		
		/* check input-sizes */
		if( is_array( $inputSize ) )
		{
			foreach( $inputSize as $checkKey => $checkValue )
			{
				if( @strlen( $data[$checkKey] ) > $checkValue )
				{
					/* set errorflags */
					$returnValue['general']											= TRUE;
					$returnValue['flag'][$checkKey] 						= TRUE;
					$returnValue['message'][$checkKey]['size']	= TRUE;
				}
			}
		}
		
		/* check input-regex */
		if( is_array( $inputSize ) )
		{
			foreach( $checkRegex as $checkKey => $checkValue )
			{
				if( ! @ereg( $checkValue, $data[$checkKey] ) )
				{
					/* set errorflags */
					$returnValue['general']											= TRUE;
					$returnValue['flag'][$checkKey] 						= TRUE;
					$returnValue['message'][$checkKey]['regex']	= TRUE;
				}
			}
		}
		
		/* return data */
		return $returnValue;
	}
	
//-----------------------------------------------------------------------------
	public function getSize( $type )
	{
		/* init */
		$returnValue = NULL;
		
		/* get size */
		$returnValue = $this->BUSINESS->configuration['input-size'][$type];
		
		/* return data */
		return $returnValue;
	}	

//-----------------------------------------------------------------------------
	public function getRegex( $type )
	{
		/* init */
		$returnValue = NULL;
		
		/* get size */
		$returnValue = $this->BUSINESS->configuration['input-regex'][$type];
		
		/* return data */
		return $returnValue;
	}	
//-----------------------------------------------------------------------------

} /* end of class phpmediadb_business_inspector */

//--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
?>


From nobody at sheep.berlios.de  Tue Mar 15 18:39:02 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 18:39:02 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration config.presentation.php,1.3,1.4
Message-ID: <200503151739.j2FHd2N08237@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration
In directory sheep:/tmp/cvs-serv30885/_source/tier.configuration

Modified Files:
	config.presentation.php 
Log Message:
* Fixed a bug with wrong rootpath

Index: config.presentation.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/config.presentation.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- config.presentation.php	8 Mar 2005 17:51:26 -0000	1.3
+++ config.presentation.php	15 Mar 2005 17:38:59 -0000	1.4
@@ -12,16 +12,17 @@
 /*
  * Configuration of directories
  */
-$phpMediaDbConfig['PRESENTATION']['directory']['root']			= realpath('./') . '/';
-$phpMediaDbConfig['PRESENTATION']['directory']['i18n']			= $phpMediaDbConfig['PRESENTATION']['directory']['root'] . '_source/tier.configuration/i18n/';
-$phpMediaDbConfig['PRESENTATION']['directory']['templates']	= $phpMediaDbConfig['PRESENTATION']['directory']['root'] . '_source/tier.configuration/templates';
-$phpMediaDbConfig['PRESENTATION']['directory']['templates_c']	= $phpMediaDbConfig['PRESENTATION']['directory']['root'] . 'var/templates_c';
+$phpMediaDbConfig['PRESENTATION']['directory']['root']			= realpath( dirname(__FILE__) . '/../../' ) ;
+$phpMediaDbConfig['PRESENTATION']['directory']['i18n']			= $phpMediaDbConfig['PRESENTATION']['directory']['root'] . '/_source/tier.configuration/i18n/';
+$phpMediaDbConfig['PRESENTATION']['directory']['templates']	= $phpMediaDbConfig['PRESENTATION']['directory']['root'] . '/_source/tier.configuration/templates';
+$phpMediaDbConfig['PRESENTATION']['directory']['templates_c']	= $phpMediaDbConfig['PRESENTATION']['directory']['root'] . '/var/templates_c';
+
 
 /**
   * Configuration of directories
   */
 $phpMediaDbConfig['PRESENTATION']['webpath']['server']		= '';
-$phpMediaDbConfig['PRESENTATION']['webpath']['root-path']	= '';
+$phpMediaDbConfig['PRESENTATION']['webpath']['root-path']	= '/phpmediadb-cvs/';
 
 /**
   * i18n - Configuration



From nobody at sheep.berlios.de  Tue Mar 15 18:39:37 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 18:39:37 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration config.business.php,1.1,1.2
Message-ID: <200503151739.j2FHdbN08261@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration
In directory sheep:/tmp/cvs-serv31559/_source/tier.configuration

Modified Files:
	config.business.php 
Log Message:
* Added input-size and input-regex check configurations

Index: config.business.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/config.business.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- config.business.php	9 Feb 2005 16:16:22 -0000	1.1
+++ config.business.php	15 Mar 2005 17:39:33 -0000	1.2
@@ -4,5 +4,24 @@
 
 // $phpMediaDbConfig['BUSINESS']['example-config'] = "abc";
 
+/**
+ * Itemsepecifications (regex etc.)
+ */ 
+
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['title'] = '^.{1,255}$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['originaltitle']  = '^(.{1,255})?$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['identification']	= '^(.{1,255})?$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['releaseyear']		= '^([[:digit:]]{4})?$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['quantity']				= '^([[:digit:]]{0,255})?$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['mediasize']			= '^(([[:digit:]]+([[:punct:]]{1}[[:digit:]]+)))?$';
+
+$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['title'] 					= 255;
+$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['originaltitle'] 	= 255;
+$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['identification'] 	= 255;
+$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['releaseyear']		 	= 4;
+$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['quantity'] 				= 255;
+$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['mediasize'] 			= 255;
+
+
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Tue Mar 15 18:41:14 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 18:41:14 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration/templates body.list.audio.tpl,1.1,1.2
Message-ID: <200503151741.j2FHfEN08304@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/templates
In directory sheep:/tmp/cvs-serv1095/_source/tier.configuration/templates

Modified Files:
	body.list.audio.tpl 
Log Message:
* Added modify-/delete-hyperlink

Index: body.list.audio.tpl
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/templates/body.list.audio.tpl,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- body.list.audio.tpl	8 Mar 2005 17:54:52 -0000	1.1
+++ body.list.audio.tpl	15 Mar 2005 17:41:11 -0000	1.2
@@ -12,8 +12,8 @@
 			<td></td>
 			<td></td>
 			<td>
-				<img src="{$CONFIGURATION.ROOTPATH}_layout/images/icons/action-modify.png" alt="{$I18N.ACTION_MODIFY|default:"%ACTION_MODIFY%"}" />
-				<img src="{$CONFIGURATION.ROOTPATH}_layout/images/icons/action-remove.png" alt="{$I18N.ACTION_DELETE|default:"%ACTION_DELETE%"}" />
+				<a href="admin/item-mod.php?itemid="><img src="{$CONFIGURATION.ROOTPATH}_layout/images/icons/action-modify.png" alt="{$I18N.ACTION_MODIFY|default:"%ACTION_MODIFY%"}" /></a>
+				<a href="admin/item-del.php?itemid="><img src="{$CONFIGURATION.ROOTPATH}_layout/images/icons/action-remove.png" alt="{$I18N.ACTION_DELETE|default:"%ACTION_DELETE%"}" /></a>
 			</td>
 		</td>
 		



From nobody at sheep.berlios.de  Tue Mar 15 18:41:40 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 18:41:40 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration/templates body.item.audio.formular.tpl,NONE,1.1
Message-ID: <200503151741.j2FHfeN08321@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/templates
In directory sheep:/tmp/cvs-serv1511/_source/tier.configuration/templates

Added Files:
	body.item.audio.formular.tpl 
Log Message:
* Initial revision

--- NEW FILE: body.item.audio.formular.tpl ---
<form method="post">
<div>
<h1>{$I18N.MEDIA_DATA|default:"%MEDIA_DATA%"}</h1>
{if $INPUTERROR.general eq "1"}<span class="phpmediadb-body-inputerror">{$I18N.ERROR_OCCURRED|default:"%ERROR_OCCURRED%"} <a href="#errorlist">{$I18N.ERROR_LISTLINK|default:"%ERROR_LISTLINK%"}</a></span><br />{/if}
<table>
	<colgroup>
		<col/>
	</colgroup>
	<tr>
		<td>{$I18N.MEDIA_TITLE|default:"%MEDIA_TITLE%"}</td>
		<td>
			<input type="text" name="itemdata[title]" maxlength="{$INPUTSIZE.title|default:"255"}" value="{$ITEMDATA.title}" />
			{if $INPUTERROR.flag.title eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>

	<tr>
		<td>{$I18N.MEDIA_ORIGINALTITLE|default:"%MEDIA_ORIGINALTITLE%"}</td>
		<td>
			<input type="text" name="itemdata[originaltitle]" maxlength="{$INPUTSIZE.originaltitle|default:"255"}" value="{$ITEMDATA.originaltitle}" />
			{if $INPUTERROR.flag.originaltitle eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>

	<tr>
		<td>{$I18N.MEDIA_MEDIANAME|default:"%MEDIA_MEDIANAME%"}</td>
		<td>
			<input type="text" name="itemdata[medianame]" maxlength="{$INPUTSIZE.medianame|default:"255"}" value="{$ITEMDATA.medianame}" />
			{if $INPUTERROR.flag.medianame eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>
	
	<tr>
		<td>{$I18N.MEDIA_IDENTIFICATION|default:"%MEDIA_IDENTIFICATION%"}</td>
		<td>
			<input type="text" name="itemdata[identification]" maxlength="{$INPUTSIZE.identification|default:"255"}" value="{$ITEMDATA.identification}" />
			{if $INPUTERROR.flag.identification eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>

	<tr>
		<td>{$I18N.MEDIA_RELEASEYEAR|default:"%MEDIA_RELEASEYEAR%"}</td>
		<td>
			<input type="text" name="itemdata[releaseyear]" maxlength="{$INPUTSIZE.releaseyear|default:"4"}" value="{$ITEMDATA.releaseyear}" />
			{if $INPUTERROR.flag.releaseyear eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>
	
	<tr>
		<td>{$I18N.MEDIA_CATEGORY|default:"%MEDIA_CATEGORY%"}</td>
		<td>
			<select name="itemdata[category]" size="5" multiple="true">
{foreach from=$DATA.CATEGORIES item=currentDataItem key=currentDataKey}
{assign var="TEMP" value="0"}
	{foreach from=$ITEMDATA.CATEGORIES item=currentItemItem key=currentItemKey}
			{if $currentItemItem eq $currentDataKey }
				{assign var="TEMP" value="1"}
				<option selected="true" value="{$currentDataKey}">{$currentDataItem} {$foo}</option>
			{/if}
	{/foreach}
	{$TEMP}
			{if $TEMP eq "0" }
				<option value="{$currentDataKey}">{$currentDataItem} {$foo}</option>
			{/if}
{/foreach}
			</select>
		</td>
	</tr>
	
	<tr>
		<td>{$I18N.MEDIA_MEDIASIZE|default:"%MEDIA_MEDIASIZE%"}</td>
		<td>
			<input type="text" name="itemdata[mediasize_value]" maxlength="{$INPUTSIZE.mediasize_value|default:"255"}" value="{$ITEMDATA.mediasize_value}" />
			{if $INPUTERROR.flag.mediasize_value eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
			<select name="itemdata[mediasize_type]">
				<option selected="true" value=""></option>
			</select>
		</td>
	</tr>
	
	<tr>
		<td>{$I18N.MEDIA_MEDIATYPE|default:"%MEDIA_MEDIATYPE%"}</td>
		<td>
			<select name="itemdata[mediatype]">
				<option selected="true" value=""></option>
			</select>
		</td>
	</tr>

	<tr>
		<td>{$I18N.MEDIA_IMAGE|default:"%MEDIA_IMAGE%"}</td>
		<td>
			<img src="getbinary.php?itemid={$ITEMDATA.ID}" /><br />
			<input type="file" name="itemdata[image]" />
		</td>
	</tr>

	<tr>
		<td>{$I18N.MEDIA_PUBLISHER|default:"%MEDIA_PUBLISHER%"}</td>
		<td>
			<input type="text" name="itemdata[publisher]" maxlength="{$INPUTSIZE.publisher|default:"255"}" value="{$ITEMDATA.PUBLISHER}" />
			{if $INPUTERROR.flag.publisher eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>

	<tr>
		<td>{$I18N.MEDIA_AGERESTRICTION|default:"%MEDIA_AGERESTRICTION%"}</td>
		<td>
			<select name="itemdata[agerestriction]">
{foreach from=$DATA.AGERESTRICTIONS item=currentDataItem key=currentDataKey}
	{if $currentDataKey eq $ITEMDATA.AGERESTRICTION }
				<option selected="true" value="{$currentDataKey}">{$currentDataItem}</option>
	{else}
				<option value="{$currentDataKey}">{$currentDataItem}</option>
	{/if}
{/foreach}
			</select>
		</td>
	</tr>

	<tr>
		<td>{$I18N.MEDIA_CODEC|default:"%MEDIA_CODEC%"}</td>
		<td>
			<select name="itemdata[codec]">
{foreach from=$DATA.CODECS item=currentDataItem key=currentDataKey}
	{if $currentDataKey eq $ITEMDATA.CODEC }
				<option selected="true" value="{$currentDataKey}">{$currentDataItem}</option>
	{else}
				<option value="{$currentDataKey}">{$currentDataItem}</option>
	{/if}
{/foreach}
			</select>
		</td>
	</tr>

	<tr>
		<td>{$I18N.MEDIA_QUANTITY|default:"%MEDIA_QUANTITY%"}</td>
		<td>
			<input type="text" name="itemdata[quantity]" maxlength="{$INPUTSIZE.quantity|default:"255"}" value="{$ITEMDATA.QUANTITY}" />
			{if $INPUTERROR.flag.quantity eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>
	
	<tr>
		<td></td>
		<td><input type="reset" value="{$I18N.FORM_RESET|default:"%FORM_RESET%"}" /> <input type="submit" name="buttonsave" value="{$I18N.FORM_SUBMIT|default:"%FORM_SUBMIT%"}"/></td>
	</tr>
	
	<tr>
		<td></td>
	</tr>
	
	<tr>
		<td></td>
		<td>
			{$I18N.MEDIA_CREATIONDATE|default:"%MEDIA_CREATIONDATE%"}: {$ITEMDATA.CREATIONDATE|date_format:"%A, %B %e, %Y %H:%M:%S"|default:$I18N.NOT_SET|default:"%NOT_SET%"} <br />
			{$I18N.MEDIA_CREATIONDATE|default:"%MEDIA_MODIFICATIONDATE%"}: {$ITEMDATA.MODIFICATIONDATE|date_format:"%A, %B %e, %Y %H:%M:%S"|default:$I18N.NOT_SET|default:"%NOT_SET%"}
		</td>
	</tr>
	
{if $INPUTERROR.general eq "1"}
	<tr>
		<td colspan="2">
		<a name="errorlist"><h2 class="phpmediadb-body-inputerror">{$I18N.ERROR_TITLE|default:"%ERROR_TITLE%"}</h2></a>
		 <ul>
 	{foreach from=$INPUTERROR.message item=curr_id key=curr_key}
		{if $curr_id.size  eq "1"}<li class="phpmediadb-body-inputerror">{$I18N.INPUT_FIELD} {$curr_key}: {$I18N.ERROR_INPUTSIZE|default:"%ERROR_INPUTSIZE%"}</li>{/if}
		{if $curr_id.regex eq "1"}<li class="phpmediadb-body-inputerror">{$I18N.INPUT_FIELD} {$curr_key}: {$I18N.ERROR_INPUTREGEX|default:"%ERROR_INPUTREGEX%"}</li>{/if}
{/foreach}
		 </ul>
		</td>
	</tr>
{/if}

</table>
</div>
</form>


From nobody at sheep.berlios.de  Tue Mar 15 18:44:55 2005
From: nobody at sheep.berlios.de (bruf)
Date: Tue, 15 Mar 2005 18:44:55 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_agerestrictions.php,1.5,1.6
Message-ID: <200503151744.j2FHitN08432@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv4830/_source/tier.data

Modified Files:
	class.phpmediadb_data_agerestrictions.php 
Log Message:
* Added method exist()
* Removed some syntax mistakes

Index: class.phpmediadb_data_agerestrictions.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_agerestrictions.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- class.phpmediadb_data_agerestrictions.php	15 Mar 2005 13:28:42 -0000	1.5
+++ class.phpmediadb_data_agerestrictions.php	15 Mar 2005 17:44:52 -0000	1.6
@@ -63,13 +63,13 @@
 	public function get( $MediaAgeRestrictionID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'SELECT *
+		$stmt = $conn->prepareStatement( 'SELECT *
 		FROM MediaAgeRestrictions,
-		WHERE MediaAgeRestrictions.MediaAgeRestrictionID = :marid' );
-		$stmt->setString( ':marid', $MediaAgeRestrictionID );
-		$stmt->executeQuery();
+		WHERE MediaAgeRestrictions.MediaAgeRestrictionID = ?' );
+		$stmt->setString( 1, $MediaAgeRestrictionID );
+		$rs = $stmt->executeQuery();
 		
-		return $stmt;
+		return $rs;
 	}
 
 //-----------------------------------------------------------------------------
@@ -80,16 +80,15 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return String
 	 */
-	public function getall()
+	public function getList()
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'SELECT *
+		$stmt = $conn->prepareStatement( 'SELECT *
 		FROM MediaAgeRestrictions,
-		WHERE MediaAgeRestrictions.MediaRestrictionID = :marid' );
-		$stmt->setString( ':marid', '%' );
-		$stmt->executeQuery();
+		WHERE MediaAgeRestrictions.MediaRestrictionID LIKE "%"' );
+		$rs = $stmt->executeQuery();
 		
-		return $stmt;
+		return $rs;
 	}
 
 //-----------------------------------------------------------------------------
@@ -103,12 +102,11 @@
 	public function create( $MediaAgeRestriction )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'INSERT INTO MediaAgeRestrictions
-		( MediaAgeRestriction ) VALUES( :mar )' );
-		$stmt->setString( ':mar', $MediaAgeRestriction );
+		$stmt = $conn->prepareStatement( 'INSERT INTO MediaAgeRestrictions
+		( MediaAgeRestriction ) VALUES( ? )' );
+		$stmt->setString( 1, $MediaAgeRestriction );
 		$stmt->executeUpdate();
 		
-		return $stmt;
 	}
 
 //-----------------------------------------------------------------------------
@@ -123,11 +121,11 @@
 	public function modify( $MediaAgeRestrictionID, $MediaAgeRestriction )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'UPDATE MediaAgeRestrictions
-		SET MediaAgeRestrictions.MediaAgeRestriction = :mar
-		WHERE MediaAgeRestrictions.MediaAgeRestrictionID = :marid' );
-		$stmt->setString( ':mar', $MediaAgeRestriction );
-		$stmt->setString( ':marid', $MediaAgeRestrictionID );
+		$stmt = $conn->prepareStatement( 'UPDATE MediaAgeRestrictions
+		SET MediaAgeRestrictions.MediaAgeRestriction = ?
+		WHERE MediaAgeRestrictions.MediaAgeRestrictionID = ?' );
+		$stmt->setString( 1, $MediaAgeRestriction );
+		$stmt->setString( 2, $MediaAgeRestrictionID );
 		$stmt->executeUpdate();
 		
 	}
@@ -143,11 +141,40 @@
 	public function delete( $MediaAgeRestrictionID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'DELETE FROM MediaAgeRestrictions
-		WHERE MediaAgeRestrictions.MediaAgeRestrictionID = :marid' );
-		$stmt->setString( ':marid', $MediaAgeRestrictionID );
+		$stmt = $conn->prepareStatement( 'DELETE FROM MediaAgeRestrictions
+		WHERE MediaAgeRestrictions.MediaAgeRestrictionID = ?' );
+		$stmt->setString( 1, $MediaAgeRestrictionID );
 		$stmt->executeUpdate();
 		
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns true when the record exists
+	 * and false when the record doesn't exist
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @return Boolean
+	 */
+	public function exist( $MediaAgeRestrictionID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->prepareStatement( 'SELECT COUNT(*)
+		FROM MediaAgeRestrictions,
+		WHERE MediaAgeRestrictions.MediaAgeRestrictionID = ?' );
+		$stmt->setString( 1, $MediaAgeRestrictionID );
+		$rs = $stmt->executeQuery( ResultSet::FETCHMODE_NUM );
+		$rs->next();
+		if( $rs->get(1) >= 1 )
+			{
+			return true;
+			}
+		else
+			{
+			return false;
+			}
 	}
 
 //-----------------------------------------------------------------------------



From nobody at sheep.berlios.de  Tue Mar 15 18:45:15 2005
From: nobody at sheep.berlios.de (bruf)
Date: Tue, 15 Mar 2005 18:45:15 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_audios.php,1.4,1.5
Message-ID: <200503151745.j2FHjFN08477@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv5328/_source/tier.data

Modified Files:
	class.phpmediadb_data_audios.php 
Log Message:
* Added method exist()
* Removed some syntax mistakes

Index: class.phpmediadb_data_audios.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_audios.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- class.phpmediadb_data_audios.php	15 Mar 2005 13:29:33 -0000	1.4
+++ class.phpmediadb_data_audios.php	15 Mar 2005 17:45:13 -0000	1.5
@@ -65,7 +65,7 @@
 	public function get( $AudioDataID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
+		$stmt = $conn->prepareStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
 		FROM AudioDatas a,
 		Languages b,
 		Items c,
@@ -75,7 +75,7 @@
 		MediaAgeRestrictions g,
 		MediaStatus h,
 		BinaryDatas i
-		WHERE a.AudioDataID = :adid 
+		WHERE a.AudioDataID = ? 
 		AND a.LanguageID = b.LanguageID
 		AND a.ItemID = c.ItemID
 		AND c.ItemTypeID = d.ItemTypeID
@@ -84,10 +84,10 @@
 		AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
 		AND c.MediaStatusID = h.MediaStatusID
 		AND c.ItemPicturesID = i.ItemPicturesID' );
-		$stmt->setString( ':adid', $AudioDataID );
-		$stmt->executeQuery();
+		$stmt->setString( 1, $AudioDataID );
+		$rs = $stmt->executeQuery();
 		
-		return $stmt;
+		return $rs;
 	}
 
 //-----------------------------------------------------------------------------
@@ -99,10 +99,10 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return String
 	 */
-	public function getall()
+	public function getList()
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
+		$stmt = $conn->prepareStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
 		FROM AudioDatas a,
 		Languages b,
 		Items c,
@@ -112,7 +112,7 @@
 		MediaAgeRestrictions g,
 		MediaStatus h,
 		BinaryDatas i
-		WHERE a.AudioDataID = :id 
+		WHERE a.AudioDataID LIKE "%" 
 		AND a.LanguageID = b.LanguageID
 		AND a.ItemID = c.ItemID
 		AND c.ItemTypeID = d.ItemTypeID
@@ -121,10 +121,9 @@
 		AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
 		AND c.MediaStatusID = h.MediaStatusID
 		AND c.ItemPicturesID = i.ItemPicturesID' );
-		$stmt->setString( ':id', '%' );
-		$stmt->executeQuery();
+		$rs = $stmt->executeQuery();
 		
-		return $stmt;
+		return $rs;
 	}
 
 //-----------------------------------------------------------------------------
@@ -139,13 +138,13 @@
 	public function delete( $AudioDataID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'DELETE AudioDatas, Items, BinaryDatas, Categories_has_Items
+		$stmt = $conn->prepareStatement( 'DELETE AudioDatas, Items, BinaryDatas, Categories_has_Items
 		FROM AudioDatas, Items, BinaryDatas, Categories_has_Items
-		WHERE AudioDatas.AudioDataID = :adid
+		WHERE AudioDatas.AudioDataID = ?
 		AND AudioDatas.ItemID = Items.ItemID
 		AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID
 		AND Items.ItemID = Categories_has_Items.ItemID' );
-		$stmt->setString( ':adid', $AudioDataID );
+		$stmt->setString( 1, $AudioDataID );
 		$stmt->executeUpdate();
 	}
 
@@ -168,20 +167,20 @@
 	$ItemRelease, $ItemMediaName, $ItemComment )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'INSERT INTO AudioDatas ( AudioDataMediaCount, AudioDataDiscID ) VALUES( :admc, :addi )' );
-		$stmt->setString( ':admc', $AudioDataMediaCount );
-		$stmt->setString( ':addi', $AudioDataDiscID );
+		$stmt = $conn->prepareStatement( 'INSERT INTO AudioDatas ( AudioDataMediaCount, AudioDataDiscID ) VALUES( ?, ? )' );
+		$stmt->setString( 1, $AudioDataMediaCount );
+		$stmt->setString( 2, $AudioDataDiscID );
 		$stmt->executeUpdate();
 		
-		$stmt = $conn->preparedStatement( 'INSERT INTO Items
+		$stmt = $conn->prepareStatement( 'INSERT INTO Items
 		( ItemTitle, ItemOriginalTitle, ItemRelease, ItemMediaName, ItemCreationDate, ItemModificationDate, ItemComment )
-		VALUES( :it, :iot, :ir, :imn, now(), now(), :ic )' );
-		$stmt->setString( ':it', $ItemTitle );
-		$stmt->setString( ':iot', $ItemOriginalTitle );
-		$stmt->setString( ':ir', $ItemRelease );
-		$stmt->setString( ':imn', $ItemMediaName );
-		$stmt->setString( ':ic' , $ItemComment );
-		$stmt->executeUpdate(); 
+		VALUES( ?, ?, ?, ?, now(), now(), ? )' );
+		$stmt->setString( 1, $ItemTitle );
+		$stmt->setString( 2, $ItemOriginalTitle );
+		$stmt->setString( 3, $ItemRelease );
+		$stmt->setString( 4, $ItemMediaName );
+		$stmt->setString( 5, $ItemComment );
+		$stmt->executeUpdate();
 		
 	}
 
@@ -211,7 +210,7 @@
 	$MediaAgeRestrictionID, $MediaStatusID, $ItemPicturesID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'UPDATE AudioDatas,
+		$stmt = $conn->prepareStatement( 'UPDATE AudioDatas,
 		Languages,
 		Items,
 		ItemTypes,
@@ -220,20 +219,20 @@
 		MediaAgeRestrictions,
 		MediaStatus,
 		BinaryDatas
-		SET AudioDatas.AudioDataMediaCount = :admc,
-		AudioDatas.AudioDataDiscID = :addid,
-		Items.ItemTitle = :it,
-		Items.ItemOriginalTitle = :iot,
-		Items.ItemRelease = :ir,
-		Items.ItemMediaName = :imn,
+		SET AudioDatas.AudioDataMediaCount = ?,
+		AudioDatas.AudioDataDiscID = ?,
+		Items.ItemTitle = ?,
+		Items.ItemOriginalTitle = ?,
+		Items.ItemRelease = ?,
+		Items.ItemMediaName = ?,
 		Items.ItemModificationDate = now(),
-		Items.ItemComment = :ic,
-		Items.MediaCodecID = :mcid,
-		Items.MediaFormatID = :mfid,
-		Items.MediaAgeRestrictionID = :marid,
-		Items.MediaStatusID = :msid,
-		Items.ItemPicturesID = :ipid
-		WHERE AudioDatas.AudioDataID = :adid 
+		Items.ItemComment = ?,
+		Items.MediaCodecID = ?,
+		Items.MediaFormatID = ?,
+		Items.MediaAgeRestrictionID = ?,
+		Items.MediaStatusID = ?,
+		Items.ItemPicturesID = ?
+		WHERE AudioDatas.AudioDataID = ? 
 		AND AudioDatas.LanguageID = Languages.LanguageID
 		AND AudioDatas.ItemID = Items.ItemID
 		AND Items.ItemTypeID = ItemTypes.ItemTypeID
@@ -242,21 +241,50 @@
 		AND Items.MediaAgeRestrictionID = MediaAgeRestrictions.MediaAgeRestrictionID
 		AND Items.MediaStatusID = MediaStatus.MediaStatusID
 		AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID' );
-		$stmt->setString( ':admc', $AudioDataMediaCount );
-		$stmt->setString( ':addid', $AudioDataDiscID );
-		$stmt->setString( ':it', $ItemTitle );
-		$stmt->setString( ':iot', $ItemOriginalTitle );
-		$stmt->setString( ':ir', $ItemRelease );
-		$stmt->setString( ':imn', $ItemMediaName );
-		$stmt->setString( ':ic', $ItemComment );
-		$stmt->setString( ':mcid', $MediaCodecID );
-		$stmt->setString( ':mfid', $MediaFormatID );
-		$stmt->setString( ':marid', $MediaAgeRestrictionID );
-		$stmt->setString( ':msid', $MediaStatusID );
-		$stmt->setString( ':ipid', $ItemPicturesID );
-		$stmt->setString( ':adid', $AudioDataID );
+		$stmt->setString( 1, $AudioDataMediaCount );
+		$stmt->setString( 2, $AudioDataDiscID );
+		$stmt->setString( 3, $ItemTitle );
+		$stmt->setString( 4, $ItemOriginalTitle );
+		$stmt->setString( 5, $ItemRelease );
+		$stmt->setString( 6, $ItemMediaName );
+		$stmt->setString( 7, $ItemComment );
+		$stmt->setString( 8, $MediaCodecID );
+		$stmt->setString( 9, $MediaFormatID );
+		$stmt->setString( 10, $MediaAgeRestrictionID );
+		$stmt->setString( 11, $MediaStatusID );
+		$stmt->setString( 12, $ItemPicturesID );
+		$stmt->setString( 13, $AudioDataID );
 		$stmt->executeUpdate();
 		
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns true when the record exists
+	 * and false when the record doesn't exist
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @return Boolean
+	 */
+	public function exist( $AudioDataID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->prepareStatement( 'SELECT COUNT(*)
+		FROM AudioDatas,
+		WHERE AudioDatas.AudioDataID = ?' );
+		$stmt->setString( 1, $AudioDataID );
+		$rs = $stmt->executeQuery( ResultSet::FETCHMODE_NUM );
+		$rs->next();
+		if( $rs->get(1) >= 1 )
+			{
+			return true;
+			}
+		else
+			{
+			return false;
+			}
 	}
 
 //-----------------------------------------------------------------------------



From nobody at sheep.berlios.de  Tue Mar 15 18:45:39 2005
From: nobody at sheep.berlios.de (bruf)
Date: Tue, 15 Mar 2005 18:45:39 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_categories.php,1.2,1.3
Message-ID: <200503151745.j2FHjdN08488@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv5442/_source/tier.data

Modified Files:
	class.phpmediadb_data_categories.php 
Log Message:
* Added method exist()
* Removed some syntax mistakes

Index: class.phpmediadb_data_categories.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_categories.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- class.phpmediadb_data_categories.php	2 Mar 2005 15:27:13 -0000	1.2
+++ class.phpmediadb_data_categories.php	15 Mar 2005 17:45:32 -0000	1.3
@@ -51,6 +51,133 @@
 	{
 		/* nothing to do yet */
 	}
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns a specified record from the table Categories
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @return String
+	 */
+	public function get( $CategoryID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->prepareStatement( 'SELECT *
+		FROM Categories,
+		WHERE Categories.CategoryID = ?' );
+		$stmt->setString( 1, $CategoryID );
+		$rs = $stmt->executeQuery();
+		
+		return $rs;
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns all records from the table MediaAgeRestrictions
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @return String
+	 */
+	public function getList()
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->prepareStatement( 'SELECT *
+		FROM Categories,
+		WHERE Categories.CategoryID LIKE "%"' );
+		$rs = $stmt->executeQuery();
+		
+		return $rs;
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function creates a new record in the table MediaAgeRestrictions
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param String
+	 */
+	public function create( $CategoryName )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->prepareStatement( 'INSERT INTO Categories
+		( CategoryName ) VALUES( ? )' );
+		$stmt->setString( 1, $CategoryName );
+		$stmt->executeUpdate();
+		
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function modifies a specified record from the table MediaAgeRestrictions
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @param String
+	 */
+	public function modify( $CategoryID, $CategoryName )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->prepareStatement( 'UPDATE Categories
+		SET Categories.CategoryName = ?
+		WHERE Categories.CategoryID = ?' );
+		$stmt->setString( 1, $CategoryName );
+		$stmt->setString( 2, $CategoryID );
+		$stmt->executeUpdate();
+		
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function deletes a specified record from the table MediaAgeRestrictions
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 */
+	public function delete( $CategoryID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->prepareStatement( 'DELETE FROM Categories
+		WHERE Categories.CategoryID = ?' );
+		$stmt->setString( 1, $CategoryID );
+		$stmt->executeUpdate();
+		
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns true when the record exists
+	 * and false when the record doesn't exist
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @return Boolean
+	 */
+	public function exist( $CategoryID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->prepareStatement( 'SELECT COUNT(*)
+		FROM Categories,
+		WHERE Categories.CategoryID = ?' );
+		$stmt->setString( 1, $CategoryID );
+		$rs = $stmt->executeQuery( ResultSet::FETCHMODE_NUM );
+		$rs->next();
+		if( $rs->get(1) >= 1 )
+			{
+			return true;
+			}
+		else
+			{
+			return false;
+			}
+	}
+
+//-----------------------------------------------------------------------------
 }
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Tue Mar 15 18:45:54 2005
From: nobody at sheep.berlios.de (bruf)
Date: Tue, 15 Mar 2005 18:45:54 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_codecs.php,1.6,1.7
Message-ID: <200503151745.j2FHjsN08503@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv5484/_source/tier.data

Modified Files:
	class.phpmediadb_data_codecs.php 
Log Message:
* Added method exist()
* Removed some syntax mistakes

Index: class.phpmediadb_data_codecs.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_codecs.php,v
retrieving revision 1.6
retrieving revision 1.7
diff -u -d -r1.6 -r1.7
--- class.phpmediadb_data_codecs.php	15 Mar 2005 13:30:13 -0000	1.6
+++ class.phpmediadb_data_codecs.php	15 Mar 2005 17:45:52 -0000	1.7
@@ -63,13 +63,13 @@
 	public function get( $MediaCodecID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'SELECT *
+		$stmt = $conn->prepareStatement( 'SELECT *
 		FROM MediaCodecs,
-		WHERE MediaCodecs.MediaCodecID = :mcid' );
-		$stmt->setString( ':mcid', $MediaCodecID );
-		$stmt->executeQuery();
+		WHERE MediaCodecs.MediaCodecID = ?' );
+		$stmt->setString( 1, $MediaCodecID );
+		$rs = $stmt->executeQuery();
 		
-		return $stmt;
+		return $rs;
 	}
 
 //-----------------------------------------------------------------------------
@@ -80,16 +80,15 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return String
 	 */
-	public function getall()
+	public function getList()
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'SELECT *
+		$stmt = $conn->prepareStatement( 'SELECT *
 		FROM MediaCodecs,
-		WHERE MediaCodecs.MediaCodecID = :mcid' );
-		$stmt->setString( ':mcid', '%' );
-		$stmt->executeQuery();
+		WHERE MediaCodecs.MediaCodecID LIKE "%"' );
+		$rs = $stmt->executeQuery();
 		
-		return $stmt;
+		return $rs;
 	}
 
 //-----------------------------------------------------------------------------
@@ -105,12 +104,12 @@
 	public function create( $MediaCodecName, $MediaCodecBitrate, $ItemTypeID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'INSERT INTO MediaCodecs
+		$stmt = $conn->prepareStatement( 'INSERT INTO MediaCodecs
 		( MediaCodecName, MediaCodecBitrate, ItemTypeID )
-		VALUES( :mcn, :mcb, :itid )' );
-		$stmt->setString( ':mcn', $MediaCodecName );
-		$stmt->setString( ':mcb', $MediaCodecBitrate );
-		$stmt->setString( ':itid', $ItemTypeID );
+		VALUES( ?, ?, ? )' );
+		$stmt->setString( 1, $MediaCodecName );
+		$stmt->setString( 2, $MediaCodecBitrate );
+		$stmt->setString( 3, $ItemTypeID );
 		$stmt->executeUpdate();
 		
 	}
@@ -129,15 +128,15 @@
 	public function modify( $MediaCodecID, $MediaCodecName, $MediaCodecBitrate, $ItemTypeID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'UPDATE MediaCodecs
-		SET MediaCodecs.MediaCodecName = :mcn,
-		MediaCodecs.MediaCodecBitrate = :mcb,
-		MediaCodecs.ItemTypeID = :itid
-		WHERE MediaCodecs.MediaCodecID = :mcid' );
-		$stmt->setString( ':mcn', $MediaCodecName );
-		$stmt->setString( ':mcb', $MediaCodecBitrate );
-		$stmt->setString( ':itid', $ItemTypeID );
-		$stmt->setString( ':mcid', $MediaCodecID );
+		$stmt = $conn->prepareStatement( 'UPDATE MediaCodecs
+		SET MediaCodecs.MediaCodecName = ?,
+		MediaCodecs.MediaCodecBitrate = ?,
+		MediaCodecs.ItemTypeID = ?
+		WHERE MediaCodecs.MediaCodecID = ?' );
+		$stmt->setString( 1, $MediaCodecName );
+		$stmt->setString( 2, $MediaCodecBitrate );
+		$stmt->setString( 3, $ItemTypeID );
+		$stmt->setString( 4, $MediaCodecID );
 		$stmt->executeUpdate();
 		
 	}
@@ -153,11 +152,40 @@
 	public function delete( $MediaCodecID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'DELETE FROM MediaCodecs
-		WHERE MediaCodecs.MediaCodecID = :mcid' );
-		$stmt->setString( ':mcid', $MediaCodecID );
+		$stmt = $conn->prepareStatement( 'DELETE FROM MediaCodecs
+		WHERE MediaCodecs.MediaCodecID = ?' );
+		$stmt->setString( 1, $MediaCodecID );
 		$stmt->executeUpdate();
 		
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns true when the record exists
+	 * and false when the record doesn't exist
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @return Boolean
+	 */
+	public function exist( $MediaCodecID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->prepareStatement( 'SELECT COUNT(*)
+		FROM MediaCodecs,
+		WHERE MediaCodecs.MediaCodecID = ?' );
+		$stmt->setString( 1, $MediaCodecID );
+		$rs = $stmt->executeQuery( ResultSet::FETCHMODE_NUM );
+		$rs->next();
+		if( $rs->get(1) >= 1 )
+			{
+			return true;
+			}
+		else
+			{
+			return false;
+			}
 	}
 
 //-----------------------------------------------------------------------------



From nobody at sheep.berlios.de  Tue Mar 15 18:46:09 2005
From: nobody at sheep.berlios.de (bruf)
Date: Tue, 15 Mar 2005 18:46:09 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_formats.php,1.6,1.7
Message-ID: <200503151746.j2FHk9N08525@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv5525/_source/tier.data

Modified Files:
	class.phpmediadb_data_formats.php 
Log Message:
* Added method exist()
* Removed some syntax mistakes

Index: class.phpmediadb_data_formats.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_formats.php,v
retrieving revision 1.6
retrieving revision 1.7
diff -u -d -r1.6 -r1.7
--- class.phpmediadb_data_formats.php	15 Mar 2005 13:30:23 -0000	1.6
+++ class.phpmediadb_data_formats.php	15 Mar 2005 17:46:07 -0000	1.7
@@ -63,13 +63,13 @@
 	public function get( $MediaFormatID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'SELECT *
+		$stmt = $conn->prepareStatement( 'SELECT *
 		FROM MediaFormats,
-		WHERE MediaFormats.MediaFormatID = :mfid' );
-		$stmt->setString( ':mfid', $MediaFormatID );
-		$stmt->executeQuery();
+		WHERE MediaFormats.MediaFormatID = ?' );
+		$stmt->setString( 1, $MediaFormatID );
+		$rs = $stmt->executeQuery();
 		
-		return $stmt;
+		return $rs;
 	}
 
 //-----------------------------------------------------------------------------
@@ -80,16 +80,15 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return String
 	 */
-	public function getall()
+	public function getList()
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'SELECT *
+		$stmt = $conn->prepareStatement( 'SELECT *
 		FROM MediaFormats,
-		WHERE MediaFormats.MediaFormatID = :mfid' );
-		$stmt->setString( ':mfid', '%' );
-		$stmt->executeQuery();
+		WHERE MediaFormats.MediaFormatID LIKE "%"' );
+		$rs = $stmt->executeQuery();
 		
-		return $stmt;
+		return $rs;
 	}
 
 //-----------------------------------------------------------------------------
@@ -104,10 +103,10 @@
 	public function create( $MediaFormatName, $ItemTypeID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'INSERT INTO MediaFormats
-		( MediaFormatName, ItemTypeID ) VALUES( :mfn, :itid )' );
-		$stmt->setString( ':mfn', $MediaFormatName );
-		$stmt->setString( ':itid', $ItemTypeID );
+		$stmt = $conn->prepareStatement( 'INSERT INTO MediaFormats
+		( MediaFormatName, ItemTypeID ) VALUES( ?, ? )' );
+		$stmt->setString( 1, $MediaFormatName );
+		$stmt->setString( 2, $ItemTypeID );
 		$stmt->executeUpdate();
 		
 	}
@@ -125,13 +124,13 @@
 	public function modify( $MediaFormatID, $MediaFormatName, $ItemTypeID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'UPDATE MediaFormats
-		SET MediaFormats.MediaFormatName = :mfn,
-		MediaFormats.ItemTypeID = :itid
-		WHERE MediaFormats.MediaFormatID = :mfid' );
-		$stmt->setString( ':mfn', $MediaFormatName );
-		$stmt->setString( ':itid', $ItemTypeID );
-		$stmt->setString( ':mfid', $MediaFormatID );
+		$stmt = $conn->prepareStatement( 'UPDATE MediaFormats
+		SET MediaFormats.MediaFormatName = ?,
+		MediaFormats.ItemTypeID = ?
+		WHERE MediaFormats.MediaFormatID = ?' );
+		$stmt->setString( 1, $MediaFormatName );
+		$stmt->setString( 2, $ItemTypeID );
+		$stmt->setString( 3, $MediaFormatID );
 		$stmt->executeUpdate();
 		
 	}
@@ -147,11 +146,40 @@
 	public function delete( $MediaFormatID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'DELETE FROM MediaFormats
-		WHERE MediaFormats.MediaFormatID = :mfid' );
-		$stmt->setString( ':mfid', $MediaFormatID );
+		$stmt = $conn->prepareStatement( 'DELETE FROM MediaFormats
+		WHERE MediaFormats.MediaFormatID = ?' );
+		$stmt->setString( 1, $MediaFormatID );
 		$stmt->executeUpdate();
 		
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns true when the record exists
+	 * and false when the record doesn't exist
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @return Boolean
+	 */
+	public function exist( $MediaFormatID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->prepareStatement( 'SELECT COUNT(*)
+		FROM MediaFormats,
+		WHERE MediaFormats.MediaFormatID = ?' );
+		$stmt->setString( 1, $MediaFormatID );
+		$rs = $stmt->executeQuery( ResultSet::FETCHMODE_NUM );
+		$rs->next();
+		if( $rs->get(1) >= 1 )
+			{
+			return true;
+			}
+		else
+			{
+			return false;
+			}
 	}
 
 //-----------------------------------------------------------------------------



From nobody at sheep.berlios.de  Tue Mar 15 18:46:22 2005
From: nobody at sheep.berlios.de (bruf)
Date: Tue, 15 Mar 2005 18:46:22 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_prints.php,1.4,1.5
Message-ID: <200503151746.j2FHkMN08533@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv5555/_source/tier.data

Modified Files:
	class.phpmediadb_data_prints.php 
Log Message:
* Added method exist()
* Removed some syntax mistakes

Index: class.phpmediadb_data_prints.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_prints.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- class.phpmediadb_data_prints.php	15 Mar 2005 13:29:43 -0000	1.4
+++ class.phpmediadb_data_prints.php	15 Mar 2005 17:46:19 -0000	1.5
@@ -64,7 +64,7 @@
 	public function get( $PrintDataID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
+		$stmt = $conn->prepareStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
 		FROM PrintDatas a,
 		Languages b,
 		Items c,
@@ -74,7 +74,7 @@
 		MediaAgeRestrictions g,
 		MediaStatus h,
 		BinaryDatas i
-		WHERE a.PrintDataID = :pdid 
+		WHERE a.PrintDataID = ? 
 		AND a.LanguageID = b.LanguageID
 		AND a.ItemID = c.ItemID
 		AND c.ItemTypeID = d.ItemTypeID
@@ -83,10 +83,10 @@
 		AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
 		AND c.MediaStatusID = h.MediaStatusID
 		AND c.ItemPicturesID = i.ItemPicturesID' );
-		$stmt->setString( ':pdid', $PrintDataID );
-		$stmt->executeQuery();
+		$stmt->setString( 1, $PrintDataID );
+		$rs = $stmt->executeQuery();
 		
-		return $stmt;
+		return $rs;
 	}
 
 //-----------------------------------------------------------------------------
@@ -98,10 +98,10 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return String
 	 */
-	public function getall()
+	public function getList()
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
+		$stmt = $conn->prepareStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
 		FROM PrintDatas a,
 		Languages b,
 		Items c,
@@ -111,7 +111,7 @@
 		MediaAgeRestrictions g,
 		MediaStatus h,
 		BinaryDatas i
-		WHERE a.PrintDataID = :pdid 
+		WHERE a.PrintDataID LIKE "%"
 		AND a.LanguageID = b.LanguageID
 		AND a.ItemID = c.ItemID
 		AND c.ItemTypeID = d.ItemTypeID
@@ -120,10 +120,9 @@
 		AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
 		AND c.MediaStatusID = h.MediaStatusID
 		AND c.ItemPicturesID = i.ItemPicturesID' );
-		$stmt->setString( ':pdid', '%' );
-		$stmt->executeQuery();
+		$rs = $stmt->executeQuery();
 		
-		return $stmt;
+		return $rs;
 	}
 
 //-----------------------------------------------------------------------------
@@ -138,13 +137,13 @@
 	public function delete( $PrintDataID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'DELETE PrintDatas, Items, BinaryDatas, Categories_has_Items
+		$stmt = $conn->prepareStatement( 'DELETE PrintDatas, Items, BinaryDatas, Categories_has_Items
 		FROM PrintDatas, Items, BinaryDatas, Categories_has_Items
-		WHERE PrintDatas.PrintDataID = :pdid
+		WHERE PrintDatas.PrintDataID = ?
 		AND PrintDatas.ItemID = Items.ItemID
 		AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID
 		AND Items.ItemID = Categories_has_Items.ItemID' );
-		$stmt->setString( ':pdid', $PrintDataID );
+		$stmt->setString( 1, $PrintDataID );
 		$stmt->executeUpdate();
 	}
 
@@ -167,19 +166,19 @@
 	$ItemRelease, $ItemMediaName, $ItemComment )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'INSERT INTO PrintDatas ( PrintDataMediaCount, PrintDataISBN ) VALUES( :pdmc, :pdisbn )' );
-		$stmt->setString( ':pdmc', $PrintDataMediaCount );
-		$stmt->setString( ':pdisbn', $PrintDataISBN );
+		$stmt = $conn->prepareStatement( 'INSERT INTO PrintDatas ( PrintDataMediaCount, PrintDataISBN ) VALUES( ?, ? )' );
+		$stmt->setString( 1, $PrintDataMediaCount );
+		$stmt->setString( 2, $PrintDataISBN );
 		$stmt->executeUpdate();
 		
-		$stmt = $conn->preparedStatement( 'INSERT INTO Items
+		$stmt = $conn->prepareStatement( 'INSERT INTO Items
 		( ItemTitle, ItemOriginalTitle, ItemRelease, ItemMediaName, ItemCreationDate, ItemModificationDate, ItemComment )
-		VALUES( :it, :iot, :ir, :imn, now(), now(), :ic )' );
-		$stmt->setString( ':it', $ItemTitle );
-		$stmt->setString( ':iot', $ItemOriginalTitle );
-		$stmt->setString( ':ir', $ItemRelease );
-		$stmt->setString( ':imn', $ItemMediaName );
-		$stmt->setString( ':ic' , $ItemComment );
+		VALUES( ?, ?, ?, ?, now(), now(), ? )' );
+		$stmt->setString( 1, $ItemTitle );
+		$stmt->setString( 2, $ItemOriginalTitle );
+		$stmt->setString( 3, $ItemRelease );
+		$stmt->setString( 4, $ItemMediaName );
+		$stmt->setString( 5, $ItemComment );
 		$stmt->executeUpdate(); 
 		
 	}
@@ -210,7 +209,7 @@
 	$MediaAgeRestrictionID, $MediaStatusID, $ItemPicturesID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'UPDATE PrintDatas,
+		$stmt = $conn->prepareStatement( 'UPDATE PrintDatas,
 		Languages,
 		Items,
 		ItemTypes,
@@ -219,20 +218,20 @@
 		MediaAgeRestrictions,
 		MediaStatus,
 		BinaryDatas
-		SET PrintDatas.PrintDataMediaCount = :pdmc,
-		PrintDatas.PrintDataISBN = :pdisbn,
-		Items.ItemTitle = :it,
-		Items.ItemOriginalTitle = :iot,
-		Items.ItemRelease = :ir,
-		Items.ItemMediaName = :imn,
-		Items.ItemModificationDate = now(,
-		Items.ItemComment = :ic
-		Items.MediaCodecID = :mcid,
-		Items.MediaFormatID = :mfid,
-		Items.MediaAgeRestrictionID = :marid,
-		Items.MediaStatusID = :msid,
-		Items.ItemPicturesID = :ipid
-		WHERE PrintDatas.PrintDataID = :pdid 
+		SET PrintDatas.PrintDataMediaCount = ?,
+		PrintDatas.PrintDataISBN = ?,
+		Items.ItemTitle = ?,
+		Items.ItemOriginalTitle = ?,
+		Items.ItemRelease = ?,
+		Items.ItemMediaName = ?,
+		Items.ItemModificationDate = now(),
+		Items.ItemComment = ?,
+		Items.MediaCodecID = ?,
+		Items.MediaFormatID = ?,
+		Items.MediaAgeRestrictionID = ?,
+		Items.MediaStatusID = ?,
+		Items.ItemPicturesID = ?
+		WHERE PrintDatas.PrintDataID = ? 
 		AND PrintDatas.LanguageID = Languages.LanguageID
 		AND PrintDatas.ItemID = Items.ItemID
 		AND Items.ItemTypeID = ItemTypes.ItemTypeID
@@ -241,21 +240,50 @@
 		AND Items.MediaAgeRestrictionID = MediaAgeRestrictions.MediaAgeRestrictionID
 		AND Items.MediaStatusID = MediaStatus.MediaStatusID
 		AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID' );
-		$stmt->setString( ':pdmc', $PrintDataMediaCount );
-		$stmt->setString( ':pdisbn', $PrintDataISBN );
-		$stmt->setString( ':it', $ItemTitle );
-		$stmt->setString( ':iot', $ItemOriginalTitle );
-		$stmt->setString( ':ir', $ItemRelease );
-		$stmt->setString( ':imn', $ItemMediaName );
-		$stmt->setString( ':ic', $ItemComment );
-		$stmt->setString( ':mcid', $MediaCodecID );
-		$stmt->setString( ':mfid', $MediaFormatID );
-		$stmt->setString( ':marid', $MediaAgeRestrictionID );
-		$stmt->setString( ':msid', $MediaStatusID );
-		$stmt->setString( ':ipid', $ItemPicturesID );
-		$stmt->setString( ':pdid', $PrintDataID );
+		$stmt->setString( 1, $PrintDataMediaCount );
+		$stmt->setString( 2, $PrintDataISBN );
+		$stmt->setString( 3, $ItemTitle );
+		$stmt->setString( 4, $ItemOriginalTitle );
+		$stmt->setString( 5, $ItemRelease );
+		$stmt->setString( 6, $ItemMediaName );
+		$stmt->setString( 7, $ItemComment );
+		$stmt->setString( 8, $MediaCodecID );
+		$stmt->setString( 9, $MediaFormatID );
+		$stmt->setString( 10, $MediaAgeRestrictionID );
+		$stmt->setString( 11, $MediaStatusID );
+		$stmt->setString( 12, $ItemPicturesID );
+		$stmt->setString( 13, $PrintDataID );
 		$stmt->executeUpdate();
 		
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns true when the record exists
+	 * and false when the record doesn't exist
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @return Boolean
+	 */
+	public function exist( $PrintDataID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->prepareStatement( 'SELECT COUNT(*)
+		FROM PrintDatas,
+		WHERE PrintDatas.PrintDataID = ?' );
+		$stmt->setString( 1, $PrintDataID );
+		$rs = $stmt->executeQuery( ResultSet::FETCHMODE_NUM );
+		$rs->next();
+		if( $rs->get(1) >= 1 )
+			{
+			return true;
+			}
+		else
+			{
+			return false;
+			}
 	}
 
 //-----------------------------------------------------------------------------



From nobody at sheep.berlios.de  Tue Mar 15 18:46:36 2005
From: nobody at sheep.berlios.de (bruf)
Date: Tue, 15 Mar 2005 18:46:36 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_status.php,1.5,1.6
Message-ID: <200503151746.j2FHkaN08549@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv5594/_source/tier.data

Modified Files:
	class.phpmediadb_data_status.php 
Log Message:
* Added method exist()
* Removed some syntax mistakes

Index: class.phpmediadb_data_status.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_status.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- class.phpmediadb_data_status.php	15 Mar 2005 13:30:34 -0000	1.5
+++ class.phpmediadb_data_status.php	15 Mar 2005 17:46:33 -0000	1.6
@@ -63,13 +63,13 @@
 	public function get( $MediaStatusID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'SELECT *
+		$stmt = $conn->prepareStatement( 'SELECT *
 		FROM MediaStatus,
-		WHERE MediaStatus.MediaStatusID = :msid' );
-		$stmt->setString( ':msid', $MediaStatusID );
-		$stmt->executeQuery();
+		WHERE MediaStatus.MediaStatusID = ?' );
+		$stmt->setString( 1, $MediaStatusID );
+		$rs = $stmt->executeQuery();
 		
-		return $stmt;
+		return $rs;
 	}
 
 //-----------------------------------------------------------------------------
@@ -80,16 +80,15 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return String
 	 */
-	public function getall()
+	public function getList()
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'SELECT *
+		$stmt = $conn->prepareStatement( 'SELECT *
 		FROM MediaStatus,
-		WHERE MediaStatus.MediaStatusID = :msid' );
-		$stmt->setString( ':msid', '%' );
-		$stmt->executeQuery();
+		WHERE MediaStatus.MediaStatusID LIKE "%"' );
+		$rs = $stmt->executeQuery();
 		
-		return $stmt;
+		return $rs;
 	}
 
 //-----------------------------------------------------------------------------
@@ -105,12 +104,12 @@
 	public function create( $MediaStatus, $MediaStatusOwner, $MediaStatusHolder )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'INSERT INTO MediaStatus
+		$stmt = $conn->prepareStatement( 'INSERT INTO MediaStatus
 		( MediaStatus, MediaStatusOwner, MediaStatusHolder )
-		VALUES( :ms, :mso, :msh )' );
-		$stmt->setString( ':ms', $MediaStatus );
-		$stmt->setString( ':mso', $MediaStatusOwner );
-		$stmt->setString( ':msh', $MediaStatusHolder );
+		VALUES( ?, ?, ? )' );
+		$stmt->setString( 1, $MediaStatus );
+		$stmt->setString( 2, $MediaStatusOwner );
+		$stmt->setString( 3, $MediaStatusHolder );
 		$stmt->executeUpdate();
 		
 	}
@@ -129,15 +128,15 @@
 	public function modify( $MediaStatusID, $MediaStatus, $MediaStatusOwner, $MediaStatusHolder )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'UPDATE MediaStatus
-		SET MediaStatus.MediaStatus = :ms,
-		MediaStatus.MediaStatusOwner = :mso,
-		MediaStatus.MediaStatusHolder = :msh
-		WHERE MediaStatus.MediaStatusID = :msid' );
-		$stmt->setString( ':ms', $MediaStatus );
-		$stmt->setString( ':mso', $MediaStatusOwner );
-		$stmt->setString( ':msh', $MediaStatusHolder );
-		$stmt->setString( ':msid', $MediaStatusID );
+		$stmt = $conn->prepareStatement( 'UPDATE MediaStatus
+		SET MediaStatus.MediaStatus = ?,
+		MediaStatus.MediaStatusOwner = ?,
+		MediaStatus.MediaStatusHolder = ?
+		WHERE MediaStatus.MediaStatusID = ?' );
+		$stmt->setString( 1, $MediaStatus );
+		$stmt->setString( 2, $MediaStatusOwner );
+		$stmt->setString( 3, $MediaStatusHolder );
+		$stmt->setString( 4, $MediaStatusID );
 		$stmt->executeUpdate();
 		
 	}
@@ -153,11 +152,40 @@
 	public function delete( $MediaStatusID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'DELETE FROM MediaStatus
-		WHERE MediaStatus.MediaStatusID = :msid' );
-		$stmt->setString( ':msid', $MediaStatusID );
+		$stmt = $conn->prepareStatement( 'DELETE FROM MediaStatus
+		WHERE MediaStatus.MediaStatusID = ?' );
+		$stmt->setString( 1, $MediaStatusID );
 		$stmt->executeUpdate();
 		
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns true when the record exists
+	 * and false when the record doesn't exist
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @return Boolean
+	 */
+	public function exist( $MediaStatusID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->prepareStatement( 'SELECT COUNT(*)
+		FROM MediaStatus,
+		WHERE MediaStatus.MediaStatusID = ?' );
+		$stmt->setString( 1, $MediaStatusID );
+		$rs = $stmt->executeQuery( ResultSet::FETCHMODE_NUM );
+		$rs->next();
+		if( $rs->get(1) >= 1 )
+			{
+			return true;
+			}
+		else
+			{
+			return false;
+			}
 	}
 
 //-----------------------------------------------------------------------------



From nobody at sheep.berlios.de  Tue Mar 15 18:46:50 2005
From: nobody at sheep.berlios.de (bruf)
Date: Tue, 15 Mar 2005 18:46:50 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_videos.php,1.4,1.5
Message-ID: <200503151746.j2FHkoN08558@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv5632/_source/tier.data

Modified Files:
	class.phpmediadb_data_videos.php 
Log Message:
* Added method exist()
* Removed some syntax mistakes

Index: class.phpmediadb_data_videos.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_videos.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- class.phpmediadb_data_videos.php	15 Mar 2005 13:29:54 -0000	1.4
+++ class.phpmediadb_data_videos.php	15 Mar 2005 17:46:48 -0000	1.5
@@ -64,7 +64,7 @@
 	public function get( $VideoDataID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
+		$stmt = $conn->prepareStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
 		FROM VideoDatas a,
 		Languages b,
 		Items c,
@@ -74,7 +74,7 @@
 		MediaAgeRestrictions g,
 		MediaStatus h,
 		BinaryDatas i
-		WHERE a.VideoDataID = :vdid 
+		WHERE a.VideoDataID = ? 
 		AND a.LanguageID = b.LanguageID
 		AND a.ItemID = c.ItemID
 		AND c.ItemTypeID = d.ItemTypeID
@@ -83,10 +83,10 @@
 		AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
 		AND c.MediaStatusID = h.MediaStatusID
 		AND c.ItemPicturesID = i.ItemPicturesID' );
-		$stmt->setString( ':vdid', $VideoDataID );
-		$stmt->executeQuery();
+		$stmt->setString( 1, $VideoDataID );
+		$rs = $stmt->executeQuery();
 		
-		return $stmt;
+		return $rs;
 	}
 
 //-----------------------------------------------------------------------------
@@ -98,10 +98,10 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return String
 	 */
-	public function getall()
+	public function getList()
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
+		$stmt = $conn->prepareStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
 		FROM VideoDatas a,
 		Languages b,
 		Items c,
@@ -111,7 +111,7 @@
 		MediaAgeRestrictions g,
 		MediaStatus h,
 		BinaryDatas i
-		WHERE a.VideoDataID = :vdid 
+		WHERE a.VideoDataID LIKE "%" 
 		AND a.LanguageID = b.LanguageID
 		AND a.ItemID = c.ItemID
 		AND c.ItemTypeID = d.ItemTypeID
@@ -120,10 +120,9 @@
 		AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
 		AND c.MediaStatusID = h.MediaStatusID
 		AND c.ItemPicturesID = i.ItemPicturesID' );
-		$stmt->setString( ':vdid', '%' );
-		$stmt->executeQuery();
+		$rs = $stmt->executeQuery();
 		
-		return $stmt;
+		return $rs;
 		
 	}
 
@@ -139,13 +138,13 @@
 	public function delete( $VideoDataID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'DELETE VideoDatas, Items, BinaryDatas, Categories_has_Items
+		$stmt = $conn->prepareStatement( 'DELETE VideoDatas, Items, BinaryDatas, Categories_has_Items
 		FROM AudioDatas, Items, BinaryDatas, Categories_has_Items
-		WHERE VideoDatas.VideoDataID = :vdid
+		WHERE VideoDatas.VideoDataID = ?
 		AND VideoDatas.ItemID = Items.ItemID
 		AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID
 		AND Items.ItemID = Categories_has_Items.ItemID' );
-		$stmt->setString( ':vdid', $VideoDataID );
+		$stmt->setString( 1, $VideoDataID );
 		$stmt->executeUpdate();
 		
 	}
@@ -169,19 +168,19 @@
 	$ItemRelease, $ItemMediaName, $ItemComment )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'INSERT INTO VideoDatas ( VideoDataMediaCount, VideoDataImdbID ) VALUES( :vdmc, :vdii )' );
-		$stmt->setString( ':vdmc', $VideoDataMediaCount );
-		$stmt->setString( ':vdii', $VideoDataImdbID );
+		$stmt = $conn->prepareStatement( 'INSERT INTO VideoDatas ( VideoDataMediaCount, VideoDataImdbID ) VALUES( ?, ? )' );
+		$stmt->setString( 1, $VideoDataMediaCount );
+		$stmt->setString( 2, $VideoDataImdbID );
 		$stmt->executeUpdate();
 		
-		$stmt = $conn->preparedStatement( 'INSERT INTO Items
+		$stmt = $conn->prepareStatement( 'INSERT INTO Items
 		( ItemTitle, ItemOriginalTitle, ItemRelease, ItemMediaName, ItemCreationDate, ItemModificationDate, ItemComment )
-		VALUES( :it, :iot, :ir, :imn, now(), now(), :ic )' );
-		$stmt->setString( ':it', $ItemTitle );
-		$stmt->setString( ':iot', $ItemOriginalTitle );
-		$stmt->setString( ':ir', $ItemRelease );
-		$stmt->setString( ':imn', $ItemMediaName );
-		$stmt->setString( ':ic' , $ItemComment );
+		VALUES( ?, ?, ?, ?, now(), now(), ? )' );
+		$stmt->setString( 1, $ItemTitle );
+		$stmt->setString( 2, $ItemOriginalTitle );
+		$stmt->setString( 3, $ItemRelease );
+		$stmt->setString( 4, $ItemMediaName );
+		$stmt->setString( 5, $ItemComment );
 		$stmt->executeUpdate(); 
 
 	}
@@ -211,7 +210,7 @@
 	$MediaAgeRestrictionID, $MediaStatusID, $ItemPicturesID )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->preparedStatement( 'UPDATE VideoDatas,
+		$stmt = $conn->prepareStatement( 'UPDATE VideoDatas,
 		Languages,
 		Items,
 		ItemTypes,
@@ -220,20 +219,20 @@
 		MediaAgeRestrictions,
 		MediaStatus,
 		BinaryDatas
-		SET VideoDatas.VideoDataMediaCount = :vdmc,
-		VideoDatas.VideoDataImdbID = :vdii,
-		Items.ItemTitle = :it,
-		Items.ItemOriginalTitle = :iot,
-		Items.ItemRelease = :ir,
-		Items.ItemMediaName = :imn,
+		SET VideoDatas.VideoDataMediaCount = ?,
+		VideoDatas.VideoDataImdbID = ?,
+		Items.ItemTitle = ?,
+		Items.ItemOriginalTitle = ?,
+		Items.ItemRelease = ?,
+		Items.ItemMediaName = ?,
 		Items.ItemModificationDate = now(),
-		Items.ItemComment = :ic
-		Items.MediaCodecID = :mcid,
-		Items.MediaFormatID = :mfid,
-		Items.MediaAgeRestrictionID = :marid,
-		Items.MediaStatusID = :msid,
-		Items.ItemPicturesID = :ipid
-		WHERE VideoDatas.VideoDataID = :vdid 
+		Items.ItemComment = ?,
+		Items.MediaCodecID = ?,
+		Items.MediaFormatID = ?,
+		Items.MediaAgeRestrictionID = ?,
+		Items.MediaStatusID = ?,
+		Items.ItemPicturesID = ?
+		WHERE VideoDatas.VideoDataID = ? 
 		AND VideoDatas.LanguageID = Languages.LanguageID
 		AND VideoDatas.ItemID = Items.ItemID
 		AND Items.ItemTypeID = ItemTypes.ItemTypeID
@@ -242,24 +241,52 @@
 		AND Items.MediaAgeRestrictionID = MediaAgeRestrictions.MediaAgeRestrictionID
 		AND Items.MediaStatusID = MediaStatus.MediaStatusID
 		AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID' );
-		$stmt->setString( ':vdmc', $VideoDataMediaCount );
-		$stmt->setString( ':vdii', $VideoDataImdbID );
-		$stmt->setString( ':it', $ItemTitle );
-		$stmt->setString( ':iot', $ItemOriginalTitle );
-		$stmt->setString( ':ir', $ItemRelease );
-		$stmt->setString( ':imn', $ItemMediaName );
-		$stmt->setString( ':ic', $ItemComment );
-		$stmt->setString( ':mcid', $MediaCodecID );
-		$stmt->setString( ':mfid', $MediaFormatID );
-		$stmt->setString( ':marid', $MediaAgeRestrictionID );
-		$stmt->setString( ':msid', $MediaStatusID );
-		$stmt->setString( ':ipid', $ItemPicturesID );
-		$stmt->setString( ':vdid', $VideoDataID );
+		$stmt->setString( 1, $VideoDataMediaCount );
+		$stmt->setString( 2, $VideoDataImdbID );
+		$stmt->setString( 3, $ItemTitle );
+		$stmt->setString( 4, $ItemOriginalTitle );
+		$stmt->setString( 5, $ItemRelease );
+		$stmt->setString( 6, $ItemMediaName );
+		$stmt->setString( 7, $ItemComment );
+		$stmt->setString( 8, $MediaCodecID );
+		$stmt->setString( 9, $MediaFormatID );
+		$stmt->setString( 10, $MediaAgeRestrictionID );
+		$stmt->setString( 11, $MediaStatusID );
+		$stmt->setString( 12, $ItemPicturesID );
+		$stmt->setString( 13, $VideoDataID );
 		$stmt->executeUpdate();
 		
 	}
 
 //-----------------------------------------------------------------------------
-}
+	/**
+	 * This function returns true when the record exists
+	 * and false when the record doesn't exist
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer
+	 * @return Boolean
+	 */
+	public function exist( $VideoDataID )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->prepareStatement( 'SELECT COUNT(*)
+		FROM VideoDatas,
+		WHERE VideoDatas.VideoDataID = ?' );
+		$stmt->setString( 1, $VideoDataID );
+		$rs = $stmt->executeQuery( ResultSet::FETCHMODE_NUM );
+		$rs->next();
+		if( $rs->get(1) >= 1 )
+			{
+			return true;
+			}
+		else
+			{
+			return false;
+			}
+	}
+
+//-----------------------------------------------------------------------------
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Tue Mar 15 19:06:03 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 19:06:03 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source phpmediadb.php,1.6,1.7
Message-ID: <200503151806.j2FI63N09184@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source
In directory sheep:/tmp/cvs-serv23205/_source

Modified Files:
	phpmediadb.php 
Log Message:
* Changed require-order
* Added tier.business

Index: phpmediadb.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/phpmediadb.php,v
retrieving revision 1.6
retrieving revision 1.7
diff -u -d -r1.6 -r1.7
--- phpmediadb.php	8 Mar 2005 13:37:32 -0000	1.6
+++ phpmediadb.php	15 Mar 2005 18:06:01 -0000	1.7
@@ -5,6 +5,11 @@
 /* run preinit */
 require_once( 'tier.configuration/config.preinit.php' );
 
+/* include tier.global */
+require_once( 'tier.global/constants.phpmediadb.php' );
+require_once( 'tier.global/class.phpmediadb_exception.php' );
+require_once( 'tier.global/class.phpmediadb.php' );
+
 /* include configuration */
 require_once( 'tier.configuration/config.data.php' );
 require_once( 'tier.configuration/config.business.php' );
@@ -14,11 +19,6 @@
 require_once( 'tier.lib/smarty/Smarty.class.php' );
 require_once( 'tier.lib/creole/Creole.php' );
 
-/* include tier.global */
-require_once( 'tier.global/class.phpmediadb_exception.php' );
-require_once( 'tier.global/class.phpmediadb.php' );
-require_once( 'tier.global/constants.phpmediadb.php' );
-
 /* include tier.presentation */
 require_once( 'tier.presentation/class.phpmediadb_presentation.php' );
 require_once( 'tier.presentation/class.phpmediadb_presentation_contentvars.php' );
@@ -29,6 +29,14 @@
 
 /* include tier.business */
 require_once( 'tier.business/class.phpmediadb_business.php' );
+require_once( 'tier.business/class.phpmediadb_business_agerestrictions.php' );
+require_once( 'tier.business/class.phpmediadb_business_audios.php' );
+require_once( 'tier.business/class.phpmediadb_business_categories.php' );
+require_once( 'tier.business/class.phpmediadb_business_codecs.php' );
+require_once( 'tier.business/class.phpmediadb_business_formats.php' );
+require_once( 'tier.business/class.phpmediadb_business_inspector.php' );
+require_once( 'tier.business/class.phpmediadb_business_prints.php' );
+require_once( 'tier.business/class.phpmediadb_business_videos.php' );
 
 /* include tier.data */
 require_once( 'tier.data/class.phpmediadb_data.php' );



From nobody at sheep.berlios.de  Tue Mar 15 19:06:28 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 19:06:28 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.business class.phpmediadb_business_categories.php,NONE,1.1 class.phpmediadb_business_codecs.php,NONE,1.1 class.phpmediadb_business_formats.php,NONE,1.1 class.phpmediadb_business_prints.php,NONE,1.1 class.phpmediadb_business_videos.php,NONE,1.1
Message-ID: <200503151806.j2FI6SN09205@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business
In directory sheep:/tmp/cvs-serv23241/_source/tier.business

Added Files:
	class.phpmediadb_business_categories.php 
	class.phpmediadb_business_codecs.php 
	class.phpmediadb_business_formats.php 
	class.phpmediadb_business_prints.php 
	class.phpmediadb_business_videos.php 
Log Message:
* Initial revision

--- NEW FILE: class.phpmediadb_business_categories.php ---
<?php
// phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
/* $Id: class.phpmediadb_business_categories.php,v 1.1 2005/03/15 18:06:26 mblaschke Exp $ */

class phpmediadb_business_categories
{
	// --- ATTRIBUTES ---

	/**
	 * Reference to class phpmediadb
	 *
	 * @access protected
	 * @see phpmediadb
	 * @var phpmediadb
	 */
	protected $PHPMEDIADB = null;

	/**
	 * Reference to class phpmediadb_business
	 *
	 * @access protected
	 * @see phpmediadb_business
	 * @var phpmediadb_business
	 */
	protected $BUSINESS = null;
	
	/**
	 * Reference to class phpmediadb_data
	 *
	 * @access protected
	 * @see phpmediadb_data
	 * @var phpmediadb_data
	 */
	protected $DATA = null;
	
	// --- OPERATIONS ---
	
	/**
	 * The constructor __construct initalizes the Class.
	 *
	 * @access public
	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
	 * @param phpmediadb
	 */
	public function __construct( $sender )
	{
		/* init */
    	 
		/* assign parent */
		$this->BUSINESS		= $sender;
		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
		$this->DATA				= $sender->PHPMEDIADB->DATA;
	}

//-----------------------------------------------------------------------------
	/**
	 * Returns the complete list
	 *
	 *
	 */
	public function getList()
	{
		/* init */
		$returnValue = null;
		
		/* delegate */
		$this->DATA->CATEGORIES->getList();
		
		/* return data */
		return $returnValue;
	}
	
} /* end of class phpmediadb_business_categories */

//--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
?>
--- NEW FILE: class.phpmediadb_business_codecs.php ---
<?php
// phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
/* $Id: class.phpmediadb_business_codecs.php,v 1.1 2005/03/15 18:06:26 mblaschke Exp $ */

class phpmediadb_business_codecs
{
	// --- ATTRIBUTES ---

	/**
	 * Reference to class phpmediadb
	 *
	 * @access protected
	 * @see phpmediadb
	 * @var phpmediadb
	 */
	protected $PHPMEDIADB = null;

	/**
	 * Reference to class phpmediadb_business
	 *
	 * @access protected
	 * @see phpmediadb_business
	 * @var phpmediadb_business
	 */
	protected $BUSINESS = null;
	
	/**
	 * Reference to class phpmediadb_data
	 *
	 * @access protected
	 * @see phpmediadb_data
	 * @var phpmediadb_data
	 */
	protected $DATA = null;
	
	// --- OPERATIONS ---
	
	/**
	 * The constructor __construct initalizes the Class.
	 *
	 * @access public
	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
	 * @param phpmediadb
	 */
	public function __construct( $sender )
	{
		/* init */
    	 
		/* assign parent */
		$this->BUSINESS		= $sender;
		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
		$this->DATA				= $sender->PHPMEDIADB->DATA;
	}

//-----------------------------------------------------------------------------
	/**
	 * Returns the complete list
	 *
	 *
	 */
	public function getList()
	{
		/* init */
		$returnValue = null;
		
		/* delegate */
		$this->DATA->CODECS->getList();
		
		/* return data */
		return $returnValue;
	}
	
} /* end of class phpmediadb_business_codecs */

//--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
?>
--- NEW FILE: class.phpmediadb_business_formats.php ---
<?php
// phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
/* $Id: class.phpmediadb_business_formats.php,v 1.1 2005/03/15 18:06:26 mblaschke Exp $ */

class phpmediadb_business_formats
{
	// --- ATTRIBUTES ---

	/**
	 * Reference to class phpmediadb
	 *
	 * @access protected
	 * @see phpmediadb
	 * @var phpmediadb
	 */
	protected $PHPMEDIADB = null;

	/**
	 * Reference to class phpmediadb_business
	 *
	 * @access protected
	 * @see phpmediadb_business
	 * @var phpmediadb_business
	 */
	protected $BUSINESS = null;
	
	/**
	 * Reference to class phpmediadb_data
	 *
	 * @access protected
	 * @see phpmediadb_data
	 * @var phpmediadb_data
	 */
	protected $DATA = null;
	
	// --- OPERATIONS ---
	
	/**
	 * The constructor __construct initalizes the Class.
	 *
	 * @access public
	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
	 * @param phpmediadb
	 */
	public function __construct( $sender )
	{
		/* init */
    	 
		/* assign parent */
		$this->BUSINESS		= $sender;
		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
		$this->DATA				= $sender->PHPMEDIADB->DATA;
	}

//-----------------------------------------------------------------------------
	/**
	 * Returns the complete list
	 *
	 *
	 */
	public function getList()
	{
		/* init */
		$returnValue = null;
		
		/* delegate */
		$this->DATA->FORMATS->getList();
		
		/* return data */
		return $returnValue;
	}
	
} /* end of class phpmediadb_business_formats */

//--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
?>
--- NEW FILE: class.phpmediadb_business_prints.php ---
<?php
// phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
/* $Id: class.phpmediadb_business_prints.php,v 1.1 2005/03/15 18:06:26 mblaschke Exp $ */

class phpmediadb_business_prints
{
	// --- ATTRIBUTES ---

	/**
	 * Reference to class phpmediadb
	 *
	 * @access protected
	 * @see phpmediadb
	 * @var phpmediadb
	 */
	protected $PHPMEDIADB = null;

	/**
	 * Reference to class phpmediadb_business
	 *
	 * @access protected
	 * @see phpmediadb_business
	 * @var phpmediadb_business
	 */
	protected $BUSINESS = null;
	
	/**
	 * Reference to class phpmediadb_data
	 *
	 * @access protected
	 * @see phpmediadb_data
	 * @var phpmediadb_data
	 */
	protected $DATA = null;
	
	// --- OPERATIONS ---
	
	/**
	 * The constructor __construct initalizes the Class.
	 *
	 * @access public
	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
	 * @param phpmediadb
	 */
	public function __construct( $sender )
	{
		/* init */
    	 
		/* assign parent */
		$this->BUSINESS		= $sender;
		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
		$this->DATA				= $sender->PHPMEDIADB->DATA;
	}

//-----------------------------------------------------------------------------
	/**
	 * Returns the complete list
	 *
	 *
	 */
	public function getList()
	{
		/* init */
		$returnValue = null;
		
		/* delegate */
		$this->DATA->PRINTS->getList();
		
		/* return data */
		return $returnValue;
	}
	
} /* end of class phpmediadb_business_prints */

//--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
?>
--- NEW FILE: class.phpmediadb_business_videos.php ---
<?php
// phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
/* $Id: class.phpmediadb_business_videos.php,v 1.1 2005/03/15 18:06:26 mblaschke Exp $ */

class phpmediadb_business_videos
{
	// --- ATTRIBUTES ---

	/**
	 * Reference to class phpmediadb
	 *
	 * @access protected
	 * @see phpmediadb
	 * @var phpmediadb
	 */
	protected $PHPMEDIADB = null;

	/**
	 * Reference to class phpmediadb_business
	 *
	 * @access protected
	 * @see phpmediadb_business
	 * @var phpmediadb_business
	 */
	protected $BUSINESS = null;
	
	/**
	 * Reference to class phpmediadb_data
	 *
	 * @access protected
	 * @see phpmediadb_data
	 * @var phpmediadb_data
	 */
	protected $DATA = null;
	
	// --- OPERATIONS ---
	
	/**
	 * The constructor __construct initalizes the Class.
	 *
	 * @access public
	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
	 * @param phpmediadb
	 */
	public function __construct( $sender )
	{
		/* init */
    	 
		/* assign parent */
		$this->BUSINESS		= $sender;
		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
		$this->DATA				= $sender->PHPMEDIADB->DATA;
	}

//-----------------------------------------------------------------------------
	/**
	 * Returns the complete list
	 *
	 *
	 */
	public function getList()
	{
		/* init */
		$returnValue = null;
		
		/* delegate */
		$this->DATA->VIDEOS->getList();
		
		/* return data */
		return $returnValue;
	}
	
} /* end of class phpmediadb_business_videos */

//--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
?>


From nobody at sheep.berlios.de  Tue Mar 15 19:06:55 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 19:06:55 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.business class.phpmediadb_business.php,1.5,1.6
Message-ID: <200503151806.j2FI6tN09226@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business
In directory sheep:/tmp/cvs-serv23254/_source/tier.business

Modified Files:
	class.phpmediadb_business.php 
Log Message:
* Included all other tier.business classes

Index: class.phpmediadb_business.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- class.phpmediadb_business.php	27 Feb 2005 16:03:16 -0000	1.5
+++ class.phpmediadb_business.php	15 Mar 2005 18:06:52 -0000	1.6
@@ -9,11 +9,20 @@
 	/**
 	 * Reference to class phpmediadb
 	 *
-	 * @access protected
+	 * @access public
 	 * @see phpmediadb
 	 * @var phpmediadb
 	 */
 	public $PHPMEDIADB = null;
+	
+	public $AGERESTRICTIONS = null;
+	public $AUDIOS = null;
+	public $CATEGORIES = null;
+	public $CODECS = null;
+	public $FORMATS = null;
+	public $INSPECTOR = null;
+	public $PRINTS = null;
+	public $VIDEOS = null;
 
 	/**
 	 * Container of configuration for the whole tier
@@ -24,7 +33,8 @@
 	public $configuration = null;
 	
 	// --- OPERATIONS ---
-	
+
+//-----------------------------------------------------------------------------	
 	/**
 	 * The constructor __construct initalizes the Class.
 	 *
@@ -41,8 +51,19 @@
     	 
 		/* assign parent */
 		$this->PHPMEDIADB		= $sender;
+		
+		/* assign childs */
+		$this->AGERESTRICTIONS	= new phpmediadb_business_agerestrictions( $this );
+		$this->AUDIOS						= new phpmediadb_business_audios( $this );
+		$this->CATEGORIES				= new phpmediadb_business_categories( $this );
+		$this->CODECS						= new phpmediadb_business_codecs( $this );
+		$this->FORMATS					= new phpmediadb_business_formats( $this );
+		$this->INSPECTOR				= new phpmediadb_business_inspector( $this );
+		$this->PRINTS						= new phpmediadb_business_prints( $this );
+		$this->VIDEOS						= new phpmediadb_business_prints( $this );
 	}
 
+//-----------------------------------------------------------------------------
 	/**
 	 * Loads the configuration from the global array and resets the array
 	 *



From nobody at sheep.berlios.de  Tue Mar 15 19:07:26 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 19:07:26 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.business class.phpmediadb_business_audios.php,1.1,1.2
Message-ID: <200503151807.j2FI7QN09264@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business
In directory sheep:/tmp/cvs-serv23280/_source/tier.business

Modified Files:
	class.phpmediadb_business_audios.php 
Log Message:
* Fixed a stupid typo (copy&past is bad)

Index: class.phpmediadb_business_audios.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_audios.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- class.phpmediadb_business_audios.php	15 Mar 2005 17:38:08 -0000	1.1
+++ class.phpmediadb_business_audios.php	15 Mar 2005 18:07:24 -0000	1.2
@@ -110,7 +110,7 @@
 		$returnValue = null;
 		
 		/* delegate */
-		$this->DATA->AGERESTRICTIONS->getList();
+		$this->DATA->AUDIOS->getList();
 		
 		/* return data */
 		return $returnValue;



From nobody at sheep.berlios.de  Tue Mar 15 19:08:31 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 19:08:31 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.presentation class.phpmediadb_presentation_contentvars.php,1.5,1.6
Message-ID: <200503151808.j2FI8VN09301@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation
In directory sheep:/tmp/cvs-serv23305/_source/tier.presentation

Modified Files:
	class.phpmediadb_presentation_contentvars.php 
Log Message:
* Modified functions: possibility to add complete arrays

Index: class.phpmediadb_presentation_contentvars.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_contentvars.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- class.phpmediadb_presentation_contentvars.php	15 Mar 2005 10:12:02 -0000	1.5
+++ class.phpmediadb_presentation_contentvars.php	15 Mar 2005 18:08:28 -0000	1.6
@@ -172,11 +172,10 @@
 		if( count( $nodeIndexArray ) == 1 )
 		{
 			/* ok, it is the last item.. generate one more array and stop recursive call */
-			if( NULL == $nodeValue )
-				//$nodeArray["$nodeCurrentIndex"] = $nodeValue;
+			if( NULL === $nodeValue )
 				unset( $nodeArray["$nodeCurrentIndex"] );
 			else
-				$nodeArray["$nodeCurrentIndex"] = (string) $nodeValue;
+				$nodeArray["$nodeCurrentIndex"] = $nodeValue;
 		}
 		else
 		{
@@ -196,7 +195,6 @@
 			/* check if key is array and add array if not */
 			if( !is_array( $nodeArray["$nodeCurrentIndex"] ) )
 				$nodeArray["$nodeCurrentIndex"] = array();
-
 			$this->recursiveInsertNodeIntoContainer( $nodeNextIndex, $nodeValue, $nodeArray["$nodeCurrentIndex"] );
 
 		}
@@ -297,26 +295,40 @@
 	protected function convertNodeValue( $nodeValue, $nodeFormat )
 	{
 		$returnValue = null;
-
-
-		switch( $nodeFormat )
+	
+		switch( gettype( $nodeValue ) )
 		{
-			/* plaintext content */
-			case(PHPMEDIADB_NODEFORMAT_TEXT):
-					$returnValue = htmlentities( $nodeValue );
-				break;
-
-			/* html content */
-			case(PHPMEDIADB_NODEFORMAT_HTML):
-					$returnValue = $nodeValue;
-				break;
-
-			/* not supported format */
+			case 'array';
+					foreach( $nodeValue as $key => $value )
+					{
+						/* recursive call */
+						$returnValue[$key] = $this->convertNodeValue( $nodeValue[$key], $nodeFormat );
+					}
+				break;	
+			
+			/* let's convert */
 			default:
-					$returnValue = $nodeValue;
+					switch( $nodeFormat )
+					{
+							/* plaintext content */
+							case(PHPMEDIADB_NODEFORMAT_TEXT):
+									$returnValue = htmlentities( $nodeValue );
+								break;
+								
+						/* html content */
+						case(PHPMEDIADB_NODEFORMAT_HTML):
+									$returnValue = $nodeValue;
+								break;
+								
+						/* not supported format */
+						default:
+									$returnValue = $nodeValue;
+								break;	
+						
+					}
 				break;
 		}
-		
+
 		/* return value */
 		return $returnValue;
 	}



From nobody at sheep.berlios.de  Tue Mar 15 19:09:09 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 19:09:09 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.presentation class.phpmediadb_presentation_htmlservice.php,1.5,1.6
Message-ID: <200503151809.j2FI99N09323@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation
In directory sheep:/tmp/cvs-serv23373/_source/tier.presentation

Modified Files:
	class.phpmediadb_presentation_htmlservice.php 
Log Message:
* Added some CONFIGURATION.ROOTPATH

Index: class.phpmediadb_presentation_htmlservice.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_htmlservice.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- class.phpmediadb_presentation_htmlservice.php	15 Mar 2005 10:12:02 -0000	1.5
+++ class.phpmediadb_presentation_htmlservice.php	15 Mar 2005 18:09:05 -0000	1.6
@@ -136,7 +136,11 @@
 		
 		/* set i18n-vars */
 		$this->templateEngine->assign( 'I18N', $this->PRESENTATION->I18N->getLanguageArray() );
-			
+		
+		/* set CONFIGURATION */
+		$configuration['ROOTPATH'] = $this->PRESENTATION->configuration['webpath']['root-path'];
+		
+		$this->templateEngine->assign( 'CONFIGURATION', $configuration );
 	}
 //-----------------------------------------------------------------------------
 	/**



From nobody at sheep.berlios.de  Tue Mar 15 19:09:55 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 19:09:55 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.presentation class.phpmediadb_presentation_i18n.php,1.5,1.6
Message-ID: <200503151809.j2FI9tN09339@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation
In directory sheep:/tmp/cvs-serv23416/_source/tier.presentation

Modified Files:
	class.phpmediadb_presentation_i18n.php 
Log Message:
* Modified getLanguageString to return %STRINGID% if no suitable string is found

Index: class.phpmediadb_presentation_i18n.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_i18n.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- class.phpmediadb_presentation_i18n.php	15 Mar 2005 10:12:02 -0000	1.5
+++ class.phpmediadb_presentation_i18n.php	15 Mar 2005 18:09:52 -0000	1.6
@@ -112,6 +112,8 @@
   	/* check if key exists */
   	if( array_key_exists( $langId, $this->langContainer ) )
   		$returnValue = $this->langContainer["$langId"];
+  	else
+  		$returnValue = '%'.$langId.'%';
   	
   	return $returnValue;
   }



From nobody at sheep.berlios.de  Tue Mar 15 19:10:24 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 19:10:24 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.presentation class.phpmediadb_presentation_session.php,1.2,1.3
Message-ID: <200503151810.j2FIAON09363@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation
In directory sheep:/tmp/cvs-serv23791/_source/tier.presentation

Modified Files:
	class.phpmediadb_presentation_session.php 
Log Message:
* Added basic sessionhandling

Index: class.phpmediadb_presentation_session.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_session.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- class.phpmediadb_presentation_session.php	26 Sep 2004 16:04:22 -0000	1.2
+++ class.phpmediadb_presentation_session.php	15 Mar 2005 18:10:22 -0000	1.3
@@ -8,9 +8,46 @@
 
 	public function __construct( $sender )
 	{
-    	 /* TODO */
+		/* init session */
+		$this->start();
 	}
 
+	public function register( $id, $regvar )
+	{
+		/* set value */
+		$_SESSION[$id] = $regvar;
+	}
+	
+	public function unregister( $id )
+	{
+		/* unregister variable */
+		unset( $_SESSION[$id] );
+	}
+	
+	public function get( $id )
+	{
+		/* return value */
+		return $_SESSION[$id];
+	}
+	
+	public function start()
+	{
+		/* start session */
+		session_start();
+	}
+	
+	public function destroy()
+	{
+		/* destroy session */
+		session_destroy();
+	}
+	
+	public function getUid( $newId = NULL )
+	{
+		/* return session_id */
+		return session_id( $newId );
+	}
+	
 
 } /* end of class phpmediadb_presentation_session */
 



From nobody at sheep.berlios.de  Tue Mar 15 19:10:57 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 19:10:57 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.global constants.phpmediadb.php,1.2,1.3
Message-ID: <200503151810.j2FIAvN09379@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.global
In directory sheep:/tmp/cvs-serv24879/_source/tier.global

Modified Files:
	constants.phpmediadb.php 
Log Message:
* Added itemconstants

Index: constants.phpmediadb.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.global/constants.phpmediadb.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- constants.phpmediadb.php	26 Sep 2004 16:08:27 -0000	1.2
+++ constants.phpmediadb.php	15 Mar 2005 18:10:54 -0000	1.3
@@ -10,10 +10,13 @@
 	 * PHPMEDIADB_NODEFORMAT_TEXT:
 	 *   Value is Plaintext and need conversion to XML rules
 	 */
-	define("PHPMEDIADB_NODEFORMAT_HTML", 1);
-	define("PHPMEDIADB_NODEFORMAT_TEXT", 0);
+	define( 'PHPMEDIADB_NODEFORMAT_HTML', 1 );
+	define( 'PHPMEDIADB_NODEFORMAT_TEXT', 0 );
 
 // --- tier.business ---
+	define( 'PHPMEDIADB_ITEM_AUDIO', 1 );
+	define( 'PHPMEDIADB_ITEM_VIDEO', 2 );
+	define( 'PHPMEDIADB_ITEM_PRINT', 3 );
 
 // --- tier.data ---
 



From nobody at sheep.berlios.de  Tue Mar 15 19:15:47 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 19:15:47 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/admin item-session.php,1.1,1.2
Message-ID: <200503151815.j2FIFlN09593@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/admin
In directory sheep:/tmp/cvs-serv31199/admin

Modified Files:
	item-session.php 
Log Message:
* Added empty-session detection
* Removed some stupid comments

Index: item-session.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/admin/item-session.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- item-session.php	15 Mar 2005 17:37:30 -0000	1.1
+++ item-session.php	15 Mar 2005 18:15:44 -0000	1.2
@@ -47,7 +47,16 @@
 {
 	global $PHPMEDIADB;
 	/* get session data first*/
-	return $PHPMEDIADB->PRESENTATION->SESSION->get( 'sessionitem' );
+	$returnValue = $PHPMEDIADB->PRESENTATION->SESSION->get( 'sessionitem' );
+	if( NULL === $returnValue )
+	{
+		header( 'Location: item-add.php' );
+		die();
+	}
+	else
+	{
+		return $returnValue;
+	}
 }
 //-----------------------------------------------------------------------------
 function itemSave( $sessionItem )
@@ -67,6 +76,7 @@
 			/* happy, no error :) */
 			@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'MESSAGE', $PHPMEDIADB->PRESENTATION->I18N->getLanguageString( 'MESSAGE_SUCCESS_SAVE' ) );
 			$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( 'body.message.tpl' );
+			$PHPMEDIADB->PRESENTATION->SESSION->unregister( 'sessionitem' );
 			die();
 		}
 		else
@@ -76,28 +86,6 @@
 			itemShow( $sessionItem );
 			die();
 		}
-	
-//
-//		/* check data */
-//		$errorData = $PHPMEDIADB->BUSINESS->AUDIOS->check( $sessionItem['data'] );
-//		
-//		/* error occured? */
-//		if( $errorData !== NULL )
-//		{
-//			/* error occurred */
-//			@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'INPUTERROR', $errorData );
-//
-//			/* display error-site */
-//			itemShow( $sessionItem );
-//		}
-//		else
-//		{
-//			/* ready to save */
-//			if( $sessionItem['id'] === NULL )
-//				$PHPMEDIADB->BUSINESS->AUDIOS->create( $sessionItem['data'] );
-//			else
-//				$PHPMEDIADB->BUSINESS->AUDIOS->create( $sessionItem['modify'] );
-//		}
 		break;
 	
 	



From nobody at sheep.berlios.de  Tue Mar 15 19:17:15 2005
From: nobody at sheep.berlios.de (bruf)
Date: Tue, 15 Mar 2005 19:17:15 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_videos.php,1.5,1.6
Message-ID: <200503151817.j2FIHFN09633@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv31675/_source/tier.data

Modified Files:
	class.phpmediadb_data_videos.php 
Log Message:
* Removed syntax mistake

Index: class.phpmediadb_data_videos.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_videos.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- class.phpmediadb_data_videos.php	15 Mar 2005 17:46:48 -0000	1.5
+++ class.phpmediadb_data_videos.php	15 Mar 2005 18:17:12 -0000	1.6
@@ -288,5 +288,6 @@
 	}
 
 //-----------------------------------------------------------------------------
+}
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Tue Mar 15 21:23:43 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 21:23:43 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.presentation class.phpmediadb_presentation_contentvars.php,1.6,1.7
Message-ID: <200503152023.j2FKNhN13389@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation
In directory sheep:/tmp/cvs-serv23195/_source/tier.presentation

Modified Files:
	class.phpmediadb_presentation_contentvars.php 
Log Message:
* Fixed some comments

Index: class.phpmediadb_presentation_contentvars.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_contentvars.php,v
retrieving revision 1.6
retrieving revision 1.7
diff -u -d -r1.6 -r1.7
--- class.phpmediadb_presentation_contentvars.php	15 Mar 2005 18:08:28 -0000	1.6
+++ class.phpmediadb_presentation_contentvars.php	15 Mar 2005 20:23:41 -0000	1.7
@@ -40,7 +40,7 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb_presentation
+	 * @param phpmediadb_presentation $sender Refernece to parentclass
 	 */
 	public function __construct( $sender )
 	{
@@ -73,10 +73,10 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param String
-	 * @param String
-	 * @param Integer
-	 * @return void
+	 * @param String $nodeName Name of node (dooted format)
+	 * @param Mixed $nodeValue Value of node
+	 * @param Integer $nodeFormat Format of node, $nodeValue will be converted into this format
+	 * @return bool success of nodeintegration
 	 */
 	public function addNode( $nodeName, $nodeValue, $nodeFormat = PHPMEDIADB_NODEFORMAT_TEXT )
 	{
@@ -89,6 +89,8 @@
 
 		/* delegate */
 		$this->recursiveInsertNodeIntoContainer( $nodeName, $nodeValue, $this->nodeContainer );
+		
+		return true;
 	}
 
 //-----------------------------------------------------------------------------
@@ -98,8 +100,8 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param String
-	 * @return String
+	 * @param String $nodeName Name of node (dotted-format)
+	 * @return mixed Array or string of nodes
 	 */
 	public function getNode( $nodeName = NULL )
 	{
@@ -129,8 +131,8 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param String
-	 * @return void
+	 * @param String $nodeName Name of node (dotted format)
+	 * @return bool ssuccess of nodedeletion
 	 */
 	public function DeleteNode( $nodeName )
 	{
@@ -150,10 +152,10 @@
 	 *
 	 * @access protected
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param mixed
-	 * @param String
-	 * @param mixed
-	 * @return mixed
+	 * @param mixed $nodeName Name of node (dotted format)
+	 * @param String $nodeValue Value of node
+	 * @param mixed $nodeArray Reference of a nodecontainer
+	 * @return mixed Nodecontainer
 	 */
 	protected function recursiveInsertNodeIntoContainer( $nodeName, $nodeValue = null, &$nodeArray )
 	{
@@ -208,10 +210,9 @@
 	 *
 	 * @access protected
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param mixed
-	 * @param String
-	 * @param mixed
-	 * @return mixed
+	 * @param String $nodeName Name of node (dotted format)
+	 * @param mixed $nodeArray Reference of a nodecontainer
+	 * @return mixed Nodecontainer
 	 */
 	protected function recursiveReadNodeFromContainer( $nodeName, &$nodeArray )
 	{
@@ -269,8 +270,8 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param String
-	 * @return boolean
+	 * @param String $nodeName Name of node (dotted format)
+	 * @return boolean boolean value specifies if nodename is valid
 	 */
 	public function checkNodeString( $nodeName )
 	{
@@ -289,8 +290,9 @@
 	 *
 	 * @access protected
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param String
-	 * @return String
+	 * @param String $nodeValue Name of node
+	 * @param String $nodeFormat Format of node (conversion)
+	 * @return String Name of node (dotted format)
 	 */
 	protected function convertNodeValue( $nodeValue, $nodeFormat )
 	{
@@ -332,7 +334,8 @@
 		/* return value */
 		return $returnValue;
 	}
-
+	
+//-----------------------------------------------------------------------------
 } /* end of class phpmediadb_presentation_contentvars */
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---



From nobody at sheep.berlios.de  Tue Mar 15 21:24:33 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 21:24:33 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.presentation class.phpmediadb_presentation_htmlservice.php,1.6,1.7
Message-ID: <200503152024.j2FKOXN13422@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation
In directory sheep:/tmp/cvs-serv23473/_source/tier.presentation

Modified Files:
	class.phpmediadb_presentation_htmlservice.php 
Log Message:
* Fixed some comments
* Removed generation of menu, header and footer in function compile

Index: class.phpmediadb_presentation_htmlservice.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_htmlservice.php,v
retrieving revision 1.6
retrieving revision 1.7
diff -u -d -r1.6 -r1.7
--- class.phpmediadb_presentation_htmlservice.php	15 Mar 2005 18:09:05 -0000	1.6
+++ class.phpmediadb_presentation_htmlservice.php	15 Mar 2005 20:24:28 -0000	1.7
@@ -39,7 +39,7 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb_presentation
+	 * @param phpmediadb_presentation $sender Reference to parentclass
 	 */
 	public function __construct( $sender )
 	{
@@ -58,7 +58,8 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param String
+	 * @param String $template Filename of template
+	 * @return mixed compiled template as html or text
 	 */
 	public function compile( $template )
 	{
@@ -84,14 +85,6 @@
 				break;	
 		}
 		
-		/* compile header */
-		$content['DOCUMENT']['HEADER'] = $this->templateEngine->fetch( 'overall.header.tpl' );
-		/* compile menu */
-		$content['DOCUMENT']['MENU'] = $this->templateEngine->fetch( 'overall.menu.tpl' );
-		/* compile footer */
-		$content['DOCUMENT']['FOOTER'] = $this->templateEngine->fetch( 'overall.footer.tpl' );
-		
-		
 		/* compile pre-template */
 		$this->templateEngine->assign( $content );
 		$returnValue = $this->templateEngine->fetch( 'overall.body.tpl' );
@@ -105,7 +98,7 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param String
+	 * @param String $template Filename of template
 	 */	
 	public function display( $template )
 	{
@@ -159,6 +152,8 @@
 		$this->templateEngine->template_dir	= $this->PRESENTATION->configuration['directory']['templates'];
 		$this->templateEngine->compile_dir	= $this->PRESENTATION->configuration['directory']['templates_c'];
 	}
+	
+//-----------------------------------------------------------------------------
 } /* end of class phpmediadb_presentation_htmlservice */
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---



From nobody at sheep.berlios.de  Tue Mar 15 21:24:53 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 21:24:53 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.presentation class.phpmediadb_presentation_i18n.php,1.6,1.7
Message-ID: <200503152024.j2FKOrN13426@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation
In directory sheep:/tmp/cvs-serv23531/_source/tier.presentation

Modified Files:
	class.phpmediadb_presentation_i18n.php 
Log Message:
* Fixed some comments

Index: class.phpmediadb_presentation_i18n.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_i18n.php,v
retrieving revision 1.6
retrieving revision 1.7
diff -u -d -r1.6 -r1.7
--- class.phpmediadb_presentation_i18n.php	15 Mar 2005 18:09:52 -0000	1.6
+++ class.phpmediadb_presentation_i18n.php	15 Mar 2005 20:24:50 -0000	1.7
@@ -55,7 +55,7 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb_presentation
+	 * @param phpmediadb_presentation $sender Reference to parent class
 	 */
 	public function __construct( $sender )
 	{
@@ -77,7 +77,7 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return string
+	 * @return string Browserlanguage as languagecode
 	 */
   public function getBrowserLanguage()
   {
@@ -101,8 +101,8 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param String
-	 * @return mixed
+	 * @param String Internal language-i18n-stringcode
+	 * @return mixed Internationalized string
 	 */
   public function getLanguageString( $langId )
   {
@@ -124,7 +124,7 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return Array
+	 * @return Array Array with all i18n strings
 	 */
   public function getLanguageArray()
   {
@@ -142,7 +142,7 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return Array
+	 * @return Array Array with all available languages as langcodes
 	 */
   public function getAvailableLanagues()
   {
@@ -162,7 +162,7 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return String
+	 * @return String Currently used language as langcode
 	 */
 	 public function getLanguageCode()
 	 {
@@ -178,8 +178,8 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param String
-	 * @return Bool
+	 * @param String $langCode Languagecode which should be used
+	 * @return Bool status if set was successfull
 	 */
 	 public function setLanguageCode( $langCode )
 	 {
@@ -202,9 +202,9 @@
 	 *
 	 * @access protected
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Array
-	 * @param String
-	 * @return string
+	 * @param Array $allowedLanguageArray Array with all allowed langcodes
+	 * @param String $defaultLanguage Default Language as langcode
+	 * @return string Prefered langcode
 	 */
   protected function detectBrowserLanguage( $allowedLanguageArray, $defaultLanguage )
   {
@@ -283,7 +283,6 @@
 	 *
 	 * @access protected
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return void
 	 */
 	 protected function readI18nDirectory()
 	 {
@@ -310,7 +309,6 @@
 	 *
 	 * @access protected
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return void
 	 */
 	protected function initalizeLanguageContainer()
 	{
@@ -327,6 +325,7 @@
 	 *
 	 * @access protected
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param String $langCode Langcode which should be loaded
 	 * @return void
 	 */
   protected function loadLanagueFile( $langCode )
@@ -343,6 +342,7 @@
   	}
   }
 
+//-----------------------------------------------------------------------------
 } /* end of class phpmediadb_presentation_i18n */
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---



From nobody at sheep.berlios.de  Tue Mar 15 21:25:08 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 21:25:08 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.presentation class.phpmediadb_presentation.php,1.5,1.6
Message-ID: <200503152025.j2FKP8N13448@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation
In directory sheep:/tmp/cvs-serv23552/_source/tier.presentation

Modified Files:
	class.phpmediadb_presentation.php 
Log Message:
* Fixed some comments

Index: class.phpmediadb_presentation.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- class.phpmediadb_presentation.php	27 Feb 2005 16:06:24 -0000	1.5
+++ class.phpmediadb_presentation.php	15 Mar 2005 20:25:05 -0000	1.6
@@ -70,12 +70,13 @@
 
 	// --- OPERATIONS ---
 
+//-----------------------------------------------------------------------------
 	/**
 	 * The constructor __construct initalizes the Class.
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb
+	 * @param phpmediadb $sender Refernce to parentclass
 	 */
 	public function __construct( $sender )
 	{
@@ -95,6 +96,7 @@
 		$this->XMLSERVICE		= new phpmediadb_presentation_xmlservice( $this );
 	}
 	
+//-----------------------------------------------------------------------------
  /**
 	 * The destructor __destruct is responsible for closing all open files,
 	 * etc.
@@ -107,13 +109,12 @@
 		/* nothing to do yet */
 	}
 	
-	
+//-----------------------------------------------------------------------------
 	/**
 	 * Loads the configuration from the global array and resets the array
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb
 	 * @return void
 	 */
 	private function loadConfiguration()
@@ -128,7 +129,8 @@
 		/* unset global configuration -> security */
 		unset( $phpMediaDbConfig['PRESENTATION'] );
 	}
-
+	
+//-----------------------------------------------------------------------------
 } /* end of class phpmediadb_presentation */
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---



From nobody at sheep.berlios.de  Tue Mar 15 21:25:34 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 21:25:34 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.presentation class.phpmediadb_presentation_session.php,1.3,1.4
Message-ID: <200503152025.j2FKPYN13468@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation
In directory sheep:/tmp/cvs-serv23583/_source/tier.presentation

Modified Files:
	class.phpmediadb_presentation_session.php 
Log Message:
* Added comments
* Added basic classlayout

Index: class.phpmediadb_presentation_session.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_session.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- class.phpmediadb_presentation_session.php	15 Mar 2005 18:10:22 -0000	1.3
+++ class.phpmediadb_presentation_session.php	15 Mar 2005 20:25:32 -0000	1.4
@@ -4,51 +4,129 @@
 
 class phpmediadb_presentation_session
 {
+	// --- ATTRIBUTES ---
 
+	/**
+	 * Reference to class phpmediadb
+	 *
+	 * @access protected
+	 * @see phpmediadb
+	 * @var phpmediadb
+	 */
+	protected $PHPMEDIADB = null;
 
+	/**
+	 * Reference to class phpmediadb_presentation
+	 *
+	 * @access protected
+	 * @see phpmediadb_presentation
+	 * @var phpmediadb_presentation
+	 */
+	protected $PRESENTATION = null;
+
+//-----------------------------------------------------------------------------
+	/**
+	 * The constructor __construct initalizes the Class.
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param phpmediadb_presentation $sender Reference to parent class
+	 */
 	public function __construct( $sender )
 	{
+		/* assign parent */
+		$this->PRESENTATION	= $sender;
+		$this->PHPMEDIADB		= $sender->PHPMEDIADB;
+		
 		/* init session */
 		$this->start();
-	}
-
+  }
+  
+//-----------------------------------------------------------------------------
+	/**
+	 * Registers a variable in session object
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param String $id Specifies which id should used to store the value
+	 * @param Mixed $regvar Value which should be stored
+	 */
 	public function register( $id, $regvar )
 	{
 		/* set value */
 		$_SESSION[$id] = $regvar;
 	}
 	
+//-----------------------------------------------------------------------------
+	/**
+	 * Removes a variable from session object
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param String $id Specifies which id should removed
+	 */
 	public function unregister( $id )
 	{
 		/* unregister variable */
 		unset( $_SESSION[$id] );
 	}
 	
+//-----------------------------------------------------------------------------
+	/**
+	 * Returns a variable from session object
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param String $id Specifies which id should be returned
+	 */
 	public function get( $id )
 	{
 		/* return value */
 		return $_SESSION[$id];
 	}
 	
+//-----------------------------------------------------------------------------
+	/**
+	 * Starts and initalized the session
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 */
 	public function start()
 	{
 		/* start session */
 		session_start();
 	}
 	
+//-----------------------------------------------------------------------------
+	/**
+	 * Destroys the session
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 */	
 	public function destroy()
 	{
 		/* destroy session */
 		session_destroy();
 	}
 	
+//-----------------------------------------------------------------------------
+	/**
+	 * Return and/or sets the global unique session id
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param String $newId New session id as string
+	 * @return String Currently used or old session id
+	 */	
 	public function getUid( $newId = NULL )
 	{
 		/* return session_id */
 		return session_id( $newId );
 	}
 	
-
+//-----------------------------------------------------------------------------
 } /* end of class phpmediadb_presentation_session */
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---



From nobody at sheep.berlios.de  Tue Mar 15 21:25:45 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 21:25:45 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.presentation class.phpmediadb_presentation_xmlservice.php,1.2,1.3
Message-ID: <200503152025.j2FKPjN13472@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation
In directory sheep:/tmp/cvs-serv23593/_source/tier.presentation

Modified Files:
	class.phpmediadb_presentation_xmlservice.php 
Log Message:
* Added basic classlayout

Index: class.phpmediadb_presentation_xmlservice.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_xmlservice.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- class.phpmediadb_presentation_xmlservice.php	26 Sep 2004 16:04:22 -0000	1.2
+++ class.phpmediadb_presentation_xmlservice.php	15 Mar 2005 20:25:42 -0000	1.3
@@ -4,14 +4,42 @@
 
 class phpmediadb_presentation_xmlservice
 {
+	// --- ATTRIBUTES ---
 
+	/**
+	 * Reference to class phpmediadb
+	 *
+	 * @access protected
+	 * @see phpmediadb
+	 * @var phpmediadb
+	 */
+	protected $PHPMEDIADB = null;
+
+	/**
+	 * Reference to class phpmediadb_presentation
+	 *
+	 * @access protected
+	 * @see phpmediadb_presentation
+	 * @var phpmediadb_presentation
+	 */
+	protected $PRESENTATION = null;
 
+//-----------------------------------------------------------------------------
+	/**
+	 * The constructor __construct initalizes the Class.
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param phpmediadb_presentation $sender Reference to parent class
+	 */
 	public function __construct( $sender )
 	{
-    	 /* TODO */
-	}
-
+		/* assign parent */
+		$this->PRESENTATION	= $sender;
+		$this->PHPMEDIADB		= $sender->PHPMEDIADB;
+  }
 
+//-----------------------------------------------------------------------------
 } /* end of class phpmediadb_presentation_xmlservice */
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---



From nobody at sheep.berlios.de  Tue Mar 15 21:59:24 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 21:59:24 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.business class.phpmediadb_business_agerestrictions.php,1.1,1.2 class.phpmediadb_business_audios.php,1.2,1.3 class.phpmediadb_business_categories.php,1.1,1.2 class.phpmediadb_business_codecs.php,1.1,1.2 class.phpmediadb_business_formats.php,1.1,1.2 class.phpmediadb_business_inspector.php,1.1,1.2 class.phpmediadb_business.php,1.6,1.7 class.phpmediadb_business_prints.php,1.1,1.2 class.phpmediadb_business_videos.php,1.1,1.2
Message-ID: <200503152059.j2FKxON14227@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business
In directory sheep:/tmp/cvs-serv25820/_source/tier.business

Modified Files:
	class.phpmediadb_business_agerestrictions.php 
	class.phpmediadb_business_audios.php 
	class.phpmediadb_business_categories.php 
	class.phpmediadb_business_codecs.php 
	class.phpmediadb_business_formats.php 
	class.phpmediadb_business_inspector.php 
	class.phpmediadb_business.php 
	class.phpmediadb_business_prints.php 
	class.phpmediadb_business_videos.php 
Log Message:
* Fixed some comments

Index: class.phpmediadb_business_agerestrictions.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_agerestrictions.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- class.phpmediadb_business_agerestrictions.php	15 Mar 2005 17:38:08 -0000	1.1
+++ class.phpmediadb_business_agerestrictions.php	15 Mar 2005 20:59:21 -0000	1.2
@@ -35,12 +35,13 @@
 	
 	// --- OPERATIONS ---
 	
+//-----------------------------------------------------------------------------		
 	/**
 	 * The constructor __construct initalizes the Class.
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb
+	 * @param phpmediadb $sender Reference to parent class
 	 */
 	public function __construct( $sender )
 	{

Index: class.phpmediadb_business_audios.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_audios.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- class.phpmediadb_business_audios.php	15 Mar 2005 18:07:24 -0000	1.2
+++ class.phpmediadb_business_audios.php	15 Mar 2005 20:59:21 -0000	1.3
@@ -35,12 +35,13 @@
 	
 	// --- OPERATIONS ---
 	
+//-----------------------------------------------------------------------------
 	/**
 	 * The constructor __construct initalizes the Class.
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb
+	 * @param phpmediadb $sender Reference to parent class
 	 */
 	public function __construct( $sender )
 	{
@@ -54,10 +55,12 @@
 
 //-----------------------------------------------------------------------------
 	/**
+	 * Checks if the data is correct
 	 *
-	 *
-	 *
-	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Mixed $data Data which should be checked
+	 * @return Mixed Successstatus, NULL if success, failed with error-array
 	 */
 	 public function check( $data )
 	 {
@@ -73,26 +76,33 @@
 
 //-----------------------------------------------------------------------------
 	/**
+	 * Creates an empty dataset
 	 *
-	 *
-	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @return Array Empty dataset
 	 */
 	 public function createEmpty()
 	 {
 		/* init */
 		$returnValue = array();
 	 	
-		$returnValue['id'] = NULL;
-		$returnValue['title']	= '';
-		$returnValue['originaltitle']	= '';
-		$returnValue['medianame']	= '';
-		$returnValue['']	= '';
-		$returnValue['']	= '';
-		$returnValue['']	= '';
-		$returnValue['']	= '';
-		$returnValue['']	= '';
-		$returnValue['']	= '';
-		$returnValue['']	= '';
+		/* create empty itemset */
+		$returnValue['ItemTitle'] 						= '';
+		$returnValue['ItemOriginalTitle']			= '';
+		$returnValue['ItemMediaName']					= '';
+		$returnValue['ItemIdentification']		= '';
+		$returnValue['ItemRelease']						= '';
+		$returnValue['Categories']						= array();
+		$returnValue['ItemMediaSize']					= '';
+		$returnValue['MediaFormatID']					= '';
+		$returnValue['BinaryData']						= '';
+		$returnValue['PublisherName']					= '';
+		$returnValue['MediaAgeRestrictionID']	= '';
+		$returnValue['MediaCodecID']					= '';
+		$returnValue['ItemQuantity']					= '';
+		$returnValue['ItemCreationDate']			= NULL;
+		$returnValue['ItemModificationDate']	= NULL;
 			
 		/* return data */
 		return $returnValue;
@@ -100,9 +110,11 @@
 
 //-----------------------------------------------------------------------------
 	/**
-	 * Returns the complete list
-	 *
+	 * Returns the complete list of datasets
 	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @return Array Array with all available datasets
 	 */
 	public function getList()
 	{
@@ -117,6 +129,14 @@
 	}
 	
 //-----------------------------------------------------------------------------
+	/**
+	 * Modifies one dataset specified by the id
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param String $id Primarykey/Identifier of dataset
+	 * @param Array $data New data of dataset
+	 */
 	public function modify( $id, $data )
 	{
 		/* init */
@@ -138,6 +158,14 @@
 		return $returnValue;
 	}
 //-----------------------------------------------------------------------------
+	/**
+	 * Creates one dataset
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Array $data New data of dataset
+	 * @return Primarykey/Identifier of dataset
+	 */
 	public function create( $data )
 	{
 		/* init */
@@ -158,6 +186,7 @@
 		/* return data */
 		return $returnValue;
 	}
+	
 //-----------------------------------------------------------------------------
 } /* end of class phpmediadb_business_audios */
 

Index: class.phpmediadb_business_categories.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_categories.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- class.phpmediadb_business_categories.php	15 Mar 2005 18:06:26 -0000	1.1
+++ class.phpmediadb_business_categories.php	15 Mar 2005 20:59:21 -0000	1.2
@@ -35,12 +35,13 @@
 	
 	// --- OPERATIONS ---
 	
+//-----------------------------------------------------------------------------	
 	/**
 	 * The constructor __construct initalizes the Class.
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb
+	 * @param phpmediadb $sender Reference to parent class
 	 */
 	public function __construct( $sender )
 	{
@@ -70,6 +71,7 @@
 		return $returnValue;
 	}
 	
+//-----------------------------------------------------------------------------
 } /* end of class phpmediadb_business_categories */
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---

Index: class.phpmediadb_business_codecs.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_codecs.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- class.phpmediadb_business_codecs.php	15 Mar 2005 18:06:26 -0000	1.1
+++ class.phpmediadb_business_codecs.php	15 Mar 2005 20:59:22 -0000	1.2
@@ -34,13 +34,13 @@
 	protected $DATA = null;
 	
 	// --- OPERATIONS ---
-	
+//-----------------------------------------------------------------------------
 	/**
 	 * The constructor __construct initalizes the Class.
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb
+	 * @param phpmediadb $sender Reference to parent class
 	 */
 	public function __construct( $sender )
 	{
@@ -70,6 +70,7 @@
 		return $returnValue;
 	}
 	
+//-----------------------------------------------------------------------------
 } /* end of class phpmediadb_business_codecs */
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---

Index: class.phpmediadb_business_formats.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_formats.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- class.phpmediadb_business_formats.php	15 Mar 2005 18:06:26 -0000	1.1
+++ class.phpmediadb_business_formats.php	15 Mar 2005 20:59:22 -0000	1.2
@@ -34,13 +34,13 @@
 	protected $DATA = null;
 	
 	// --- OPERATIONS ---
-	
+//-----------------------------------------------------------------------------
 	/**
 	 * The constructor __construct initalizes the Class.
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb
+	 * @param phpmediadb $sender Reference to parent class
 	 */
 	public function __construct( $sender )
 	{
@@ -70,6 +70,7 @@
 		return $returnValue;
 	}
 	
+//-----------------------------------------------------------------------------
 } /* end of class phpmediadb_business_formats */
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---

Index: class.phpmediadb_business_inspector.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_inspector.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- class.phpmediadb_business_inspector.php	15 Mar 2005 17:38:08 -0000	1.1
+++ class.phpmediadb_business_inspector.php	15 Mar 2005 20:59:22 -0000	1.2
@@ -35,12 +35,13 @@
 	
 	// --- OPERATIONS ---
 	
+//-----------------------------------------------------------------------------
 	/**
 	 * The constructor __construct initalizes the Class.
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb
+	 * @param phpmediadb $sender Refreence to parent class
 	 */
 	public function __construct( $sender )
 	{
@@ -53,9 +54,13 @@
 
 //-----------------------------------------------------------------------------
 	/**
-	 * Returns the complete list
-	 *
+	 * Checkengine: Checks if data is valid or generates an error-array
 	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer $type Itemtype which should be checked
+	 * @param Array $data Data which should be checked
+	 * @return mixed Success if Null, failed if error-array
 	 */
 	public function check( $type, $data )
 	{
@@ -75,12 +80,30 @@
 		{
 			foreach( $inputSize as $checkKey => $checkValue )
 			{
-				if( @strlen( $data[$checkKey] ) > $checkValue )
+				switch( @gettype( $data[$checkKey] ) )
 				{
-					/* set errorflags */
-					$returnValue['general']											= TRUE;
-					$returnValue['flag'][$checkKey] 						= TRUE;
-					$returnValue['message'][$checkKey]['size']	= TRUE;
+					case('string'):
+						if( @strlen( $data[$checkKey] ) > $checkValue )
+						{
+							/* set errorflags */
+							$returnValue['general']											= TRUE;
+							$returnValue['flag'][$checkKey] 						= TRUE;
+							$returnValue['message'][$checkKey]['size']	= TRUE;
+						}
+					break;
+					
+					case('array'):
+						foreach( $data[$checkKey] as $ItemKey => $ItemValue )
+						{
+							if( @strlen( $ItemValue ) > $checkValue )
+							{
+								/* set errorflags */
+								$returnValue['general']											= TRUE;
+								$returnValue['flag'][$checkKey] 						= TRUE;
+								$returnValue['message'][$checkKey]['size']	= TRUE;
+							}
+						}
+					break;
 				}
 			}
 		}
@@ -90,12 +113,30 @@
 		{
 			foreach( $checkRegex as $checkKey => $checkValue )
 			{
-				if( ! @ereg( $checkValue, $data[$checkKey] ) )
+				switch( @gettype( $data[$checkKey] ) )
 				{
-					/* set errorflags */
-					$returnValue['general']											= TRUE;
-					$returnValue['flag'][$checkKey] 						= TRUE;
-					$returnValue['message'][$checkKey]['regex']	= TRUE;
+					case('string'):
+						if( ! @ereg( $checkValue, $data[$checkKey] ) )
+						{
+							/* set errorflags */
+							$returnValue['general']											= TRUE;
+							$returnValue['flag'][$checkKey] 						= TRUE;
+							$returnValue['message'][$checkKey]['regex']	= TRUE;
+						}
+					break;
+					
+					case('array'):
+						foreach( $data[$checkKey] as $ItemKey => $ItemValue )
+						{
+							if( ! @ereg( $checkValue, $ItemValue ) )
+							{
+								/* set errorflags */
+								$returnValue['general']											= TRUE;
+								$returnValue['flag'][$checkKey] 						= TRUE;
+								$returnValue['message'][$checkKey]['regex']	= TRUE;
+							}
+						}
+					break;
 				}
 			}
 		}
@@ -105,6 +146,14 @@
 	}
 	
 //-----------------------------------------------------------------------------
+	/**
+	 * Returns all size-specifications for variable check
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer $type Itemtype
+	 * @return mixed Specifications of variable-value sizes
+	 */
 	public function getSize( $type )
 	{
 		/* init */
@@ -118,6 +167,14 @@
 	}	
 
 //-----------------------------------------------------------------------------
+	/**
+	 * Returns all regex-specifications for variable check
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer $type Itemtype
+	 * @return mixed Specifications of variable-value regex
+	 */
 	public function getRegex( $type )
 	{
 		/* init */
@@ -129,8 +186,8 @@
 		/* return data */
 		return $returnValue;
 	}	
+	
 //-----------------------------------------------------------------------------
-
 } /* end of class phpmediadb_business_inspector */
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---

Index: class.phpmediadb_business.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business.php,v
retrieving revision 1.6
retrieving revision 1.7
diff -u -d -r1.6 -r1.7
--- class.phpmediadb_business.php	15 Mar 2005 18:06:52 -0000	1.6
+++ class.phpmediadb_business.php	15 Mar 2005 20:59:22 -0000	1.7
@@ -15,13 +15,76 @@
 	 */
 	public $PHPMEDIADB = null;
 	
+	/**
+	 * Reference to class phpmediadb_business_agerestrictions
+	 *
+	 * @access public
+	 * @see phpmediadb_business_agerestrictions
+	 * @var phpmediadb_business_agerestrictions
+	 */	
 	public $AGERESTRICTIONS = null;
+
+	/**
+	 * Reference to class phpmediadb_business_audios
+	 *
+	 * @access public
+	 * @see phpmediadb_business_audios
+	 * @var phpmediadb_business_audios
+	 */	
 	public $AUDIOS = null;
+	
+	/**
+	 * Reference to class phpmediadb_business_categories
+	 *
+	 * @access public
+	 * @see phpmediadb_business_categories
+	 * @var phpmediadb_business_categories
+	 */	
 	public $CATEGORIES = null;
+	
+	/**
+	 * Reference to class phpmediadb_business_codecs
+	 *
+	 * @access public
+	 * @see phpmediadb_business_codecs
+	 * @var phpmediadb_business_codecs
+	 */	
 	public $CODECS = null;
+	
+	/**
+	 * Reference to class phpmediadb_business_formats
+	 *
+	 * @access public
+	 * @see phpmediadb_business_formats
+	 * @var phpmediadb_business_formats
+	 */	
 	public $FORMATS = null;
+	
+	/**
+	 * Reference to class phpmediadb_business_inspector
+	 *
+	 * @access public
+	 * @see phpmediadb_business_inspector
+	 * @var phpmediadb_business_inspector
+	 */	
 	public $INSPECTOR = null;
+	
+	/**
+	 * Reference to class phpmediadb_business_prints
+	 *
+	 * @access public
+	 * @see phpmediadb_business_prints
+	 * @var phpmediadb_business_prints
+	 */	
 	public $PRINTS = null;
+	
+	/**
+	 * Reference to class phpmediadb_business_videos
+	 *
+	 * @access public
+	 * @see phpmediadb_business_videos
+	 * @var phpmediadb_business_videos
+	 */	
 	public $VIDEOS = null;
 
 	/**
@@ -40,7 +103,7 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb
+	 * @param phpmediadb $sender Reference to parent class
 	 */
 	public function __construct( $sender )
 	{
@@ -69,8 +132,6 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb
-	 * @return void
 	 */
 	private function loadConfiguration()
 	{

Index: class.phpmediadb_business_prints.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_prints.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- class.phpmediadb_business_prints.php	15 Mar 2005 18:06:26 -0000	1.1
+++ class.phpmediadb_business_prints.php	15 Mar 2005 20:59:22 -0000	1.2
@@ -34,13 +34,13 @@
 	protected $DATA = null;
 	
 	// --- OPERATIONS ---
-	
+//-----------------------------------------------------------------------------
 	/**
 	 * The constructor __construct initalizes the Class.
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb
+	 * @param phpmediadb $sender Reference to parent class
 	 */
 	public function __construct( $sender )
 	{
@@ -70,6 +70,7 @@
 		return $returnValue;
 	}
 	
+//-----------------------------------------------------------------------------
 } /* end of class phpmediadb_business_prints */
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---

Index: class.phpmediadb_business_videos.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_videos.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- class.phpmediadb_business_videos.php	15 Mar 2005 18:06:26 -0000	1.1
+++ class.phpmediadb_business_videos.php	15 Mar 2005 20:59:22 -0000	1.2
@@ -34,13 +34,13 @@
 	protected $DATA = null;
 	
 	// --- OPERATIONS ---
-	
+//-----------------------------------------------------------------------------
 	/**
 	 * The constructor __construct initalizes the Class.
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb
+	 * @param phpmediadb $sender Reference to parent class
 	 */
 	public function __construct( $sender )
 	{
@@ -70,6 +70,7 @@
 		return $returnValue;
 	}
 	
+//-----------------------------------------------------------------------------
 } /* end of class phpmediadb_business_videos */
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---



From nobody at sheep.berlios.de  Tue Mar 15 22:00:22 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 22:00:22 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration/templates overall.body.tpl,1.2,1.3
Message-ID: <200503152100.j2FL0MN14283@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/templates
In directory sheep:/tmp/cvs-serv25883/_source/tier.configuration/templates

Modified Files:
	overall.body.tpl 
Log Message:
* Changed inclusion of header, menu and footer

Index: overall.body.tpl
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/templates/overall.body.tpl,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- overall.body.tpl	8 Mar 2005 20:47:58 -0000	1.2
+++ overall.body.tpl	15 Mar 2005 21:00:20 -0000	1.3
@@ -9,11 +9,11 @@
 
 <body>
 <!-- PHPMEDIADB-HEADER BEGIN -->
-	<div id="phpmediadb-header">{$DOCUMENT.HEADER}</div>
+	<div id="phpmediadb-header">{include file="overall.header.tpl"}</div>
 <!-- PHPMEDIADB-HEADER END -->
 
 <!-- PHPMEDIADB-MENU BEGIN -->
-	<div id="phpmediadb-menu">{$DOCUMENT.MENU}</div>
+	<div id="phpmediadb-menu">{include file="overall.menu.tpl"}</div>
 <!-- PHPMEDIADB-MENU END -->
 
 <!-- PHPMEDIADB-BODY BEGIN -->
@@ -21,7 +21,7 @@
 <!-- PHPMEDIADB-BODY END -->
 
 <!-- PHPMEDIADB-FOOTER BEGIN -->
-	<div id="phpmediadb-footer">{$DOCUMENT.FOOTER}</div>
+	<div id="phpmediadb-footer">{include file="overall.footer.tpl"}</div>
 <!-- PHPMEDIADB-FOOTER END -->
 
 </body>



From nobody at sheep.berlios.de  Tue Mar 15 22:00:51 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 22:00:51 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration/templates body.item.audio.formular.tpl,1.1,1.2
Message-ID: <200503152100.j2FL0pN14289@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/templates
In directory sheep:/tmp/cvs-serv25917/_source/tier.configuration/templates

Modified Files:
	body.item.audio.formular.tpl 
Log Message:
* Changed HTML-Variable-Names

Index: body.item.audio.formular.tpl
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/templates/body.item.audio.formular.tpl,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- body.item.audio.formular.tpl	15 Mar 2005 17:41:37 -0000	1.1
+++ body.item.audio.formular.tpl	15 Mar 2005 21:00:49 -0000	1.2
@@ -9,50 +9,50 @@
 	<tr>
 		<td>{$I18N.MEDIA_TITLE|default:"%MEDIA_TITLE%"}</td>
 		<td>
-			<input type="text" name="itemdata[title]" maxlength="{$INPUTSIZE.title|default:"255"}" value="{$ITEMDATA.title}" />
-			{if $INPUTERROR.flag.title eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
+			<input type="text" name="itemdata[ItemTitle]" maxlength="{$INPUTSIZE.ItemTitle|default:"255"}" value="{$ITEMDATA.ItemTitle}" />
+			{if $INPUTERROR.flag.ItemTitle eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
 		</td>
 	</tr>
 
 	<tr>
 		<td>{$I18N.MEDIA_ORIGINALTITLE|default:"%MEDIA_ORIGINALTITLE%"}</td>
 		<td>
-			<input type="text" name="itemdata[originaltitle]" maxlength="{$INPUTSIZE.originaltitle|default:"255"}" value="{$ITEMDATA.originaltitle}" />
-			{if $INPUTERROR.flag.originaltitle eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
+			<input type="text" name="itemdata[ItemOriginalTitle]" maxlength="{$INPUTSIZE.ItemOriginalTitle|default:"255"}" value="{$ITEMDATA.ItemOriginalTitle}" />
+			{if $INPUTERROR.flag.ItemOriginalTitle eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
 		</td>
 	</tr>
 
 	<tr>
 		<td>{$I18N.MEDIA_MEDIANAME|default:"%MEDIA_MEDIANAME%"}</td>
 		<td>
-			<input type="text" name="itemdata[medianame]" maxlength="{$INPUTSIZE.medianame|default:"255"}" value="{$ITEMDATA.medianame}" />
-			{if $INPUTERROR.flag.medianame eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
+			<input type="text" name="itemdata[ItemMediaName]" maxlength="{$INPUTSIZE.ItemMediaName|default:"255"}" value="{$ITEMDATA.ItemMediaName}" />
+			{if $INPUTERROR.flag.ItemMediaName eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
 		</td>
 	</tr>
 	
 	<tr>
 		<td>{$I18N.MEDIA_IDENTIFICATION|default:"%MEDIA_IDENTIFICATION%"}</td>
 		<td>
-			<input type="text" name="itemdata[identification]" maxlength="{$INPUTSIZE.identification|default:"255"}" value="{$ITEMDATA.identification}" />
-			{if $INPUTERROR.flag.identification eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
+			<input type="text" name="itemdata[ItemIdentification]" maxlength="{$INPUTSIZE.ItemIdentification|default:"255"}" value="{$ITEMDATA.ItemIdentification}" />
+			{if $INPUTERROR.flag.ItemIdentification eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
 		</td>
 	</tr>
 
 	<tr>
 		<td>{$I18N.MEDIA_RELEASEYEAR|default:"%MEDIA_RELEASEYEAR%"}</td>
 		<td>
-			<input type="text" name="itemdata[releaseyear]" maxlength="{$INPUTSIZE.releaseyear|default:"4"}" value="{$ITEMDATA.releaseyear}" />
-			{if $INPUTERROR.flag.releaseyear eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
+			<input type="text" name="itemdata[ItemRelease]" maxlength="{$INPUTSIZE.ItemRelease|default:"4"}" value="{$ITEMDATA.ItemRelease}" />
+			{if $INPUTERROR.flag.ItemRelease eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
 		</td>
 	</tr>
 	
 	<tr>
 		<td>{$I18N.MEDIA_CATEGORY|default:"%MEDIA_CATEGORY%"}</td>
 		<td>
-			<select name="itemdata[category]" size="5" multiple="true">
+			<select name="itemdata[Categories][]" size="5" multiple="true">
 {foreach from=$DATA.CATEGORIES item=currentDataItem key=currentDataKey}
 {assign var="TEMP" value="0"}
-	{foreach from=$ITEMDATA.CATEGORIES item=currentItemItem key=currentItemKey}
+	{foreach from=$ITEMDATA.Categories item=currentItemItem key=currentItemKey}
 			{if $currentItemItem eq $currentDataKey }
 				{assign var="TEMP" value="1"}
 				<option selected="true" value="{$currentDataKey}">{$currentDataItem} {$foo}</option>
@@ -64,26 +64,31 @@
 			{/if}
 {/foreach}
 			</select>
+			{if $INPUTERROR.flag.Categories eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
 		</td>
 	</tr>
 	
 	<tr>
 		<td>{$I18N.MEDIA_MEDIASIZE|default:"%MEDIA_MEDIASIZE%"}</td>
 		<td>
-			<input type="text" name="itemdata[mediasize_value]" maxlength="{$INPUTSIZE.mediasize_value|default:"255"}" value="{$ITEMDATA.mediasize_value}" />
-			{if $INPUTERROR.flag.mediasize_value eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
-			<select name="itemdata[mediasize_type]">
-				<option selected="true" value=""></option>
-			</select>
+			<input type="text" name="itemdata[ItemMediaSize]" maxlength="{$INPUTSIZE.ItemMediaSize|default:"255"}" value="{$ITEMDATA.ItemMediaSize}" />
+			{if $INPUTERROR.flag.ItemMediaSize eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
 		</td>
 	</tr>
 	
 	<tr>
-		<td>{$I18N.MEDIA_MEDIATYPE|default:"%MEDIA_MEDIATYPE%"}</td>
+		<td>{$I18N.MEDIA_FORMAT|default:"%MEDIA_FORMAT%"}</td>
 		<td>
-			<select name="itemdata[mediatype]">
-				<option selected="true" value=""></option>
+			<select name="itemdata[MediaFormatID]">
+{foreach from=$DATA.MEDIAFORMATS item=currentDataItem key=currentDataKey}
+	{if $currentDataKey eq $ITEMDATA.MediaFormat }
+				<option selected="true" value="{$currentDataKey}">{$currentDataItem}</option>
+	{else}
+				<option value="{$currentDataKey}">{$currentDataItem}</option>
+	{/if}
+{/foreach}
 			</select>
+			{if $INPUTERROR.flag.MediaFormatID eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
 		</td>
 	</tr>
 
@@ -91,22 +96,22 @@
 		<td>{$I18N.MEDIA_IMAGE|default:"%MEDIA_IMAGE%"}</td>
 		<td>
 			<img src="getbinary.php?itemid={$ITEMDATA.ID}" /><br />
-			<input type="file" name="itemdata[image]" />
+			<input type="file" name="itemdata[BinaryData]" />
 		</td>
 	</tr>
 
 	<tr>
 		<td>{$I18N.MEDIA_PUBLISHER|default:"%MEDIA_PUBLISHER%"}</td>
 		<td>
-			<input type="text" name="itemdata[publisher]" maxlength="{$INPUTSIZE.publisher|default:"255"}" value="{$ITEMDATA.PUBLISHER}" />
-			{if $INPUTERROR.flag.publisher eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
+			<input type="text" name="itemdata[PublisherName]" maxlength="{$INPUTSIZE.PublisherName|default:"255"}" value="{$ITEMDATA.PublisherName}" />
+			{if $INPUTERROR.flag.PublisherName eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
 		</td>
 	</tr>
 
 	<tr>
 		<td>{$I18N.MEDIA_AGERESTRICTION|default:"%MEDIA_AGERESTRICTION%"}</td>
 		<td>
-			<select name="itemdata[agerestriction]">
+			<select name="itemdata[MediaAgeRestrictionID]">
 {foreach from=$DATA.AGERESTRICTIONS item=currentDataItem key=currentDataKey}
 	{if $currentDataKey eq $ITEMDATA.AGERESTRICTION }
 				<option selected="true" value="{$currentDataKey}">{$currentDataItem}</option>
@@ -115,13 +120,14 @@
 	{/if}
 {/foreach}
 			</select>
+			{if $INPUTERROR.flag.MediaAgeRestrictionID eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
 		</td>
 	</tr>
 
 	<tr>
 		<td>{$I18N.MEDIA_CODEC|default:"%MEDIA_CODEC%"}</td>
 		<td>
-			<select name="itemdata[codec]">
+			<select name="itemdata[MediaCodecID ]">
 {foreach from=$DATA.CODECS item=currentDataItem key=currentDataKey}
 	{if $currentDataKey eq $ITEMDATA.CODEC }
 				<option selected="true" value="{$currentDataKey}">{$currentDataItem}</option>
@@ -130,14 +136,15 @@
 	{/if}
 {/foreach}
 			</select>
+			{if $INPUTERROR.flag.MediaCodecID eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
 		</td>
 	</tr>
 
 	<tr>
 		<td>{$I18N.MEDIA_QUANTITY|default:"%MEDIA_QUANTITY%"}</td>
 		<td>
-			<input type="text" name="itemdata[quantity]" maxlength="{$INPUTSIZE.quantity|default:"255"}" value="{$ITEMDATA.QUANTITY}" />
-			{if $INPUTERROR.flag.quantity eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
+			<input type="text" name="itemdata[ItemQuantity]" maxlength="{$INPUTSIZE.ItemQuantity|default:"255"}" value="{$ITEMDATA.ItemQuantity}" />
+			{if $INPUTERROR.flag.ItemQuantity eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
 		</td>
 	</tr>
 	
@@ -153,8 +160,8 @@
 	<tr>
 		<td></td>
 		<td>
-			{$I18N.MEDIA_CREATIONDATE|default:"%MEDIA_CREATIONDATE%"}: {$ITEMDATA.CREATIONDATE|date_format:"%A, %B %e, %Y %H:%M:%S"|default:$I18N.NOT_SET|default:"%NOT_SET%"} <br />
-			{$I18N.MEDIA_CREATIONDATE|default:"%MEDIA_MODIFICATIONDATE%"}: {$ITEMDATA.MODIFICATIONDATE|date_format:"%A, %B %e, %Y %H:%M:%S"|default:$I18N.NOT_SET|default:"%NOT_SET%"}
+			{$I18N.MEDIA_CREATIONDATE|default:"%MEDIA_CREATIONDATE%"}: {$ITEMDATA.ItemCreationDate|date_format:"%A, %B %e, %Y %H:%M:%S"|default:$I18N.NOT_SET|default:"%NOT_SET%"} <br />
+			{$I18N.MEDIA_CREATIONDATE|default:"%MEDIA_MODIFICATIONDATE%"}: {$ITEMDATA.ItemModificationDate|date_format:"%A, %B %e, %Y %H:%M:%S"|default:$I18N.NOT_SET|default:"%NOT_SET%"}
 		</td>
 	</tr>
 	



From nobody at sheep.berlios.de  Tue Mar 15 22:02:36 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 22:02:36 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration config.business.php,1.2,1.3
Message-ID: <200503152102.j2FL2aN14349@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration
In directory sheep:/tmp/cvs-serv26001/_source/tier.configuration

Modified Files:
	config.business.php 
Log Message:
* Added all check-vars for AUDIOS

Index: config.business.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/config.business.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- config.business.php	15 Mar 2005 17:39:33 -0000	1.2
+++ config.business.php	15 Mar 2005 21:02:33 -0000	1.3
@@ -8,20 +8,27 @@
  * Itemsepecifications (regex etc.)
  */ 
 
-$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['title'] = '^.{1,255}$';
-$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['originaltitle']  = '^(.{1,255})?$';
-$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['identification']	= '^(.{1,255})?$';
-$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['releaseyear']		= '^([[:digit:]]{4})?$';
-$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['quantity']				= '^([[:digit:]]{0,255})?$';
-$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['mediasize']			= '^(([[:digit:]]+([[:punct:]]{1}[[:digit:]]+)))?$';
-
-$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['title'] 					= 255;
-$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['originaltitle'] 	= 255;
-$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['identification'] 	= 255;
-$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['releaseyear']		 	= 4;
-$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['quantity'] 				= 255;
-$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['mediasize'] 			= 255;
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['ItemTitle'] 							= '^.{1,255}$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['ItemOriginalTitle']			= '^(.{1,255})?$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['ItemMediaName']					= '^(.{1,255})?$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['ItemIdentification']			= '^(.{1,255})?$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['ItemRelease']						= '^([[:digit:]]{4})?$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['Categories']							= '^([[:digit:]]+)?$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['ItemMediaSize']					= '^(([[:digit:]]+([[:punct:]]{1}[[:digit:]]+)))?$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['MediaFormatID']					= '^([[:digit:]]+)?$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['PublisherName']					= '^(.{1,255})?$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['MediaAgeRestrictionID']	= '^([[:digit:]]+)?$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['MediaCodecID']						= '^([[:digit:]]+)?$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['ItemQuantity']						= '^(.{1,255})?$';
 
+$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemTitle'] 						= 255;
+$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemOriginalTitle']			= 255;
+$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemMediaName']					= 255;
+$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemIdentification']		= 255;
+$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemRelease']						= 255;
+$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemMediaSize']					= 255;
+$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['PublisherName']					= 255;
+$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemQuantity']					= 255;
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Tue Mar 15 22:02:15 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 22:02:15 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration/i18n i18n.de.php,1.2,1.3
Message-ID: <200503152102.j2FL2FN14339@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/i18n
In directory sheep:/tmp/cvs-serv25993/_source/tier.configuration/i18n

Modified Files:
	i18n.de.php 
Log Message:
* Added some i18n-variables

Index: i18n.de.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/i18n/i18n.de.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- i18n.de.php	8 Mar 2005 17:52:07 -0000	1.2
+++ i18n.de.php	15 Mar 2005 21:02:13 -0000	1.3
@@ -9,7 +9,20 @@
 	$i18n['CANCEL'] = 'Abbrechen';
 	$i18n['DELETE'] = 'L?schen';
 	$i18n['DELETE'] = 'L?schen';
+	$i18n['INPUT_FIELD'] = 'Eingabefeld';
+	
+/* messages */
+	$i18n['MESSAGE_SUCCESS_SAVE']	= 'Element erfolgreich gespeichert!';
 	
+/* errors */
+	$i18n['ERROR_INPUTSIZE']	= 'Eingabe zu gro?.';
+	$i18n['ERROR_INPUTREGEX']	= 'Eingabe nicht korrekt.';
+	$i18n['ERROR_OCCURRED']		= 'Es sind Eingabefehler auftreten.';
+	$i18n['ERROR_LISTLINK']		= '[Fehlerliste]';
+	
+/* formular */
+	$i18n['FORM_RESET'] = 'Zur?cksetzen';
+	$i18n['FORM_SUBMIT'] = 'Absenden';
 	
 /* media data */
 	$i18n['MEDIA_TITLE'] = 'Medientitel';



From nobody at sheep.berlios.de  Tue Mar 15 22:03:25 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 22:03:25 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_layout/stylesheet default.css,1.4,1.5
Message-ID: <200503152103.j2FL3PN14374@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_layout/stylesheet
In directory sheep:/tmp/cvs-serv26023/_layout/stylesheet

Modified Files:
	default.css 
Log Message:
* Changed footer and body
* Added inputerror

Index: default.css
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_layout/stylesheet/default.css,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- default.css	8 Mar 2005 20:45:50 -0000	1.4
+++ default.css	15 Mar 2005 21:03:22 -0000	1.5
@@ -2,7 +2,7 @@
 /* $Id$ */
 
 /*** BASIC ELEMENTS **********************************************************/
-BODY { margin:0px 0px 0px 0px;padding:0px 0px 0px 0px; font-family:Helvetica,Arial; }
+BODY { margin:0px 0px 50px 0px;padding:0px 0px 0px 0px; font-family:Helvetica,Arial; }
 
 IMG { border:0px; vertical-align:baseline;}
 
@@ -32,8 +32,10 @@
 .phpmediadb-body-menu A:hover { color:black; background-color:#CCCCCC; padding:3px; border:1px solid #666666; text-decoration: none; }
 .phpmediadb-body-menu A:active { color:black; background-color:#E6E6E6; padding:3px; border:1px solid #666666; text-decoration: none; }
 
+.phpmediadb-body-inputerror { color:red; }
+
 /*** PHPMEDIADB-FOOTER *******************************************************/
-#phpmediadb-footer { background-color:#EEEEEE; position:absolute; bottom:0px; left:0px; right:0px; text-align:center;border-top:1px solid grey; }
+#phpmediadb-footer { background-color:#EEEEEE; position:fixed; bottom:0px; left:0px; right:0px; text-align:center;border-top:1px solid grey; }
 
 /* ------------------------------------------------------------------------- */
 /* ------------------------------------------------------------------------- */



From nobody at sheep.berlios.de  Tue Mar 15 22:06:53 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Tue, 15 Mar 2005 22:06:53 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/admin item-session.php,1.2,1.3
Message-ID: <200503152106.j2FL6rN14485@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/admin
In directory sheep:/tmp/cvs-serv26182/admin

Modified Files:
	item-session.php 
Log Message:
* Added loading of categories, mediaformats, agerestrictions and codecs (but still deactivated)

Index: item-session.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/admin/item-session.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- item-session.php	15 Mar 2005 18:15:44 -0000	1.2
+++ item-session.php	15 Mar 2005 21:06:50 -0000	1.3
@@ -16,6 +16,21 @@
 	$itemSize = $PHPMEDIADB->BUSINESS->INSPECTOR->getSize( $sessionItem['type'] );
 	@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'INPUTSIZE', $itemSize );
 	
+	/* get database-vars */
+	/*
+	$categories				= $PHPMEDIADB->BUSINESS->CATEGORIES->getList();
+	$formats					= $PHPMEDIADB->BUSINESS->FORMAT->getList();
+	$ageRestrictions	= $PHPMEDIADB->BUSINESS->AGERESTRICTIONS->getList();
+	$codecs						= $PHPMEDIADB->BUSINESS->CODECS->getList();
+	*/
+	
+	/* assign database-vars */
+	@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'DATA.CATEGORIES', $categories );
+	@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'DATA.MEDIAFORMATS', $formats );
+	@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'DATA.AGERESTRICTIONS', $ageRestrictions );
+	@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'DATA.CODECS', $codecs );
+	
+	
 	switch( $sessionItem['type'] )
 	{
 		case(PHPMEDIADB_ITEM_AUDIO):
@@ -100,14 +115,12 @@
 
 //-----------------------------------------------------------------------------
 
-
 $sessionItem = itemGet();
 if( isset( $_POST['buttonsave'] ) )
 {
 	/* set itemdata to sessionItem */
 	$sessionItem['data'] = $_POST['itemdata'];
 	$PHPMEDIADB->PRESENTATION->SESSION->register( 'sessionitem' ,$sessionItem );
-	
 	
 	/* try to save */
 	itemSave( $sessionItem );



From nobody at sheep.berlios.de  Wed Mar 16 15:56:47 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 16 Mar 2005 15:56:47 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.presentation class.phpmediadb_presentation_contentvars.php,1.7,1.8
Message-ID: <200503161456.j2GEulN12622@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation
In directory sheep:/tmp/cvs-serv13335/_source/tier.presentation

Modified Files:
	class.phpmediadb_presentation_contentvars.php 
Log Message:
* Fixed syntax mistake

Index: class.phpmediadb_presentation_contentvars.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_contentvars.php,v
retrieving revision 1.7
retrieving revision 1.8
diff -u -d -r1.7 -r1.8
--- class.phpmediadb_presentation_contentvars.php	15 Mar 2005 20:23:41 -0000	1.7
+++ class.phpmediadb_presentation_contentvars.php	16 Mar 2005 14:56:45 -0000	1.8
@@ -297,40 +297,44 @@
 	protected function convertNodeValue( $nodeValue, $nodeFormat )
 	{
 		$returnValue = null;
-	
+
 		switch( gettype( $nodeValue ) )
 		{
 			case 'array';
-					foreach( $nodeValue as $key => $value )
-					{
-						/* recursive call */
-						$returnValue[$key] = $this->convertNodeValue( $nodeValue[$key], $nodeFormat );
-					}
-				break;	
+				foreach( $nodeValue as $key => $value )
+				{
+					/* recursive call */
+					$returnValue[$key] = $this->convertNodeValue( $nodeValue[$key], $nodeFormat );
+				}
+			break;	
+			
+			case 'NULL':
+				$returnValue = $nodeValue;
+			break;
 			
 			/* let's convert */
 			default:
-					switch( $nodeFormat )
-					{
-							/* plaintext content */
-							case(PHPMEDIADB_NODEFORMAT_TEXT):
-									$returnValue = htmlentities( $nodeValue );
-								break;
+				switch( $nodeFormat )
+				{
+					/* plaintext content */
+					case(PHPMEDIADB_NODEFORMAT_TEXT):
+						$returnValue = htmlentities( $nodeValue );
+					break;
 								
-						/* html content */
-						case(PHPMEDIADB_NODEFORMAT_HTML):
-									$returnValue = $nodeValue;
-								break;
+					/* html content */
+			 		case(PHPMEDIADB_NODEFORMAT_HTML):
+						$returnValue = $nodeValue;
+					break;
 								
-						/* not supported format */
-						default:
-									$returnValue = $nodeValue;
-								break;	
+					/* not supported format */
+					default:
+						$returnValue = $nodeValue;
+					break;	
 						
-					}
-				break;
+				}
+			break;
 		}
-
+	
 		/* return value */
 		return $returnValue;
 	}



From nobody at sheep.berlios.de  Wed Mar 16 15:56:57 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 16 Mar 2005 15:56:57 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.presentation class.phpmediadb_presentation_htmlservice.php,1.7,1.8
Message-ID: <200503161456.j2GEuvN12626@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation
In directory sheep:/tmp/cvs-serv13361/_source/tier.presentation

Modified Files:
	class.phpmediadb_presentation_htmlservice.php 
Log Message:
* Fixed syntax mistake

Index: class.phpmediadb_presentation_htmlservice.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_htmlservice.php,v
retrieving revision 1.7
retrieving revision 1.8
diff -u -d -r1.7 -r1.8
--- class.phpmediadb_presentation_htmlservice.php	15 Mar 2005 20:24:28 -0000	1.7
+++ class.phpmediadb_presentation_htmlservice.php	16 Mar 2005 14:56:54 -0000	1.8
@@ -124,11 +124,11 @@
 		/* clear vars */
 		$this->templateEngine->clear_all_assign();
 		
+		/* set i18n-vars to contentvars*/
+		//$this->PRESENTATION->CONTENTVARS->addNode( 'I18N', $this->PRESENTATION->I18N->getLanguageArray() );
+		
 		/* set contentvars */
 		$this->templateEngine->assign( $this->PRESENTATION->CONTENTVARS->getNode() );
-		
-		/* set i18n-vars */
-		$this->templateEngine->assign( 'I18N', $this->PRESENTATION->I18N->getLanguageArray() );
 		
 		/* set CONFIGURATION */
 		$configuration['ROOTPATH'] = $this->PRESENTATION->configuration['webpath']['root-path'];



From nobody at sheep.berlios.de  Wed Mar 16 15:57:17 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 16 Mar 2005 15:57:17 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration config.business.php,1.3,1.4
Message-ID: <200503161457.j2GEvHN12662@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration
In directory sheep:/tmp/cvs-serv13420/_source/tier.configuration

Modified Files:
	config.business.php 
Log Message:
* Fixed syntax mistake

Index: config.business.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/config.business.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- config.business.php	15 Mar 2005 21:02:33 -0000	1.3
+++ config.business.php	16 Mar 2005 14:57:15 -0000	1.4
@@ -25,7 +25,7 @@
 $phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemOriginalTitle']			= 255;
 $phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemMediaName']					= 255;
 $phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemIdentification']		= 255;
-$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemRelease']						= 255;
+$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemRelease']						= 4;
 $phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemMediaSize']					= 255;
 $phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['PublisherName']					= 255;
 $phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemQuantity']					= 255;



From nobody at sheep.berlios.de  Wed Mar 16 15:57:28 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 16 Mar 2005 15:57:28 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration config.data.php,1.2,1.3
Message-ID: <200503161457.j2GEvSN12671@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration
In directory sheep:/tmp/cvs-serv13446/_source/tier.configuration

Modified Files:
	config.data.php 
Log Message:
* Fixed syntax mistake

Index: config.data.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/config.data.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- config.data.php	14 Mar 2005 18:40:32 -0000	1.2
+++ config.data.php	16 Mar 2005 14:57:26 -0000	1.3
@@ -11,12 +11,16 @@
  *   username:  SQL User
  *   password:  SQL User Password
  *   database:  SQL Database
+ *   conntype:  Type of Connection	->	comment out for normal connection,
+ *										CREOLE::PERSISTENT for persistent connection
  */
 $phpMediaDbConfig['DATA']['sql-connection']['phptype']  = 'mysql';
 $phpMediaDbConfig['DATA']['sql-connection']['hostspec'] = 'localhost';
 $phpMediaDbConfig['DATA']['sql-connection']['username'] = 'dbuser';
 $phpMediaDbConfig['DATA']['sql-connection']['password'] = 'dbpass';
 $phpMediaDbConfig['DATA']['sql-connection']['database'] = 'phpmediadb';
+
+//$phpMediaDbConfig['DATA']['sql-connection']['conntype'] = CREOLE::PERSISTENT;
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Wed Mar 16 15:57:43 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 16 Mar 2005 15:57:43 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration/templates body.item.audio.formular.tpl,1.2,1.3
Message-ID: <200503161457.j2GEvhN12675@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/templates
In directory sheep:/tmp/cvs-serv13481/_source/tier.configuration/templates

Modified Files:
	body.item.audio.formular.tpl 
Log Message:
* Fixed syntax mistake

Index: body.item.audio.formular.tpl
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/templates/body.item.audio.formular.tpl,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- body.item.audio.formular.tpl	15 Mar 2005 21:00:49 -0000	1.2
+++ body.item.audio.formular.tpl	16 Mar 2005 14:57:41 -0000	1.3
@@ -55,12 +55,11 @@
 	{foreach from=$ITEMDATA.Categories item=currentItemItem key=currentItemKey}
 			{if $currentItemItem eq $currentDataKey }
 				{assign var="TEMP" value="1"}
-				<option selected="true" value="{$currentDataKey}">{$currentDataItem} {$foo}</option>
+				<option selected="true" value="{$currentDataKey}">{$currentDataItem}</option>
 			{/if}
 	{/foreach}
-	{$TEMP}
 			{if $TEMP eq "0" }
-				<option value="{$currentDataKey}">{$currentDataItem} {$foo}</option>
+				<option value="{$currentDataKey}">{$currentDataItem}</option>
 			{/if}
 {/foreach}
 			</select>



From nobody at sheep.berlios.de  Wed Mar 16 15:57:06 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 16 Mar 2005 15:57:06 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.presentation class.phpmediadb_presentation_i18n.php,1.7,1.8
Message-ID: <200503161457.j2GEv6N12642@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation
In directory sheep:/tmp/cvs-serv13391/_source/tier.presentation

Modified Files:
	class.phpmediadb_presentation_i18n.php 
Log Message:
* Fixed syntax mistake

Index: class.phpmediadb_presentation_i18n.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_i18n.php,v
retrieving revision 1.7
retrieving revision 1.8
diff -u -d -r1.7 -r1.8
--- class.phpmediadb_presentation_i18n.php	15 Mar 2005 20:24:50 -0000	1.7
+++ class.phpmediadb_presentation_i18n.php	16 Mar 2005 14:57:04 -0000	1.8
@@ -189,6 +189,10 @@
   	if( key_exists( $this->availableLanguagesContainer, $langCode ) && !$this->PRESENTATION->configuration['i18n']['forcedLanguage'] )
   	{
   		$this->loadLanagueFile( $langCode );
+  		
+  		/* save i18n-vars to contentvars */
+  		$this->PRESENTATION->CONTENTVARS->addNode( 'I18N', $this->getLanguageArray() );
+  		
   		$returnValue = true;
   	}
   	  	
@@ -317,6 +321,9 @@
 		
 		/* load language file */
 		$this->loadLanagueFile( $this->langCode );
+		
+		/* save i18n-vars to contentvars */
+		$this->PRESENTATION->CONTENTVARS->addNode( 'I18N', $this->getLanguageArray() );
 		
 	}
 //-----------------------------------------------------------------------------



From nobody at sheep.berlios.de  Wed Mar 16 15:57:56 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 16 Mar 2005 15:57:56 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/admin item-session.php,1.3,1.4
Message-ID: <200503161457.j2GEvuN12682@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/admin
In directory sheep:/tmp/cvs-serv13550/admin

Modified Files:
	item-session.php 
Log Message:
* Fixed syntax mistake

Index: item-session.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/admin/item-session.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- item-session.php	15 Mar 2005 21:06:50 -0000	1.3
+++ item-session.php	16 Mar 2005 14:57:53 -0000	1.4
@@ -30,7 +30,6 @@
 	@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'DATA.AGERESTRICTIONS', $ageRestrictions );
 	@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'DATA.CODECS', $codecs );
 	
-	
 	switch( $sessionItem['type'] )
 	{
 		case(PHPMEDIADB_ITEM_AUDIO):
@@ -121,7 +120,7 @@
 	/* set itemdata to sessionItem */
 	$sessionItem['data'] = $_POST['itemdata'];
 	$PHPMEDIADB->PRESENTATION->SESSION->register( 'sessionitem' ,$sessionItem );
-	
+
 	/* try to save */
 	itemSave( $sessionItem );
 }



From nobody at sheep.berlios.de  Wed Mar 16 16:01:55 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 16 Mar 2005 16:01:55 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_agerestrictions.php,1.6,1.7
Message-ID: <200503161501.j2GF1tN12807@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv13839/_source/tier.data

Modified Files:
	class.phpmediadb_data_agerestrictions.php 
Log Message:
* Fixed syntax mistake
* Added some comments
* Added array $data
* Changed methods exist() and create()

Index: class.phpmediadb_data_agerestrictions.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_agerestrictions.php,v
retrieving revision 1.6
retrieving revision 1.7
diff -u -d -r1.6 -r1.7
--- class.phpmediadb_data_agerestrictions.php	15 Mar 2005 17:44:52 -0000	1.6
+++ class.phpmediadb_data_agerestrictions.php	16 Mar 2005 15:01:52 -0000	1.7
@@ -7,7 +7,7 @@
 	// --- ATTRIBUTES ---
 
 	/**
-	 * Short description of attribute PHPMEDIADB
+	 * Reference to class PHPMEDIADB
 	 *
 	 * @access protected
 	 * @see phpmediadb
@@ -16,7 +16,7 @@
 	protected $PHPMEDIADB = null;
 
 	/**
-	 * Short description of attribute DATA
+	 * Reference to class DATA
 	 *
 	 * @access protected
 	 * @see phpmediadb_presentation
@@ -32,11 +32,13 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb_data
+	 * @param phpmediadb_data $sender Reference to parent class
 	 */
-	public function __construct()
+	public function __construct( $sender )
 	{
-		/* nothing to do yet */
+		/* assign parent */
+		$this->DATA			= $sender;
+		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
 	}
   
 //-----------------------------------------------------------------------------
@@ -57,16 +59,16 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @return String
+	 * @param Integer $id contains specified id for the sql statement
+	 * @return Mixed array $rs contains result of database query
 	 */
-	public function get( $MediaAgeRestrictionID )
+	public function get( $id )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'SELECT *
-		FROM MediaAgeRestrictions,
-		WHERE MediaAgeRestrictions.MediaAgeRestrictionID = ?' );
-		$stmt->setString( 1, $MediaAgeRestrictionID );
+		$stmt = $conn->prepareStatement(	'SELECT *
+											FROM MediaAgeRestrictions,
+											WHERE MediaAgeRestrictions.MediaAgeRestrictionID = ?' );
+		$stmt->setString( 1, $id );
 		$rs = $stmt->executeQuery();
 		
 		return $rs;
@@ -78,14 +80,14 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return String
+	 * @return Mixed array $rs contains result of database query
 	 */
 	public function getList()
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'SELECT *
-		FROM MediaAgeRestrictions,
-		WHERE MediaAgeRestrictions.MediaRestrictionID LIKE "%"' );
+		$stmt = $conn->prepareStatement(	'SELECT *
+											FROM MediaAgeRestrictions,
+											WHERE MediaAgeRestrictions.MediaRestrictionID LIKE "%"' );
 		$rs = $stmt->executeQuery();
 		
 		return $rs;
@@ -97,16 +99,18 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param String
+	 * @param Mixed array $data contains all required data for the sql statement
+	 * @return Integer getLastInsert() returns id from the last created record
 	 */
-	public function create( $MediaAgeRestriction )
+	public function create( $data )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'INSERT INTO MediaAgeRestrictions
-		( MediaAgeRestriction ) VALUES( ? )' );
-		$stmt->setString( 1, $MediaAgeRestriction );
+		$stmt = $conn->prepareStatement(	'INSERT INTO MediaAgeRestrictions
+											( MediaAgeRestriction ) VALUES( ? )' );
+		$stmt->setString( 1, $data['MediaAgeRestriction'] );
 		$stmt->executeUpdate();
 		
+		return $this->DATA->SQL->getLastInsert();
 	}
 
 //-----------------------------------------------------------------------------
@@ -115,17 +119,17 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @param String
+	 * @param Integer $id contains specified id for the sql statement
+	 * @param Mixed array $data contains all required data for the sql statement
 	 */
-	public function modify( $MediaAgeRestrictionID, $MediaAgeRestriction )
+	public function modify( $id, $data )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'UPDATE MediaAgeRestrictions
-		SET MediaAgeRestrictions.MediaAgeRestriction = ?
-		WHERE MediaAgeRestrictions.MediaAgeRestrictionID = ?' );
-		$stmt->setString( 1, $MediaAgeRestriction );
-		$stmt->setString( 2, $MediaAgeRestrictionID );
+		$stmt = $conn->prepareStatement(	'UPDATE MediaAgeRestrictions
+											SET MediaAgeRestrictions.MediaAgeRestriction = ?
+											WHERE MediaAgeRestrictions.MediaAgeRestrictionID = ?' );
+		$stmt->setString( 1, $data['MediaAgeRestriction'] );
+		$stmt->setString( 2, $id );
 		$stmt->executeUpdate();
 		
 	}
@@ -136,16 +140,15 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
+	 * @param Integer $id contains specified id for the sql statement
 	 */
-	public function delete( $MediaAgeRestrictionID )
+	public function delete( $id )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'DELETE FROM MediaAgeRestrictions
-		WHERE MediaAgeRestrictions.MediaAgeRestrictionID = ?' );
-		$stmt->setString( 1, $MediaAgeRestrictionID );
+		$stmt = $conn->prepareStatement(	'DELETE FROM MediaAgeRestrictions
+											WHERE MediaAgeRestrictions.MediaAgeRestrictionID = ?' );
+		$stmt->setString( 1, $id );
 		$stmt->executeUpdate();
-		
 	}
 
 //-----------------------------------------------------------------------------
@@ -155,29 +158,30 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @return Boolean
+	 * @param Integer $id contains specified id for the sql statement
+	 * @return Boolean $returnValue returns whether the specified record exists
 	 */
-	public function exist( $MediaAgeRestrictionID )
+	public function exist( $id )
 	{
+		/* init */
+		$returnValue = false;
+		
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'SELECT COUNT(*)
-		FROM MediaAgeRestrictions,
-		WHERE MediaAgeRestrictions.MediaAgeRestrictionID = ?' );
-		$stmt->setString( 1, $MediaAgeRestrictionID );
+		$stmt = $conn->prepareStatement( 	'SELECT COUNT(*)
+											FROM MediaAgeRestrictions,
+											WHERE MediaAgeRestrictions.MediaAgeRestrictionID = ?' );
+		$stmt->setString( 1, $id );
 		$rs = $stmt->executeQuery( ResultSet::FETCHMODE_NUM );
 		$rs->next();
+		
+		/* check if item exists */
 		if( $rs->get(1) >= 1 )
-			{
-			return true;
-			}
-		else
-			{
-			return false;
-			}
+			$returnValue = true;
+
+		return $returnValue;
 	}
 
 //-----------------------------------------------------------------------------
-}
+} /* end of class phpmediadb_data_agerestrictions */
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Wed Mar 16 16:02:08 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 16 Mar 2005 16:02:08 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_audios.php,1.5,1.6
Message-ID: <200503161502.j2GF28N12824@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv13866/_source/tier.data

Modified Files:
	class.phpmediadb_data_audios.php 
Log Message:
* Fixed syntax mistake
* Added some comments
* Added array $data
* Changed methods exist() and create()

Index: class.phpmediadb_data_audios.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_audios.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- class.phpmediadb_data_audios.php	15 Mar 2005 17:45:13 -0000	1.5
+++ class.phpmediadb_data_audios.php	16 Mar 2005 15:02:03 -0000	1.6
@@ -7,7 +7,7 @@
 	// --- ATTRIBUTES ---
 
 	/**
-	 * Short description of attribute PHPMEDIADB
+	 * Reference to class PHPMEDIADB
 	 *
 	 * @access protected
 	 * @see phpmediadb
@@ -16,7 +16,7 @@
 	protected $PHPMEDIADB = null;
 
 	/**
-	 * Short description of attribute DATA
+	 * Reference to class DATA
 	 *
 	 * @access protected
 	 * @see phpmediadb_presentation
@@ -32,11 +32,13 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb_data
+	 * @param phpmediadb_data $sender Reference to parent class
 	 */
-	public function __construct()
+	public function __construct( $sender )
 	{
-		/* nothing to do yet */
+		/* assign parent */
+		$this->DATA			= $sender;
+		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
 	}
   
 //-----------------------------------------------------------------------------
@@ -59,32 +61,32 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @return String
+	 * @param Integer $id contains specified id for the sql statement
+	 * @return Mixed array $rs contains result of database query
 	 */
-	public function get( $AudioDataID )
+	public function get( $id )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
-		FROM AudioDatas a,
-		Languages b,
-		Items c,
-		ItemTypes d,
-		MediaCodecs e,
-		MediaFormats f,
-		MediaAgeRestrictions g,
-		MediaStatus h,
-		BinaryDatas i
-		WHERE a.AudioDataID = ? 
-		AND a.LanguageID = b.LanguageID
-		AND a.ItemID = c.ItemID
-		AND c.ItemTypeID = d.ItemTypeID
-		AND c.MediaCodecID = e.MediaCodecID
-		AND c.MediaFormatID = f.MediaFormatID
-		AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
-		AND c.MediaStatusID = h.MediaStatusID
-		AND c.ItemPicturesID = i.ItemPicturesID' );
-		$stmt->setString( 1, $AudioDataID );
+		$stmt = $conn->prepareStatement(	'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
+											FROM AudioDatas a,
+											Languages b,
+											Items c,
+											ItemTypes d,
+											MediaCodecs e,
+											MediaFormats f,
+											MediaAgeRestrictions g,
+											MediaStatus h,
+											BinaryDatas i
+											WHERE c.ItemID = ? 
+											AND a.LanguageID = b.LanguageID
+											AND a.ItemID = c.ItemID
+											AND c.ItemTypeID = d.ItemTypeID
+											AND c.MediaCodecID = e.MediaCodecID
+											AND c.MediaFormatID = f.MediaFormatID
+											AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
+											AND c.MediaStatusID = h.MediaStatusID
+											AND c.ItemPicturesID = i.ItemPicturesID' );
+		$stmt->setString( 1, $id );
 		$rs = $stmt->executeQuery();
 		
 		return $rs;
@@ -97,91 +99,64 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return String
+	 * @return Mixed array $rs contains result of database query
 	 */
 	public function getList()
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
-		FROM AudioDatas a,
-		Languages b,
-		Items c,
-		ItemTypes d,
-		MediaCodecs e,
-		MediaFormats f,
-		MediaAgeRestrictions g,
-		MediaStatus h,
-		BinaryDatas i
-		WHERE a.AudioDataID LIKE "%" 
-		AND a.LanguageID = b.LanguageID
-		AND a.ItemID = c.ItemID
-		AND c.ItemTypeID = d.ItemTypeID
-		AND c.MediaCodecID = e.MediaCodecID
-		AND c.MediaFormatID = f.MediaFormatID
-		AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
-		AND c.MediaStatusID = h.MediaStatusID
-		AND c.ItemPicturesID = i.ItemPicturesID' );
+		$stmt = $conn->prepareStatement(	'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
+											FROM AudioDatas a,
+											Languages b,
+											Items c,
+											ItemTypes d,
+											MediaCodecs e,
+											MediaFormats f,
+											MediaAgeRestrictions g,
+											MediaStatus h,
+											BinaryDatas i
+											WHERE c.ItemID LIKE "%" 
+											AND a.LanguageID = b.LanguageID
+											AND a.ItemID = c.ItemID
+											AND c.ItemTypeID = d.ItemTypeID
+											AND c.MediaCodecID = e.MediaCodecID
+											AND c.MediaFormatID = f.MediaFormatID
+											AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
+											AND c.MediaStatusID = h.MediaStatusID
+											AND c.ItemPicturesID = i.ItemPicturesID' );
 		$rs = $stmt->executeQuery();
 		
 		return $rs;
 	}
 
 //-----------------------------------------------------------------------------
-	/**
-	 * This function deletes a specified record from the table AudioDatas
-	 * and all depending data from the other tables
-	 *
-	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 */
-	public function delete( $AudioDataID )
-	{
-		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'DELETE AudioDatas, Items, BinaryDatas, Categories_has_Items
-		FROM AudioDatas, Items, BinaryDatas, Categories_has_Items
-		WHERE AudioDatas.AudioDataID = ?
-		AND AudioDatas.ItemID = Items.ItemID
-		AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID
-		AND Items.ItemID = Categories_has_Items.ItemID' );
-		$stmt->setString( 1, $AudioDataID );
-		$stmt->executeUpdate();
-	}
-
-//-----------------------------------------------------------------------------
 /**
 	 * This function creates a new record in the table AudioDatas
 	 * and all required data in the other tables
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @param String
-	 * @param String
-	 * @param String
-	 * @param Integer
-	 * @param String
-	 * @param Blob
+	 * @param Mixed array $data contains all required data for the sql statement
+	 * @return Integer getLastInsert() returns id from the last created record
 	 */
-	public function create( $AudioDataMediaCount, $AudioDataDiscID, $ItemTitle, $ItemOriginalTitle,
-	$ItemRelease, $ItemMediaName, $ItemComment )
+	public function create( $data )
 	{
 		$conn = $this->DATA->SQL->getConnection();
 		$stmt = $conn->prepareStatement( 'INSERT INTO AudioDatas ( AudioDataMediaCount, AudioDataDiscID ) VALUES( ?, ? )' );
 		$stmt->setString( 1, $AudioDataMediaCount );
 		$stmt->setString( 2, $AudioDataDiscID );
 		$stmt->executeUpdate();
-		
+				
 		$stmt = $conn->prepareStatement( 'INSERT INTO Items
 		( ItemTitle, ItemOriginalTitle, ItemRelease, ItemMediaName, ItemCreationDate, ItemModificationDate, ItemComment )
 		VALUES( ?, ?, ?, ?, now(), now(), ? )' );
-		$stmt->setString( 1, $ItemTitle );
-		$stmt->setString( 2, $ItemOriginalTitle );
-		$stmt->setString( 3, $ItemRelease );
-		$stmt->setString( 4, $ItemMediaName );
-		$stmt->setString( 5, $ItemComment );
+		$stmt->setString( 1, $data['ItemTitle'] );
+		$stmt->setString( 2, $data['ItemOriginalTitle'] );
+		$stmt->setString( 3, $data['ItemRelease'] );
+		$stmt->setString( 4, $data['ItemMediaName'] );
+		$stmt->setString( 5, $data['ItemComment'] );
 		$stmt->executeUpdate();
 		
+		return $this->DATA->SQL->getLastInsert( $conn );	
 	}
 
 //-----------------------------------------------------------------------------
@@ -191,71 +166,79 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @param Integer
-	 * @param String
-	 * @param String
-	 * @param String
-	 * @param Integer
-	 * @param String
-	 * @param Blob
-	 * @param Integer
-	 * @param Integer
-	 * @param Integer
-	 * @param Integer
-	 * @param Integer
+	 * @param Integer $id contains specified id for the sql statement
+	 * @param Mixed array $data contains all required data for the sql statement
 	 */
-	public function modify( $AudioDataID, $AudioDataMediaCount, $AudioDataDiscID, $ItemTitle, $ItemOriginalTitle,
-	$ItemRelease, $ItemMediaName, $ItemComment, $MediaCodecID, $MediaFormatID,
-	$MediaAgeRestrictionID, $MediaStatusID, $ItemPicturesID )
+	public function modify( $id, $data )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'UPDATE AudioDatas,
-		Languages,
-		Items,
-		ItemTypes,
-		MediaCodecs,
-		MediaFormats,
-		MediaAgeRestrictions,
-		MediaStatus,
-		BinaryDatas
-		SET AudioDatas.AudioDataMediaCount = ?,
-		AudioDatas.AudioDataDiscID = ?,
-		Items.ItemTitle = ?,
-		Items.ItemOriginalTitle = ?,
-		Items.ItemRelease = ?,
-		Items.ItemMediaName = ?,
-		Items.ItemModificationDate = now(),
-		Items.ItemComment = ?,
-		Items.MediaCodecID = ?,
-		Items.MediaFormatID = ?,
-		Items.MediaAgeRestrictionID = ?,
-		Items.MediaStatusID = ?,
-		Items.ItemPicturesID = ?
-		WHERE AudioDatas.AudioDataID = ? 
-		AND AudioDatas.LanguageID = Languages.LanguageID
-		AND AudioDatas.ItemID = Items.ItemID
-		AND Items.ItemTypeID = ItemTypes.ItemTypeID
-		AND Items.MediaCodecID = MediaCodecs.MediaCodecID
-		AND Items.MediaFormatID = MediaFormats.MediaFormatID
-		AND Items.MediaAgeRestrictionID = MediaAgeRestrictions.MediaAgeRestrictionID
-		AND Items.MediaStatusID = MediaStatus.MediaStatusID
-		AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID' );
-		$stmt->setString( 1, $AudioDataMediaCount );
-		$stmt->setString( 2, $AudioDataDiscID );
-		$stmt->setString( 3, $ItemTitle );
-		$stmt->setString( 4, $ItemOriginalTitle );
-		$stmt->setString( 5, $ItemRelease );
-		$stmt->setString( 6, $ItemMediaName );
-		$stmt->setString( 7, $ItemComment );
-		$stmt->setString( 8, $MediaCodecID );
-		$stmt->setString( 9, $MediaFormatID );
-		$stmt->setString( 10, $MediaAgeRestrictionID );
-		$stmt->setString( 11, $MediaStatusID );
-		$stmt->setString( 12, $ItemPicturesID );
-		$stmt->setString( 13, $AudioDataID );
+		$stmt = $conn->prepareStatement(	'UPDATE AudioDatas,
+											Languages,
+											Items,
+											ItemTypes,
+											MediaCodecs,
+											MediaFormats,
+											MediaAgeRestrictions,
+											MediaStatus,
+											BinaryDatas
+											SET AudioDatas.AudioDataMediaCount = ?,
+											AudioDatas.AudioDataDiscID = ?,
+											Items.ItemTitle = ?,
+											Items.ItemOriginalTitle = ?,
+											Items.ItemRelease = ?,
+											Items.ItemMediaName = ?,
+											Items.ItemModificationDate = now(),
+											Items.ItemComment = ?,
+											Items.MediaCodecID = ?,
+											Items.MediaFormatID = ?,
+											Items.MediaAgeRestrictionID = ?,
+											Items.MediaStatusID = ?,
+											Items.ItemPicturesID = ?
+											WHERE Items.ItemID = ? 
+											AND AudioDatas.LanguageID = Languages.LanguageID
+											AND AudioDatas.ItemID = Items.ItemID
+											AND Items.ItemTypeID = ItemTypes.ItemTypeID
+											AND Items.MediaCodecID = MediaCodecs.MediaCodecID
+											AND Items.MediaFormatID = MediaFormats.MediaFormatID
+											AND Items.MediaAgeRestrictionID = MediaAgeRestrictions.MediaAgeRestrictionID
+											AND Items.MediaStatusID = MediaStatus.MediaStatusID
+											AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID' );
+		$stmt->setString( 1, $data['AudioDataMediaCount'] );
+		$stmt->setString( 2, $data['AudioDataDiscID'] );
+		$stmt->setString( 3, $data['ItemTitle'] );
+		$stmt->setString( 4, $data['ItemOriginalTitle'] );
+		$stmt->setString( 5, $data['ItemRelease'] );
+		$stmt->setString( 6, $data['ItemMediaName'] );
+		$stmt->setString( 7, $data['ItemComment'] );
+		$stmt->setString( 8, $data['MediaCodecID'] );
+		$stmt->setString( 9, $data['MediaFormatID'] );
+		$stmt->setString( 10, $data['MediaAgeRestrictionID'] );
+		$stmt->setString( 11, $data['MediaStatusID'] );
+		$stmt->setString( 12, $data['ItemPicturesID'] );
+		$stmt->setString( 13, $id );
+		$stmt->executeUpdate();
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * This function deletes a specified record from the table AudioDatas
+	 * and all depending data from the other tables
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param Integer $id contains specified id for the sql statement
+	 */
+	public function delete( $id )
+	{
+		$conn = $this->DATA->SQL->getConnection();
+		$stmt = $conn->prepareStatement(	'DELETE AudioDatas, Items, BinaryDatas, Categories_has_Items
+											FROM AudioDatas, Items, BinaryDatas, Categories_has_Items
+											WHERE Items.ItemID = ?
+											AND AudioDatas.ItemID = Items.ItemID
+											AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID
+											AND Items.ItemID = Categories_has_Items.ItemID' );
+		$stmt->setString( 1, $id );
 		$stmt->executeUpdate();
-		
 	}
 
 //-----------------------------------------------------------------------------
@@ -265,29 +248,30 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @return Boolean
+	 * @param Integer $id contains specified id for the sql statement
+	 * @return Boolean $returnValue returns whether the specified record exists
 	 */
-	public function exist( $AudioDataID )
+	public function exist( $id )
 	{
+		/* init */
+		$returnValue = false;
+		
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'SELECT COUNT(*)
-		FROM AudioDatas,
-		WHERE AudioDatas.AudioDataID = ?' );
-		$stmt->setString( 1, $AudioDataID );
+		$stmt = $conn->prepareStatement(	'SELECT COUNT(*)
+											FROM Items,
+											WHERE Items.ItemID = ?' );
+		$stmt->setString( 1, $id );
 		$rs = $stmt->executeQuery( ResultSet::FETCHMODE_NUM );
 		$rs->next();
+		
+		/* check if item exists */
 		if( $rs->get(1) >= 1 )
-			{
-			return true;
-			}
-		else
-			{
-			return false;
-			}
+			$returnValue = true;
+
+		return $returnValue;
 	}
 
 //-----------------------------------------------------------------------------
-}
+} /* end of class phpmediadb_data_audios */
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Wed Mar 16 16:02:29 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 16 Mar 2005 16:02:29 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_categories.php,1.3,1.4
Message-ID: <200503161502.j2GF2TN12834@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv13923/_source/tier.data

Modified Files:
	class.phpmediadb_data_categories.php 
Log Message:
* Fixed syntax mistake
* Added some comments
* Added array $data
* Changed methods exist() and create()

Index: class.phpmediadb_data_categories.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_categories.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- class.phpmediadb_data_categories.php	15 Mar 2005 17:45:32 -0000	1.3
+++ class.phpmediadb_data_categories.php	16 Mar 2005 15:02:27 -0000	1.4
@@ -7,7 +7,7 @@
 	// --- ATTRIBUTES ---
 
 	/**
-	 * Short description of attribute PHPMEDIADB
+	 * Reference to class PHPMEDIADB
 	 *
 	 * @access protected
 	 * @see phpmediadb
@@ -16,7 +16,7 @@
 	protected $PHPMEDIADB = null;
 
 	/**
-	 * Short description of attribute DATA
+	 * Reference to class DATA
 	 *
 	 * @access protected
 	 * @see phpmediadb_presentation
@@ -32,11 +32,13 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb_data
+	 * @param phpmediadb_data $sender Reference to parent class
 	 */
-	public function __construct()
+	public function __construct( $sender )
 	{
-		/* nothing to do yet */
+		/* assign parent */
+		$this->DATA			= $sender;
+		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
 	}
   
 //-----------------------------------------------------------------------------
@@ -57,16 +59,16 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @return String
+	 * @param Integer $id contains specified id for the sql statement
+	 * @return Mixed array $rs contains result of database query
 	 */
-	public function get( $CategoryID )
+	public function get( $id )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'SELECT *
-		FROM Categories,
-		WHERE Categories.CategoryID = ?' );
-		$stmt->setString( 1, $CategoryID );
+		$stmt = $conn->prepareStatement(	'SELECT *
+											FROM Categories,
+											WHERE Categories.CategoryID = ?' );
+		$stmt->setString( 1, $id );
 		$rs = $stmt->executeQuery();
 		
 		return $rs;
@@ -78,14 +80,14 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return String
+	 * @return Mixed array $rs contains result of database query
 	 */
 	public function getList()
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'SELECT *
-		FROM Categories,
-		WHERE Categories.CategoryID LIKE "%"' );
+		$stmt = $conn->prepareStatement(	'SELECT *
+											FROM Categories,
+											WHERE Categories.CategoryID LIKE "%"' );
 		$rs = $stmt->executeQuery();
 		
 		return $rs;
@@ -97,16 +99,18 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param String
+	 * @param Mixed array $data contains all required data for the sql statement
+	 * @return Integer getLastInsert() returns id from the last created record
 	 */
-	public function create( $CategoryName )
+	public function create( $data )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'INSERT INTO Categories
-		( CategoryName ) VALUES( ? )' );
-		$stmt->setString( 1, $CategoryName );
+		$stmt = $conn->prepareStatement(	'INSERT INTO Categories
+											( CategoryName ) VALUES( ? )' );
+		$stmt->setString( 1, $data['CategoryName'] );
 		$stmt->executeUpdate();
 		
+		return $this->DATA->SQL->getLastInsert( $conn );
 	}
 
 //-----------------------------------------------------------------------------
@@ -115,19 +119,18 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @param String
+	 * @param Integer $id contains specified id for the sql statement
+	 * @param Mixed array $data contains all required data for the sql statement
 	 */
-	public function modify( $CategoryID, $CategoryName )
+	public function modify( $id, $data )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'UPDATE Categories
-		SET Categories.CategoryName = ?
-		WHERE Categories.CategoryID = ?' );
-		$stmt->setString( 1, $CategoryName );
-		$stmt->setString( 2, $CategoryID );
+		$stmt = $conn->prepareStatement(	'UPDATE Categories
+											SET Categories.CategoryName = ?
+											WHERE Categories.CategoryID = ?' );
+		$stmt->setString( 1, $data['CategoryName'] );
+		$stmt->setString( 2, $id );
 		$stmt->executeUpdate();
-		
 	}
 
 //-----------------------------------------------------------------------------
@@ -136,16 +139,15 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
+	 * @param Integer $id contains specified id for the sql statement
 	 */
-	public function delete( $CategoryID )
+	public function delete( $id )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'DELETE FROM Categories
-		WHERE Categories.CategoryID = ?' );
-		$stmt->setString( 1, $CategoryID );
+		$stmt = $conn->prepareStatement(	'DELETE FROM Categories
+											WHERE Categories.CategoryID = ?' );
+		$stmt->setString( 1, $id );
 		$stmt->executeUpdate();
-		
 	}
 
 //-----------------------------------------------------------------------------
@@ -155,29 +157,30 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @return Boolean
+	 * @param Integer $id contains specified id for the sql statement
+	 * @return Boolean $returnValue returns whether the specified record exists
 	 */
-	public function exist( $CategoryID )
+	public function exist( $id )
 	{
+		/* init */
+		$returnValue = false;
+		
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'SELECT COUNT(*)
-		FROM Categories,
-		WHERE Categories.CategoryID = ?' );
-		$stmt->setString( 1, $CategoryID );
+		$stmt = $conn->prepareStatement(	'SELECT COUNT(*)
+											FROM Categories,
+											WHERE Categories.CategoryID = ?' );
+		$stmt->setString( 1, $id );
 		$rs = $stmt->executeQuery( ResultSet::FETCHMODE_NUM );
 		$rs->next();
+		
+		/* check if item exists */
 		if( $rs->get(1) >= 1 )
-			{
-			return true;
-			}
-		else
-			{
-			return false;
-			}
+			$returnValue = true;
+
+		return $returnValue;
 	}
 
 //-----------------------------------------------------------------------------
-}
+} /* end of class phpmediadb_data_categories */
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Wed Mar 16 16:02:42 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 16 Mar 2005 16:02:42 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_codecs.php,1.7,1.8
Message-ID: <200503161502.j2GF2gN12839@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv13966/_source/tier.data

Modified Files:
	class.phpmediadb_data_codecs.php 
Log Message:
* Fixed syntax mistake
* Added some comments
* Added array $data
* Changed methods exist() and create()

Index: class.phpmediadb_data_codecs.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_codecs.php,v
retrieving revision 1.7
retrieving revision 1.8
diff -u -d -r1.7 -r1.8
--- class.phpmediadb_data_codecs.php	15 Mar 2005 17:45:52 -0000	1.7
+++ class.phpmediadb_data_codecs.php	16 Mar 2005 15:02:39 -0000	1.8
@@ -7,7 +7,7 @@
 	// --- ATTRIBUTES ---
 
 	/**
-	 * Short description of attribute PHPMEDIADB
+	 * Reference to class PHPMEDIADB
 	 *
 	 * @access protected
 	 * @see phpmediadb
@@ -16,7 +16,7 @@
 	protected $PHPMEDIADB = null;
 
 	/**
-	 * Short description of attribute DATA
+	 * Reference to class DATA
 	 *
 	 * @access protected
 	 * @see phpmediadb_presentation
@@ -32,11 +32,13 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb_data
+	 * @param phpmediadb_data $sender Reference to parent class
 	 */
-	public function __construct()
+	public function __construct( $sender )
 	{
-		/* nothing to do yet */
+		/* assign parent */
+		$this->DATA			= $sender;
+		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
 	}
   
 //-----------------------------------------------------------------------------
@@ -57,16 +59,16 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @return String
+	 * @param Integer $id contains specified id for the sql statement
+	 * @return Mixed array $rs contains result of database query
 	 */
-	public function get( $MediaCodecID )
+	public function get( $id )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'SELECT *
-		FROM MediaCodecs,
-		WHERE MediaCodecs.MediaCodecID = ?' );
-		$stmt->setString( 1, $MediaCodecID );
+		$stmt = $conn->prepareStatement(	'SELECT *
+											FROM MediaCodecs,
+											WHERE MediaCodecs.MediaCodecID = ?' );
+		$stmt->setString( 1, $id );
 		$rs = $stmt->executeQuery();
 		
 		return $rs;
@@ -78,14 +80,14 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return String
+	 * @return Mixed array $rs contains result of database query
 	 */
 	public function getList()
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'SELECT *
-		FROM MediaCodecs,
-		WHERE MediaCodecs.MediaCodecID LIKE "%"' );
+		$stmt = $conn->prepareStatement(	'SELECT *
+											FROM MediaCodecs,
+											WHERE MediaCodecs.MediaCodecID LIKE "%"' );
 		$rs = $stmt->executeQuery();
 		
 		return $rs;
@@ -97,21 +99,21 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param String
-	 * @param Integer
-	 * @param Integer
+	 * @param Mixed array $data contains all required data for the sql statement
+	 * @param Integer getLastInsert() returns id from the last created record
 	 */
-	public function create( $MediaCodecName, $MediaCodecBitrate, $ItemTypeID )
+	public function create( $data )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'INSERT INTO MediaCodecs
-		( MediaCodecName, MediaCodecBitrate, ItemTypeID )
-		VALUES( ?, ?, ? )' );
-		$stmt->setString( 1, $MediaCodecName );
-		$stmt->setString( 2, $MediaCodecBitrate );
-		$stmt->setString( 3, $ItemTypeID );
+		$stmt = $conn->prepareStatement(	'INSERT INTO MediaCodecs
+											( MediaCodecName, MediaCodecBitrate, ItemTypeID )
+											VALUES( ?, ?, ? )' );
+		$stmt->setString( 1, $data['MediaCodecName'] );
+		$stmt->setString( 2, $data['MediaCodecBitrate'] );
+		$stmt->setString( 3, $data['ItemTypeID'] );
 		$stmt->executeUpdate();
 		
+		return $this->DATA->SQL->getLastInsert( $conn );
 	}
 
 //-----------------------------------------------------------------------------
@@ -120,25 +122,22 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @param String
-	 * @param Integer
-	 * @param Integer
+	 * @param Integer $id contains specified id for the sql statement
+	 * @param Mixed array $data contains all required data for the sql statement
 	 */
-	public function modify( $MediaCodecID, $MediaCodecName, $MediaCodecBitrate, $ItemTypeID )
+	public function modify( $id, $data )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'UPDATE MediaCodecs
-		SET MediaCodecs.MediaCodecName = ?,
-		MediaCodecs.MediaCodecBitrate = ?,
-		MediaCodecs.ItemTypeID = ?
-		WHERE MediaCodecs.MediaCodecID = ?' );
-		$stmt->setString( 1, $MediaCodecName );
-		$stmt->setString( 2, $MediaCodecBitrate );
-		$stmt->setString( 3, $ItemTypeID );
-		$stmt->setString( 4, $MediaCodecID );
+		$stmt = $conn->prepareStatement(	'UPDATE MediaCodecs
+											SET MediaCodecs.MediaCodecName = ?,
+											MediaCodecs.MediaCodecBitrate = ?,
+											MediaCodecs.ItemTypeID = ?
+											WHERE MediaCodecs.MediaCodecID = ?' );
+		$stmt->setString( 1, $data['MediaCodecName'] );
+		$stmt->setString( 2, $data['MediaCodecBitrate'] );
+		$stmt->setString( 3, $data['ItemTypeID'] );
+		$stmt->setString( 4, $data['MediaCodecID'] );
 		$stmt->executeUpdate();
-		
 	}
 
 //-----------------------------------------------------------------------------
@@ -147,16 +146,15 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
+	 * @param Integer $id contains specified id for the sql statement
 	 */
-	public function delete( $MediaCodecID )
+	public function delete( $id )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'DELETE FROM MediaCodecs
-		WHERE MediaCodecs.MediaCodecID = ?' );
-		$stmt->setString( 1, $MediaCodecID );
+		$stmt = $conn->prepareStatement(	'DELETE FROM MediaCodecs
+											WHERE MediaCodecs.MediaCodecID = ?' );
+		$stmt->setString( 1, $id );
 		$stmt->executeUpdate();
-		
 	}
 
 //-----------------------------------------------------------------------------
@@ -166,29 +164,30 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @return Boolean
+	 * @param Integer $id contains specified id for the sql statement
+	 * @return Boolean $returnValue returns whether the specified record exists
 	 */
-	public function exist( $MediaCodecID )
+	public function exist( $id )
 	{
+		/* init */
+		$returnValue = false;
+		
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'SELECT COUNT(*)
-		FROM MediaCodecs,
-		WHERE MediaCodecs.MediaCodecID = ?' );
-		$stmt->setString( 1, $MediaCodecID );
+		$stmt = $conn->prepareStatement(	'SELECT COUNT(*)
+											FROM MediaCodecs,
+											WHERE MediaCodecs.MediaCodecID = ?' );
+		$stmt->setString( 1, $id );
 		$rs = $stmt->executeQuery( ResultSet::FETCHMODE_NUM );
 		$rs->next();
+
+		/* check if item exists */
 		if( $rs->get(1) >= 1 )
-			{
-			return true;
-			}
-		else
-			{
-			return false;
-			}
+			$returnValue = true;
+
+		return $returnValue;
 	}
 
 //-----------------------------------------------------------------------------
-}
+} /* end of class phpmediadb_data_codecs */
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Wed Mar 16 16:02:55 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 16 Mar 2005 16:02:55 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_formats.php,1.7,1.8
Message-ID: <200503161502.j2GF2tN12843@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv13998/_source/tier.data

Modified Files:
	class.phpmediadb_data_formats.php 
Log Message:
* Fixed syntax mistake
* Added some comments
* Added array $data
* Changed methods exist() and create()

Index: class.phpmediadb_data_formats.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_formats.php,v
retrieving revision 1.7
retrieving revision 1.8
diff -u -d -r1.7 -r1.8
--- class.phpmediadb_data_formats.php	15 Mar 2005 17:46:07 -0000	1.7
+++ class.phpmediadb_data_formats.php	16 Mar 2005 15:02:53 -0000	1.8
@@ -7,7 +7,7 @@
 	// --- ATTRIBUTES ---
 
 	/**
-	 * Short description of attribute PHPMEDIADB
+	 * Reference to class PHPMEDIADB
 	 *
 	 * @access protected
 	 * @see phpmediadb
@@ -16,7 +16,7 @@
 	protected $PHPMEDIADB = null;
 
 	/**
-	 * Short description of attribute DATA
+	 * Reference to class DATA
 	 *
 	 * @access protected
 	 * @see phpmediadb_presentation
@@ -32,11 +32,13 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb_data
+	 * @param phpmediadb_data $sender Reference to parent class
 	 */
-	public function __construct()
+	public function __construct( $sender )
 	{
-		/* nothing to do yet */
+		/* assign parent */
+		$this->DATA			= $sender;
+		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
 	}
   
 //-----------------------------------------------------------------------------
@@ -57,16 +59,16 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @return String
+	 * @param Integer $id contains specified id for the sql statement
+	 * @return Mixed array $rs contains result of database query
 	 */
-	public function get( $MediaFormatID )
+	public function get( $id )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'SELECT *
-		FROM MediaFormats,
-		WHERE MediaFormats.MediaFormatID = ?' );
-		$stmt->setString( 1, $MediaFormatID );
+		$stmt = $conn->prepareStatement(	'SELECT *
+											FROM MediaFormats,
+											WHERE MediaFormats.MediaFormatID = ?' );
+		$stmt->setString( 1, $id );
 		$rs = $stmt->executeQuery();
 		
 		return $rs;
@@ -78,14 +80,14 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return String
+	 * @return Mixed array $rs contains result of database query
 	 */
 	public function getList()
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'SELECT *
-		FROM MediaFormats,
-		WHERE MediaFormats.MediaFormatID LIKE "%"' );
+		$stmt = $conn->prepareStatement(	'SELECT *
+											FROM MediaFormats,
+											WHERE MediaFormats.MediaFormatID LIKE "%"' );
 		$rs = $stmt->executeQuery();
 		
 		return $rs;
@@ -97,18 +99,20 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param String
-	 * @param Integer
+	 * @param Mixed array $data contains all required data for the sql statement
+	 * @param Integer getLastInsert() returns id from the last created record
 	 */
-	public function create( $MediaFormatName, $ItemTypeID )
+	public function create( $data )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'INSERT INTO MediaFormats
-		( MediaFormatName, ItemTypeID ) VALUES( ?, ? )' );
-		$stmt->setString( 1, $MediaFormatName );
-		$stmt->setString( 2, $ItemTypeID );
+		$stmt = $conn->prepareStatement(	'INSERT INTO MediaFormats
+											( MediaFormatName, ItemTypeID )
+											VALUES( ?, ? )' );
+		$stmt->setString( 1, $data['MediaFormatName'] );
+		$stmt->setString( 2, $data['ItemTypeID'] );
 		$stmt->executeUpdate();
 		
+		return $this->DATA->SQL->getLastInsert( $conn );
 	}
 
 //-----------------------------------------------------------------------------
@@ -117,22 +121,20 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @param String
-	 * @param Integer
+	 * @param Integer $id contains specified id for the sql statement
+	 * @param Mixed array $data contains all required data for the sql statement
 	 */
-	public function modify( $MediaFormatID, $MediaFormatName, $ItemTypeID )
+	public function modify( $id, $data )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'UPDATE MediaFormats
-		SET MediaFormats.MediaFormatName = ?,
-		MediaFormats.ItemTypeID = ?
-		WHERE MediaFormats.MediaFormatID = ?' );
-		$stmt->setString( 1, $MediaFormatName );
-		$stmt->setString( 2, $ItemTypeID );
-		$stmt->setString( 3, $MediaFormatID );
+		$stmt = $conn->prepareStatement(	'UPDATE MediaFormats
+											SET MediaFormats.MediaFormatName = ?,
+											MediaFormats.ItemTypeID = ?
+											WHERE MediaFormats.MediaFormatID = ?' );
+		$stmt->setString( 1, $data['MediaFormatName'] );
+		$stmt->setString( 2, $data['ItemTypeID'] );
+		$stmt->setString( 3, $data['MediaFormatID'] );
 		$stmt->executeUpdate();
-		
 	}
 
 //-----------------------------------------------------------------------------
@@ -141,16 +143,15 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
+	 * @param Integer $id contains specified id for the sql statement
 	 */
-	public function delete( $MediaFormatID )
+	public function delete( $id )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'DELETE FROM MediaFormats
-		WHERE MediaFormats.MediaFormatID = ?' );
-		$stmt->setString( 1, $MediaFormatID );
+		$stmt = $conn->prepareStatement(	'DELETE FROM MediaFormats
+											WHERE MediaFormats.MediaFormatID = ?' );
+		$stmt->setString( 1, $id );
 		$stmt->executeUpdate();
-		
 	}
 
 //-----------------------------------------------------------------------------
@@ -160,29 +161,30 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @return Boolean
+	 * @param Integer $id contains specified id for the sql statement
+	 * @return Boolean $returnValue returns whether the specified record exists
 	 */
-	public function exist( $MediaFormatID )
+	public function exist( $id )
 	{
+		/* init */
+		$returnValue = false;		
+		
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'SELECT COUNT(*)
-		FROM MediaFormats,
-		WHERE MediaFormats.MediaFormatID = ?' );
-		$stmt->setString( 1, $MediaFormatID );
+		$stmt = $conn->prepareStatement(	'SELECT COUNT(*)
+											FROM MediaFormats,
+											WHERE MediaFormats.MediaFormatID = ?' );
+		$stmt->setString( 1, $id );
 		$rs = $stmt->executeQuery( ResultSet::FETCHMODE_NUM );
 		$rs->next();
+		
+		/* check if item exists */
 		if( $rs->get(1) >= 1 )
-			{
-			return true;
-			}
-		else
-			{
-			return false;
-			}
+			$returnValue = true;
+
+		return $returnValue;
 	}
 
 //-----------------------------------------------------------------------------
-}
+} /* end of class phpmediadb_data_formats */
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Wed Mar 16 16:03:10 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 16 Mar 2005 16:03:10 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data.php,1.7,1.8
Message-ID: <200503161503.j2GF3AN12858@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv14032/_source/tier.data

Modified Files:
	class.phpmediadb_data.php 
Log Message:
* Fixed syntax mistake
* Added some comments

Index: class.phpmediadb_data.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data.php,v
retrieving revision 1.7
retrieving revision 1.8
diff -u -d -r1.7 -r1.8
--- class.phpmediadb_data.php	7 Mar 2005 11:37:37 -0000	1.7
+++ class.phpmediadb_data.php	16 Mar 2005 15:03:08 -0000	1.8
@@ -106,12 +106,13 @@
 	
 	// --- OPERATIONS ---
 
+//-----------------------------------------------------------------------------
 	/**
 	 * The constructor __construct initalizes the Class.
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb
+	 * @param phpmediadb_data $sender Reference to parent class
 	 */
 	public function __construct( $sender )
 	{
@@ -135,13 +136,12 @@
 		$this->VIDEOS			= new phpmediadb_data_videos( $this );
 	}
 
+//-----------------------------------------------------------------------------
 	/**
 	 * Loads the configuration from the global array and resets the array
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb
-	 * @return void
 	 */
 	private function loadConfiguration()
 	{
@@ -155,8 +155,8 @@
 		/* unset global configuration -> security */
 		unset( $phpMediaDbConfig['DATA'] );
 	}
-	
-} /* end of class phpmediadb_data */
 
+//-----------------------------------------------------------------------------
+} /* end of class phpmediadb_data */
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Wed Mar 16 16:03:39 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 16 Mar 2005 16:03:39 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_prints.php,1.5,1.6
Message-ID: <200503161503.j2GF3dN12873@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv14064/_source/tier.data

Modified Files:
	class.phpmediadb_data_prints.php 
Log Message:
* Fixed syntax mistake
* Added some comments
* Added array $data
* Changed methods exist() and create()

Index: class.phpmediadb_data_prints.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_prints.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- class.phpmediadb_data_prints.php	15 Mar 2005 17:46:19 -0000	1.5
+++ class.phpmediadb_data_prints.php	16 Mar 2005 15:03:36 -0000	1.6
@@ -7,7 +7,7 @@
 	// --- ATTRIBUTES ---
 
 	/**
-	 * Short description of attribute PHPMEDIADB
+	 * Reference to class PHPMEDIADB
 	 *
 	 * @access protected
 	 * @see phpmediadb
@@ -16,7 +16,7 @@
 	protected $PHPMEDIADB = null;
 
 	/**
-	 * Short description of attribute DATA
+	 * Reference to class DATA
 	 *
 	 * @access protected
 	 * @see phpmediadb_presentation
@@ -32,11 +32,13 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb_data
+	 * @param phpmediadb_data $sender Reference to parent class
 	 */
-	public function __construct()
+	public function __construct( $sender )
 	{
-		/* nothing to do yet */
+		/* assign parent */
+		$this->DATA			= $sender;
+		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
 	}
   
 //-----------------------------------------------------------------------------
@@ -58,32 +60,32 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @return String
+	 * @param Integer $id contains specified id for the sql statement
+	 * @return Mixed array $rs contains result of database query
 	 */
-	public function get( $PrintDataID )
+	public function get( $id )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
-		FROM PrintDatas a,
-		Languages b,
-		Items c,
-		ItemTypes d,
-		MediaCodecs e,
-		MediaFormats f,
-		MediaAgeRestrictions g,
-		MediaStatus h,
-		BinaryDatas i
-		WHERE a.PrintDataID = ? 
-		AND a.LanguageID = b.LanguageID
-		AND a.ItemID = c.ItemID
-		AND c.ItemTypeID = d.ItemTypeID
-		AND c.MediaCodecID = e.MediaCodecID
-		AND c.MediaFormatID = f.MediaFormatID
-		AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
-		AND c.MediaStatusID = h.MediaStatusID
-		AND c.ItemPicturesID = i.ItemPicturesID' );
-		$stmt->setString( 1, $PrintDataID );
+		$stmt = $conn->prepareStatement(	'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
+											FROM PrintDatas a,
+											Languages b,
+											Items c,
+											ItemTypes d,
+											MediaCodecs e,
+											MediaFormats f,
+											MediaAgeRestrictions g,
+											MediaStatus h,
+											BinaryDatas i
+											WHERE c.ItemID = ? 
+											AND a.LanguageID = b.LanguageID
+											AND a.ItemID = c.ItemID
+											AND c.ItemTypeID = d.ItemTypeID
+											AND c.MediaCodecID = e.MediaCodecID
+											AND c.MediaFormatID = f.MediaFormatID
+											AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
+											AND c.MediaStatusID = h.MediaStatusID
+											AND c.ItemPicturesID = i.ItemPicturesID' );
+		$stmt->setString( 1, $id );
 		$rs = $stmt->executeQuery();
 		
 		return $rs;
@@ -96,165 +98,147 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return String
+	 * @return Mixed array $rs contains result of database query
 	 */
 	public function getList()
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
-		FROM PrintDatas a,
-		Languages b,
-		Items c,
-		ItemTypes d,
-		MediaCodecs e,
-		MediaFormats f,
-		MediaAgeRestrictions g,
-		MediaStatus h,
-		BinaryDatas i
-		WHERE a.PrintDataID LIKE "%"
-		AND a.LanguageID = b.LanguageID
-		AND a.ItemID = c.ItemID
-		AND c.ItemTypeID = d.ItemTypeID
-		AND c.MediaCodecID = e.MediaCodecID
-		AND c.MediaFormatID = f.MediaFormatID
-		AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
-		AND c.MediaStatusID = h.MediaStatusID
-		AND c.ItemPicturesID = i.ItemPicturesID' );
+		$stmt = $conn->prepareStatement(	'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
+											FROM PrintDatas a,
+											Languages b,
+											Items c,
+											ItemTypes d,
+											MediaCodecs e,
+											MediaFormats f,
+											MediaAgeRestrictions g,
+											MediaStatus h,
+											BinaryDatas i
+											WHERE c.ItemID LIKE "%"
+											AND a.LanguageID = b.LanguageID
+											AND a.ItemID = c.ItemID
+											AND c.ItemTypeID = d.ItemTypeID
+											AND c.MediaCodecID = e.MediaCodecID
+											AND c.MediaFormatID = f.MediaFormatID
+											AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
+											AND c.MediaStatusID = h.MediaStatusID
+											AND c.ItemPicturesID = i.ItemPicturesID' );
 		$rs = $stmt->executeQuery();
 		
 		return $rs;
 	}
 
 //-----------------------------------------------------------------------------
-	/**
-	 * This function deletes a specified record from the table PrintDatas
-	 * and all depending data from the other tables
+/**
+	 * This function creates a new record into the table PrintDatas
+	 * and all required data into the other tables
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
+	 * @param Mixed array $data contains all required data for the sql statement
+	 * @return Integer getLastInsert() returns id from the last created record
 	 */
-	public function delete( $PrintDataID )
+	public function create( $data )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'DELETE PrintDatas, Items, BinaryDatas, Categories_has_Items
-		FROM PrintDatas, Items, BinaryDatas, Categories_has_Items
-		WHERE PrintDatas.PrintDataID = ?
-		AND PrintDatas.ItemID = Items.ItemID
-		AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID
-		AND Items.ItemID = Categories_has_Items.ItemID' );
-		$stmt->setString( 1, $PrintDataID );
+		$stmt = $conn->prepareStatement( 'INSERT INTO PrintDatas ( PrintDataMediaCount, PrintDataISBN ) VALUES( ?, ? )' );
+		$stmt->setString( 1, $data['PrintDataMediaCount'] );
+		$stmt->setString( 2, $data['PrintDataISBN'] );
 		$stmt->executeUpdate();
+		
+		$stmt = $conn->prepareStatement(	'INSERT INTO Items
+											( ItemTitle, ItemOriginalTitle, ItemRelease,
+											ItemMediaName, ItemCreationDate, ItemModificationDate, ItemComment )
+											VALUES( ?, ?, ?, ?, now(), now(), ? )' );
+		$stmt->setString( 1, $data['ItemTitle'] );
+		$stmt->setString( 2, $data['ItemOriginalTitle'] );
+		$stmt->setString( 3, $data['ItemRelease'] );
+		$stmt->setString( 4, $data['ItemMediaName'] );
+		$stmt->setString( 5, $data['ItemComment'] );
+		$stmt->executeUpdate();
+		
+		return $this->DATA->SQL->getLastInsert( $conn );		
 	}
 
 //-----------------------------------------------------------------------------
 /**
-	 * This function creates a new record into the table PrintDatas
-	 * and all required data into the other tables
+	 * This function modifies a specified record from the table PrintDatas
+	 * and all required data from the other tables
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @param String
-	 * @param String
-	 * @param String
-	 * @param Integer
-	 * @param String
-	 * @param Blob
+	 * @param Integer $id contains specified id for the sql statement
+	 * @param Mixed array $data contains all required data for the sql statement
 	 */
-	public function create( $PrintDataMediaCount, $PrintDataISBN, $ItemTitle, $ItemOriginalTitle,
-	$ItemRelease, $ItemMediaName, $ItemComment )
+	public function modify( $id, $data )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'INSERT INTO PrintDatas ( PrintDataMediaCount, PrintDataISBN ) VALUES( ?, ? )' );
-		$stmt->setString( 1, $PrintDataMediaCount );
-		$stmt->setString( 2, $PrintDataISBN );
+		$stmt = $conn->prepareStatement(	'UPDATE PrintDatas,
+											Languages,
+											Items,
+											ItemTypes,
+											MediaCodecs,
+											MediaFormats,
+											MediaAgeRestrictions,
+											MediaStatus,
+											BinaryDatas
+											SET PrintDatas.PrintDataMediaCount = ?,
+											PrintDatas.PrintDataISBN = ?,
+											Items.ItemTitle = ?,
+											Items.ItemOriginalTitle = ?,
+											Items.ItemRelease = ?,
+											Items.ItemMediaName = ?,
+											Items.ItemModificationDate = now(),
+											Items.ItemComment = ?,
+											Items.MediaCodecID = ?,
+											Items.MediaFormatID = ?,
+											Items.MediaAgeRestrictionID = ?,
+											Items.MediaStatusID = ?,
+											Items.ItemPicturesID = ?
+											WHERE Items.ItemID = ? 
+											AND PrintDatas.LanguageID = Languages.LanguageID
+											AND PrintDatas.ItemID = Items.ItemID
+											AND Items.ItemTypeID = ItemTypes.ItemTypeID
+											AND Items.MediaCodecID = MediaCodecs.MediaCodecID
+											AND Items.MediaFormatID = MediaFormats.MediaFormatID
+											AND Items.MediaAgeRestrictionID = MediaAgeRestrictions.MediaAgeRestrictionID
+											AND Items.MediaStatusID = MediaStatus.MediaStatusID
+											AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID' );
+		$stmt->setString( 1, $data['PrintDataMediaCount'] );
+		$stmt->setString( 2, $data['PrintDataISBN'] );
+		$stmt->setString( 3, $data['ItemTitle'] );
+		$stmt->setString( 4, $data['ItemOriginalTitle'] );
+		$stmt->setString( 5, $data['ItemRelease'] );
+		$stmt->setString( 6, $data['ItemMediaName'] );
+		$stmt->setString( 7, $data['ItemComment'] );
+		$stmt->setString( 8, $data['MediaCodecID'] );
+		$stmt->setString( 9, $data['MediaFormatID'] );
+		$stmt->setString( 10, $data['MediaAgeRestrictionID'] );
+		$stmt->setString( 11, $data['MediaStatusID'] );
+		$stmt->setString( 12, $data['ItemPicturesID'] );
+		$stmt->setString( 13, $id );
 		$stmt->executeUpdate();
-		
-		$stmt = $conn->prepareStatement( 'INSERT INTO Items
-		( ItemTitle, ItemOriginalTitle, ItemRelease, ItemMediaName, ItemCreationDate, ItemModificationDate, ItemComment )
-		VALUES( ?, ?, ?, ?, now(), now(), ? )' );
-		$stmt->setString( 1, $ItemTitle );
-		$stmt->setString( 2, $ItemOriginalTitle );
-		$stmt->setString( 3, $ItemRelease );
-		$stmt->setString( 4, $ItemMediaName );
-		$stmt->setString( 5, $ItemComment );
-		$stmt->executeUpdate(); 
-		
 	}
-
+	
 //-----------------------------------------------------------------------------
-/**
-	 * This function modifies a specified record from the table PrintDatas
-	 * and all required data from the other tables
+	/**
+	 * This function deletes a specified record from the table PrintDatas
+	 * and all depending data from the other tables
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @param Integer
-	 * @param String
-	 * @param String
-	 * @param String
-	 * @param Integer
-	 * @param String
-	 * @param Blob
-	 * @param Integer
-	 * @param Integer
-	 * @param Integer
-	 * @param Integer
-	 * @param Integer
+	 * @param Integer $id contains specified id for the sql statement
 	 */
-	public function modify( $PrintDataID, $PrintDataMediaCount, $PrintDataISBN, $ItemTitle, $ItemOriginalTitle,
-	$ItemRelease, $ItemMediaName, $ItemComment, $MediaCodecID, $MediaFormatID,
-	$MediaAgeRestrictionID, $MediaStatusID, $ItemPicturesID )
+	public function delete( $id )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'UPDATE PrintDatas,
-		Languages,
-		Items,
-		ItemTypes,
-		MediaCodecs,
-		MediaFormats,
-		MediaAgeRestrictions,
-		MediaStatus,
-		BinaryDatas
-		SET PrintDatas.PrintDataMediaCount = ?,
-		PrintDatas.PrintDataISBN = ?,
-		Items.ItemTitle = ?,
-		Items.ItemOriginalTitle = ?,
-		Items.ItemRelease = ?,
-		Items.ItemMediaName = ?,
-		Items.ItemModificationDate = now(),
-		Items.ItemComment = ?,
-		Items.MediaCodecID = ?,
-		Items.MediaFormatID = ?,
-		Items.MediaAgeRestrictionID = ?,
-		Items.MediaStatusID = ?,
-		Items.ItemPicturesID = ?
-		WHERE PrintDatas.PrintDataID = ? 
-		AND PrintDatas.LanguageID = Languages.LanguageID
-		AND PrintDatas.ItemID = Items.ItemID
-		AND Items.ItemTypeID = ItemTypes.ItemTypeID
-		AND Items.MediaCodecID = MediaCodecs.MediaCodecID
-		AND Items.MediaFormatID = MediaFormats.MediaFormatID
-		AND Items.MediaAgeRestrictionID = MediaAgeRestrictions.MediaAgeRestrictionID
-		AND Items.MediaStatusID = MediaStatus.MediaStatusID
-		AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID' );
-		$stmt->setString( 1, $PrintDataMediaCount );
-		$stmt->setString( 2, $PrintDataISBN );
-		$stmt->setString( 3, $ItemTitle );
-		$stmt->setString( 4, $ItemOriginalTitle );
-		$stmt->setString( 5, $ItemRelease );
-		$stmt->setString( 6, $ItemMediaName );
-		$stmt->setString( 7, $ItemComment );
-		$stmt->setString( 8, $MediaCodecID );
-		$stmt->setString( 9, $MediaFormatID );
-		$stmt->setString( 10, $MediaAgeRestrictionID );
-		$stmt->setString( 11, $MediaStatusID );
-		$stmt->setString( 12, $ItemPicturesID );
-		$stmt->setString( 13, $PrintDataID );
+		$stmt = $conn->prepareStatement(	'DELETE PrintDatas, Items, BinaryDatas, Categories_has_Items
+											FROM PrintDatas, Items, BinaryDatas, Categories_has_Items
+											WHERE Items.ItemID = ?
+											AND PrintDatas.ItemID = Items.ItemID
+											AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID
+											AND Items.ItemID = Categories_has_Items.ItemID' );
+		$stmt->setString( 1, $id );
 		$stmt->executeUpdate();
-		
 	}
 
 //-----------------------------------------------------------------------------
@@ -264,29 +248,30 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @return Boolean
+	 * @param Integer $id contains specified id for the sql statement
+	 * @return Boolean $returnValue returns whether the specified record exists
 	 */
-	public function exist( $PrintDataID )
+	public function exist( $id )
 	{
+		/* init */
+		$returnValue = false;
+		
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'SELECT COUNT(*)
-		FROM PrintDatas,
-		WHERE PrintDatas.PrintDataID = ?' );
-		$stmt->setString( 1, $PrintDataID );
+		$stmt = $conn->prepareStatement(	'SELECT COUNT(*)
+											FROM PrintDatas,
+											WHERE PrintDatas.PrintDataID = ?' );
+		$stmt->setString( 1, $id );
 		$rs = $stmt->executeQuery( ResultSet::FETCHMODE_NUM );
 		$rs->next();
+		
+		/* check if item exists */
 		if( $rs->get(1) >= 1 )
-			{
-			return true;
-			}
-		else
-			{
-			return false;
-			}
+			$returnValue = true;
+
+		return $returnValue;
 	}
 
 //-----------------------------------------------------------------------------
-}
+} /* end of class phpmediadb_data_prints */
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Wed Mar 16 16:03:50 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 16 Mar 2005 16:03:50 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_status.php,1.6,1.7
Message-ID: <200503161503.j2GF3oN12877@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv14088/_source/tier.data

Modified Files:
	class.phpmediadb_data_status.php 
Log Message:
* Fixed syntax mistake
* Added some comments
* Added array $data
* Changed methods exist() and create()

Index: class.phpmediadb_data_status.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_status.php,v
retrieving revision 1.6
retrieving revision 1.7
diff -u -d -r1.6 -r1.7
--- class.phpmediadb_data_status.php	15 Mar 2005 17:46:33 -0000	1.6
+++ class.phpmediadb_data_status.php	16 Mar 2005 15:03:48 -0000	1.7
@@ -7,7 +7,7 @@
 	// --- ATTRIBUTES ---
 
 	/**
-	 * Short description of attribute PHPMEDIADB
+	 * Reference to class PHPMEDIADB
 	 *
 	 * @access protected
 	 * @see phpmediadb
@@ -16,7 +16,7 @@
 	protected $PHPMEDIADB = null;
 
 	/**
-	 * Short description of attribute DATA
+	 * Reference to class DATA
 	 *
 	 * @access protected
 	 * @see phpmediadb_presentation
@@ -32,11 +32,13 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb_data
+	 * @param phpmediadb_data $sender Reference to parent class
 	 */
-	public function __construct()
+	public function __construct( $sender )
 	{
-		/* nothing to do yet */
+		/* assign parent */
+		$this->DATA			= $sender;
+		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
 	}
   
 //-----------------------------------------------------------------------------
@@ -57,15 +59,15 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @return String
+	 * @param Integer $id contains specified id for the sql statement
+	 * @return Mixed array $rs contains result of database query
 	 */
-	public function get( $MediaStatusID )
+	public function get( $id )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'SELECT *
-		FROM MediaStatus,
-		WHERE MediaStatus.MediaStatusID = ?' );
+		$stmt = $conn->prepareStatement(	'SELECT *
+											FROM MediaStatus,
+											WHERE MediaStatus.MediaStatusID = ?' );
 		$stmt->setString( 1, $MediaStatusID );
 		$rs = $stmt->executeQuery();
 		
@@ -78,14 +80,14 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return String
+	 * @return Mixed array $rs contains result of database query
 	 */
 	public function getList()
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'SELECT *
-		FROM MediaStatus,
-		WHERE MediaStatus.MediaStatusID LIKE "%"' );
+		$stmt = $conn->prepareStatement(	'SELECT *
+											FROM MediaStatus,
+											WHERE MediaStatus.MediaStatusID LIKE "%"' );
 		$rs = $stmt->executeQuery();
 		
 		return $rs;
@@ -97,21 +99,21 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param String
-	 * @param String
-	 * @param String
+	 * @param Mixed array $data contains all required data for the sql statement
+	 * @return Integer getLastInsert() returns id from the last created record
 	 */
-	public function create( $MediaStatus, $MediaStatusOwner, $MediaStatusHolder )
+	public function create( $data )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'INSERT INTO MediaStatus
-		( MediaStatus, MediaStatusOwner, MediaStatusHolder )
-		VALUES( ?, ?, ? )' );
-		$stmt->setString( 1, $MediaStatus );
-		$stmt->setString( 2, $MediaStatusOwner );
-		$stmt->setString( 3, $MediaStatusHolder );
+		$stmt = $conn->prepareStatement(	'INSERT INTO MediaStatus
+											( MediaStatus, MediaStatusOwner, MediaStatusHolder )
+											VALUES( ?, ?, ? )' );
+		$stmt->setString( 1, $data['MediaStatus'] );
+		$stmt->setString( 2, $data['MediaStatusOwner'] );
+		$stmt->setString( 3, $data['MediaStatusHolder'] );
 		$stmt->executeUpdate();
 		
+		return $this->DATA->SQL->getLastInsert( $conn );
 	}
 
 //-----------------------------------------------------------------------------
@@ -120,25 +122,22 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @param String
-	 * @param String
-	 * @param String
+	 * @param Integer $id contains specified id for the sql statement
+	 * @param Mixed array $data contains all required data for the sql statement
 	 */
-	public function modify( $MediaStatusID, $MediaStatus, $MediaStatusOwner, $MediaStatusHolder )
+	public function modify( $id, $data )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'UPDATE MediaStatus
-		SET MediaStatus.MediaStatus = ?,
-		MediaStatus.MediaStatusOwner = ?,
-		MediaStatus.MediaStatusHolder = ?
-		WHERE MediaStatus.MediaStatusID = ?' );
-		$stmt->setString( 1, $MediaStatus );
-		$stmt->setString( 2, $MediaStatusOwner );
-		$stmt->setString( 3, $MediaStatusHolder );
-		$stmt->setString( 4, $MediaStatusID );
+		$stmt = $conn->prepareStatement(	'UPDATE MediaStatus
+											SET MediaStatus.MediaStatus = ?,
+											MediaStatus.MediaStatusOwner = ?,
+											MediaStatus.MediaStatusHolder = ?
+											WHERE MediaStatus.MediaStatusID = ?' );
+		$stmt->setString( 1, $data['MediaStatus'] );
+		$stmt->setString( 2, $data['MediaStatusOwner'] );
+		$stmt->setString( 3, $data['MediaStatusHolder'] );
+		$stmt->setString( 4, $data['MediaStatusID'] );
 		$stmt->executeUpdate();
-		
 	}
 
 //-----------------------------------------------------------------------------
@@ -147,16 +146,15 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
+	 * @param Integer $id contains specified id for the sql statement
 	 */
-	public function delete( $MediaStatusID )
+	public function delete( $id )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'DELETE FROM MediaStatus
-		WHERE MediaStatus.MediaStatusID = ?' );
-		$stmt->setString( 1, $MediaStatusID );
+		$stmt = $conn->prepareStatement(	'DELETE FROM MediaStatus
+											WHERE MediaStatus.MediaStatusID = ?' );
+		$stmt->setString( 1, $id );
 		$stmt->executeUpdate();
-		
 	}
 
 //-----------------------------------------------------------------------------
@@ -166,29 +164,30 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @return Boolean
+	 * @param Integer $id contains specified id for the sql statement
+	 * @return Boolean $returnValue returns whether the specified record exists
 	 */
-	public function exist( $MediaStatusID )
+	public function exist( $id )
 	{
+		/* init */
+		$returnValue = false;
+		
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'SELECT COUNT(*)
-		FROM MediaStatus,
-		WHERE MediaStatus.MediaStatusID = ?' );
-		$stmt->setString( 1, $MediaStatusID );
+		$stmt = $conn->prepareStatement(	'SELECT COUNT(*)
+											FROM MediaStatus,
+											WHERE MediaStatus.MediaStatusID = ?' );
+		$stmt->setString( 1, $id );
 		$rs = $stmt->executeQuery( ResultSet::FETCHMODE_NUM );
 		$rs->next();
+		
+		/* check if item exists */
 		if( $rs->get(1) >= 1 )
-			{
-			return true;
-			}
-		else
-			{
-			return false;
-			}
+			$returnValue = true;
+
+		return $returnValue;
 	}
 
 //-----------------------------------------------------------------------------
-}
+} /* end of class phpmediadb_data_status */
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Wed Mar 16 16:04:20 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 16 Mar 2005 16:04:20 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_sql.php,1.4,1.5
Message-ID: <200503161504.j2GF4KN12896@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv14145/_source/tier.data

Modified Files:
	class.phpmediadb_data_sql.php 
Log Message:
* Fixed syntax mistake
* Added some comments
* Added method getLastInsert()

Index: class.phpmediadb_data_sql.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_sql.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- class.phpmediadb_data_sql.php	14 Mar 2005 18:42:29 -0000	1.4
+++ class.phpmediadb_data_sql.php	16 Mar 2005 15:04:17 -0000	1.5
@@ -7,7 +7,7 @@
 	// --- ATTRIBUTES ---
 
 	/**
-	 * Short description of attribute PHPMEDIADB
+	 * Reference to class PHPMEDIADB
 	 *
 	 * @access protected
 	 * @see phpmediadb
@@ -16,7 +16,7 @@
 	protected $PHPMEDIADB = null;
 
 	/**
-	 * Short description of attribute DATA
+	 * Reference to class DATA
 	 *
 	 * @access protected
 	 * @see phpmediadb_presentation
@@ -32,11 +32,13 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb_data
+	 * @param phpmediadb_data $sender Reference to parent class
 	 */
-	public function __construct()
+	public function __construct( $sender )
 	{
-		/* nothing to do yet */
+		/* assign parent */
+		$this->DATA			= $sender;
+		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
 	}
   
 //-----------------------------------------------------------------------------
@@ -54,19 +56,37 @@
 	
 //-----------------------------------------------------------------------------
 	/**
-	 * This function provide the connection to the database
+	 * This function provides the connection to the database
 	 *
 	 * @access protected
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param String
-	 * @return String
+	 * @return String $conn contains information from the connection to the database
 	*/
 	public function getConnection()
 	{
-		$dsn = $this->DATA->configuration['sqlconnection'];
-		$conn = Creole::getConnection($dsn, Creole::PERSISTENT);
+		$dsn		= $this->DATA->configuration['sqlconnection'];
+		$conntype	= $this->DATA->configuration['sqlconnection']['conntype'];
+		$conn = Creole::getConnection($dsn, $conntype );
 		return $conn;
 	}
-}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns the id of the last created record in a table
+	 *
+	 * @access protected
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param String $conn contains information from the connection to the database
+	 * @return Integer $rs returns the id from the last created record
+	*/
+	public function getLastInsert( $conn )
+	{
+		$stmt = $conn->prepareStatement( 'SELECT LAST_INSERT_ID()' );
+		$rs = $stmt->executeQuery();
+		
+		return $rs;	
+	}
+//-----------------------------------------------------------------------------
+} /* end of class phpmediadb_data_sql */
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Wed Mar 16 16:04:00 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 16 Mar 2005 16:04:00 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_videos.php,1.6,1.7
Message-ID: <200503161504.j2GF40N12881@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv14116/_source/tier.data

Modified Files:
	class.phpmediadb_data_videos.php 
Log Message:
* Fixed syntax mistake
* Added some comments
* Added array $data
* Changed methods exist() and create()

Index: class.phpmediadb_data_videos.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_videos.php,v
retrieving revision 1.6
retrieving revision 1.7
diff -u -d -r1.6 -r1.7
--- class.phpmediadb_data_videos.php	15 Mar 2005 18:17:12 -0000	1.6
+++ class.phpmediadb_data_videos.php	16 Mar 2005 15:03:58 -0000	1.7
@@ -7,7 +7,7 @@
 	// --- ATTRIBUTES ---
 
 	/**
-	 * Short description of attribute PHPMEDIADB
+	 * Reference to class PHPMEDIADB
 	 *
 	 * @access protected
 	 * @see phpmediadb
@@ -16,7 +16,7 @@
 	protected $PHPMEDIADB = null;
 
 	/**
-	 * Short description of attribute DATA
+	 * Reference to class DATA
 	 *
 	 * @access protected
 	 * @see phpmediadb_presentation
@@ -32,11 +32,13 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb_data
+	 * @param phpmediadb_data $sender Reference to parent class
 	 */
-	public function __construct()
+	public function __construct( $sender )
 	{
-		/* nothing to do yet */
+		/* assign parent */
+		$this->DATA			= $sender;
+		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
 	}
   
 //-----------------------------------------------------------------------------
@@ -58,32 +60,32 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @return String
+	 * @param Integer $id contains specified id for the sql statement
+	 * @return Mixed array $rs contains result of database query
 	 */
-	public function get( $VideoDataID )
+	public function get( $id )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
-		FROM VideoDatas a,
-		Languages b,
-		Items c,
-		ItemTypes d,
-		MediaCodecs e,
-		MediaFormats f,
-		MediaAgeRestrictions g,
-		MediaStatus h,
-		BinaryDatas i
-		WHERE a.VideoDataID = ? 
-		AND a.LanguageID = b.LanguageID
-		AND a.ItemID = c.ItemID
-		AND c.ItemTypeID = d.ItemTypeID
-		AND c.MediaCodecID = e.MediaCodecID
-		AND c.MediaFormatID = f.MediaFormatID
-		AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
-		AND c.MediaStatusID = h.MediaStatusID
-		AND c.ItemPicturesID = i.ItemPicturesID' );
-		$stmt->setString( 1, $VideoDataID );
+		$stmt = $conn->prepareStatement(	'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
+											FROM VideoDatas a,
+											Languages b,
+											Items c,
+											ItemTypes d,
+											MediaCodecs e,
+											MediaFormats f,
+											MediaAgeRestrictions g,
+											MediaStatus h,
+											BinaryDatas i
+											WHERE c.ItemID = ? 
+											AND a.LanguageID = b.LanguageID
+											AND a.ItemID = c.ItemID
+											AND c.ItemTypeID = d.ItemTypeID
+											AND c.MediaCodecID = e.MediaCodecID
+											AND c.MediaFormatID = f.MediaFormatID
+											AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
+											AND c.MediaStatusID = h.MediaStatusID
+											AND c.ItemPicturesID = i.ItemPicturesID' );
+		$stmt->setString( 1, $id );
 		$rs = $stmt->executeQuery();
 		
 		return $rs;
@@ -96,30 +98,30 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return String
+	 * @return Mixed array $rs contains result of database query
 	 */
 	public function getList()
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
-		FROM VideoDatas a,
-		Languages b,
-		Items c,
-		ItemTypes d,
-		MediaCodecs e,
-		MediaFormats f,
-		MediaAgeRestrictions g,
-		MediaStatus h,
-		BinaryDatas i
-		WHERE a.VideoDataID LIKE "%" 
-		AND a.LanguageID = b.LanguageID
-		AND a.ItemID = c.ItemID
-		AND c.ItemTypeID = d.ItemTypeID
-		AND c.MediaCodecID = e.MediaCodecID
-		AND c.MediaFormatID = f.MediaFormatID
-		AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
-		AND c.MediaStatusID = h.MediaStatusID
-		AND c.ItemPicturesID = i.ItemPicturesID' );
+		$stmt = $conn->prepareStatement(	'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.*, h.*, i.ItemPicturesID
+											FROM VideoDatas a,
+											Languages b,
+											Items c,
+											ItemTypes d,
+											MediaCodecs e,
+											MediaFormats f,
+											MediaAgeRestrictions g,
+											MediaStatus h,
+											BinaryDatas i
+											WHERE c.ItemID LIKE "%" 
+											AND a.LanguageID = b.LanguageID
+											AND a.ItemID = c.ItemID
+											AND c.ItemTypeID = d.ItemTypeID
+											AND c.MediaCodecID = e.MediaCodecID
+											AND c.MediaFormatID = f.MediaFormatID
+											AND c.MediaAgeRestrictionID = g.MediaAgeRestrictionID
+											AND c.MediaStatusID = h.MediaStatusID
+											AND c.ItemPicturesID = i.ItemPicturesID' );
 		$rs = $stmt->executeQuery();
 		
 		return $rs;
@@ -127,135 +129,117 @@
 	}
 
 //-----------------------------------------------------------------------------
-	/**
-	 * This function deletes a specified record from the table VideoDatas
-	 * and all depending data from the other tables
+/**
+	 * This function creates a new record in the table VideoDatas
+	 * and all required data in the other tables
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
+	 * @param Mixed array $data contains all required data for the sql statement
+	 * @return Integer getLastInsert() returns id from the last created record
 	 */
-	public function delete( $VideoDataID )
+	public function create( $data )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'DELETE VideoDatas, Items, BinaryDatas, Categories_has_Items
-		FROM AudioDatas, Items, BinaryDatas, Categories_has_Items
-		WHERE VideoDatas.VideoDataID = ?
-		AND VideoDatas.ItemID = Items.ItemID
-		AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID
-		AND Items.ItemID = Categories_has_Items.ItemID' );
-		$stmt->setString( 1, $VideoDataID );
+		$stmt = $conn->prepareStatement( 'INSERT INTO VideoDatas ( VideoDataMediaCount, VideoDataImdbID ) VALUES( ?, ? )' );
+		$stmt->setString( 1, $data['VideoDataMediaCount'] );
+		$stmt->setString( 2, $data['VideoDataImdbID'] );
 		$stmt->executeUpdate();
 		
+		$stmt = $conn->prepareStatement(	'INSERT INTO Items
+											( ItemTitle, ItemOriginalTitle, ItemRelease, ItemMediaName,
+											ItemCreationDate, ItemModificationDate, ItemComment )
+											VALUES( ?, ?, ?, ?, now(), now(), ? )' );
+		$stmt->setString( 1, $data['ItemTitle'] );
+		$stmt->setString( 2, $data['ItemOriginalTitle'] );
+		$stmt->setString( 3, $data['ItemRelease'] );
+		$stmt->setString( 4, $data['ItemMediaName'] );
+		$stmt->setString( 5, $data['ItemComment'] );
+		$stmt->executeUpdate(); 
+
+		return $this->DATA->SQL->getLastInsert( $conn );
 	}
 
 //-----------------------------------------------------------------------------
 /**
-	 * This function creates a new record in the table VideoDatas
-	 * and all required data in the other tables
+	 * This function modifies a specified record from the table VideoDatas
+	 * and all required data from the other tables
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @param Integer
-	 * @param String
-	 * @param String
-	 * @param Integer
-	 * @param String
-	 * @param Blob
+	 * @param Integer $id contains specified id for the sql statement
+	 * @param Mixed array $data contains all required data for the sql statement
 	 */
-	public function create( $VideoDataMediaCount, $AudioDataImdbID, $ItemTitle, $ItemOriginalTitle,
-	$ItemRelease, $ItemMediaName, $ItemComment )
+	public function modify( $id, $data )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'INSERT INTO VideoDatas ( VideoDataMediaCount, VideoDataImdbID ) VALUES( ?, ? )' );
-		$stmt->setString( 1, $VideoDataMediaCount );
-		$stmt->setString( 2, $VideoDataImdbID );
+		$stmt = $conn->prepareStatement(	'UPDATE VideoDatas,
+											Languages,
+											Items,
+											ItemTypes,
+											MediaCodecs,
+											MediaFormats,
+											MediaAgeRestrictions,
+											MediaStatus,
+											BinaryDatas
+											SET VideoDatas.VideoDataMediaCount = ?,
+											VideoDatas.VideoDataImdbID = ?,
+											Items.ItemTitle = ?,
+											Items.ItemOriginalTitle = ?,
+											Items.ItemRelease = ?,
+											Items.ItemMediaName = ?,
+											Items.ItemModificationDate = now(),
+											Items.ItemComment = ?,
+											Items.MediaCodecID = ?,
+											Items.MediaFormatID = ?,
+											Items.MediaAgeRestrictionID = ?,
+											Items.MediaStatusID = ?,
+											Items.ItemPicturesID = ?
+											WHERE Items.ItemID = ?
+											AND VideoDatas.LanguageID = Languages.LanguageID
+											AND VideoDatas.ItemID = Items.ItemID
+											AND Items.ItemTypeID = ItemTypes.ItemTypeID
+											AND Items.MediaCodecID = MediaCodecs.MediaCodecID
+											AND Items.MediaFormatID = MediaFormats.MediaFormatID
+											AND Items.MediaAgeRestrictionID = MediaAgeRestrictions.MediaAgeRestrictionID
+											AND Items.MediaStatusID = MediaStatus.MediaStatusID
+											AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID' );
+		$stmt->setString( 1, $data['VideoDataMediaCount'] );
+		$stmt->setString( 2, $data['VideoDataImdbID'] );
+		$stmt->setString( 3, $data['ItemTitle'] );
+		$stmt->setString( 4, $data['ItemOriginalTitle'] );
+		$stmt->setString( 5, $data['ItemRelease'] );
+		$stmt->setString( 6, $data['ItemMediaName'] );
+		$stmt->setString( 7, $data['ItemComment'] );
+		$stmt->setString( 8, $data['MediaCodecID'] );
+		$stmt->setString( 9, $data['MediaFormatID'] );
+		$stmt->setString( 10, $data['MediaAgeRestrictionID'] );
+		$stmt->setString( 11, $data['MediaStatusID'] );
+		$stmt->setString( 12, $data['ItemPicturesID'] );
+		$stmt->setString( 13, $id );
 		$stmt->executeUpdate();
-		
-		$stmt = $conn->prepareStatement( 'INSERT INTO Items
-		( ItemTitle, ItemOriginalTitle, ItemRelease, ItemMediaName, ItemCreationDate, ItemModificationDate, ItemComment )
-		VALUES( ?, ?, ?, ?, now(), now(), ? )' );
-		$stmt->setString( 1, $ItemTitle );
-		$stmt->setString( 2, $ItemOriginalTitle );
-		$stmt->setString( 3, $ItemRelease );
-		$stmt->setString( 4, $ItemMediaName );
-		$stmt->setString( 5, $ItemComment );
-		$stmt->executeUpdate(); 
-
 	}
-
+	
 //-----------------------------------------------------------------------------
-/**
-	 * This function modifies a specified record from the table VideoDatas
-	 * and all required data from the other tables
+	/**
+	 * This function deletes a specified record from the table VideoDatas
+	 * and all depending data from the other tables
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @param Integer
-	 * @param Integer
-	 * @param String
-	 * @param String
-	 * @param Integer
-	 * @param Blob
-	 * @param Integer
-	 * @param Integer
-	 * @param Integer
-	 * @param Integer
-	 * @param Integer
+	 * @param Integer $id contains specified id for the sql statement
 	 */
-	public function modify( $VideoDataID, $VideoDataMediaCount, $VideoDataImdbID, $ItemTitle, $ItemOriginalTitle,
-	$ItemRelease, $ItemMediaName, $ItemComment, $MediaCodecID, $MediaFormatID,
-	$MediaAgeRestrictionID, $MediaStatusID, $ItemPicturesID )
+	public function delete( $id )
 	{
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'UPDATE VideoDatas,
-		Languages,
-		Items,
-		ItemTypes,
-		MediaCodecs,
-		MediaFormats,
-		MediaAgeRestrictions,
-		MediaStatus,
-		BinaryDatas
-		SET VideoDatas.VideoDataMediaCount = ?,
-		VideoDatas.VideoDataImdbID = ?,
-		Items.ItemTitle = ?,
-		Items.ItemOriginalTitle = ?,
-		Items.ItemRelease = ?,
-		Items.ItemMediaName = ?,
-		Items.ItemModificationDate = now(),
-		Items.ItemComment = ?,
-		Items.MediaCodecID = ?,
-		Items.MediaFormatID = ?,
-		Items.MediaAgeRestrictionID = ?,
-		Items.MediaStatusID = ?,
-		Items.ItemPicturesID = ?
-		WHERE VideoDatas.VideoDataID = ? 
-		AND VideoDatas.LanguageID = Languages.LanguageID
-		AND VideoDatas.ItemID = Items.ItemID
-		AND Items.ItemTypeID = ItemTypes.ItemTypeID
-		AND Items.MediaCodecID = MediaCodecs.MediaCodecID
-		AND Items.MediaFormatID = MediaFormats.MediaFormatID
-		AND Items.MediaAgeRestrictionID = MediaAgeRestrictions.MediaAgeRestrictionID
-		AND Items.MediaStatusID = MediaStatus.MediaStatusID
-		AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID' );
-		$stmt->setString( 1, $VideoDataMediaCount );
-		$stmt->setString( 2, $VideoDataImdbID );
-		$stmt->setString( 3, $ItemTitle );
-		$stmt->setString( 4, $ItemOriginalTitle );
-		$stmt->setString( 5, $ItemRelease );
-		$stmt->setString( 6, $ItemMediaName );
-		$stmt->setString( 7, $ItemComment );
-		$stmt->setString( 8, $MediaCodecID );
-		$stmt->setString( 9, $MediaFormatID );
-		$stmt->setString( 10, $MediaAgeRestrictionID );
-		$stmt->setString( 11, $MediaStatusID );
-		$stmt->setString( 12, $ItemPicturesID );
-		$stmt->setString( 13, $VideoDataID );
+		$stmt = $conn->prepareStatement(	'DELETE VideoDatas, Items, BinaryDatas, Categories_has_Items
+											FROM AudioDatas, Items, BinaryDatas, Categories_has_Items
+											WHERE Items.ItemID = ?
+											AND VideoDatas.ItemID = Items.ItemID
+											AND Items.ItemPicturesID = BinaryDatas.ItemPicturesID
+											AND Items.ItemID = Categories_has_Items.ItemID' );
+		$stmt->setString( 1, $id );
 		$stmt->executeUpdate();
-		
 	}
 
 //-----------------------------------------------------------------------------
@@ -265,29 +249,30 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Integer
-	 * @return Boolean
+	 * @param Integer $id contains specified id for the sql statement
+	 * @return Boolean $returnValue returns whether the specified record exists
 	 */
-	public function exist( $VideoDataID )
+	public function exist( $id )
 	{
+		/* init */
+		$returnValue = false;
+		
 		$conn = $this->DATA->SQL->getConnection();
-		$stmt = $conn->prepareStatement( 'SELECT COUNT(*)
-		FROM VideoDatas,
-		WHERE VideoDatas.VideoDataID = ?' );
-		$stmt->setString( 1, $VideoDataID );
+		$stmt = $conn->prepareStatement(	'SELECT COUNT(*)
+											FROM VideoDatas,
+											WHERE VideoDatas.VideoDataID = ?' );
+		$stmt->setString( 1, $videoDataId );
 		$rs = $stmt->executeQuery( ResultSet::FETCHMODE_NUM );
 		$rs->next();
+
+		/* check if item exists */
 		if( $rs->get(1) >= 1 )
-			{
-			return true;
-			}
-		else
-			{
-			return false;
-			}
+			$returnValue = true;
+
+		return $returnValue;
 	}
 
 //-----------------------------------------------------------------------------
-}
+} /* end of class phpmediadb_data_videos */
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Thu Mar 17 20:30:15 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 17 Mar 2005 20:30:15 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration/templates body.item.add.choice.tpl,NONE,1.1
Message-ID: <200503171930.j2HJUFN04747@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/templates
In directory sheep:/tmp/cvs-serv8688/_source/tier.configuration/templates

Added Files:
	body.item.add.choice.tpl 
Log Message:
* Initial revision

--- NEW FILE: body.item.add.choice.tpl ---
<div class="phpmediadb-body-item-add" id="phpmediadb-body-item-add-choice">
	<a href="{$CONFIGURATION.ROOTPATH}admin/item-add.php?type=audio"><img src="{$CONFIGURATION.ROOTPATH}_layout/images/icons/item-audio-big.png" alt="{$I18N.ITEM_AUDIO|default:"%ITEM_AUDIO%"}"/></a>
	<a href="{$CONFIGURATION.ROOTPATH}admin/item-add.php?type=video"><img src="{$CONFIGURATION.ROOTPATH}_layout/images/icons/item-video-big.png" alt="{$I18N.ITEM_VIDEO|default:"%ITEM_VIDEO%"}"/></a>
	<a href="{$CONFIGURATION.ROOTPATH}admin/item-add.php?type=print"><img src="{$CONFIGURATION.ROOTPATH}_layout/images/icons/item-print-big.png" alt="{$I18N.ITEM_PRINT|default:"%ITEM_PRINT%"}"/></a>
</div>



From nobody at sheep.berlios.de  Thu Mar 17 21:03:35 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 17 Mar 2005 21:03:35 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/install - New directory
Message-ID: <200503172003.j2HK3ZN05424@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/install
In directory sheep:/tmp/cvs-serv9968/install

Log Message:
Directory /cvsroot/phpmediadb/phpmediadb-cvs/install added to the repository




From nobody at sheep.berlios.de  Thu Mar 17 21:03:47 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 17 Mar 2005 21:03:47 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/install create-tables.sql,NONE,1.1 index.php,NONE,1.1 insert-data.sql,NONE,1.1
Message-ID: <200503172003.j2HK3lN05428@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/install
In directory sheep:/tmp/cvs-serv9975/install

Added Files:
	create-tables.sql index.php insert-data.sql 
Log Message:
* Initial revision

--- NEW FILE: create-tables.sql ---
-- phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
-- $Id: create-tables.sql,v 1.1 2005/03/17 20:03:44 mblaschke Exp $




-- EOF -- EOF -- EOF -- EOF -- EOF -- EOF -- EOF -- EOF -- EOF -- EOF -- EOF --
--- NEW FILE: index.php ---
<?php
// phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
/* $Id: index.php,v 1.1 2005/03/17 20:03:44 mblaschke Exp $ */

//--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
?>
--- NEW FILE: insert-data.sql ---
-- phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
-- $Id: insert-data.sql,v 1.1 2005/03/17 20:03:44 mblaschke Exp $




-- EOF -- EOF -- EOF -- EOF -- EOF -- EOF -- EOF -- EOF -- EOF -- EOF -- EOF --


From nobody at sheep.berlios.de  Thu Mar 17 21:03:28 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 17 Mar 2005 21:03:28 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/help/development erm-model.xml,1.15,1.16
Message-ID: <200503172003.j2HK3SN05416@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/help/development
In directory sheep:/tmp/cvs-serv9958/help/development

Modified Files:
	erm-model.xml 
Log Message:
* Updated some tables

Index: erm-model.xml
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/help/development/erm-model.xml,v
retrieving revision 1.15
retrieving revision 1.16
diff -u -d -r1.15 -r1.16
--- erm-model.xml	12 Mar 2005 08:41:22 -0000	1.15
+++ erm-model.xml	17 Mar 2005 20:03:25 -0000	1.16
@@ -1,273 +1,273 @@
-<?xml version="1.0" standalone="yes" ?>
-<DBMODEL Version="4.0">
-<SETTINGS>
-<GLOBALSETTINGS ModelName="erm-model" IDModel="0" IDVersion="0" VersionStr="1.0.0.0" Comments="" UseVersionHistroy="1" AutoIncVersion="1" DatabaseType="MySQL" ZoomFac="75.00" XPos="0" YPos="0" DefaultDataType="5" DefaultTablePrefix="0" DefSaveDBConn="" DefSyncDBConn="" DefQueryDBConn="" Printer="" HPageCount="4.0" PageAspectRatio="1.440892512336408" PageOrientation="1" PageFormat="A4 (210x297 mm, 8.26x11.7 inches)" SelectedPages="" UsePositionGrid="1" PositionGridX="20" PositionGridY="20" TableNameInRefs="0" DefaultTableType="0" ActivateRefDefForNewRelations="1" FKPrefix="" FKPostfix="" CreateFKRefDefIndex="1" DBQuoteCharacter="`" CreateSQLforLinkedObjects="0" DefModelFont="Nimbus Sans L" CanvasWidth="4096" CanvasHeight="2842" />
-<DATATYPEGROUPS>
-<DATATYPEGROUP Name="Numeric Types" Icon="1" />
-<DATATYPEGROUP Name="Date and Time Types" Icon="2" />
-<DATATYPEGROUP Name="String Types" Icon="3" />
-<DATATYPEGROUP Name="Blob and Text Types" Icon="4" />
-<DATATYPEGROUP Name="User defined Types" Icon="5" />
-<DATATYPEGROUP Name="Geographic Types" Icon="6" />
-</DATATYPEGROUPS>
-<DATATYPES>
-<DATATYPE ID="1" IDGroup="0" TypeName="TINYINT" Description="A very small integer. The signed range is -128 to 127. The unsigned range is 0 to 255." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="UNSIGNED" Default="1" />
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="2" IDGroup="0" TypeName="SMALLINT" Description="A small integer. The signed range is -32768 to 32767. The unsigned range is 0 to 65535." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="UNSIGNED" Default="1" />
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="3" IDGroup="0" TypeName="MEDIUMINT" Description="A medium-size integer. The signed range is -8388608 to 8388607. The unsigned range is 0 to 16777215." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="UNSIGNED" Default="1" />
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="4" IDGroup="0" TypeName="INT" Description="A normal-size integer. The signed range is -2147483648 to 2147483647. The unsigned range is 0 to 4294967295." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="1" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="UNSIGNED" Default="0" />
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="5" IDGroup="0" TypeName="INTEGER" Description="A normal-size integer. The signed range is -2147483648 to 2147483647. The unsigned range is 0 to 4294967295." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="1" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="UNSIGNED" Default="1" />
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="6" IDGroup="0" TypeName="BIGINT" Description="A large integer. The signed range is -9223372036854775808 to 9223372036854775807. The unsigned range is 0 to 18446744073709551615." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="UNSIGNED" Default="0" />
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="7" IDGroup="0" TypeName="FLOAT" Description="A small (single-precision) floating-point number. Cannot be unsigned. Allowable values are -3.402823466E+38 to -1.175494351E-38, 0, and 1.175494351E-38 to 3.402823466E+38." ParamCount="1" OptionCount="1" ParamRequired="1" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="precision" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="8" IDGroup="0" TypeName="FLOAT" Description="A small (single-precision) floating-point number. Cannot be unsigned. Allowable values are -3.402823466E+38 to -1.175494351E-38, 0, and 1.175494351E-38 to 3.402823466E+38." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-<PARAM Name="decimals" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="9" IDGroup="0" TypeName="DOUBLE" Description="A normal-size (double-precision) floating-point number. Cannot be unsigned. Allowable values are -1.7976931348623157E+308 to -2.2250738585072014E-308, 0, and 2.2250738585072014E-308 to 1.7976931348623157E+308." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="2" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-<PARAM Name="decimals" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="10" IDGroup="0" TypeName="DOUBLE PRECISION" Description="This is a synonym for DOUBLE." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="2" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-<PARAM Name="decimals" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="11" IDGroup="0" TypeName="REAL" Description="This is a synonym for DOUBLE." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="2" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-<PARAM Name="decimals" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="12" IDGroup="0" TypeName="DECIMAL" Description="An unpacked floating-point number. Cannot be unsigned. Behaves like a CHAR column." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="3" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-<PARAM Name="decimals" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="13" IDGroup="0" TypeName="NUMERIC" Description="This is a synonym for DECIMAL." ParamCount="2" OptionCount="1" ParamRequired="1" EditParamsAsString="0" SynonymGroup="3" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-<PARAM Name="decimals" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="ZEROFILL" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="14" IDGroup="1" TypeName="DATE" Description="A date. The supported range is \a1000-01-01\a to \a9999-12-31\a." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="15" IDGroup="1" TypeName="DATETIME" Description="A date and time combination. The supported range is \a1000-01-01 00:00:00\a to \a9999-12-31 23:59:59\a." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="16" IDGroup="1" TypeName="TIMESTAMP" Description="A timestamp. The range is \a1970-01-01 00:00:00\a to sometime in the year 2037. The length can be 14 (or missing), 12, 10, 8, 6, 4, or 2 representing YYYYMMDDHHMMSS, ... , YYYYMMDD, ... , YY formats." ParamCount="1" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-</PARAMS>
-</DATATYPE>
-<DATATYPE ID="17" IDGroup="1" TypeName="TIME" Description="A time. The range is \a-838:59:59\a to \a838:59:59\a." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="18" IDGroup="1" TypeName="YEAR" Description="A year in 2- or 4-digit format (default is 4-digit)." ParamCount="1" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-</PARAMS>
-</DATATYPE>
-<DATATYPE ID="19" IDGroup="2" TypeName="CHAR" Description="A fixed-length string (1 to 255 characters) that is always right-padded with spaces to the specified length when stored. values are sorted and compared in case-insensitive fashion according to the default character set unless the BINARY keyword is given." ParamCount="1" OptionCount="1" ParamRequired="1" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="BINARY" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="20" IDGroup="2" TypeName="VARCHAR" Description="A variable-length string (1 to 255 characters). Values are sorted and compared in case-sensitive fashion unless the BINARY keyword is given." ParamCount="1" OptionCount="1" ParamRequired="1" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="length" />
-</PARAMS>
-<OPTIONS>
-<OPTION Name="BINARY" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="21" IDGroup="2" TypeName="BIT" Description="This is a synonym for CHAR(1)." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="22" IDGroup="2" TypeName="BOOL" Description="This is a synonym for CHAR(1)." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="23" IDGroup="3" TypeName="TINYBLOB" Description="A column maximum length of 255 (2^8 - 1) characters. Values are sorted and compared in case-sensitive fashion." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="24" IDGroup="3" TypeName="BLOB" Description="A column maximum length of 65535 (2^16 - 1) characters. Values are sorted and compared in case-sensitive fashion." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="25" IDGroup="3" TypeName="MEDIUMBLOB" Description="A column maximum length of 16777215 (2^24 - 1) characters. Values are sorted and compared in case-sensitive fashion." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="26" IDGroup="3" TypeName="LONGBLOB" Description="A column maximum length of 4294967295 (2^32 - 1) characters. Values are sorted and compared in case-sensitive fashion." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="27" IDGroup="3" TypeName="TINYTEXT" Description="A column maximum length of 255 (2^8 - 1) characters." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="28" IDGroup="3" TypeName="TEXT" Description="A column maximum length of 65535 (2^16 - 1) characters." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="29" IDGroup="3" TypeName="MEDIUMTEXT" Description="A column maximum length of 16777215 (2^24 - 1) characters." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="30" IDGroup="3" TypeName="LONGTEXT" Description="A column maximum length of 4294967295 (2^32 - 1) characters." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="31" IDGroup="3" TypeName="ENUM" Description="An enumeration. A string object that can have only one value, chosen from the list of values." ParamCount="1" OptionCount="0" ParamRequired="1" EditParamsAsString="1" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="values" />
-</PARAMS>
-</DATATYPE>
-<DATATYPE ID="32" IDGroup="3" TypeName="SET" Description="A set. A string object that can have zero or more values, each of which must be chosen from the list of values." ParamCount="1" OptionCount="0" ParamRequired="1" EditParamsAsString="1" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<PARAMS>
-<PARAM Name="values" />
-</PARAMS>
-</DATATYPE>
-<DATATYPE ID="33" IDGroup="4" TypeName="Varchar(20)" Description="" ParamCount="0" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<OPTIONS>
-<OPTION Name="BINARY" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="34" IDGroup="4" TypeName="Varchar(45)" Description="" ParamCount="0" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<OPTIONS>
-<OPTION Name="BINARY" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="35" IDGroup="4" TypeName="Varchar(255)" Description="" ParamCount="0" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-<OPTIONS>
-<OPTION Name="BINARY" Default="0" />
-</OPTIONS>
-</DATATYPE>
-<DATATYPE ID="36" IDGroup="5" TypeName="GEOMETRY" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="38" IDGroup="5" TypeName="LINESTRING" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="39" IDGroup="5" TypeName="POLYGON" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="40" IDGroup="5" TypeName="MULTIPOINT" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="41" IDGroup="5" TypeName="MULTILINESTRING" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="42" IDGroup="5" TypeName="MULTIPOLYGON" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-<DATATYPE ID="43" IDGroup="5" TypeName="GEOMETRYCOLLECTION" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
-</DATATYPE>
-</DATATYPES>
-<COMMON_DATATYPES>
-<COMMON_DATATYPE ID="5" />
-<COMMON_DATATYPE ID="8" />
-<COMMON_DATATYPE ID="20" />
-<COMMON_DATATYPE ID="15" />
-<COMMON_DATATYPE ID="22" />
-<COMMON_DATATYPE ID="28" />
-<COMMON_DATATYPE ID="26" />
-<COMMON_DATATYPE ID="33" />
-<COMMON_DATATYPE ID="34" />
-<COMMON_DATATYPE ID="35" />
-</COMMON_DATATYPES>
-<TABLEPREFIXES>
-<TABLEPREFIX Name="Default (no prefix)" />
-</TABLEPREFIXES>
-<REGIONCOLORS>
-<REGIONCOLOR Color="Red=#FFEEEC" />
-<REGIONCOLOR Color="Yellow=#FEFDED" />
-<REGIONCOLOR Color="Green=#EAFFE5" />
-<REGIONCOLOR Color="Cyan=#ECFDFF" />
-<REGIONCOLOR Color="Blue=#F0F1FE" />
-<REGIONCOLOR Color="Magenta=#FFEBFA" />
-</REGIONCOLORS>
-<POSITIONMARKERS>
-<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
-<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
-<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
-<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
-<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
-<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
-<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
-<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
-<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
-<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
-<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
-</POSITIONMARKERS>
-</SETTINGS>
-<METADATA>
-<REGIONS>
-<REGION ID="1690" RegionName="Binary Data Information" XPos="1489" YPos="512" Width="440" Height="200" RegionColor="0" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="53" />
-<REGION ID="1672" RegionName="Person Information" XPos="682" YPos="721" Width="1020" Height="460" RegionColor="4" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="46" />
+<?xml version="1.0" standalone="yes" ?>
+<DBMODEL Version="4.0">
+<SETTINGS>
+<GLOBALSETTINGS ModelName="erm-model" IDModel="0" IDVersion="0" VersionStr="1.0.0.0" Comments="" UseVersionHistroy="1" AutoIncVersion="1" DatabaseType="MySQL" ZoomFac="75.00" XPos="976" YPos="0" DefaultDataType="5" DefaultTablePrefix="0" DefSaveDBConn="" DefSyncDBConn="" DefQueryDBConn="" Printer="" HPageCount="4.0" PageAspectRatio="1.440892512336408" PageOrientation="1" PageFormat="A4 (210x297 mm, 8.26x11.7 inches)" SelectedPages="" UsePositionGrid="1" PositionGridX="10" PositionGridY="10" TableNameInRefs="0" DefaultTableType="0" ActivateRefDefForNewRelations="1" FKPrefix="" FKPostfix="" CreateFKRefDefIndex="1" DBQuoteCharacter="`" CreateSQLforLinkedObjects="0" DefModelFont="Nimbus Sans L" CanvasWidth="4096" CanvasHeight="2842" />
+<DATATYPEGROUPS>
+<DATATYPEGROUP Name="Numeric Types" Icon="1" />
+<DATATYPEGROUP Name="Date and Time Types" Icon="2" />
+<DATATYPEGROUP Name="String Types" Icon="3" />
+<DATATYPEGROUP Name="Blob and Text Types" Icon="4" />
+<DATATYPEGROUP Name="User defined Types" Icon="5" />
+<DATATYPEGROUP Name="Geographic Types" Icon="6" />
+</DATATYPEGROUPS>
+<DATATYPES>
+<DATATYPE ID="1" IDGroup="0" TypeName="TINYINT" Description="A very small integer. The signed range is -128 to 127. The unsigned range is 0 to 255." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="UNSIGNED" Default="1" />
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="2" IDGroup="0" TypeName="SMALLINT" Description="A small integer. The signed range is -32768 to 32767. The unsigned range is 0 to 65535." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="UNSIGNED" Default="1" />
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="3" IDGroup="0" TypeName="MEDIUMINT" Description="A medium-size integer. The signed range is -8388608 to 8388607. The unsigned range is 0 to 16777215." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="UNSIGNED" Default="1" />
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="4" IDGroup="0" TypeName="INT" Description="A normal-size integer. The signed range is -2147483648 to 2147483647. The unsigned range is 0 to 4294967295." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="1" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="UNSIGNED" Default="0" />
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="5" IDGroup="0" TypeName="INTEGER" Description="A normal-size integer. The signed range is -2147483648 to 2147483647. The unsigned range is 0 to 4294967295." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="1" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="UNSIGNED" Default="1" />
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="6" IDGroup="0" TypeName="BIGINT" Description="A large integer. The signed range is -9223372036854775808 to 9223372036854775807. The unsigned range is 0 to 18446744073709551615." ParamCount="1" OptionCount="2" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="UNSIGNED" Default="0" />
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="7" IDGroup="0" TypeName="FLOAT" Description="A small (single-precision) floating-point number. Cannot be unsigned. Allowable values are -3.402823466E+38 to -1.175494351E-38, 0, and 1.175494351E-38 to 3.402823466E+38." ParamCount="1" OptionCount="1" ParamRequired="1" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="precision" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="8" IDGroup="0" TypeName="FLOAT" Description="A small (single-precision) floating-point number. Cannot be unsigned. Allowable values are -3.402823466E+38 to -1.175494351E-38, 0, and 1.175494351E-38 to 3.402823466E+38." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+<PARAM Name="decimals" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="9" IDGroup="0" TypeName="DOUBLE" Description="A normal-size (double-precision) floating-point number. Cannot be unsigned. Allowable values are -1.7976931348623157E+308 to -2.2250738585072014E-308, 0, and 2.2250738585072014E-308 to 1.7976931348623157E+308." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="2" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+<PARAM Name="decimals" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="10" IDGroup="0" TypeName="DOUBLE PRECISION" Description="This is a synonym for DOUBLE." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="2" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+<PARAM Name="decimals" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="11" IDGroup="0" TypeName="REAL" Description="This is a synonym for DOUBLE." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="2" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+<PARAM Name="decimals" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="12" IDGroup="0" TypeName="DECIMAL" Description="An unpacked floating-point number. Cannot be unsigned. Behaves like a CHAR column." ParamCount="2" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="3" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+<PARAM Name="decimals" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="13" IDGroup="0" TypeName="NUMERIC" Description="This is a synonym for DECIMAL." ParamCount="2" OptionCount="1" ParamRequired="1" EditParamsAsString="0" SynonymGroup="3" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+<PARAM Name="decimals" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="ZEROFILL" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="14" IDGroup="1" TypeName="DATE" Description="A date. The supported range is \a1000-01-01\a to \a9999-12-31\a." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="15" IDGroup="1" TypeName="DATETIME" Description="A date and time combination. The supported range is \a1000-01-01 00:00:00\a to \a9999-12-31 23:59:59\a." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="16" IDGroup="1" TypeName="TIMESTAMP" Description="A timestamp. The range is \a1970-01-01 00:00:00\a to sometime in the year 2037. The length can be 14 (or missing), 12, 10, 8, 6, 4, or 2 representing YYYYMMDDHHMMSS, ... , YYYYMMDD, ... , YY formats." ParamCount="1" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+</DATATYPE>
+<DATATYPE ID="17" IDGroup="1" TypeName="TIME" Description="A time. The range is \a-838:59:59\a to \a838:59:59\a." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="18" IDGroup="1" TypeName="YEAR" Description="A year in 2- or 4-digit format (default is 4-digit)." ParamCount="1" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+</DATATYPE>
+<DATATYPE ID="19" IDGroup="2" TypeName="CHAR" Description="A fixed-length string (1 to 255 characters) that is always right-padded with spaces to the specified length when stored. values are sorted and compared in case-insensitive fashion according to the default character set unless the BINARY keyword is given." ParamCount="1" OptionCount="1" ParamRequired="1" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="BINARY" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="20" IDGroup="2" TypeName="VARCHAR" Description="A variable-length string (1 to 255 characters). Values are sorted and compared in case-sensitive fashion unless the BINARY keyword is given." ParamCount="1" OptionCount="1" ParamRequired="1" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="length" />
+</PARAMS>
+<OPTIONS>
+<OPTION Name="BINARY" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="21" IDGroup="2" TypeName="BIT" Description="This is a synonym for CHAR(1)." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="22" IDGroup="2" TypeName="BOOL" Description="This is a synonym for CHAR(1)." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="23" IDGroup="3" TypeName="TINYBLOB" Description="A column maximum length of 255 (2^8 - 1) characters. Values are sorted and compared in case-sensitive fashion." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="24" IDGroup="3" TypeName="BLOB" Description="A column maximum length of 65535 (2^16 - 1) characters. Values are sorted and compared in case-sensitive fashion." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="25" IDGroup="3" TypeName="MEDIUMBLOB" Description="A column maximum length of 16777215 (2^24 - 1) characters. Values are sorted and compared in case-sensitive fashion." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="26" IDGroup="3" TypeName="LONGBLOB" Description="A column maximum length of 4294967295 (2^32 - 1) characters. Values are sorted and compared in case-sensitive fashion." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="27" IDGroup="3" TypeName="TINYTEXT" Description="A column maximum length of 255 (2^8 - 1) characters." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="28" IDGroup="3" TypeName="TEXT" Description="A column maximum length of 65535 (2^16 - 1) characters." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="29" IDGroup="3" TypeName="MEDIUMTEXT" Description="A column maximum length of 16777215 (2^24 - 1) characters." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="30" IDGroup="3" TypeName="LONGTEXT" Description="A column maximum length of 4294967295 (2^32 - 1) characters." ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="31" IDGroup="3" TypeName="ENUM" Description="An enumeration. A string object that can have only one value, chosen from the list of values." ParamCount="1" OptionCount="0" ParamRequired="1" EditParamsAsString="1" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="values" />
+</PARAMS>
+</DATATYPE>
+<DATATYPE ID="32" IDGroup="3" TypeName="SET" Description="A set. A string object that can have zero or more values, each of which must be chosen from the list of values." ParamCount="1" OptionCount="0" ParamRequired="1" EditParamsAsString="1" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<PARAMS>
+<PARAM Name="values" />
+</PARAMS>
+</DATATYPE>
+<DATATYPE ID="33" IDGroup="4" TypeName="Varchar(20)" Description="" ParamCount="0" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<OPTIONS>
+<OPTION Name="BINARY" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="34" IDGroup="4" TypeName="Varchar(45)" Description="" ParamCount="0" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<OPTIONS>
+<OPTION Name="BINARY" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="35" IDGroup="4" TypeName="Varchar(255)" Description="" ParamCount="0" OptionCount="1" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+<OPTIONS>
+<OPTION Name="BINARY" Default="0" />
+</OPTIONS>
+</DATATYPE>
+<DATATYPE ID="36" IDGroup="5" TypeName="GEOMETRY" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="38" IDGroup="5" TypeName="LINESTRING" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="39" IDGroup="5" TypeName="POLYGON" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="40" IDGroup="5" TypeName="MULTIPOINT" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="41" IDGroup="5" TypeName="MULTILINESTRING" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="42" IDGroup="5" TypeName="MULTIPOLYGON" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+<DATATYPE ID="43" IDGroup="5" TypeName="GEOMETRYCOLLECTION" Description="Geographic Datatype" ParamCount="0" OptionCount="0" ParamRequired="0" EditParamsAsString="0" SynonymGroup="0" PhysicalMapping="0" PhysicalTypeName="" >
+</DATATYPE>
+</DATATYPES>
+<COMMON_DATATYPES>
+<COMMON_DATATYPE ID="5" />
+<COMMON_DATATYPE ID="8" />
+<COMMON_DATATYPE ID="20" />
+<COMMON_DATATYPE ID="15" />
+<COMMON_DATATYPE ID="22" />
+<COMMON_DATATYPE ID="28" />
+<COMMON_DATATYPE ID="26" />
+<COMMON_DATATYPE ID="33" />
+<COMMON_DATATYPE ID="34" />
+<COMMON_DATATYPE ID="35" />
+</COMMON_DATATYPES>
+<TABLEPREFIXES>
+<TABLEPREFIX Name="Default (no prefix)" />
+</TABLEPREFIXES>
+<REGIONCOLORS>
+<REGIONCOLOR Color="Red=#FFEEEC" />
+<REGIONCOLOR Color="Yellow=#FEFDED" />
+<REGIONCOLOR Color="Green=#EAFFE5" />
+<REGIONCOLOR Color="Cyan=#ECFDFF" />
+<REGIONCOLOR Color="Blue=#F0F1FE" />
+<REGIONCOLOR Color="Magenta=#FFEBFA" />
+</REGIONCOLORS>
+<POSITIONMARKERS>
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+<POSITIONMARKER ZoomFac="-1.0" X="0" Y="0" />
+</POSITIONMARKERS>
+</SETTINGS>
+<METADATA>
+<REGIONS>
+<REGION ID="1690" RegionName="Binary Data Information" XPos="1489" YPos="512" Width="460" Height="200" RegionColor="0" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="53" />
+<REGION ID="1672" RegionName="Person Information" XPos="682" YPos="721" Width="1000" Height="480" RegionColor="4" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="46" />
 <REGION ID="1671" RegionName="General Item Information" XPos="682" YPos="15" Width="800" Height="700" RegionColor="2" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="45" />
 <REGION ID="1670" RegionName="Item Specific Information" XPos="15" YPos="14" Width="660" Height="580" RegionColor="0" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="44" />
 <REGION ID="1686" RegionName="Media Information" XPos="1489" YPos="16" Width="460" Height="480" RegionColor="1" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="51" />
-<REGION ID="1744" RegionName="File Information" XPos="13" YPos="1054" Width="660" Height="120" RegionColor="5" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="54" />
+<REGION ID="1744" RegionName="File Information" XPos="13" YPos="1054" Width="660" Height="150" RegionColor="5" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="54" />
 <REGION ID="1808" RegionName="Track Information" XPos="14" YPos="604" Width="340" Height="440" RegionColor="2" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="56" />
 <REGION ID="1809" RegionName="Language Information" XPos="356" YPos="603" Width="320" Height="440" RegionColor="3" TablePrefix="0" TableType="0" OverwriteTablePrefix="0" OverwriteTableType="0" Comments="" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="57" />
-</REGIONS>
-<TABLES>
+</REGIONS>
+<TABLES>
 <TABLE ID="1491" Tablename="Languages" PrevTableName="Table_01" XPos="416" YPos="823" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="3" >
 <COLUMNS>
 <COLUMN ID="1493" ColName="LanguageID" PrevColName="" Pos="0" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="1" NotNull="1" AutoInc="1" IsForeignKey="0" DefaultValue="" Comments="">
@@ -276,12 +276,12 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1495" ColName="LanguageName" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1495" ColName="LanguageName" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1496" ColName="LanguageCode" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1496" ColName="LanguageCode" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
@@ -372,17 +372,6 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1510" ColName="PrintDataMediaCount" PrevColName="PrintDataCount" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1511" ColName="PrintDataISBN" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
 <COLUMN ID="1582" ColName="ItemID" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="1" />
@@ -426,17 +415,6 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1516" ColName="AudioDataMediaCount" PrevColName="AudioDataMediumCount" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1517" ColName="AudioDataDiscID" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
 <COLUMN ID="1579" ColName="ItemID" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="1" />
@@ -492,18 +470,6 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1524" ColName="VideoDataMediaCount" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1525" ColName="VideoDataImdbID" PrevColName="" Pos="2" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
 <COLUMN ID="1576" ColName="ItemID" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="1" />
@@ -547,17 +513,17 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1530" ColName="TrackName" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1530" ColName="TrackName" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1531" ColName="TrackArtist" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1531" ColName="TrackArtist" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1532" ColName="TrackLength" PrevColName="" Pos="3" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1532" ColName="TrackLength" PrevColName="" Pos="3" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="1" />
 <OPTIONSELECT Value="0" />
@@ -583,7 +549,7 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1557" ColName="ItemTypeCode" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1557" ColName="ItemTypeCode" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
@@ -610,7 +576,7 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1562" ColName="CategoryName" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1562" ColName="CategoryName" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
@@ -667,7 +633,7 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1799" ColName="MediaStatusID" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
+<COLUMN ID="1852" ColName="PublisherID" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="1" />
 <OPTIONSELECT Value="0" />
@@ -697,41 +663,46 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1569" ColName="ItemTitle" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1569" ColName="ItemTitle" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1570" ColName="ItemOriginalTitle" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1570" ColName="ItemOriginalTitle" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1571" ColName="ItemRelease" PrevColName="" Pos="3" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1571" ColName="ItemReleaseDate" PrevColName="ItemRelease" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1753" ColName="ItemMediaName" PrevColName="" Pos="14" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1753" ColName="ItemMediaName" PrevColName="" Pos="14" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1572" ColName="ItemCreationDate" PrevColName="" Pos="4" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1572" ColName="ItemCreationDate" PrevColName="" Pos="4" idDatatype="16" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1573" ColName="ItemModificationDate" PrevColName="" Pos="5" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1573" ColName="ItemModificationDate" PrevColName="" Pos="5" idDatatype="16" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1747" ColName="ItemComment" PrevColName="" Pos="13" idDatatype="24" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<OPTIONSELECTED>
+</OPTIONSELECTED>
+</COLUMN>
+<COLUMN ID="1836" ColName="ItemQuantity" PrevColName="" Pos="13" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1747" ColName="ItemComment" PrevColName="" Pos="13" idDatatype="24" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1837" ColName="ItemIdentifier" PrevColName="" Pos="14" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
+<OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
 <COLUMN ID="1585" ColName="ItemTypeID" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
@@ -746,7 +717,6 @@
 <RELATION_START ID="1578" />
 <RELATION_START ID="1581" />
 <RELATION_START ID="1590" />
-<RELATION_START ID="1626" />
 <RELATION_START ID="1629" />
 <RELATION_START ID="1632" />
 <RELATION_START ID="1635" />
@@ -757,7 +727,7 @@
 <RELATION_END ID="1789" />
 <RELATION_END ID="1792" />
 <RELATION_END ID="1795" />
-<RELATION_END ID="1798" />
+<RELATION_END ID="1851" />
 </RELATIONS_END>
 <INDICES>
 <INDEX ID="1568" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
@@ -790,9 +760,9 @@
 <INDEXCOLUMN idColumn="1796" LengthParam="0" />
 </INDEXCOLUMNS>
 </INDEX>
-<INDEX ID="1800" IndexName="Items_FKIndex6" IndexKind="1" FKRefDef_Obj_id="1798">
+<INDEX ID="1853" IndexName="Items_FKIndex6" IndexKind="1" FKRefDef_Obj_id="1851">
 <INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1799" LengthParam="0" />
+<INDEXCOLUMN idColumn="1852" LengthParam="0" />
 </INDEXCOLUMNS>
 </INDEX>
 </INDICES>
@@ -805,32 +775,21 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1597" ColName="PublisherName" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1597" ColName="PublisherName" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1627" ColName="ItemID" PrevColName="" Pos="1" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="1" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
 </COLUMNS>
-<RELATIONS_END>
-<RELATION_END ID="1626" />
-</RELATIONS_END>
+<RELATIONS_START>
+<RELATION_START ID="1851" />
+</RELATIONS_START>
 <INDICES>
 <INDEX ID="1596" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
 <INDEXCOLUMNS>
 <INDEXCOLUMN idColumn="1595" LengthParam="0" />
 </INDEXCOLUMNS>
 </INDEX>
-<INDEX ID="1628" IndexName="Publishers_FKIndex1" IndexKind="1" FKRefDef_Obj_id="1626">
-<INDEXCOLUMNS>
-<INDEXCOLUMN idColumn="1627" LengthParam="0" />
-</INDEXCOLUMNS>
-</INDEX>
 </INDICES>
 </TABLE>
 <TABLE ID="1598" Tablename="PersonDirectors" PrevTableName="Table_13" XPos="919" YPos="779" TableType="0" TablePrefix="0" nmTable="0" Temporary="0" UseStandardInserts="0" StandardInserts="\n" TableOptions="DelayKeyTblUpdates=0\nPackKeys=0\nRowChecksum=0\nRowFormat=0\nUseRaid=0\nRaidType=0\n" Comments="" Collapsed="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="26" >
@@ -970,12 +929,12 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1615" ColName="PersonFirstName" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1615" ColName="PersonFirstName" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1616" ColName="PersonLastName" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1616" ColName="PersonLastName" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
@@ -1008,7 +967,7 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1642" ColName="MediaFormatName" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1642" ColName="MediaFormatName" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
@@ -1041,7 +1000,7 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1647" ColName="MediaAgeRestriction" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1647" ColName="MediaAgeRestriction" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
@@ -1066,25 +1025,12 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1652" ColName="MediaStatus" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1653" ColName="MediaStatusOwner" PrevColName="" Pos="2" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1654" ColName="MediaStatusHolder" PrevColName="" Pos="3" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1652" ColName="MediaStatus" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
 </COLUMNS>
-<RELATIONS_START>
-<RELATION_START ID="1798" />
-</RELATIONS_START>
 <INDICES>
 <INDEX ID="1651" IndexName="PRIMARY" IndexKind="0" FKRefDef_Obj_id="-1">
 <INDEXCOLUMNS>
@@ -1107,14 +1053,8 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1659" ColName="MediaCodecName" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
-<OPTIONSELECTED>
-<OPTIONSELECT Value="0" />
-</OPTIONSELECTED>
-</COLUMN>
-<COLUMN ID="1660" ColName="MediaCodecBitrate" PrevColName="" Pos="2" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1659" ColName="MediaCodecName" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
-<OPTIONSELECT Value="1" />
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
@@ -1146,12 +1086,12 @@
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1749" ColName="BinaryDataMimeType" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1749" ColName="BinaryDataMimeType" PrevColName="" Pos="1" idDatatype="20" DatatypeParams="(255)" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="0" />
 </OPTIONSELECTED>
 </COLUMN>
-<COLUMN ID="1751" ColName="BinaryDataSize" PrevColName="" Pos="2" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="0" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
+<COLUMN ID="1751" ColName="BinaryDataSize" PrevColName="" Pos="2" idDatatype="5" DatatypeParams="" Width="-1" Prec="-1" PrimaryKey="0" NotNull="1" AutoInc="0" IsForeignKey="0" DefaultValue="" Comments="">
 <OPTIONSELECTED>
 <OPTIONSELECT Value="1" />
 <OPTIONSELECT Value="0" />
@@ -1169,8 +1109,8 @@
 </INDEX>
 </INDICES>
 </TABLE>
-</TABLES>
-<RELATIONS>
+</TABLES>
+<RELATIONS>
 <RELATION ID="1533" RelationName="Rel_01" Kind="2" SrcTable="1491" DestTable="1506" FKFields="LanguageID=LanguageID\n" FKFieldsComments="\n" relDirection="1" MidOffset="8" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1535" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="9" />
 <RELATION ID="1536" RelationName="Rel_02" Kind="2" SrcTable="1491" DestTable="1512" FKFields="LanguageID=LanguageID\n" FKFieldsComments="\n" relDirection="1" MidOffset="88" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1538" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="10" />
 <RELATION ID="1539" RelationName="Rel_03" Kind="2" SrcTable="1491" DestTable="1520" FKFields="LanguageID=LanguageID\n" FKFieldsComments="\n" relDirection="1" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1541" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="11" />
@@ -1186,7 +1126,6 @@
 <RELATION ID="1617" RelationName="Rel_14" Kind="2" SrcTable="1611" DestTable="1607" FKFields="PersonID=PersonID\n" FKFieldsComments="\n" relDirection="2" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1619" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="30" />
 <RELATION ID="1620" RelationName="Rel_15" Kind="2" SrcTable="1611" DestTable="1603" FKFields="PersonID=PersonID\n" FKFieldsComments="\n" relDirection="1" MidOffset="8" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1622" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="31" />
 <RELATION ID="1623" RelationName="Rel_16" Kind="2" SrcTable="1611" DestTable="1598" FKFields="PersonID=PersonID\n" FKFieldsComments="\n" relDirection="4" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1625" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="32" />
-<RELATION ID="1626" RelationName="Rel_17" Kind="2" SrcTable="1565" DestTable="1593" FKFields="ItemID=ItemID\n" FKFieldsComments="\n" relDirection="3" MidOffset="8" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1628" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="33" />
 <RELATION ID="1629" RelationName="Rel_18" Kind="2" SrcTable="1565" DestTable="1598" FKFields="ItemID=ItemID\n" FKFieldsComments="\n" relDirection="3" MidOffset="34" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1631" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="34" />
 <RELATION ID="1632" RelationName="Rel_19" Kind="2" SrcTable="1565" DestTable="1603" FKFields="ItemID=ItemID\n" FKFieldsComments="\n" relDirection="3" MidOffset="-5" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1634" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="35" />
 <RELATION ID="1635" RelationName="Rel_20" Kind="2" SrcTable="1565" DestTable="1607" FKFields="ItemID=ItemID\n" FKFieldsComments="\n" relDirection="2" MidOffset="138" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1637" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="36" />
@@ -1194,24 +1133,24 @@
 <RELATION ID="1789" RelationName="Rel_24" Kind="2" SrcTable="1638" DestTable="1565" FKFields="MediaFormatID=MediaFormatID\n" FKFieldsComments="\n" relDirection="4" MidOffset="104" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1791" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="52" />
 <RELATION ID="1792" RelationName="Rel_25" Kind="2" SrcTable="1655" DestTable="1565" FKFields="MediaCodecID=MediaCodecID\n" FKFieldsComments="\n" relDirection="4" MidOffset="-97" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1794" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="53" />
 <RELATION ID="1795" RelationName="Rel_26" Kind="2" SrcTable="1643" DestTable="1565" FKFields="MediaAgeRestrictionID=MediaAgeRestrictionID\n" FKFieldsComments="\n" relDirection="4" MidOffset="109" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1797" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="54" />
-<RELATION ID="1798" RelationName="Rel_27" Kind="2" SrcTable="1648" DestTable="1565" FKFields="MediaStatusID=MediaStatusID\n" FKFieldsComments="\n" relDirection="4" MidOffset="81" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1800" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="55" />
 <RELATION ID="1801" RelationName="Rel_28" Kind="2" SrcTable="1553" DestTable="1638" FKFields="ItemTypeID=ItemTypeID\n" FKFieldsComments="\n" relDirection="2" MidOffset="23" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1803" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="56" />
 <RELATION ID="1804" RelationName="Rel_29" Kind="2" SrcTable="1553" DestTable="1655" FKFields="ItemTypeID=ItemTypeID\n" FKFieldsComments="\n" relDirection="2" MidOffset="51" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="3" CaptionOffsetY="1" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1806" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="57" />
-</RELATIONS>
-<NOTES>
+<RELATION ID="1851" RelationName="Rel_28" Kind="2" SrcTable="1593" DestTable="1565" FKFields="PublisherID=PublisherID\n" FKFieldsComments="\n" relDirection="1" MidOffset="0" OptionalStart="0" OptionalEnd="0" CaptionOffsetX="0" CaptionOffsetY="0" StartIntervalOffsetX="0" StartIntervalOffsetY="0" EndIntervalOffsetX="0" EndIntervalOffsetY="0" CreateRefDef="1" Invisible="0" RefDef="Matching=0\nOnDelete=3\nOnUpdate=3\n" Comments="" FKRefDefIndex_Obj_id="1853" Splitted="0" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="56" />
+</RELATIONS>
+<NOTES>
 <NOTE ID="1745" NoteName="Note_01" XPos="40" YPos="1100" NoteText="phpMediaDB\n$Id$\n" IsLinkedObject="0" IDLinkedModel="-1" Obj_id_Linked="-1" OrderPos="55" />
-</NOTES>
-<IMAGES>
-</IMAGES>
-</METADATA>
-<PLUGINDATA>
-<PLUGINDATARECORDS>
-</PLUGINDATARECORDS>
-</PLUGINDATA>
-<QUERYDATA>
-<QUERYRECORDS>
-</QUERYRECORDS>
-</QUERYDATA>
-<LINKEDMODELS>
-</LINKEDMODELS>
-</DBMODEL>
+</NOTES>
+<IMAGES>
+</IMAGES>
+</METADATA>
+<PLUGINDATA>
+<PLUGINDATARECORDS>
+</PLUGINDATARECORDS>
+</PLUGINDATA>
+<QUERYDATA>
+<QUERYRECORDS>
+</QUERYRECORDS>
+</QUERYDATA>
+<LINKEDMODELS>
+</LINKEDMODELS>
+</DBMODEL>



From nobody at sheep.berlios.de  Sun Mar 20 18:03:22 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Sun, 20 Mar 2005 18:03:22 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.business class.phpmediadb_business_agerestrictions.php,1.2,1.3 class.phpmediadb_business_audios.php,1.3,1.4 class.phpmediadb_business_categories.php,1.2,1.3 class.phpmediadb_business_codecs.php,1.2,1.3 class.phpmediadb_business_formats.php,1.2,1.3 class.phpmediadb_business_inspector.php,1.2,1.3 class.phpmediadb_business.php,1.7,1.8 class.phpmediadb_business_prints.php,1.2,1.3 class.phpmediadb_business_videos.php,1.2,1.3
Message-ID: <200503201703.j2KH3MM04166@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business
In directory sheep:/tmp/cvs-serv18977/_source/tier.business

Modified Files:
	class.phpmediadb_business_agerestrictions.php 
	class.phpmediadb_business_audios.php 
	class.phpmediadb_business_categories.php 
	class.phpmediadb_business_codecs.php 
	class.phpmediadb_business_formats.php 
	class.phpmediadb_business_inspector.php 
	class.phpmediadb_business.php 
	class.phpmediadb_business_prints.php 
	class.phpmediadb_business_videos.php 
Log Message:
* Changed tabs to size 4
* Changed some comments

Index: class.phpmediadb_business_agerestrictions.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_agerestrictions.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- class.phpmediadb_business_agerestrictions.php	15 Mar 2005 20:59:21 -0000	1.2
+++ class.phpmediadb_business_agerestrictions.php	20 Mar 2005 17:03:19 -0000	1.3
@@ -50,7 +50,7 @@
 		/* assign parent */
 		$this->BUSINESS		= $sender;
 		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
-		$this->DATA				= $sender->PHPMEDIADB->DATA;
+		$this->DATA			= $sender->PHPMEDIADB->DATA;
 	}
 
 //-----------------------------------------------------------------------------
@@ -71,6 +71,7 @@
 		return $returnValue;
 	}
 	
+//-----------------------------------------------------------------------------
 } /* end of class phpmediadb_business_agerestrictions */
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---

Index: class.phpmediadb_business_audios.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_audios.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- class.phpmediadb_business_audios.php	15 Mar 2005 20:59:21 -0000	1.3
+++ class.phpmediadb_business_audios.php	20 Mar 2005 17:03:19 -0000	1.4
@@ -50,7 +50,7 @@
 		/* assign parent */
 		$this->BUSINESS		= $sender;
 		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
-		$this->DATA				= $sender->PHPMEDIADB->DATA;
+		$this->DATA			= $sender->PHPMEDIADB->DATA;
 	}
 
 //-----------------------------------------------------------------------------
@@ -88,20 +88,20 @@
 		$returnValue = array();
 	 	
 		/* create empty itemset */
-		$returnValue['ItemTitle'] 						= '';
-		$returnValue['ItemOriginalTitle']			= '';
-		$returnValue['ItemMediaName']					= '';
+		$returnValue['ItemTitle'] 				= '';
+		$returnValue['ItemOriginalTitle']		= '';
+		$returnValue['ItemMediaName']			= '';
 		$returnValue['ItemIdentification']		= '';
-		$returnValue['ItemRelease']						= '';
-		$returnValue['Categories']						= array();
-		$returnValue['ItemMediaSize']					= '';
-		$returnValue['MediaFormatID']					= '';
-		$returnValue['BinaryData']						= '';
-		$returnValue['PublisherName']					= '';
+		$returnValue['ItemRelease']				= '';
+		$returnValue['Categories']				= array();
+		$returnValue['ItemMediaSize']			= '';
+		$returnValue['MediaFormatID']			= '';
+		$returnValue['BinaryData']				= '';
+		$returnValue['PublisherName']			= '';
 		$returnValue['MediaAgeRestrictionID']	= '';
-		$returnValue['MediaCodecID']					= '';
-		$returnValue['ItemQuantity']					= '';
-		$returnValue['ItemCreationDate']			= NULL;
+		$returnValue['MediaCodecID']			= '';
+		$returnValue['ItemQuantity']			= '';
+		$returnValue['ItemCreationDate']		= NULL;
 		$returnValue['ItemModificationDate']	= NULL;
 			
 		/* return data */
@@ -157,6 +157,7 @@
 		/* return data */
 		return $returnValue;
 	}
+	
 //-----------------------------------------------------------------------------
 	/**
 	 * Creates one dataset

Index: class.phpmediadb_business_categories.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_categories.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- class.phpmediadb_business_categories.php	15 Mar 2005 20:59:21 -0000	1.2
+++ class.phpmediadb_business_categories.php	20 Mar 2005 17:03:19 -0000	1.3
@@ -50,7 +50,7 @@
 		/* assign parent */
 		$this->BUSINESS		= $sender;
 		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
-		$this->DATA				= $sender->PHPMEDIADB->DATA;
+		$this->DATA			= $sender->PHPMEDIADB->DATA;
 	}
 
 //-----------------------------------------------------------------------------

Index: class.phpmediadb_business_codecs.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_codecs.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- class.phpmediadb_business_codecs.php	15 Mar 2005 20:59:22 -0000	1.2
+++ class.phpmediadb_business_codecs.php	20 Mar 2005 17:03:19 -0000	1.3
@@ -49,7 +49,7 @@
 		/* assign parent */
 		$this->BUSINESS		= $sender;
 		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
-		$this->DATA				= $sender->PHPMEDIADB->DATA;
+		$this->DATA			= $sender->PHPMEDIADB->DATA;
 	}
 
 //-----------------------------------------------------------------------------

Index: class.phpmediadb_business_formats.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_formats.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- class.phpmediadb_business_formats.php	15 Mar 2005 20:59:22 -0000	1.2
+++ class.phpmediadb_business_formats.php	20 Mar 2005 17:03:19 -0000	1.3
@@ -49,7 +49,7 @@
 		/* assign parent */
 		$this->BUSINESS		= $sender;
 		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
-		$this->DATA				= $sender->PHPMEDIADB->DATA;
+		$this->DATA			= $sender->PHPMEDIADB->DATA;
 	}
 
 //-----------------------------------------------------------------------------

Index: class.phpmediadb_business_inspector.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_inspector.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- class.phpmediadb_business_inspector.php	15 Mar 2005 20:59:22 -0000	1.2
+++ class.phpmediadb_business_inspector.php	20 Mar 2005 17:03:19 -0000	1.3
@@ -68,6 +68,7 @@
 		$returnValue	= NULL;
 		$inputSize		= $this->getSize( $type );
 		$checkRegex		= $this->getRegex( $type );
+		
 		/*
 		$error['general'] = true;
 		$error['flag']['title'] = true;
@@ -86,8 +87,8 @@
 						if( @strlen( $data[$checkKey] ) > $checkValue )
 						{
 							/* set errorflags */
-							$returnValue['general']											= TRUE;
-							$returnValue['flag'][$checkKey] 						= TRUE;
+							$returnValue['general']						= TRUE;
+							$returnValue['flag'][$checkKey] 			= TRUE;
 							$returnValue['message'][$checkKey]['size']	= TRUE;
 						}
 					break;
@@ -98,15 +99,15 @@
 							if( @strlen( $ItemValue ) > $checkValue )
 							{
 								/* set errorflags */
-								$returnValue['general']											= TRUE;
-								$returnValue['flag'][$checkKey] 						= TRUE;
+								$returnValue['general']						= TRUE;
+								$returnValue['flag'][$checkKey] 			= TRUE;
 								$returnValue['message'][$checkKey]['size']	= TRUE;
 							}
 						}
 					break;
-				}
-			}
-		}
+				} /* end of switch */
+			} /* end of foreach */
+		} /* end of if */
 		
 		/* check input-regex */
 		if( is_array( $inputSize ) )
@@ -119,8 +120,8 @@
 						if( ! @ereg( $checkValue, $data[$checkKey] ) )
 						{
 							/* set errorflags */
-							$returnValue['general']											= TRUE;
-							$returnValue['flag'][$checkKey] 						= TRUE;
+							$returnValue['general']						= TRUE;
+							$returnValue['flag'][$checkKey] 			= TRUE;
 							$returnValue['message'][$checkKey]['regex']	= TRUE;
 						}
 					break;
@@ -131,15 +132,15 @@
 							if( ! @ereg( $checkValue, $ItemValue ) )
 							{
 								/* set errorflags */
-								$returnValue['general']											= TRUE;
-								$returnValue['flag'][$checkKey] 						= TRUE;
+								$returnValue['general']						= TRUE;
+								$returnValue['flag'][$checkKey] 			= TRUE;
 								$returnValue['message'][$checkKey]['regex']	= TRUE;
 							}
 						}
 					break;
-				}
-			}
-		}
+				} /* end of switch */
+			} /* end of foreach */
+		} /* end of if */
 		
 		/* return data */
 		return $returnValue;

Index: class.phpmediadb_business.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business.php,v
retrieving revision 1.7
retrieving revision 1.8
diff -u -d -r1.7 -r1.8
--- class.phpmediadb_business.php	15 Mar 2005 20:59:22 -0000	1.7
+++ class.phpmediadb_business.php	20 Mar 2005 17:03:19 -0000	1.8
@@ -117,13 +117,13 @@
 		
 		/* assign childs */
 		$this->AGERESTRICTIONS	= new phpmediadb_business_agerestrictions( $this );
-		$this->AUDIOS						= new phpmediadb_business_audios( $this );
-		$this->CATEGORIES				= new phpmediadb_business_categories( $this );
-		$this->CODECS						= new phpmediadb_business_codecs( $this );
-		$this->FORMATS					= new phpmediadb_business_formats( $this );
-		$this->INSPECTOR				= new phpmediadb_business_inspector( $this );
-		$this->PRINTS						= new phpmediadb_business_prints( $this );
-		$this->VIDEOS						= new phpmediadb_business_prints( $this );
+		$this->AUDIOS			= new phpmediadb_business_audios( $this );
+		$this->CATEGORIES		= new phpmediadb_business_categories( $this );
+		$this->CODECS			= new phpmediadb_business_codecs( $this );
+		$this->FORMATS			= new phpmediadb_business_formats( $this );
+		$this->INSPECTOR		= new phpmediadb_business_inspector( $this );
+		$this->PRINTS			= new phpmediadb_business_prints( $this );
+		$this->VIDEOS			= new phpmediadb_business_prints( $this );
 	}
 
 //-----------------------------------------------------------------------------
@@ -146,6 +146,7 @@
 		unset( $phpMediaDbConfig['BUSINESS'] );
 	}
 	
+//-----------------------------------------------------------------------------
 } /* end of class phpmediadb_business */
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---

Index: class.phpmediadb_business_prints.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_prints.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- class.phpmediadb_business_prints.php	15 Mar 2005 20:59:22 -0000	1.2
+++ class.phpmediadb_business_prints.php	20 Mar 2005 17:03:19 -0000	1.3
@@ -49,7 +49,7 @@
 		/* assign parent */
 		$this->BUSINESS		= $sender;
 		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
-		$this->DATA				= $sender->PHPMEDIADB->DATA;
+		$this->DATA			= $sender->PHPMEDIADB->DATA;
 	}
 
 //-----------------------------------------------------------------------------

Index: class.phpmediadb_business_videos.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_videos.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- class.phpmediadb_business_videos.php	15 Mar 2005 20:59:22 -0000	1.2
+++ class.phpmediadb_business_videos.php	20 Mar 2005 17:03:19 -0000	1.3
@@ -49,7 +49,7 @@
 		/* assign parent */
 		$this->BUSINESS		= $sender;
 		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
-		$this->DATA				= $sender->PHPMEDIADB->DATA;
+		$this->DATA			= $sender->PHPMEDIADB->DATA;
 	}
 
 //-----------------------------------------------------------------------------



From nobody at sheep.berlios.de  Sun Mar 20 18:10:47 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Sun, 20 Mar 2005 18:10:47 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration config.business.php,1.4,1.5 config.data.php,1.3,1.4 config.presentation.php,1.4,1.5
Message-ID: <200503201710.j2KHAlM04321@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration
In directory sheep:/tmp/cvs-serv19195/_source/tier.configuration

Modified Files:
	config.business.php config.data.php config.presentation.php 
Log Message:
* Changed tabs to size 4

Index: config.business.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/config.business.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- config.business.php	16 Mar 2005 14:57:15 -0000	1.4
+++ config.business.php	20 Mar 2005 17:10:45 -0000	1.5
@@ -8,27 +8,27 @@
  * Itemsepecifications (regex etc.)
  */ 
 
-$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['ItemTitle'] 							= '^.{1,255}$';
-$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['ItemOriginalTitle']			= '^(.{1,255})?$';
-$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['ItemMediaName']					= '^(.{1,255})?$';
-$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['ItemIdentification']			= '^(.{1,255})?$';
-$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['ItemRelease']						= '^([[:digit:]]{4})?$';
-$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['Categories']							= '^([[:digit:]]+)?$';
-$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['ItemMediaSize']					= '^(([[:digit:]]+([[:punct:]]{1}[[:digit:]]+)))?$';
-$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['MediaFormatID']					= '^([[:digit:]]+)?$';
-$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['PublisherName']					= '^(.{1,255})?$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['ItemTitle'] 				= '^.{1,255}$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['ItemOriginalTitle']		= '^(.{1,255})?$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['ItemMediaName']			= '^(.{1,255})?$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['ItemIdentification']		= '^(.{1,255})?$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['ItemRelease']				= '^([[:digit:]]{4})?$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['Categories']				= '^([[:digit:]]+)?$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['ItemMediaSize']			= '^(([[:digit:]]+([[:punct:]]{1}[[:digit:]]+)))?$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['MediaFormatID']			= '^([[:digit:]]+)?$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['PublisherName']			= '^(.{1,255})?$';
 $phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['MediaAgeRestrictionID']	= '^([[:digit:]]+)?$';
-$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['MediaCodecID']						= '^([[:digit:]]+)?$';
-$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['ItemQuantity']						= '^(.{1,255})?$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['MediaCodecID']				= '^([[:digit:]]+)?$';
+$phpMediaDbConfig['BUSINESS']['input-regex'][PHPMEDIADB_ITEM_AUDIO]['ItemQuantity']				= '^(.{1,255})?$';
 
-$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemTitle'] 						= 255;
+$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemTitle'] 				= 255;
 $phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemOriginalTitle']			= 255;
-$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemMediaName']					= 255;
+$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemMediaName']				= 255;
 $phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemIdentification']		= 255;
-$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemRelease']						= 4;
-$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemMediaSize']					= 255;
-$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['PublisherName']					= 255;
-$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemQuantity']					= 255;
+$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemRelease']				= 4;
+$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemMediaSize']				= 255;
+$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['PublisherName']				= 255;
+$phpMediaDbConfig['BUSINESS']['input-size'][PHPMEDIADB_ITEM_AUDIO]['ItemQuantity']				= 255;
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>

Index: config.data.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/config.data.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- config.data.php	16 Mar 2005 14:57:26 -0000	1.3
+++ config.data.php	20 Mar 2005 17:10:45 -0000	1.4
@@ -14,11 +14,11 @@
  *   conntype:  Type of Connection	->	comment out for normal connection,
  *										CREOLE::PERSISTENT for persistent connection
  */
-$phpMediaDbConfig['DATA']['sql-connection']['phptype']  = 'mysql';
-$phpMediaDbConfig['DATA']['sql-connection']['hostspec'] = 'localhost';
-$phpMediaDbConfig['DATA']['sql-connection']['username'] = 'dbuser';
-$phpMediaDbConfig['DATA']['sql-connection']['password'] = 'dbpass';
-$phpMediaDbConfig['DATA']['sql-connection']['database'] = 'phpmediadb';
+$phpMediaDbConfig['DATA']['sql-connection']['phptype']	= 'mysql';
+$phpMediaDbConfig['DATA']['sql-connection']['hostspec']	= 'localhost';
+$phpMediaDbConfig['DATA']['sql-connection']['username']	= 'dbuser';
+$phpMediaDbConfig['DATA']['sql-connection']['password']	= 'dbpass';
+$phpMediaDbConfig['DATA']['sql-connection']['database']	= 'phpmediadb';
 
 //$phpMediaDbConfig['DATA']['sql-connection']['conntype'] = CREOLE::PERSISTENT;
 

Index: config.presentation.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/config.presentation.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- config.presentation.php	15 Mar 2005 17:38:59 -0000	1.4
+++ config.presentation.php	20 Mar 2005 17:10:45 -0000	1.5
@@ -14,7 +14,7 @@
  */
 $phpMediaDbConfig['PRESENTATION']['directory']['root']			= realpath( dirname(__FILE__) . '/../../' ) ;
 $phpMediaDbConfig['PRESENTATION']['directory']['i18n']			= $phpMediaDbConfig['PRESENTATION']['directory']['root'] . '/_source/tier.configuration/i18n/';
-$phpMediaDbConfig['PRESENTATION']['directory']['templates']	= $phpMediaDbConfig['PRESENTATION']['directory']['root'] . '/_source/tier.configuration/templates';
+$phpMediaDbConfig['PRESENTATION']['directory']['templates']		= $phpMediaDbConfig['PRESENTATION']['directory']['root'] . '/_source/tier.configuration/templates';
 $phpMediaDbConfig['PRESENTATION']['directory']['templates_c']	= $phpMediaDbConfig['PRESENTATION']['directory']['root'] . '/var/templates_c';
 
 



From nobody at sheep.berlios.de  Sun Mar 20 18:12:30 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Sun, 20 Mar 2005 18:12:30 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.presentation class.phpmediadb_presentation_contentvars.php,1.8,1.9 class.phpmediadb_presentation_i18n.php,1.8,1.9 class.phpmediadb_presentation.php,1.6,1.7 class.phpmediadb_presentation_session.php,1.4,1.5 class.phpmediadb_presentation_xmlservice.php,1.3,1.4
Message-ID: <200503201712.j2KHCUM04384@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation
In directory sheep:/tmp/cvs-serv19265/_source/tier.presentation

Modified Files:
	class.phpmediadb_presentation_contentvars.php 
	class.phpmediadb_presentation_i18n.php 
	class.phpmediadb_presentation.php 
	class.phpmediadb_presentation_session.php 
	class.phpmediadb_presentation_xmlservice.php 
Log Message:
* Changed tabs to size 4

Index: class.phpmediadb_presentation_contentvars.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_contentvars.php,v
retrieving revision 1.8
retrieving revision 1.9
diff -u -d -r1.8 -r1.9
--- class.phpmediadb_presentation_contentvars.php	16 Mar 2005 14:56:45 -0000	1.8
+++ class.phpmediadb_presentation_contentvars.php	20 Mar 2005 17:12:28 -0000	1.9
@@ -46,7 +46,7 @@
 	{
 		/* assign parent */
 		$this->PRESENTATION	= $sender;
-		$this->PHPMEDIADB		= $sender->PHPMEDIADB;
+		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
 
 		/* initalize */
 		$this->nodeContainer = array();
@@ -275,10 +275,10 @@
 	 */
 	public function checkNodeString( $nodeName )
 	{
-		$returnValue = (bool) false;
-
-		$checkRegEx = "^([_a-zA-Z0-9]+\.?)+[_a-zA-Z0-9]+$";
-		$returnValue = ereg( $checkRegEx, $nodeName );
+		/* init */
+		$returnValue	= (bool) false;
+		$checkRegEx		= "^([_a-zA-Z0-9]+\.?)+[_a-zA-Z0-9]+$";
+		$returnValue	= ereg( $checkRegEx, $nodeName );
 		
 		/* return value */
 		return (bool) $returnValue;
@@ -309,6 +309,7 @@
 			break;	
 			
 			case 'NULL':
+				/* fixed bug - NULL should be stay NULL! */
 				$returnValue = $nodeValue;
 			break;
 			
@@ -329,8 +330,7 @@
 					/* not supported format */
 					default:
 						$returnValue = $nodeValue;
-					break;	
-						
+					break;			
 				}
 			break;
 		}

Index: class.phpmediadb_presentation_i18n.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_i18n.php,v
retrieving revision 1.8
retrieving revision 1.9
diff -u -d -r1.8 -r1.9
--- class.phpmediadb_presentation_i18n.php	16 Mar 2005 14:57:04 -0000	1.8
+++ class.phpmediadb_presentation_i18n.php	20 Mar 2005 17:12:28 -0000	1.9
@@ -61,7 +61,7 @@
 	{
 		/* assign parent */
 		$this->PRESENTATION	= $sender;
-		$this->PHPMEDIADB		= $sender->PHPMEDIADB;
+		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
 
 		/* initalize */
 		$this->langContainer = array();
@@ -69,7 +69,7 @@
 		/* initalize values */
 		$this->readI18nDirectory();
 		$this->initalizeLanguageContainer();
-  }
+	}
   
 //-----------------------------------------------------------------------------
 	/**
@@ -79,21 +79,21 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return string Browserlanguage as languagecode
 	 */
-  public function getBrowserLanguage()
-  {
-  	/* init */
-  	$returnValue = "";
-  	$availableLanguages	= $this->getAvailableLanagues();
-  	$defaultLanguage		= $this->PRESENTATION->configuration['i18n']['defaultLanguage'];
-  	
-  	/* detect browser language */
-  	if( !$this->PRESENTATION->configuration['i18n']['forcedLanguage'] )
-  		$returnValue = $this->detectBrowserLanguage( $availableLanguages, $defaultLanguage );
-  	else
-  		$returnValue = $defaultLanguage;
+	public function getBrowserLanguage()
+	{
+		/* init */
+		$returnValue		= "";
+		$availableLanguages	= $this->getAvailableLanagues();
+		$defaultLanguage	= $this->PRESENTATION->configuration['i18n']['defaultLanguage'];
   	
-  	return $returnValue;
-  }
+		/* detect browser language */
+		if( !$this->PRESENTATION->configuration['i18n']['forcedLanguage'] )
+			$returnValue = $this->detectBrowserLanguage( $availableLanguages, $defaultLanguage );
+		else
+			$returnValue = $defaultLanguage;
+
+		return $returnValue;
+	}
   
 //-----------------------------------------------------------------------------
 	/**
@@ -104,19 +104,19 @@
 	 * @param String Internal language-i18n-stringcode
 	 * @return mixed Internationalized string
 	 */
-  public function getLanguageString( $langId )
-  {
-  	/* init */
-  	$returnValue = false;
-  	
-  	/* check if key exists */
-  	if( array_key_exists( $langId, $this->langContainer ) )
-  		$returnValue = $this->langContainer["$langId"];
-  	else
-  		$returnValue = '%'.$langId.'%';
+	public function getLanguageString( $langId )
+	{
+		/* init */
+		$returnValue = false;
   	
-  	return $returnValue;
-  }
+		/* check if key exists */
+		if( array_key_exists( $langId, $this->langContainer ) )
+			$returnValue = $this->langContainer["$langId"];
+		else
+			$returnValue = '%'.$langId.'%';
+
+		return $returnValue;
+	}
   
 //-----------------------------------------------------------------------------
 	/**
@@ -126,15 +126,16 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return Array Array with all i18n strings
 	 */
-  public function getLanguageArray()
-  {
-  	/* init */
-  	$returnValue	= "";
-  	
+	public function getLanguageArray()
+	{
+		/* init */
+		$returnValue = "";
+
+		/* get container */
 		$returnValue = $this->langContainer;
-  	
-  	return $returnValue;
-  }
+
+		return $returnValue;
+	}
   
 //-----------------------------------------------------------------------------
 	/**
@@ -144,18 +145,17 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return Array Array with all available languages as langcodes
 	 */
-  public function getAvailableLanagues()
-  {
-  	/* init */
-  	$returnValue = array();
+	public function getAvailableLanagues()
+	{
+		/* init */
+		$returnValue = array();
 		
-  	/* get lanagues */
-  	$returnValue	= array_keys( $this->availableLanguagesContainer );
+		/* get lanagues */
+		$returnValue = array_keys( $this->availableLanguagesContainer );
   	  	
-  	return $returnValue;
-  }
+		return $returnValue;
+	}
 
-  
 //-----------------------------------------------------------------------------
 	/**
 	 * Returns the currently used language as langcode
@@ -164,13 +164,13 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return String Currently used language as langcode
 	 */
-	 public function getLanguageCode()
-	 {
-  	/* init */
-  	$returnValue = $this->langCode;
+	public function getLanguageCode()
+	{
+  		/* init */
+  		$returnValue = $this->langCode;
   	  	
-  	return $returnValue;
-	 }  
+  		return $returnValue;
+	}  
 	 
 //-----------------------------------------------------------------------------
 	/**
@@ -181,23 +181,23 @@
 	 * @param String $langCode Languagecode which should be used
 	 * @return Bool status if set was successfull
 	 */
-	 public function setLanguageCode( $langCode )
-	 {
-  	/* init */
-  	$returnValue = false;
+	public function setLanguageCode( $langCode )
+	{
+  		/* init */
+  		$returnValue = false;
   	
-  	if( key_exists( $this->availableLanguagesContainer, $langCode ) && !$this->PRESENTATION->configuration['i18n']['forcedLanguage'] )
-  	{
-  		$this->loadLanagueFile( $langCode );
+  		if( key_exists( $this->availableLanguagesContainer, $langCode ) && !$this->PRESENTATION->configuration['i18n']['forcedLanguage'] )
+  		{
+  			$this->loadLanagueFile( $langCode );
   		
-  		/* save i18n-vars to contentvars */
-  		$this->PRESENTATION->CONTENTVARS->addNode( 'I18N', $this->getLanguageArray() );
+  			/* save i18n-vars to contentvars */
+  			$this->PRESENTATION->CONTENTVARS->addNode( 'I18N', $this->getLanguageArray() );
   		
-  		$returnValue = true;
-  	}
+  			$returnValue = true;
+  		}
   	  	
-  	return $returnValue;
-	 }  	 
+  		return $returnValue;
+	}  	 
   
 //-----------------------------------------------------------------------------
 	/**
@@ -210,19 +210,18 @@
 	 * @param String $defaultLanguage Default Language as langcode
 	 * @return string Prefered langcode
 	 */
-  protected function detectBrowserLanguage( $allowedLanguageArray, $defaultLanguage )
-  {
-  	/* init */
-  	$returnValue = $defaultLanguage;
-  	
+	protected function detectBrowserLanguage( $allowedLanguageArray, $defaultLanguage )
+	{
+		/* init */
+		$returnValue = $defaultLanguage;
+
 		/* get browserlanguage */
 		$HTTP_Language	= $_SERVER['HTTP_ACCEPT_LANGUAGE'];
 
 		/* check if browserlanguage is empty -> return default language */
 		if( empty( $HTTP_Language ) )
 		{
-			$returnValue = $defaultLanguage;
-			
+			$returnValue = $defaultLanguage;			
 			return $returnValue;
 		}
 
@@ -276,10 +275,11 @@
 			}
 		}
 
-			$returnValue = $CurrentLanguage['code'];
+		$returnValue = $CurrentLanguage['code'];
 			
-			return $returnValue;
-  }
+		/* return value */
+		return $returnValue;
+	}
   
 //-----------------------------------------------------------------------------
 	/**
@@ -290,20 +290,20 @@
 	 */
 	 protected function readI18nDirectory()
 	 {
-	 		/* get files in i18n directory */
-	 		foreach( glob( $this->PRESENTATION->configuration['directory']['i18n'] . "/i18n.*.php" ) as $filename )
-	 		{
-	 			/* double check with regex */
-	 			if( eregi( '^i18n.([a-z]+).php$', basename( $filename ), $regArray ) )
-	 			{			
-	 				/* set values like filename and langcode */
-	 				$filename	= trim( $filename );
-	 				$langcode	= trim( $regArray[1] );
-	 			
-	 				/* set values to the contaienr */
-		 			$this->availableLanguagesContainer[$langcode] = $filename;
-	 			}
+		/* get files in i18n directory */
+	 	foreach( glob( $this->PRESENTATION->configuration['directory']['i18n'] . "/i18n.*.php" ) as $filename )
+	 	{
+	 		/* double check with regex */
+	 		if( eregi( '^i18n.([a-z]+).php$', basename( $filename ), $regArray ) )
+	 		{			
+	 			/* set values like filename and langcode */
+	 			$filename	= trim( $filename );
+	 			$langcode	= trim( $regArray[1] );
+	 		
+	 			/* set values to the contaienr */
+					$this->availableLanguagesContainer[$langcode] = $filename;
 	 		}
+	 	}
 	 }
   
 //-----------------------------------------------------------------------------
@@ -324,8 +324,8 @@
 		
 		/* save i18n-vars to contentvars */
 		$this->PRESENTATION->CONTENTVARS->addNode( 'I18N', $this->getLanguageArray() );
-		
 	}
+	
 //-----------------------------------------------------------------------------
 	/**
 	 * Loads the languagefile into the languagecontainer
@@ -335,19 +335,24 @@
 	 * @param String $langCode Langcode which should be loaded
 	 * @return void
 	 */
-  protected function loadLanagueFile( $langCode )
-  {
-  	if( eregi( '^[a-z]+$', $langCode ) )
-  	{
-  		include( $this->PRESENTATION->configuration['directory']['i18n'] . "/i18n.$langCode.php" );
-  		$this->langContainer	= $i18n;
-  		$this->langCode				= $langCode;
-  	}
-  	else
-  	{
-  		throw new phpmediadb_exception( "ERR_LANGCODE_CHECK_FAILED" );
-  	}
-  }
+	protected function loadLanagueFile( $langCode )
+	{
+		/* security check - langcode*/
+		if( eregi( '^[a-z]+$', $langCode ) )
+		{
+			/* load langcode-file */
+			include( $this->PRESENTATION->configuration['directory']['i18n'] . "/i18n.$langCode.php" );
+			
+			/* set langcodes */
+			$this->langContainer	= $i18n;
+			$this->langCode			= $langCode;
+		}
+		else
+		{
+			/* security exception */
+			throw new phpmediadb_exception( "ERR_LANGCODE_CHECK_FAILED" );
+		}
+	}
 
 //-----------------------------------------------------------------------------
 } /* end of class phpmediadb_presentation_i18n */

Index: class.phpmediadb_presentation.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation.php,v
retrieving revision 1.6
retrieving revision 1.7
diff -u -d -r1.6 -r1.7
--- class.phpmediadb_presentation.php	15 Mar 2005 20:25:05 -0000	1.6
+++ class.phpmediadb_presentation.php	20 Mar 2005 17:12:28 -0000	1.7
@@ -86,18 +86,18 @@
 		$this->loadConfiguration();
     	 
 		/* assign parent */
-		$this->PHPMEDIADB		= $sender;
+		$this->PHPMEDIADB	= $sender;
 
 		/* assign childs */
 		$this->CONTENTVARS	= new phpmediadb_presentation_contentvars( $this );
 		$this->HTMLSERVICE	= new phpmediadb_presentation_htmlservice( $this );
-		$this->I18N					= new phpmediadb_presentation_i18n( $this );
-		$this->SESSION			= new phpmediadb_presentation_session( $this );
-		$this->XMLSERVICE		= new phpmediadb_presentation_xmlservice( $this );
+		$this->I18N			= new phpmediadb_presentation_i18n( $this );
+		$this->SESSION		= new phpmediadb_presentation_session( $this );
+		$this->XMLSERVICE	= new phpmediadb_presentation_xmlservice( $this );
 	}
 	
 //-----------------------------------------------------------------------------
- /**
+ 	/**
 	 * The destructor __destruct is responsible for closing all open files,
 	 * etc.
 	 *

Index: class.phpmediadb_presentation_session.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_session.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- class.phpmediadb_presentation_session.php	15 Mar 2005 20:25:32 -0000	1.4
+++ class.phpmediadb_presentation_session.php	20 Mar 2005 17:12:28 -0000	1.5
@@ -40,7 +40,7 @@
 		
 		/* init session */
 		$this->start();
-  }
+	}
   
 //-----------------------------------------------------------------------------
 	/**
@@ -94,7 +94,7 @@
 	 */
 	public function start()
 	{
-		/* start session */
+		/* start session - delegate */
 		session_start();
 	}
 	
@@ -107,7 +107,7 @@
 	 */	
 	public function destroy()
 	{
-		/* destroy session */
+		/* destroy session - delegate */
 		session_destroy();
 	}
 	

Index: class.phpmediadb_presentation_xmlservice.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_xmlservice.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- class.phpmediadb_presentation_xmlservice.php	15 Mar 2005 20:25:42 -0000	1.3
+++ class.phpmediadb_presentation_xmlservice.php	20 Mar 2005 17:12:28 -0000	1.4
@@ -36,8 +36,8 @@
 	{
 		/* assign parent */
 		$this->PRESENTATION	= $sender;
-		$this->PHPMEDIADB		= $sender->PHPMEDIADB;
-  }
+		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
+	}
 
 //-----------------------------------------------------------------------------
 } /* end of class phpmediadb_presentation_xmlservice */



From nobody at sheep.berlios.de  Sun Mar 20 18:15:14 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Sun, 20 Mar 2005 18:15:14 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.presentation class.phpmediadb_presentation_htmlservice.php,1.8,1.9
Message-ID: <200503201715.j2KHFEM04471@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation
In directory sheep:/tmp/cvs-serv19397/_source/tier.presentation

Modified Files:
	class.phpmediadb_presentation_htmlservice.php 
Log Message:
* Changed tabs to size 4
* Added function compileMain and displayMain

Index: class.phpmediadb_presentation_htmlservice.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_htmlservice.php,v
retrieving revision 1.8
retrieving revision 1.9
diff -u -d -r1.8 -r1.9
--- class.phpmediadb_presentation_htmlservice.php	16 Mar 2005 14:56:54 -0000	1.8
+++ class.phpmediadb_presentation_htmlservice.php	20 Mar 2005 17:15:12 -0000	1.9
@@ -45,11 +45,10 @@
 	{
 		/* assign parent */
 		$this->PRESENTATION	= $sender;
-		$this->PHPMEDIADB		= $sender->PHPMEDIADB;
+		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
 			
 		/* setup smarty object */
 		$this->setupTemplateEngine();
-		
 	}
 
 //-----------------------------------------------------------------------------
@@ -65,8 +64,61 @@
 	{
 		/* init */
 		$returnValue = null;
-		$content		= array();
 		
+		/* set up template engine */
+		$this->initTemplateEngine();
+		
+		/* compile specified templates */
+		switch( gettype( $template ) )
+		{
+			case 'string':
+					$returnValue = $this->templateEngine->fetch( $template );
+				break;
+			
+			case 'array';
+					foreach( $template as $value )
+						$returnValue .= $this->templateEngine->fetch( $value );
+				break;	
+		}
+				
+ 		/* return compiled template */
+	 	return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Compiles one or more templates via template-engine and sends it to client
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param String $template Filename of template
+	 */	
+	public function display( $template )
+	{
+		/* init */
+		$returnValue = null;
+		
+		/* delegate */
+		$returnValue = $this->compile( $template );
+		
+		/* output */
+		echo $returnValue;
+	}
+
+//-----------------------------------------------------------------------------
+	/**
+	 * Compiles one or more templates via template-engine and return it
+	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @param String $template Filename of template
+	 * @return mixed compiled template as html or text
+	 */
+	public function compileMain( $template )
+	{
+		/* init */
+		$returnValue = null;
+		$content	= array();
 		
 		/* set up template engine */
 		$this->initTemplateEngine();
@@ -92,6 +144,7 @@
  		/* return compiled template */
 	 	return $returnValue;
 	}
+	
 //-----------------------------------------------------------------------------
 	/**
 	 * Compiles one or more templates via template-engine and sends it to client
@@ -100,13 +153,13 @@
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param String $template Filename of template
 	 */	
-	public function display( $template )
+	public function displayMain( $template )
 	{
 		/* init */
 		$returnValue = null;
 		
 		/* delegate */
-		$returnValue = $this->compile( $template );
+		$returnValue = $this->compileMain( $template );
 		
 		/* output */
 		echo $returnValue;
@@ -135,6 +188,7 @@
 		
 		$this->templateEngine->assign( 'CONFIGURATION', $configuration );
 	}
+	
 //-----------------------------------------------------------------------------
 	/**
 	 * Setup the template engine for the first time



From nobody at sheep.berlios.de  Sun Mar 20 18:15:54 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Sun, 20 Mar 2005 18:15:54 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs about.php,1.1,1.2 index.php,1.1,1.2 list.php,1.1,1.2 search.php,1.2,1.3
Message-ID: <200503201715.j2KHFsM04476@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs
In directory sheep:/tmp/cvs-serv19411

Modified Files:
	about.php index.php list.php search.php 
Log Message:
* Changed HTMLSERVICE->display to HTMLSERVICE->displayMain

Index: about.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/about.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- about.php	8 Mar 2005 17:54:14 -0000	1.1
+++ about.php	20 Mar 2005 17:15:52 -0000	1.2
@@ -8,7 +8,7 @@
 $PHPMEDIADB	= new phpmediadb();
 
 /* display site */
-$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( 'body.about.tpl' );
+$PHPMEDIADB->PRESENTATION->HTMLSERVICE->displayMain( 'body.about.tpl' );
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>

Index: index.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/index.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- index.php	8 Mar 2005 17:54:16 -0000	1.1
+++ index.php	20 Mar 2005 17:15:52 -0000	1.2
@@ -8,7 +8,7 @@
 $PHPMEDIADB	= new phpmediadb();
 
 /* display site */
-$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( 'body.home.tpl' );
+$PHPMEDIADB->PRESENTATION->HTMLSERVICE->displayMain( 'body.home.tpl' );
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>

Index: list.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/list.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- list.php	8 Mar 2005 17:54:16 -0000	1.1
+++ list.php	20 Mar 2005 17:15:52 -0000	1.2
@@ -17,25 +17,25 @@
 		case 'audio':
 				/* display site */
 				$templates[] = 'body.list.audio.tpl';
-				$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( $templates );
+				$PHPMEDIADB->PRESENTATION->HTMLSERVICE->displayMain( $templates );
 			break;
 			
 		case 'video':
 				/* display site */
 				$templates[] = 'body.list.video.tpl';
-				$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( $templates );
+				$PHPMEDIADB->PRESENTATION->HTMLSERVICE->displayMain( $templates );
 			break;
 			
 		case 'print':
 				/* display site */
 				$templates[] = 'body.list.print.tpl';
-				$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( $templates );
+				$PHPMEDIADB->PRESENTATION->HTMLSERVICE->displayMain( $templates );
 			break;
 			
 		default:
 				/* display site */
 				$templates[] = 'body.list.tpl';
-				$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( $templates );
+				$PHPMEDIADB->PRESENTATION->HTMLSERVICE->displayMain( $templates );
 			break;
 }
 

Index: search.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/search.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- search.php	8 Mar 2005 20:48:49 -0000	1.2
+++ search.php	20 Mar 2005 17:15:52 -0000	1.3
@@ -16,13 +16,13 @@
 		case 'search':
 				/* display site */
 				/* TODO */
-				$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( $templates );
+				$PHPMEDIADB->PRESENTATION->HTMLSERVICE->displayMain( $templates );
 			break;
 					
 		default:
 				/* display site */
 				/* TODO */
-				$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( $templates );
+				$PHPMEDIADB->PRESENTATION->HTMLSERVICE->displayMain( $templates );
 			break;
 }
 



From nobody at sheep.berlios.de  Sun Mar 20 18:16:05 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Sun, 20 Mar 2005 18:16:05 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/admin item-add.php,1.1,1.2 item-session.php,1.4,1.5
Message-ID: <200503201716.j2KHG5M04485@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/admin
In directory sheep:/tmp/cvs-serv19438/admin

Modified Files:
	item-add.php item-session.php 
Log Message:
* Changed HTMLSERVICE->display to HTMLSERVICE->displayMain

Index: item-add.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/admin/item-add.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- item-add.php	15 Mar 2005 17:37:30 -0000	1.1
+++ item-add.php	20 Mar 2005 17:16:03 -0000	1.2
@@ -46,7 +46,7 @@
 
 	default:
 			/* display site */
-			$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( 'body.item.add.choice.tpl' );
+			$PHPMEDIADB->PRESENTATION->HTMLSERVICE->displayMain( 'body.item.add.choice.tpl' );
 		break;
 }
 

Index: item-session.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/admin/item-session.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- item-session.php	16 Mar 2005 14:57:53 -0000	1.4
+++ item-session.php	20 Mar 2005 17:16:03 -0000	1.5
@@ -36,7 +36,7 @@
 			/* assign data */
 			@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'ITEMDATA', $sessionItem['data'] );
 			/* display site */
-			$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( 'body.item.audio.formular.tpl' );
+			$PHPMEDIADB->PRESENTATION->HTMLSERVICE->displayMain( 'body.item.audio.formular.tpl' );
 		break;
 	
 	
@@ -44,7 +44,7 @@
 			/* assign data */
 			@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'ITEMDATA', $sessionItem['data'] );
 			/* display site */
-			$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( 'body.item.video.formular.tpl' );
+			$PHPMEDIADB->PRESENTATION->HTMLSERVICE->displayMain( 'body.item.video.formular.tpl' );
 		break;
 	
 	
@@ -52,7 +52,7 @@
 			/* assign data */
 			@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'ITEMDATA', $sessionItem['data'] );
 			/* display site */
-			$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( 'body.item.print.formular.tpl' );
+			$PHPMEDIADB->PRESENTATION->HTMLSERVICE->displayMain( 'body.item.print.formular.tpl' );
 		break;
 	}
 }
@@ -89,7 +89,7 @@
 		{
 			/* happy, no error :) */
 			@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'MESSAGE', $PHPMEDIADB->PRESENTATION->I18N->getLanguageString( 'MESSAGE_SUCCESS_SAVE' ) );
-			$PHPMEDIADB->PRESENTATION->HTMLSERVICE->display( 'body.message.tpl' );
+			$PHPMEDIADB->PRESENTATION->HTMLSERVICE->displayMain( 'body.message.tpl' );
 			$PHPMEDIADB->PRESENTATION->SESSION->unregister( 'sessionitem' );
 			die();
 		}



From nobody at sheep.berlios.de  Sun Mar 20 18:18:04 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Sun, 20 Mar 2005 18:18:04 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source phpmediadb.php,1.7,1.8
Message-ID: <200503201718.j2KHI4M04509@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source
In directory sheep:/tmp/cvs-serv19571/_source

Modified Files:
	phpmediadb.php 
Log Message:
* Changed tabs to size 4

Index: phpmediadb.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/phpmediadb.php,v
retrieving revision 1.7
retrieving revision 1.8
diff -u -d -r1.7 -r1.8
--- phpmediadb.php	15 Mar 2005 18:06:01 -0000	1.7
+++ phpmediadb.php	20 Mar 2005 17:18:01 -0000	1.8
@@ -1,57 +1,60 @@
 <?php
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
+/* let's begin */
 
 /* run preinit */
-require_once( 'tier.configuration/config.preinit.php' );
+	require_once( 'tier.configuration/config.preinit.php' );
 
 /* include tier.global */
-require_once( 'tier.global/constants.phpmediadb.php' );
-require_once( 'tier.global/class.phpmediadb_exception.php' );
-require_once( 'tier.global/class.phpmediadb.php' );
+	require_once( 'tier.global/constants.phpmediadb.php' );
+	require_once( 'tier.global/class.phpmediadb_exception.php' );
+	require_once( 'tier.global/class.phpmediadb.php' );
 
 /* include configuration */
-require_once( 'tier.configuration/config.data.php' );
-require_once( 'tier.configuration/config.business.php' );
-require_once( 'tier.configuration/config.presentation.php' );
+	require_once( 'tier.configuration/config.data.php' );
+	require_once( 'tier.configuration/config.business.php' );
+	require_once( 'tier.configuration/config.presentation.php' );
 
 /* include tier.lib */
-require_once( 'tier.lib/smarty/Smarty.class.php' );
-require_once( 'tier.lib/creole/Creole.php' );
+	require_once( 'tier.lib/smarty/Smarty.class.php' );
+	require_once( 'tier.lib/creole/Creole.php' );
 
 /* include tier.presentation */
-require_once( 'tier.presentation/class.phpmediadb_presentation.php' );
-require_once( 'tier.presentation/class.phpmediadb_presentation_contentvars.php' );
-require_once( 'tier.presentation/class.phpmediadb_presentation_htmlservice.php' );
-require_once( 'tier.presentation/class.phpmediadb_presentation_i18n.php' );
-require_once( 'tier.presentation/class.phpmediadb_presentation_session.php' );
-require_once( 'tier.presentation/class.phpmediadb_presentation_xmlservice.php' );
+	require_once( 'tier.presentation/class.phpmediadb_presentation.php' );
+	require_once( 'tier.presentation/class.phpmediadb_presentation_contentvars.php' );
+	require_once( 'tier.presentation/class.phpmediadb_presentation_htmlservice.php' );
+	require_once( 'tier.presentation/class.phpmediadb_presentation_i18n.php' );
+	require_once( 'tier.presentation/class.phpmediadb_presentation_session.php' );
+	require_once( 'tier.presentation/class.phpmediadb_presentation_xmlservice.php' );
 
 /* include tier.business */
-require_once( 'tier.business/class.phpmediadb_business.php' );
-require_once( 'tier.business/class.phpmediadb_business_agerestrictions.php' );
-require_once( 'tier.business/class.phpmediadb_business_audios.php' );
-require_once( 'tier.business/class.phpmediadb_business_categories.php' );
-require_once( 'tier.business/class.phpmediadb_business_codecs.php' );
-require_once( 'tier.business/class.phpmediadb_business_formats.php' );
-require_once( 'tier.business/class.phpmediadb_business_inspector.php' );
-require_once( 'tier.business/class.phpmediadb_business_prints.php' );
-require_once( 'tier.business/class.phpmediadb_business_videos.php' );
+	require_once( 'tier.business/class.phpmediadb_business.php' );
+	require_once( 'tier.business/class.phpmediadb_business_agerestrictions.php' );
+	require_once( 'tier.business/class.phpmediadb_business_audios.php' );
+	require_once( 'tier.business/class.phpmediadb_business_categories.php' );
+	require_once( 'tier.business/class.phpmediadb_business_codecs.php' );
+	require_once( 'tier.business/class.phpmediadb_business_formats.php' );
+	require_once( 'tier.business/class.phpmediadb_business_inspector.php' );
+	require_once( 'tier.business/class.phpmediadb_business_prints.php' );
+	require_once( 'tier.business/class.phpmediadb_business_videos.php' );
 
 /* include tier.data */
-require_once( 'tier.data/class.phpmediadb_data.php' );
-require_once( 'tier.data/class.phpmediadb_data_agerestrictions.php' );
-require_once( 'tier.data/class.phpmediadb_data_audios.php' );
-require_once( 'tier.data/class.phpmediadb_data_categories.php' );
-require_once( 'tier.data/class.phpmediadb_data_codecs.php' );
-require_once( 'tier.data/class.phpmediadb_data_formats.php' );
-require_once( 'tier.data/class.phpmediadb_data_prints.php' );
-require_once( 'tier.data/class.phpmediadb_data_sql.php' );
-require_once( 'tier.data/class.phpmediadb_data_status.php' );
-require_once( 'tier.data/class.phpmediadb_data_videos.php' );
+	require_once( 'tier.data/class.phpmediadb_data.php' );
+	require_once( 'tier.data/class.phpmediadb_data_agerestrictions.php' );
+	require_once( 'tier.data/class.phpmediadb_data_audios.php' );
+	require_once( 'tier.data/class.phpmediadb_data_categories.php' );
+	require_once( 'tier.data/class.phpmediadb_data_codecs.php' );
+	require_once( 'tier.data/class.phpmediadb_data_formats.php' );
+	require_once( 'tier.data/class.phpmediadb_data_prints.php' );
+	require_once( 'tier.data/class.phpmediadb_data_sql.php' );
+	require_once( 'tier.data/class.phpmediadb_data_status.php' );
+	require_once( 'tier.data/class.phpmediadb_data_videos.php' );
 
 /* run postinit */
-require_once( 'tier.configuration/config.postinit.php' );
+	require_once( 'tier.configuration/config.postinit.php' );
+
+/* now we're done */
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Sun Mar 20 18:18:30 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Sun, 20 Mar 2005 18:18:30 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.global class.phpmediadb_exception.php,1.1,1.2 class.phpmediadb.php,1.3,1.4
Message-ID: <200503201718.j2KHIUM04516@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.global
In directory sheep:/tmp/cvs-serv19584/_source/tier.global

Modified Files:
	class.phpmediadb_exception.php class.phpmediadb.php 
Log Message:
* Changed tabs to size 4

Index: class.phpmediadb_exception.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.global/class.phpmediadb_exception.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- class.phpmediadb_exception.php	9 Feb 2005 20:30:47 -0000	1.1
+++ class.phpmediadb_exception.php	20 Mar 2005 17:18:28 -0000	1.2
@@ -15,7 +15,9 @@
  */
 class phpmediadb_exception extends Exception
 {
-	
+//-----------------------------------------------------------------------------
+
+//-----------------------------------------------------------------------------
 } /* end of class phpmediadb_exception */
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---

Index: class.phpmediadb.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.global/class.phpmediadb.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- class.phpmediadb.php	9 Feb 2005 20:26:00 -0000	1.3
+++ class.phpmediadb.php	20 Mar 2005 17:18:28 -0000	1.4
@@ -46,7 +46,8 @@
 
 
 	// --- OPERATIONS ---
-
+	
+//-----------------------------------------------------------------------------
 	/**
 	 * The constructor __construct initalizes the Class.
 	 *
@@ -59,14 +60,15 @@
 		global $phpMediaDbConfig;
 		
 		/* assign childs */
-		$this->PRESENTATION		= new phpmediadb_presentation( $this );
-		$this->BUSINESS				= new phpmediadb_business( $this );
-		$this->DATA						= new phpmediadb_data( $this );
+		$this->PRESENTATION	= new phpmediadb_presentation( $this );
+		$this->BUSINESS		= new phpmediadb_business( $this );
+		$this->DATA			= new phpmediadb_data( $this );
 		
 		/* unset global configuration - security */
 		unset( $phpMediaDbConfig );
 	}
-
+	
+//-----------------------------------------------------------------------------
 	/**
 	 * The destructor __destruct is responsible for closing all open files,
 	 * etc.
@@ -77,9 +79,10 @@
 	 */
 	public function __destruct()
 	{
-		/* TODO */
+		/* nothing to do yet */
 	}
-
+	
+//-----------------------------------------------------------------------------
 } /* end of class phpmediadb */
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---



From nobody at sheep.berlios.de  Thu Mar 24 18:12:01 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 24 Mar 2005 18:12:01 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs about.php,1.2,1.3 index.php,1.2,1.3 list.php,1.2,1.3 search.php,1.3,1.4
Message-ID: <200503241712.j2OHC1h03916@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs
In directory sheep:/tmp/cvs-serv26501

Modified Files:
	about.php index.php list.php search.php 
Log Message:
* Changed javadoc comments

Index: about.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/about.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- about.php	20 Mar 2005 17:15:52 -0000	1.2
+++ about.php	24 Mar 2005 17:11:59 -0000	1.3
@@ -1,7 +1,16 @@
 <?php
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
-
+/**
+ * This file displays the about-site
+ * 
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb_html
+ * @subpackage	access_anonymous
+ */
+ 
+/* include main phpmediadb-project */
 require_once( '_source/phpmediadb.php' );
 
 /* create object */

Index: index.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/index.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- index.php	20 Mar 2005 17:15:52 -0000	1.2
+++ index.php	24 Mar 2005 17:11:59 -0000	1.3
@@ -1,7 +1,16 @@
 <?php
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
-
+/**
+ * This file displays the index-site
+ * 
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb_html
+ * @subpackage	access_anonymous
+ */
+ 
+/* include main phpmediadb-project */
 require_once( '_source/phpmediadb.php' );
 
 /* create object */

Index: list.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/list.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- list.php	20 Mar 2005 17:15:52 -0000	1.2
+++ list.php	24 Mar 2005 17:11:59 -0000	1.3
@@ -1,7 +1,16 @@
 <?php
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
-
+/**
+ * This file displays the itemlist
+ * 
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb_html
+ * @subpackage	access_anonymous
+ */
+ 
+/* include main phpmediadb-project */
 require_once( '_source/phpmediadb.php' );
 
 /* create object */

Index: search.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/search.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- search.php	20 Mar 2005 17:15:52 -0000	1.3
+++ search.php	24 Mar 2005 17:11:59 -0000	1.4
@@ -1,7 +1,16 @@
 <?php
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
-
+/**
+ * This file searches for items
+ * 
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb_html
+ * @subpackage	access_anonymous
+ */
+ 
+/* include main phpmediadb-project */
 require_once( '_source/phpmediadb.php' );
 
 /* create object */



From nobody at sheep.berlios.de  Thu Mar 24 18:12:09 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 24 Mar 2005 18:12:09 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/install index.php,1.1,1.2
Message-ID: <200503241712.j2OHC9h03934@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/install
In directory sheep:/tmp/cvs-serv26512/install

Modified Files:
	index.php 
Log Message:
* Changed javadoc comments

Index: index.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/install/index.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- index.php	17 Mar 2005 20:03:44 -0000	1.1
+++ index.php	24 Mar 2005 17:12:07 -0000	1.2
@@ -1,6 +1,14 @@
 <?php
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
-
+/**
+ * This file adds one item to the session and redirects to item-session.php
+ * 
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb_html
+ * @subpackage	access_installation
+ */
+ 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Thu Mar 24 18:12:19 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 24 Mar 2005 18:12:19 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/admin item-add.php,1.2,1.3 item-del.php,1.1,1.2 item-mod.php,1.1,1.2 item-session.php,1.5,1.6
Message-ID: <200503241712.j2OHCJh03941@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/admin
In directory sheep:/tmp/cvs-serv26544/admin

Modified Files:
	item-add.php item-del.php item-mod.php item-session.php 
Log Message:
* Changed javadoc comments

Index: item-add.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/admin/item-add.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- item-add.php	20 Mar 2005 17:16:03 -0000	1.2
+++ item-add.php	24 Mar 2005 17:12:17 -0000	1.3
@@ -1,7 +1,16 @@
 <?php
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
-
+/**
+ * This file adds one item to the session and redirects to item-session.php
+ * 
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb_html
+ * @subpackage	access_admin
+ */
+ 
+/* include main phpmediadb-project */
 require_once( '../_source/phpmediadb.php' );
 
 /* create object */
@@ -49,9 +58,6 @@
 			$PHPMEDIADB->PRESENTATION->HTMLSERVICE->displayMain( 'body.item.add.choice.tpl' );
 		break;
 }
-
-
-
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>

Index: item-del.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/admin/item-del.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- item-del.php	15 Mar 2005 17:37:30 -0000	1.1
+++ item-del.php	24 Mar 2005 17:12:17 -0000	1.2
@@ -0,0 +1,17 @@
+<?php
+// phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
+/* $Id$ */
+/**
+ * This file deletes one item
+ * 
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb_html
+ * @subpackage	access_admin
+ */
+ 
+/* include main phpmediadb-project */
+require_once( '../_source/phpmediadb.php' );
+
+//--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
+?>
\ No newline at end of file

Index: item-mod.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/admin/item-mod.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- item-mod.php	15 Mar 2005 17:37:30 -0000	1.1
+++ item-mod.php	24 Mar 2005 17:12:17 -0000	1.2
@@ -0,0 +1,17 @@
+<?php
+// phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
+/* $Id$ */
+/**
+ * This file loads one item and redirect to item-session.php
+ * 
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb_html
+ * @subpackage	access_admin
+ */
+ 
+/* include main phpmediadb-project */
+require_once( '../_source/phpmediadb.php' );
+
+//--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
+?>
\ No newline at end of file

Index: item-session.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/admin/item-session.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- item-session.php	20 Mar 2005 17:16:03 -0000	1.5
+++ item-session.php	24 Mar 2005 17:12:17 -0000	1.6
@@ -1,7 +1,16 @@
 <?php
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
-
+/**
+ * This file edits the item in the session and save or creates it
+ * 
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb_html
+ * @subpackage	access_admin
+ */
+ 
+/* include main phpmediadb-project */
 require_once( '../_source/phpmediadb.php' );
 
 /* create object */



From nobody at sheep.berlios.de  Thu Mar 24 18:12:28 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 24 Mar 2005 18:12:28 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source phpmediadb.php,1.8,1.9
Message-ID: <200503241712.j2OHCSh03948@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source
In directory sheep:/tmp/cvs-serv26560/_source

Modified Files:
	phpmediadb.php 
Log Message:
* Added javadoc comments

Index: phpmediadb.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/phpmediadb.php,v
retrieving revision 1.8
retrieving revision 1.9
diff -u -d -r1.8 -r1.9
--- phpmediadb.php	20 Mar 2005 17:18:01 -0000	1.8
+++ phpmediadb.php	24 Mar 2005 17:12:26 -0000	1.9
@@ -1,6 +1,14 @@
 <?php
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
+/**
+ * This file includes all required files for phpMediaDB to work
+ * 
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	global
+ */
 /* let's begin */
 
 /* run preinit */



From nobody at sheep.berlios.de  Thu Mar 24 18:12:38 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 24 Mar 2005 18:12:38 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.presentation class.phpmediadb_presentation_contentvars.php,1.9,1.10 class.phpmediadb_presentation_htmlservice.php,1.9,1.10 class.phpmediadb_presentation_i18n.php,1.9,1.10 class.phpmediadb_presentation.php,1.7,1.8 class.phpmediadb_presentation_session.php,1.5,1.6 class.phpmediadb_presentation_xmlservice.php,1.4,1.5
Message-ID: <200503241712.j2OHCch03961@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation
In directory sheep:/tmp/cvs-serv26594/_source/tier.presentation

Modified Files:
	class.phpmediadb_presentation_contentvars.php 
	class.phpmediadb_presentation_htmlservice.php 
	class.phpmediadb_presentation_i18n.php 
	class.phpmediadb_presentation.php 
	class.phpmediadb_presentation_session.php 
	class.phpmediadb_presentation_xmlservice.php 
Log Message:
* Changed javadoc comments

Index: class.phpmediadb_presentation_contentvars.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_contentvars.php,v
retrieving revision 1.9
retrieving revision 1.10
diff -u -d -r1.9 -r1.10
--- class.phpmediadb_presentation_contentvars.php	20 Mar 2005 17:12:28 -0000	1.9
+++ class.phpmediadb_presentation_contentvars.php	24 Mar 2005 17:12:36 -0000	1.10
@@ -2,6 +2,16 @@
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
 
+/**
+ * This is the class that manages all template/content-variables of the tier.presentation
+ *
+ * This class also manages the conversion to XML/XHTML style
+ * 
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	presentation
+ */
 class phpmediadb_presentation_contentvars
 {
 	// --- ATTRIBUTES ---
@@ -39,7 +49,6 @@
 	 * The constructor __construct initalizes the Class.
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param phpmediadb_presentation $sender Refernece to parentclass
 	 */
 	public function __construct( $sender )
@@ -72,7 +81,6 @@
 	 * of Nodeformat.
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param String $nodeName Name of node (dooted format)
 	 * @param Mixed $nodeValue Value of node
 	 * @param Integer $nodeFormat Format of node, $nodeValue will be converted into this format
@@ -99,7 +107,6 @@
 	 * the parameter
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param String $nodeName Name of node (dotted-format)
 	 * @return mixed Array or string of nodes
 	 */
@@ -130,7 +137,6 @@
 	 * container
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param String $nodeName Name of node (dotted format)
 	 * @return bool ssuccess of nodedeletion
 	 */
@@ -151,7 +157,6 @@
 	 * container
 	 *
 	 * @access protected
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param mixed $nodeName Name of node (dotted format)
 	 * @param String $nodeValue Value of node
 	 * @param mixed $nodeArray Reference of a nodecontainer
@@ -209,7 +214,6 @@
 	 * This internal function recursivly reads a node from the container
 	 *
 	 * @access protected
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param String $nodeName Name of node (dotted format)
 	 * @param mixed $nodeArray Reference of a nodecontainer
 	 * @return mixed Nodecontainer
@@ -269,7 +273,6 @@
 	 * (TRUE=ok, FALSE=check failed)
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param String $nodeName Name of node (dotted format)
 	 * @return boolean boolean value specifies if nodename is valid
 	 */
@@ -289,7 +292,6 @@
 	 * Converts the nodeValue in the format of nodeFormat
 	 *
 	 * @access protected
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param String $nodeValue Name of node
 	 * @param String $nodeFormat Format of node (conversion)
 	 * @return String Name of node (dotted format)

Index: class.phpmediadb_presentation_htmlservice.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_htmlservice.php,v
retrieving revision 1.9
retrieving revision 1.10
diff -u -d -r1.9 -r1.10
--- class.phpmediadb_presentation_htmlservice.php	20 Mar 2005 17:15:12 -0000	1.9
+++ class.phpmediadb_presentation_htmlservice.php	24 Mar 2005 17:12:36 -0000	1.10
@@ -2,6 +2,14 @@
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
 
+/**
+ * This is the class that manages all html-serivces like template-compilation
+ * 
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	presentation
+ */
 class phpmediadb_presentation_htmlservice
 {
 	// --- ATTRIBUTES ---
@@ -38,7 +46,6 @@
 	 * The constructor __construct initalizes the Class.
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param phpmediadb_presentation $sender Reference to parentclass
 	 */
 	public function __construct( $sender )
@@ -56,7 +63,6 @@
 	 * Compiles one or more templates via template-engine and return it
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param String $template Filename of template
 	 * @return mixed compiled template as html or text
 	 */
@@ -90,7 +96,6 @@
 	 * Compiles one or more templates via template-engine and sends it to client
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param String $template Filename of template
 	 */	
 	public function display( $template )
@@ -110,7 +115,6 @@
 	 * Compiles one or more templates via template-engine and return it
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param String $template Filename of template
 	 * @return mixed compiled template as html or text
 	 */
@@ -150,7 +154,6 @@
 	 * Compiles one or more templates via template-engine and sends it to client
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param String $template Filename of template
 	 */	
 	public function displayMain( $template )
@@ -170,7 +173,6 @@
 	 * Initalizes the template engine
 	 *
 	 * @access protected
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 */
 	protected function initTemplateEngine()
 	{
@@ -194,8 +196,6 @@
 	 * Setup the template engine for the first time
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param String
 	 */
 	protected function setupTemplateEngine()
 	{

Index: class.phpmediadb_presentation_i18n.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_i18n.php,v
retrieving revision 1.9
retrieving revision 1.10
diff -u -d -r1.9 -r1.10
--- class.phpmediadb_presentation_i18n.php	20 Mar 2005 17:12:28 -0000	1.9
+++ class.phpmediadb_presentation_i18n.php	24 Mar 2005 17:12:36 -0000	1.10
@@ -2,6 +2,15 @@
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
 
+/**
+ * This is the class that manages all internationalization-functions and also contains
+ * all i18n variables
+ * 
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	presentation
+ */
 class phpmediadb_presentation_i18n
 {
 	// --- ATTRIBUTES ---
@@ -54,7 +63,6 @@
 	 * The constructor __construct initalizes the Class.
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param phpmediadb_presentation $sender Reference to parent class
 	 */
 	public function __construct( $sender )
@@ -76,7 +84,6 @@
 	 * Returns the language of the client browser
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return string Browserlanguage as languagecode
 	 */
 	public function getBrowserLanguage()
@@ -100,7 +107,6 @@
 	 * Returns the i18n string specified by the langID
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param String Internal language-i18n-stringcode
 	 * @return mixed Internationalized string
 	 */
@@ -123,7 +129,6 @@
 	 * Returns the whole i18n array
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return Array Array with all i18n strings
 	 */
 	public function getLanguageArray()
@@ -142,7 +147,6 @@
 	 * Returns a array with the available languages
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return Array Array with all available languages as langcodes
 	 */
 	public function getAvailableLanagues()
@@ -161,7 +165,6 @@
 	 * Returns the currently used language as langcode
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return String Currently used language as langcode
 	 */
 	public function getLanguageCode()
@@ -177,7 +180,6 @@
 	 * Sets the currently used language as langcode
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param String $langCode Languagecode which should be used
 	 * @return Bool status if set was successfull
 	 */
@@ -205,7 +207,6 @@
 	 * allowed languages and the default language
 	 *
 	 * @access protected
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param Array $allowedLanguageArray Array with all allowed langcodes
 	 * @param String $defaultLanguage Default Language as langcode
 	 * @return string Prefered langcode
@@ -286,7 +287,6 @@
 	 * Reads the i18n directory and detect the available languages
 	 *
 	 * @access protected
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 */
 	 protected function readI18nDirectory()
 	 {
@@ -312,7 +312,6 @@
 	 * loadlanguagefile function.
 	 *
 	 * @access protected
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 */
 	protected function initalizeLanguageContainer()
 	{
@@ -331,7 +330,6 @@
 	 * Loads the languagefile into the languagecontainer
 	 *
 	 * @access protected
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param String $langCode Langcode which should be loaded
 	 * @return void
 	 */

Index: class.phpmediadb_presentation.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation.php,v
retrieving revision 1.7
retrieving revision 1.8
diff -u -d -r1.7 -r1.8
--- class.phpmediadb_presentation.php	20 Mar 2005 17:12:28 -0000	1.7
+++ class.phpmediadb_presentation.php	24 Mar 2005 17:12:36 -0000	1.8
@@ -2,6 +2,16 @@
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
 
+/**
+ * This class contains all subclasses of the TIER.PRESENTATION and the configuration
+ * for the whole TIER.PRESENTATION.
+ * The subclasses can be accessed through the public references.
+ * 
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	presentation
+ */
 class phpmediadb_presentation
 {
 	// --- ATTRIBUTES ---
@@ -75,7 +85,6 @@
 	 * The constructor __construct initalizes the Class.
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param phpmediadb $sender Refernce to parentclass
 	 */
 	public function __construct( $sender )
@@ -102,7 +111,6 @@
 	 * etc.
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 */
 	public function __destruct()
 	{
@@ -114,7 +122,6 @@
 	 * Loads the configuration from the global array and resets the array
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return void
 	 */
 	private function loadConfiguration()

Index: class.phpmediadb_presentation_session.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_session.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- class.phpmediadb_presentation_session.php	20 Mar 2005 17:12:28 -0000	1.5
+++ class.phpmediadb_presentation_session.php	24 Mar 2005 17:12:36 -0000	1.6
@@ -2,6 +2,14 @@
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
 
+/**
+ * This is the class that manages the session-access
+ * 
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	presentation
+ */
 class phpmediadb_presentation_session
 {
 	// --- ATTRIBUTES ---
@@ -29,7 +37,6 @@
 	 * The constructor __construct initalizes the Class.
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param phpmediadb_presentation $sender Reference to parent class
 	 */
 	public function __construct( $sender )
@@ -47,7 +54,6 @@
 	 * Registers a variable in session object
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param String $id Specifies which id should used to store the value
 	 * @param Mixed $regvar Value which should be stored
 	 */
@@ -62,7 +68,6 @@
 	 * Removes a variable from session object
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param String $id Specifies which id should removed
 	 */
 	public function unregister( $id )
@@ -76,7 +81,6 @@
 	 * Returns a variable from session object
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param String $id Specifies which id should be returned
 	 */
 	public function get( $id )
@@ -90,7 +94,6 @@
 	 * Starts and initalized the session
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 */
 	public function start()
 	{
@@ -103,7 +106,6 @@
 	 * Destroys the session
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 */	
 	public function destroy()
 	{
@@ -116,7 +118,6 @@
 	 * Return and/or sets the global unique session id
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param String $newId New session id as string
 	 * @return String Currently used or old session id
 	 */	

Index: class.phpmediadb_presentation_xmlservice.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_xmlservice.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- class.phpmediadb_presentation_xmlservice.php	20 Mar 2005 17:12:28 -0000	1.4
+++ class.phpmediadb_presentation_xmlservice.php	24 Mar 2005 17:12:36 -0000	1.5
@@ -1,7 +1,14 @@
 <?php
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
-
+/**
+ * This is the class that manages all xml-serivces
+ * 
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	presentation
+ */
 class phpmediadb_presentation_xmlservice
 {
 	// --- ATTRIBUTES ---
@@ -29,7 +36,6 @@
 	 * The constructor __construct initalizes the Class.
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @param phpmediadb_presentation $sender Reference to parent class
 	 */
 	public function __construct( $sender )



From nobody at sheep.berlios.de  Thu Mar 24 18:12:50 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 24 Mar 2005 18:12:50 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.global class.phpmediadb_exception.php,1.2,1.3 class.phpmediadb.php,1.4,1.5 constants.phpmediadb.php,1.3,1.4
Message-ID: <200503241712.j2OHCoh03969@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.global
In directory sheep:/tmp/cvs-serv26610/_source/tier.global

Modified Files:
	class.phpmediadb_exception.php class.phpmediadb.php 
	constants.phpmediadb.php 
Log Message:
* Changed javadoc comments

Index: class.phpmediadb_exception.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.global/class.phpmediadb_exception.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- class.phpmediadb_exception.php	20 Mar 2005 17:18:28 -0000	1.2
+++ class.phpmediadb_exception.php	24 Mar 2005 17:12:48 -0000	1.3
@@ -3,15 +3,12 @@
 /* $Id$ */
 
 /**
- * Main class of the phpMediaDB Project. It contains all other classes in the
- * PRESENTATION, BUSINESS and DATA.
- *
- * @access public
- * @author phpMediaDB Team - http://phpmediadb.berlios.de/
- * @package phpmediadb
- * @since 0.0.0
- * @subpackage global
- * @version 1.0.0
+ * This is the class that manages the exceptions.
+ * 
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	global
  */
 class phpmediadb_exception extends Exception
 {

Index: class.phpmediadb.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.global/class.phpmediadb.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- class.phpmediadb.php	20 Mar 2005 17:18:28 -0000	1.4
+++ class.phpmediadb.php	24 Mar 2005 17:12:48 -0000	1.5
@@ -3,15 +3,14 @@
 /* $Id$ */
 
 /**
- * Main class of the phpMediaDB Project. It contains all other classes in the
- * PRESENTATION, BUSINESS and DATA.
+ * This is the class that manages the whole tiers.
  *
- * @access public
- * @author phpMediaDB Team - http://phpmediadb.berlios.de/
- * @package phpmediadb
- * @since 0.0.0
- * @subpackage global
- * @version 1.0.0
+ * All tiers can be accessed via the refereces eg. PRESENTATION.
+ * 
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	global
  */
 class phpmediadb
 {
@@ -52,7 +51,6 @@
 	 * The constructor __construct initalizes the Class.
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return void
 	 */
 	public function __construct()
@@ -74,7 +72,6 @@
 	 * etc.
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
 	 * @return void
 	 */
 	public function __destruct()

Index: constants.phpmediadb.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.global/constants.phpmediadb.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- constants.phpmediadb.php	15 Mar 2005 18:10:54 -0000	1.3
+++ constants.phpmediadb.php	24 Mar 2005 17:12:48 -0000	1.4
@@ -1,21 +1,39 @@
 <?php
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
-
+/**
+ * This files handels all contants
+ * 
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	global
+ */
+ 
 // --- tier.presentation ---
-	/*
-	 * PHPMEDIADB_NODEFORMAT_HTML:
-	 *   Value is HTML and need no conversion
-	 *
-	 * PHPMEDIADB_NODEFORMAT_TEXT:
-	 *   Value is Plaintext and need conversion to XML rules
-	 */
+
+    /**
+     * Constant that indicates that the content is already HTML
+     */
 	define( 'PHPMEDIADB_NODEFORMAT_HTML', 1 );
+    /**
+     * Constant that indicates that the content is only text
+     * and should be converted. XML/XHTML ruleset is used.
+     */
 	define( 'PHPMEDIADB_NODEFORMAT_TEXT', 0 );
 
 // --- tier.business ---
+    /**
+     * Constant that indicated that the item is an audio-media
+     */
 	define( 'PHPMEDIADB_ITEM_AUDIO', 1 );
+    /**
+     * Constant that indicated that the item is an video-media
+     */
 	define( 'PHPMEDIADB_ITEM_VIDEO', 2 );
+    /**
+     * Constant that indicated that the item is an print-media
+     */
 	define( 'PHPMEDIADB_ITEM_PRINT', 3 );
 
 // --- tier.data ---



From nobody at sheep.berlios.de  Thu Mar 24 18:12:58 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 24 Mar 2005 18:12:58 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration config.business.php,1.5,1.6 config.data.php,1.4,1.5 config.postinit.php,1.2,1.3 config.preinit.php,1.2,1.3 config.presentation.php,1.5,1.6
Message-ID: <200503241712.j2OHCwh03981@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration
In directory sheep:/tmp/cvs-serv26620/_source/tier.configuration

Modified Files:
	config.business.php config.data.php config.postinit.php 
	config.preinit.php config.presentation.php 
Log Message:
* Added javadoc comments

Index: config.business.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/config.business.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- config.business.php	20 Mar 2005 17:10:45 -0000	1.5
+++ config.business.php	24 Mar 2005 17:12:56 -0000	1.6
@@ -1,7 +1,15 @@
 <?php
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id $ */
-
+/**
+ * This file stores all configurations in tier.business
+ *
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	configuration
+ */
+ 
 // $phpMediaDbConfig['BUSINESS']['example-config'] = "abc";
 
 /**

Index: config.data.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/config.data.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- config.data.php	20 Mar 2005 17:10:45 -0000	1.4
+++ config.data.php	24 Mar 2005 17:12:56 -0000	1.5
@@ -1,7 +1,14 @@
 <?php
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id $ */
-
+/**
+ * This file stores all configurations in tier.data
+ *
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	configuration
+ */
 // $phpMediaDbConfig['DATA']['example-config'] = "abc";
 
 /**

Index: config.postinit.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/config.postinit.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- config.postinit.php	9 Feb 2005 21:12:31 -0000	1.2
+++ config.postinit.php	24 Mar 2005 17:12:56 -0000	1.3
@@ -1,7 +1,14 @@
 <?php
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id $ */
-
+/**
+ * This file is used for init-functions after deklaration of the classes
+ *
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	configuration
+ */
 
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---

Index: config.preinit.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/config.preinit.php,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -d -r1.2 -r1.3
--- config.preinit.php	27 Feb 2005 21:48:44 -0000	1.2
+++ config.preinit.php	24 Mar 2005 17:12:56 -0000	1.3
@@ -1,6 +1,14 @@
 <?php
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id $ */
+/**
+ * This file is used for init-functions before deklaration of the classes
+ *
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	configuration
+ */
 
 /**
  * Configuration initalize

Index: config.presentation.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/config.presentation.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- config.presentation.php	20 Mar 2005 17:10:45 -0000	1.5
+++ config.presentation.php	24 Mar 2005 17:12:56 -0000	1.6
@@ -1,7 +1,14 @@
 <?php
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id $ */
-
+/**
+ * This file stores all configurations in tier.presentation
+ *
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	configuration
+ */
 // $phpMediaDbConfig['PRESENTATION']['example-config'] = "abc";
 
 /*



From nobody at sheep.berlios.de  Thu Mar 24 18:13:07 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 24 Mar 2005 18:13:07 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration/i18n i18n.de.php,1.3,1.4 i18n.en.php,1.1,1.2
Message-ID: <200503241713.j2OHD7h03998@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/i18n
In directory sheep:/tmp/cvs-serv26651/_source/tier.configuration/i18n

Modified Files:
	i18n.de.php i18n.en.php 
Log Message:
* Added javadoc comments

Index: i18n.de.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/i18n/i18n.de.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- i18n.de.php	15 Mar 2005 21:02:13 -0000	1.3
+++ i18n.de.php	24 Mar 2005 17:13:05 -0000	1.4
@@ -1,7 +1,14 @@
 <?php
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id $ */
-
+/**
+ * This file stores all i18n strings (GERMAN)
+ *
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	configuration
+ */
 // $i18n['STRING-ID'] = "";
 
 /* default i18ns */

Index: i18n.en.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/i18n/i18n.en.php,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- i18n.en.php	9 Feb 2005 16:17:06 -0000	1.1
+++ i18n.en.php	24 Mar 2005 17:13:05 -0000	1.2
@@ -1,8 +1,19 @@
 <?php
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id $ */
-
+/**
+ * This file stores all i18n strings (ENGLISH)
+ *
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	configuration
+ */
 // $i18n['STRING-ID'] = "";
+
+$i18n['FOOBAR'] = 'FooBar! :)';
+$i18n['FOOBAR2'] = 'FooBar2! :)';
+$i18n['FOOBAR3'] = 'FooBar3! :)';
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Thu Mar 24 18:13:29 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 24 Mar 2005 18:13:29 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.business class.phpmediadb_business_agerestrictions.php,1.3,1.4 class.phpmediadb_business_audios.php,1.4,1.5 class.phpmediadb_business_categories.php,1.3,1.4 class.phpmediadb_business_codecs.php,1.3,1.4 class.phpmediadb_business_formats.php,1.3,1.4 class.phpmediadb_business_inspector.php,1.3,1.4 class.phpmediadb_business.php,1.8,1.9 class.phpmediadb_business_prints.php,1.3,1.4 class.phpmediadb_business_videos.php,1.3,1.4
Message-ID: <200503241713.j2OHDTh04012@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business
In directory sheep:/tmp/cvs-serv26699/_source/tier.business

Modified Files:
	class.phpmediadb_business_agerestrictions.php 
	class.phpmediadb_business_audios.php 
	class.phpmediadb_business_categories.php 
	class.phpmediadb_business_codecs.php 
	class.phpmediadb_business_formats.php 
	class.phpmediadb_business_inspector.php 
	class.phpmediadb_business.php 
	class.phpmediadb_business_prints.php 
	class.phpmediadb_business_videos.php 
Log Message:
* Changed javadoc comments

Index: class.phpmediadb_business_agerestrictions.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_agerestrictions.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- class.phpmediadb_business_agerestrictions.php	20 Mar 2005 17:03:19 -0000	1.3
+++ class.phpmediadb_business_agerestrictions.php	24 Mar 2005 17:13:26 -0000	1.4
@@ -2,6 +2,14 @@
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
 
+/**
+ * This is the class that manages all functions of the agerestrictions
+ *
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	business
+ */
 class phpmediadb_business_agerestrictions
 {
 	// --- ATTRIBUTES ---
@@ -57,7 +65,9 @@
 	/**
 	 * Returns the complete list
 	 *
-	 *
+	 * @access public
+	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
+	 * @return array list of agerestrictions
 	 */
 	public function getList()
 	{

Index: class.phpmediadb_business_audios.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_audios.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- class.phpmediadb_business_audios.php	20 Mar 2005 17:03:19 -0000	1.4
+++ class.phpmediadb_business_audios.php	24 Mar 2005 17:13:26 -0000	1.5
@@ -2,6 +2,14 @@
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
 
+/**
+ * This is the class that manages all functions of the audios
+ *
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	business
+ */
 class phpmediadb_business_audios
 {
 	// --- ATTRIBUTES ---

Index: class.phpmediadb_business_categories.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_categories.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- class.phpmediadb_business_categories.php	20 Mar 2005 17:03:19 -0000	1.3
+++ class.phpmediadb_business_categories.php	24 Mar 2005 17:13:26 -0000	1.4
@@ -2,6 +2,14 @@
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
 
+/**
+ * This is the class that manages all functions of the categories
+ *
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	business
+ */
 class phpmediadb_business_categories
 {
 	// --- ATTRIBUTES ---

Index: class.phpmediadb_business_codecs.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_codecs.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- class.phpmediadb_business_codecs.php	20 Mar 2005 17:03:19 -0000	1.3
+++ class.phpmediadb_business_codecs.php	24 Mar 2005 17:13:26 -0000	1.4
@@ -2,6 +2,14 @@
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
 
+/**
+ * This is the class that manages all functions of the codecs
+ *
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	business
+ */
 class phpmediadb_business_codecs
 {
 	// --- ATTRIBUTES ---

Index: class.phpmediadb_business_formats.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_formats.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- class.phpmediadb_business_formats.php	20 Mar 2005 17:03:19 -0000	1.3
+++ class.phpmediadb_business_formats.php	24 Mar 2005 17:13:26 -0000	1.4
@@ -2,6 +2,14 @@
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
 
+/**
+ * This is the class that manages all functions of the formats
+ *
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	business
+ */
 class phpmediadb_business_formats
 {
 	// --- ATTRIBUTES ---

Index: class.phpmediadb_business_inspector.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_inspector.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- class.phpmediadb_business_inspector.php	20 Mar 2005 17:03:19 -0000	1.3
+++ class.phpmediadb_business_inspector.php	24 Mar 2005 17:13:26 -0000	1.4
@@ -2,6 +2,14 @@
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
 
+/**
+ * This is the class that manages all inspector functions like datavalidation
+ *
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	business
+ */
 class phpmediadb_business_inspector
 {
 	// --- ATTRIBUTES ---

Index: class.phpmediadb_business.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business.php,v
retrieving revision 1.8
retrieving revision 1.9
diff -u -d -r1.8 -r1.9
--- class.phpmediadb_business.php	20 Mar 2005 17:03:19 -0000	1.8
+++ class.phpmediadb_business.php	24 Mar 2005 17:13:26 -0000	1.9
@@ -2,6 +2,16 @@
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
 
+/**
+ * This class contains all subclasses of the TIER.BUSINESS and the configuration
+ * for the whole TIER.BUSINESS.
+ * The subclasses can be accessed through the public references.
+ * 
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	business
+ */
 class phpmediadb_business
 {
 	// --- ATTRIBUTES ---

Index: class.phpmediadb_business_prints.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_prints.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- class.phpmediadb_business_prints.php	20 Mar 2005 17:03:19 -0000	1.3
+++ class.phpmediadb_business_prints.php	24 Mar 2005 17:13:26 -0000	1.4
@@ -2,6 +2,14 @@
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
 
+/**
+ * This is the class that manages all functions of the prints
+ *
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	business
+ */
 class phpmediadb_business_prints
 {
 	// --- ATTRIBUTES ---

Index: class.phpmediadb_business_videos.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_videos.php,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- class.phpmediadb_business_videos.php	20 Mar 2005 17:03:19 -0000	1.3
+++ class.phpmediadb_business_videos.php	24 Mar 2005 17:13:26 -0000	1.4
@@ -2,6 +2,14 @@
 // phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 /* $Id$ */
 
+/**
+ * This is the class that manages all functions of the videos
+ *
+ * @author		Markus Blaschke <mblaschke at users.berlios.de>
+ * @version		$Revision$
+ * @package		phpmediadb
+ * @subpackage	business
+ */
 class phpmediadb_business_videos
 {
 	// --- ATTRIBUTES ---



From nobody at sheep.berlios.de  Thu Mar 24 21:43:04 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 24 Mar 2005 21:43:04 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/admin item-session.php,1.6,1.7
Message-ID: <200503242043.j2OKh4h12536@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/admin
In directory sheep:/tmp/cvs-serv2895/admin

Modified Files:
	item-session.php 
Log Message:
* itemSave: Modified error-check

Index: item-session.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/admin/item-session.php,v
retrieving revision 1.6
retrieving revision 1.7
diff -u -d -r1.6 -r1.7
--- item-session.php	24 Mar 2005 17:12:17 -0000	1.6
+++ item-session.php	24 Mar 2005 20:43:02 -0000	1.7
@@ -27,10 +27,10 @@
 	
 	/* get database-vars */
 	/*
-	$categories				= $PHPMEDIADB->BUSINESS->CATEGORIES->getList();
-	$formats					= $PHPMEDIADB->BUSINESS->FORMAT->getList();
+	$categories			= $PHPMEDIADB->BUSINESS->CATEGORIES->getList();
+	$formats			= $PHPMEDIADB->BUSINESS->FORMAT->getList();
 	$ageRestrictions	= $PHPMEDIADB->BUSINESS->AGERESTRICTIONS->getList();
-	$codecs						= $PHPMEDIADB->BUSINESS->CODECS->getList();
+	$codecs				= $PHPMEDIADB->BUSINESS->CODECS->getList();
 	*/
 	
 	/* assign database-vars */
@@ -88,19 +88,21 @@
 	switch( $sessionItem['type'] )
 	{
 		case(PHPMEDIADB_ITEM_AUDIO):
-		
-		if( $sessionItem['id'] === NULL )
-			$errorData = $PHPMEDIADB->BUSINESS->AUDIOS->create( $sessionItem['data'] );
-		else 
-			$errorData = $PHPMEDIADB->BUSINESS->AUDIOS->modify( $sessionItem['id'], $sessionItem['data'] );
+		/* check data */
+		$errorData = $PHPMEDIADB->BUSINESS->AUDIOS->check( $sessionItem['data'] );
 			
 		if( $errorData === NULL || $errorData === TRUE )
 		{
-			/* happy, no error :) */
+			/* no error occurred :) */
+			if( $sessionItem['id'] === NULL )
+				$status = $PHPMEDIADB->BUSINESS->AUDIOS->create( $sessionItem['data'] );
+			else 
+				$status = $PHPMEDIADB->BUSINESS->AUDIOS->modify( $sessionItem['id'], $sessionItem['data'] );
+				
 			@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'MESSAGE', $PHPMEDIADB->PRESENTATION->I18N->getLanguageString( 'MESSAGE_SUCCESS_SAVE' ) );
 			$PHPMEDIADB->PRESENTATION->HTMLSERVICE->displayMain( 'body.message.tpl' );
 			$PHPMEDIADB->PRESENTATION->SESSION->unregister( 'sessionitem' );
-			die();
+			die();		
 		}
 		else
 		{



From nobody at sheep.berlios.de  Thu Mar 24 21:43:37 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 24 Mar 2005 21:43:37 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.business class.phpmediadb_business_agerestrictions.php,1.4,1.5 class.phpmediadb_business_audios.php,1.5,1.6 class.phpmediadb_business_categories.php,1.4,1.5 class.phpmediadb_business_codecs.php,1.4,1.5 class.phpmediadb_business_formats.php,1.4,1.5 class.phpmediadb_business_inspector.php,1.4,1.5 class.phpmediadb_business_prints.php,1.4,1.5 class.phpmediadb_business_videos.php,1.4,1.5
Message-ID: <200503242043.j2OKhbh12543@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business
In directory sheep:/tmp/cvs-serv2928/_source/tier.business

Modified Files:
	class.phpmediadb_business_agerestrictions.php 
	class.phpmediadb_business_audios.php 
	class.phpmediadb_business_categories.php 
	class.phpmediadb_business_codecs.php 
	class.phpmediadb_business_formats.php 
	class.phpmediadb_business_inspector.php 
	class.phpmediadb_business_prints.php 
	class.phpmediadb_business_videos.php 
Log Message:
* Added all standard-functions

Index: class.phpmediadb_business_agerestrictions.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_agerestrictions.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- class.phpmediadb_business_agerestrictions.php	24 Mar 2005 17:13:26 -0000	1.4
+++ class.phpmediadb_business_agerestrictions.php	24 Mar 2005 20:43:35 -0000	1.5
@@ -48,8 +48,7 @@
 	 * The constructor __construct initalizes the Class.
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb $sender Reference to parent class
+	 * @param phpmediadb_business $sender Reference to parent class
 	 */
 	public function __construct( $sender )
 	{
@@ -60,14 +59,33 @@
 		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
 		$this->DATA			= $sender->PHPMEDIADB->DATA;
 	}
-
+	
 //-----------------------------------------------------------------------------
 	/**
-	 * Returns the complete list
+	 * Returns one item from the batabase
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return array list of agerestrictions
+	 * @param integer $id ID of item
+	 * @return array Array with itemdata
+	 */
+	public function get( $id )
+	{
+		/* init */
+		$returnValue = null;
+		
+		/* delegate */
+		$returnValue = $this->DATA->AGERESTRICTIONS->get( $id );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Returns the complete list of items from the database
+	 *
+	 * @access public
+	 * @return array list of items
 	 */
 	public function getList()
 	{
@@ -75,7 +93,88 @@
 		$returnValue = null;
 		
 		/* delegate */
-		$this->DATA->AGERESTRICTIONS->getList();
+		$returnValue = $this->DATA->AGERESTRICTIONS->getList();
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Adds one item into the database
+	 *
+	 * @access public
+	 * @param array $data Data of the item
+	 * @return mixed Last inserted it as integer or false if operation failed
+	 */
+	public function create( $data )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->DATA->AGERESTRICTIONS->create( $data );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Modifies one item
+	 *
+	 * @access public
+	 * @param integer $id ID of item
+	 * @param array $data Data of the item
+	 * @return bool successstatus (true/false)
+	 */
+	public function modify( $id, $data )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->DATA->AGERESTRICTIONS->modify( $id, $data );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Removes one item from the database
+	 *
+	 * @access public
+	 * @param integer $id ID of item
+	 * @return bool successstatus (true/false)
+	 */
+	public function remove( $id )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->DATA->AGERESTRICTIONS->modify( $id );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Removes one item from the database
+	 *
+	 * @access public
+	 * @param integer $data Data of the item
+	 * @return bool successstatus (true/false)
+	 */
+	public function check( $data )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->BUSINESS->INSPECTOR->check( PHPMEDIADB_ITEMINFO_AGERESTRICTION, $data );
 		
 		/* return data */
 		return $returnValue;

Index: class.phpmediadb_business_audios.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_audios.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- class.phpmediadb_business_audios.php	24 Mar 2005 17:13:26 -0000	1.5
+++ class.phpmediadb_business_audios.php	24 Mar 2005 20:43:35 -0000	1.6
@@ -49,7 +49,7 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb $sender Reference to parent class
+	 * @param phpmediadb_business $sender Reference to parent class
 	 */
 	public function __construct( $sender )
 	{
@@ -63,27 +63,6 @@
 
 //-----------------------------------------------------------------------------
 	/**
-	 * Checks if the data is correct
-	 *
-	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Mixed $data Data which should be checked
-	 * @return Mixed Successstatus, NULL if success, failed with error-array
-	 */
-	 public function check( $data )
-	 {
-		/* init */
-		$returnValue = NULL;
-		
-		/* delegate */
-		$returnValue = $this->BUSINESS->INSPECTOR->check( PHPMEDIADB_ITEM_AUDIO, $data );
-
-		
-		return $returnValue;
-	 }
-
-//-----------------------------------------------------------------------------
-	/**
 	 * Creates an empty dataset
 	 *
 	 * @access public
@@ -118,11 +97,30 @@
 
 //-----------------------------------------------------------------------------
 	/**
-	 * Returns the complete list of datasets
+	 * Returns one item from the batabase
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @return Array Array with all available datasets
+	 * @param integer $id ID of item
+	 * @return array Array with itemdata
+	 */
+	public function get( $id )
+	{
+		/* init */
+		$returnValue = null;
+		
+		/* delegate */
+		$returnValue = $this->DATA->AUDIOS->get( $id );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Returns the complete list of items from the database
+	 *
+	 * @access public
+	 * @return array list of items
 	 */
 	public function getList()
 	{
@@ -130,7 +128,7 @@
 		$returnValue = null;
 		
 		/* delegate */
-		$this->DATA->AUDIOS->getList();
+		$returnValue = $this->DATA->AUDIOS->getList();
 		
 		/* return data */
 		return $returnValue;
@@ -138,29 +136,40 @@
 	
 //-----------------------------------------------------------------------------
 	/**
-	 * Modifies one dataset specified by the id
+	 * Adds one item into the database
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param String $id Primarykey/Identifier of dataset
-	 * @param Array $data New data of dataset
+	 * @param array $data Data of the item
+	 * @return mixed Last inserted it as integer or false if operation failed
 	 */
-	public function modify( $id, $data )
+	public function create( $data )
 	{
 		/* init */
-		$returnValue = NULL;
+		$returnValue = false;
 		
-		/* check data */
-		$returnValue = $this->check( $data );
+		/* delegate */
+		$returnValue = $this->DATA->AUDIOS->create( $data );
 		
-		/* no input-error, ready to save */
-		if( $returnValue === NULL )
-		{
-			/* delegate */
-			//$this->DATA->AUDIOS->modify( $id, $data );
-			
-			$returnValue = TRUE;
-		}
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Modifies one item
+	 *
+	 * @access public
+	 * @param integer $id ID of item
+	 * @param array $data Data of the item
+	 * @return bool successstatus (true/false)
+	 */
+	public function modify( $id, $data )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->DATA->AUDIOS->modify( $id, $data );
 		
 		/* return data */
 		return $returnValue;
@@ -168,29 +177,39 @@
 	
 //-----------------------------------------------------------------------------
 	/**
-	 * Creates one dataset
+	 * Removes one item from the database
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param Array $data New data of dataset
-	 * @return Primarykey/Identifier of dataset
+	 * @param integer $id ID of item
+	 * @return bool successstatus (true/false)
 	 */
-	public function create( $data )
+	public function remove( $id )
 	{
 		/* init */
-		$returnValue = NULL;
+		$returnValue = false;
 		
-		/* check data */
-		$returnValue = $this->check( $data );
+		/* delegate */
+		$returnValue = $this->DATA->AUDIOS->modify( $id );
 		
-		/* no input-error, ready to save */
-		if( $returnValue === NULL )
-		{
-			/* delegate */
-			//$this->DATA->AUDIOS->create( $id, $data );
-			
-			$returnValue = TRUE;
-		}
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Removes one item from the database
+	 *
+	 * @access public
+	 * @param integer $data Data of the item
+	 * @return bool successstatus (true/false)
+	 */
+	public function check( $data )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->BUSINESS->INSPECTOR->check( PHPMEDIADB_ITEM_AUDIO, $data );
 		
 		/* return data */
 		return $returnValue;

Index: class.phpmediadb_business_categories.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_categories.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- class.phpmediadb_business_categories.php	24 Mar 2005 17:13:26 -0000	1.4
+++ class.phpmediadb_business_categories.php	24 Mar 2005 20:43:35 -0000	1.5
@@ -49,7 +49,7 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb $sender Reference to parent class
+	 * @param phpmediadb_business $sender Reference to parent class
 	 */
 	public function __construct( $sender )
 	{
@@ -63,9 +63,30 @@
 
 //-----------------------------------------------------------------------------
 	/**
-	 * Returns the complete list
+	 * Returns one item from the batabase
 	 *
+	 * @access public
+	 * @param integer $id ID of item
+	 * @return array Array with itemdata
+	 */
+	public function get( $id )
+	{
+		/* init */
+		$returnValue = null;
+		
+		/* delegate */
+		$returnValue = $this->DATA->CATEGORIES->get( $id );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Returns the complete list of items from the database
 	 *
+	 * @access public
+	 * @return array list of items
 	 */
 	public function getList()
 	{
@@ -73,7 +94,88 @@
 		$returnValue = null;
 		
 		/* delegate */
-		$this->DATA->CATEGORIES->getList();
+		$returnValue = $this->DATA->CATEGORIES->getList();
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Adds one item into the database
+	 *
+	 * @access public
+	 * @param array $data Data of the item
+	 * @return mixed Last inserted it as integer or false if operation failed
+	 */
+	public function create( $data )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->DATA->CATEGORIES->create( $data );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Modifies one item
+	 *
+	 * @access public
+	 * @param integer $id ID of item
+	 * @param array $data Data of the item
+	 * @return bool successstatus (true/false)
+	 */
+	public function modify( $id, $data )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->DATA->CATEGORIES->modify( $id, $data );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Removes one item from the database
+	 *
+	 * @access public
+	 * @param integer $id ID of item
+	 * @return bool successstatus (true/false)
+	 */
+	public function remove( $id )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->DATA->CATEGORIES->modify( $id );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Removes one item from the database
+	 *
+	 * @access public
+	 * @param integer $data Data of the item
+	 * @return bool successstatus (true/false)
+	 */
+	public function check( $data )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->BUSINESS->INSPECTOR->check( PHPMEDIADB_ITEMINFO_CATEGORIES, $data );
 		
 		/* return data */
 		return $returnValue;

Index: class.phpmediadb_business_codecs.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_codecs.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- class.phpmediadb_business_codecs.php	24 Mar 2005 17:13:26 -0000	1.4
+++ class.phpmediadb_business_codecs.php	24 Mar 2005 20:43:35 -0000	1.5
@@ -42,13 +42,12 @@
 	protected $DATA = null;
 	
 	// --- OPERATIONS ---
-//-----------------------------------------------------------------------------
+//-----------------------------------------------------------------------------		
 	/**
 	 * The constructor __construct initalizes the Class.
 	 *
 	 * @access public
-	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb $sender Reference to parent class
+	 * @param phpmediadb_business $sender Reference to parent class
 	 */
 	public function __construct( $sender )
 	{
@@ -59,12 +58,33 @@
 		$this->PHPMEDIADB	= $sender->PHPMEDIADB;
 		$this->DATA			= $sender->PHPMEDIADB->DATA;
 	}
-
+	
 //-----------------------------------------------------------------------------
 	/**
-	 * Returns the complete list
+	 * Returns one item from the batabase
 	 *
+	 * @access public
+	 * @param integer $id ID of item
+	 * @return array Array with itemdata
+	 */
+	public function get( $id )
+	{
+		/* init */
+		$returnValue = null;
+		
+		/* delegate */
+		$returnValue = $this->DATA->CODECS->get( $id );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Returns the complete list of items from the database
 	 *
+	 * @access public
+	 * @return array list of items
 	 */
 	public function getList()
 	{
@@ -72,7 +92,88 @@
 		$returnValue = null;
 		
 		/* delegate */
-		$this->DATA->CODECS->getList();
+		$returnValue = $this->DATA->CODECS->getList();
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Adds one item into the database
+	 *
+	 * @access public
+	 * @param array $data Data of the item
+	 * @return mixed Last inserted it as integer or false if operation failed
+	 */
+	public function create( $data )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->DATA->CODECS->create( $data );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Modifies one item
+	 *
+	 * @access public
+	 * @param integer $id ID of item
+	 * @param array $data Data of the item
+	 * @return bool successstatus (true/false)
+	 */
+	public function modify( $id, $data )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->DATA->CODECS->modify( $id, $data );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Removes one item from the database
+	 *
+	 * @access public
+	 * @param integer $id ID of item
+	 * @return bool successstatus (true/false)
+	 */
+	public function remove( $id )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->DATA->CODECS->modify( $id );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Removes one item from the database
+	 *
+	 * @access public
+	 * @param integer $data Data of the item
+	 * @return bool successstatus (true/false)
+	 */
+	public function check( $data )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->BUSINESS->INSPECTOR->check( PHPMEDIADB_ITEMINFO_CODECS, $data );
 		
 		/* return data */
 		return $returnValue;

Index: class.phpmediadb_business_formats.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_formats.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- class.phpmediadb_business_formats.php	24 Mar 2005 17:13:26 -0000	1.4
+++ class.phpmediadb_business_formats.php	24 Mar 2005 20:43:35 -0000	1.5
@@ -48,7 +48,7 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb $sender Reference to parent class
+	 * @param phpmediadb_business $sender Reference to parent class
 	 */
 	public function __construct( $sender )
 	{
@@ -62,9 +62,30 @@
 
 //-----------------------------------------------------------------------------
 	/**
-	 * Returns the complete list
+	 * Returns one item from the batabase
 	 *
+	 * @access public
+	 * @param integer $id ID of item
+	 * @return array Array with itemdata
+	 */
+	public function get( $id )
+	{
+		/* init */
+		$returnValue = null;
+		
+		/* delegate */
+		$returnValue = $this->DATA->FORMATS->get( $id );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Returns the complete list of items from the database
 	 *
+	 * @access public
+	 * @return array list of items
 	 */
 	public function getList()
 	{
@@ -72,7 +93,88 @@
 		$returnValue = null;
 		
 		/* delegate */
-		$this->DATA->FORMATS->getList();
+		$returnValue = $this->DATA->FORMATS->getList();
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Adds one item into the database
+	 *
+	 * @access public
+	 * @param array $data Data of the item
+	 * @return mixed Last inserted it as integer or false if operation failed
+	 */
+	public function create( $data )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->DATA->FORMATS->create( $data );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Modifies one item
+	 *
+	 * @access public
+	 * @param integer $id ID of item
+	 * @param array $data Data of the item
+	 * @return bool successstatus (true/false)
+	 */
+	public function modify( $id, $data )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->DATA->FORMATS->modify( $id, $data );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Removes one item from the database
+	 *
+	 * @access public
+	 * @param integer $id ID of item
+	 * @return bool successstatus (true/false)
+	 */
+	public function remove( $id )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->DATA->FORMATS->modify( $id );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Removes one item from the database
+	 *
+	 * @access public
+	 * @param integer $data Data of the item
+	 * @return bool successstatus (true/false)
+	 */
+	public function check( $data )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->BUSINESS->INSPECTOR->check( PHPMEDIADB_ITEMINFO_FORMATS, $data );
 		
 		/* return data */
 		return $returnValue;

Index: class.phpmediadb_business_inspector.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_inspector.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- class.phpmediadb_business_inspector.php	24 Mar 2005 17:13:26 -0000	1.4
+++ class.phpmediadb_business_inspector.php	24 Mar 2005 20:43:35 -0000	1.5
@@ -49,7 +49,7 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb $sender Refreence to parent class
+	 * @param phpmediadb_business $sender Refreence to parent class
 	 */
 	public function __construct( $sender )
 	{

Index: class.phpmediadb_business_prints.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_prints.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- class.phpmediadb_business_prints.php	24 Mar 2005 17:13:26 -0000	1.4
+++ class.phpmediadb_business_prints.php	24 Mar 2005 20:43:35 -0000	1.5
@@ -48,7 +48,7 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb $sender Reference to parent class
+	 * @param phpmediadb_business $sender Reference to parent class
 	 */
 	public function __construct( $sender )
 	{
@@ -62,9 +62,30 @@
 
 //-----------------------------------------------------------------------------
 	/**
-	 * Returns the complete list
+	 * Returns one item from the batabase
 	 *
+	 * @access public
+	 * @param integer $id ID of item
+	 * @return array Array with itemdata
+	 */
+	public function get( $id )
+	{
+		/* init */
+		$returnValue = null;
+		
+		/* delegate */
+		$returnValue = $this->DATA->PRINTS->get( $id );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Returns the complete list of items from the database
 	 *
+	 * @access public
+	 * @return array list of items
 	 */
 	public function getList()
 	{
@@ -72,7 +93,88 @@
 		$returnValue = null;
 		
 		/* delegate */
-		$this->DATA->PRINTS->getList();
+		$returnValue = $this->DATA->PRINTS->getList();
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Adds one item into the database
+	 *
+	 * @access public
+	 * @param array $data Data of the item
+	 * @return mixed Last inserted it as integer or false if operation failed
+	 */
+	public function create( $data )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->DATA->PRINTS->create( $data );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Modifies one item
+	 *
+	 * @access public
+	 * @param integer $id ID of item
+	 * @param array $data Data of the item
+	 * @return bool successstatus (true/false)
+	 */
+	public function modify( $id, $data )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->DATA->PRINTS->modify( $id, $data );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Removes one item from the database
+	 *
+	 * @access public
+	 * @param integer $id ID of item
+	 * @return bool successstatus (true/false)
+	 */
+	public function remove( $id )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->DATA->PRINTS->modify( $id );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Removes one item from the database
+	 *
+	 * @access public
+	 * @param integer $data Data of the item
+	 * @return bool successstatus (true/false)
+	 */
+	public function check( $data )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->BUSINESS->INSPECTOR->check( PHPMEDIADB_ITEM_PRINT, $data );
 		
 		/* return data */
 		return $returnValue;

Index: class.phpmediadb_business_videos.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_videos.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- class.phpmediadb_business_videos.php	24 Mar 2005 17:13:26 -0000	1.4
+++ class.phpmediadb_business_videos.php	24 Mar 2005 20:43:35 -0000	1.5
@@ -48,7 +48,7 @@
 	 *
 	 * @access public
 	 * @author phpMediaDB Team - http://phpmediadb.berlios.de/
-	 * @param phpmediadb $sender Reference to parent class
+	 * @param phpmediadb_business $sender Reference to parent class
 	 */
 	public function __construct( $sender )
 	{
@@ -62,9 +62,30 @@
 
 //-----------------------------------------------------------------------------
 	/**
-	 * Returns the complete list
+	 * Returns one item from the batabase
 	 *
+	 * @access public
+	 * @param integer $id ID of item
+	 * @return array Array with itemdata
+	 */
+	public function get( $id )
+	{
+		/* init */
+		$returnValue = null;
+		
+		/* delegate */
+		$returnValue = $this->DATA->VIDEOS->get( $id );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Returns the complete list of items from the database
 	 *
+	 * @access public
+	 * @return array list of items
 	 */
 	public function getList()
 	{
@@ -72,7 +93,88 @@
 		$returnValue = null;
 		
 		/* delegate */
-		$this->DATA->VIDEOS->getList();
+		$returnValue = $this->DATA->VIDEOS->getList();
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Adds one item into the database
+	 *
+	 * @access public
+	 * @param array $data Data of the item
+	 * @return mixed Last inserted it as integer or false if operation failed
+	 */
+	public function create( $data )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->DATA->VIDEOS->create( $data );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Modifies one item
+	 *
+	 * @access public
+	 * @param integer $id ID of item
+	 * @param array $data Data of the item
+	 * @return bool successstatus (true/false)
+	 */
+	public function modify( $id, $data )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->DATA->VIDEOS->modify( $id, $data );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Removes one item from the database
+	 *
+	 * @access public
+	 * @param integer $id ID of item
+	 * @return bool successstatus (true/false)
+	 */
+	public function remove( $id )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->DATA->VIDEOS->modify( $id );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Removes one item from the database
+	 *
+	 * @access public
+	 * @param integer $data Data of the item
+	 * @return bool successstatus (true/false)
+	 */
+	public function check( $data )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* delegate */
+		$returnValue = $this->BUSINESS->INSPECTOR->check( PHPMEDIADB_ITEM_VIDEO, $data );
 		
 		/* return data */
 		return $returnValue;



From nobody at sheep.berlios.de  Thu Mar 24 21:44:33 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 24 Mar 2005 21:44:33 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.global constants.phpmediadb.php,1.4,1.5
Message-ID: <200503242044.j2OKiXh12566@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.global
In directory sheep:/tmp/cvs-serv3006/_source/tier.global

Modified Files:
	constants.phpmediadb.php 
Log Message:
* Added PHPMEDIADB_ITEMINFO_AGERESTRICTION, PHPMEDIADB_ITEMINFO_CATEGORIES, PHPMEDIADB_ITEMINFO_CODECS, PHPMEDIADB_ITEMINFO_FORMATS and PHPMEDIADB_ITEMINFO_STATUS

Index: constants.phpmediadb.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.global/constants.phpmediadb.php,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -d -r1.4 -r1.5
--- constants.phpmediadb.php	24 Mar 2005 17:12:48 -0000	1.4
+++ constants.phpmediadb.php	24 Mar 2005 20:44:31 -0000	1.5
@@ -16,6 +16,7 @@
      * Constant that indicates that the content is already HTML
      */
 	define( 'PHPMEDIADB_NODEFORMAT_HTML', 1 );
+	
     /**
      * Constant that indicates that the content is only text
      * and should be converted. XML/XHTML ruleset is used.
@@ -26,15 +27,42 @@
     /**
      * Constant that indicated that the item is an audio-media
      */
+     
 	define( 'PHPMEDIADB_ITEM_AUDIO', 1 );
     /**
      * Constant that indicated that the item is an video-media
      */
 	define( 'PHPMEDIADB_ITEM_VIDEO', 2 );
+	
     /**
      * Constant that indicated that the item is an print-media
      */
 	define( 'PHPMEDIADB_ITEM_PRINT', 3 );
+	
+    /**
+     * Constant that indicated that the iteminfo is a agerestriction-info
+     */	
+	define( 'PHPMEDIADB_ITEMINFO_AGERESTRICTION', 900 );
+
+    /**
+     * Constant that indicated that the iteminfo is a category
+     */	
+	define( 'PHPMEDIADB_ITEMINFO_CATEGORIES', 901 );
+	
+    /**
+     * Constant that indicated that the iteminfo is a codec
+     */	
+	define( 'PHPMEDIADB_ITEMINFO_CODECS', 902 );
+	
+    /**
+     * Constant that indicated that the iteminfo is a format
+     */	
+	define( 'PHPMEDIADB_ITEMINFO_FORMATS', 903 );
+	
+    /**
+     * Constant that indicated that the iteminfo is a status
+     */	
+	define( 'PHPMEDIADB_ITEMINFO_STATUS', 904 );
 
 // --- tier.data ---
 



From nobody at sheep.berlios.de  Thu Mar 24 22:24:13 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 24 Mar 2005 22:24:13 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/install create-tables.sql,1.1,1.2
Message-ID: <200503242124.j2OLODh13615@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/install
In directory sheep:/tmp/cvs-serv5430/install

Modified Files:
	create-tables.sql 
Log Message:
* Version bump erm-model.xml Revision 1.16

Index: create-tables.sql
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/install/create-tables.sql,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- create-tables.sql	17 Mar 2005 20:03:44 -0000	1.1
+++ create-tables.sql	24 Mar 2005 21:24:11 -0000	1.2
@@ -1,7 +1,182 @@
 -- phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 -- $Id$
 
+CREATE TABLE AudioDatas (
+  AudioDataID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
+  ItemID INTEGER UNSIGNED NOT NULL,
+  TrackID INTEGER UNSIGNED NOT NULL,
+  LanguageID INTEGER UNSIGNED NOT NULL,
+  PRIMARY KEY(AudioDataID),
+  INDEX AudioDatas_FKIndex1(LanguageID),
+  INDEX AudioDatas_FKIndex2(TrackID),
+  INDEX AudioDatas_FKIndex3(ItemID)
+);
+
+CREATE TABLE BinaryDatas (
+  ItemPicturesID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
+  BinaryDataMimeType VARCHAR(255) NOT NULL,
+  BinaryDataSize INTEGER UNSIGNED NOT NULL,
+  PRIMARY KEY(ItemPicturesID)
+);
+
+CREATE TABLE Categories (
+  CategoryID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
+  CategoryName VARCHAR(255) NOT NULL,
+  PRIMARY KEY(CategoryID)
+);
+
+CREATE TABLE Categories_has_Items (
+  ItemID INTEGER UNSIGNED NOT NULL,
+  CategoryID INTEGER UNSIGNED NOT NULL,
+  INDEX Categories_has_Items_FKIndex1(CategoryID),
+  INDEX Categories_has_Items_FKIndex2(ItemID)
+);
+
+CREATE TABLE Items (
+  ItemID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
+  PublisherID INTEGER UNSIGNED NOT NULL,
+  MediaAgeRestrictionID INTEGER UNSIGNED NOT NULL,
+  MediaCodecID INTEGER UNSIGNED NOT NULL,
+  MediaFormatID INTEGER UNSIGNED NOT NULL,
+  ItemPicturesID INTEGER UNSIGNED NOT NULL,
+  ItemTitle VARCHAR(255) NOT NULL,
+  ItemOriginalTitle VARCHAR(255) NOT NULL,
+  ItemReleaseDate VARCHAR(255) NOT NULL,
+  ItemMediaName VARCHAR(255) NOT NULL,
+  ItemCreationDate TIMESTAMP NOT NULL,
+  ItemModificationDate TIMESTAMP NOT NULL,
+  ItemComment BLOB NOT NULL,
+  ItemQuantity VARCHAR(255) NOT NULL,
+  ItemIdentifier VARCHAR(255) NOT NULL,
+  ItemTypeID INTEGER UNSIGNED NOT NULL,
+  PRIMARY KEY(ItemID),
+  INDEX Items_FKIndex1(ItemTypeID),
+  INDEX Items_FKIndex2(ItemPicturesID),
+  INDEX Items_FKIndex3(MediaFormatID),
+  INDEX Items_FKIndex4(MediaCodecID),
+  INDEX Items_FKIndex5(MediaAgeRestrictionID),
+  INDEX Items_FKIndex6(PublisherID)
+);
+
+CREATE TABLE ItemTypes (
+  ItemTypeID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
+  ItemTypeCode VARCHAR(255) NOT NULL,
+  PRIMARY KEY(ItemTypeID)
+);
+
+CREATE TABLE Languages (
+  LanguageID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
+  LanguageName VARCHAR(255) NOT NULL,
+  LanguageCode VARCHAR(255) NOT NULL,
+  PRIMARY KEY(LanguageID)
+);
 
+CREATE TABLE MediaAgeRestrictions (
+  MediaAgeRestrictionID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
+  MediaAgeRestriction VARCHAR(255) NOT NULL,
+  PRIMARY KEY(MediaAgeRestrictionID)
+);
+
+CREATE TABLE MediaCodecs (
+  MediaCodecID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
+  ItemTypeID INTEGER UNSIGNED NOT NULL,
+  MediaCodecName VARCHAR(255) NOT NULL,
+  PRIMARY KEY(MediaCodecID),
+  INDEX MediaCodecs_FKIndex1(ItemTypeID)
+);
 
+CREATE TABLE MediaFormats (
+  MediaFormatID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
+  ItemTypeID INTEGER UNSIGNED NOT NULL,
+  MediaFormatName VARCHAR(255) NOT NULL,
+  PRIMARY KEY(MediaFormatID),
+  INDEX MediaFormats_FKIndex1(ItemTypeID)
+);
+
+CREATE TABLE MediaStatus (
+  MediaStatusID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
+  MediaStatus VARCHAR(255) NOT NULL,
+  PRIMARY KEY(MediaStatusID)
+);
+
+CREATE TABLE PersonActors (
+  PersonActorID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
+  ItemID INTEGER UNSIGNED NOT NULL,
+  PersonID INTEGER UNSIGNED NOT NULL,
+  PRIMARY KEY(PersonActorID),
+  INDEX PersonActors_FKIndex1(PersonID),
+  INDEX PersonActors_FKIndex2(ItemID)
+);
+
+CREATE TABLE PersonAuthors (
+  PersonAuthorID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
+  ItemID INTEGER UNSIGNED NOT NULL,
+  PersonID INTEGER UNSIGNED NOT NULL,
+  PRIMARY KEY(PersonAuthorID),
+  INDEX PersonAuthors_FKIndex1(PersonID),
+  INDEX PersonAuthors_FKIndex2(ItemID)
+);
+
+CREATE TABLE PersonDirectors (
+  PersonDirectorID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
+  ItemID INTEGER UNSIGNED NOT NULL,
+  PersonID INTEGER UNSIGNED NOT NULL,
+  PRIMARY KEY(PersonDirectorID),
+  INDEX PersonDirectors_FKIndex1(PersonID),
+  INDEX PersonDirectors_FKIndex2(ItemID)
+);
+
+CREATE TABLE Persons (
+  PersonID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
+  PersonFirstName VARCHAR(255) NOT NULL,
+  PersonLastName VARCHAR(255) NOT NULL,
+  PRIMARY KEY(PersonID)
+);
+
+CREATE TABLE PrintDatas (
+  PrintDataID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
+  ItemID INTEGER UNSIGNED NOT NULL,
+  LanguageID INTEGER UNSIGNED NOT NULL,
+  PRIMARY KEY(PrintDataID),
+  INDEX PrintDatas_FKIndex1(LanguageID),
+  INDEX PrintDatas_FKIndex2(ItemID)
+);
+
+CREATE TABLE Publishers (
+  PublisherID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
+  PublisherName VARCHAR(255) NOT NULL,
+  PRIMARY KEY(PublisherID)
+);
+
+CREATE TABLE Tracks (
+  TrackID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
+  TrackName VARCHAR(255) NOT NULL,
+  TrackArtist VARCHAR(255) NOT NULL,
+  TrackLength INTEGER UNSIGNED NOT NULL,
+  PRIMARY KEY(TrackID)
+);
+
+CREATE TABLE TrackSounds (
+  TrackSoundID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
+  LanguageID INTEGER UNSIGNED NOT NULL,
+  PRIMARY KEY(TrackSoundID),
+  INDEX TrackSounds_FKIndex1(LanguageID)
+);
+
+CREATE TABLE TrackSubtitles (
+  LanguageSubtitle INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
+  LanguageID INTEGER UNSIGNED NOT NULL,
+  PRIMARY KEY(LanguageSubtitle),
+  INDEX TrackSubtitles_FKIndex1(LanguageID)
+);
+
+CREATE TABLE VideoDatas (
+  VideoDataID INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
+  ItemID INTEGER UNSIGNED NOT NULL,
+  LanguageID INTEGER UNSIGNED NOT NULL,
+  PRIMARY KEY(VideoDataID),
+  INDEX VideoDatas_FKIndex1(LanguageID),
+  INDEX VideoDatas_FKIndex2(ItemID)
+);
 
 -- EOF -- EOF -- EOF -- EOF -- EOF -- EOF -- EOF -- EOF -- EOF -- EOF -- EOF --



From nobody at sheep.berlios.de  Fri Mar 25 14:18:21 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Fri, 25 Mar 2005 14:18:21 +0100
Subject: [phpmediadb-cvs] phpmediadb-cvs/install insert-data.sql,1.1,1.2
Message-ID: <200503251318.j2PDILh04344@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/install
In directory sheep:/tmp/cvs-serv23199/install

Modified Files:
	insert-data.sql 
Log Message:
* Added iteminformation

Index: insert-data.sql
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/install/insert-data.sql,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -d -r1.1 -r1.2
--- insert-data.sql	17 Mar 2005 20:03:44 -0000	1.1
+++ insert-data.sql	25 Mar 2005 13:18:15 -0000	1.2
@@ -1,7 +1,96 @@
 -- phpMediaDB :: Licensed under GNU-GPL :: http://phpmediadb.berlios.de/
 -- $Id$
 
+--
+-- Daten f?r Tabelle `categories`
+--
 
+INSERT INTO `categories` (`CategoryID`, `CategoryName`) VALUES (1, 'Category_Action'),
+(2, 'Category_Adventure'),
+(3, 'Category_Animation'),
+(4, 'Category_Comedy'),
+(5, 'Category_Crime'),
+(6, 'Category_Documentary'),
+(7, 'Category_Drama'),
+(8, 'Category_Family'),
+(9, 'Category_Fantasy'),
+(10, 'Category_Film-Noir'),
+(11, 'Category_Horror'),
+(12, 'Category_Music'),
+(13, 'Category_Musical'),
+(14, 'Category_Mystery'),
+(15, 'Category_Romance'),
+(16, 'Category_Sci-Fi'),
+(17, 'Category_Short'),
+(18, 'Category_Thriller'),
+(19, 'Category_War'),
+(20, 'Category_Western');
+
+--
+-- Daten f?r Tabelle `itemtypes`
+--
+
+INSERT INTO `itemtypes` (`ItemTypeID`, `ItemTypeCode`) VALUES (1, 'AUDIO'),
+(2, 'VIDEO'),
+(3, 'PRINT');
+
+--
+-- Daten f?r Tabelle `mediaagerestrictions`
+--
+
+INSERT INTO `mediaagerestrictions` (`MediaAgeRestrictionID`, `MediaAgeRestriction`) VALUES (1, 'AgeRestriction_Free'),
+(2, 'AgeRestriction_6Years'),
+(3, 'AgeRestriction_12Years'),
+(4, 'AgeRestriction_16Years'),
+(5, 'AgeRestriction_18Years');
+
+--
+-- Daten f?r Tabelle `mediacodecs`
+--
 
+INSERT INTO `mediacodecs` (`MediaCodecID`, `ItemTypeID`, `MediaCodecName`, `MediaCodecBitrate`) VALUES (1, 1, 'MP3', NULL),
+(2, 1, 'OGG Vorbis', NULL),
+(3, 1, 'WAVE', NULL),
+(4, 1, 'WMA', NULL),
+(5, 1, 'AC3', NULL),
+(6, 1, 'MP3Pro', NULL),
+(7, 1, 'MPEGPlus', NULL),
+(8, 1, 'AAC', NULL),
+(9, 2, 'DivX', NULL),
+(10, 2, 'XviD', NULL),
+(11, 2, 'MPEG4', NULL),
+(12, 2, 'Dirac', NULL),
+(15, 2, 'MPEG2', NULL),
+(14, 2, 'Quicktime', NULL),
+(16, 1, 'AIFF/AIFC', NULL),
+(18, 1, 'PCM', NULL),
+(19, 3, 'PDF', NULL),
+(20, 3, 'Word (DOC)', NULL),
+(21, 3, 'OpenOffice (SWX)', NULL),
+(22, 3, 'RTF', NULL);
+
+--
+-- Daten f?r Tabelle `mediaformats`
+--
+
+INSERT INTO `mediaformats` (`MediaFormatID`, `ItemTypeID`, `MediaFormatName`) VALUES (1, 1, 'Datei'),
+(2, 1, 'AudioCD'),
+(3, 1, 'AudioDVD'),
+(4, 1, 'MiniDisc'),
+(5, 1, 'Kassette'),
+(6, 2, 'DV'),
+(7, 2, 'VHS'),
+(8, 2, 'SVHS'),
+(9, 2, 'DVD'),
+(10, 2, 'Datei'),
+(11, 2, 'VCD'),
+(12, 2, 'SVCD'),
+(13, 2, 'Hi8'),
+(14, 2, 'MiniDV'),
+(15, 2, 'MiniDVD'),
+(16, 2, 'Video8'),
+(17, 3, 'Hardcover'),
+(18, 3, 'Softcover'),
+(19, 3, 'Datei');
 
 -- EOF -- EOF -- EOF -- EOF -- EOF -- EOF -- EOF -- EOF -- EOF -- EOF -- EOF --



From nobody at sheep.berlios.de  Wed Mar 30 11:49:45 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 30 Mar 2005 11:49:45 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_agerestrictions.php,1.8,1.9
Message-ID: <200503300949.j2U9njL07621@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv19168/_source/tier.data

Modified Files:
	class.phpmediadb_data_agerestrictions.php 
Log Message:
* Fixed syntax mistakes

Index: class.phpmediadb_data_agerestrictions.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_agerestrictions.php,v
retrieving revision 1.8
retrieving revision 1.9
diff -u -d -r1.8 -r1.9
--- class.phpmediadb_data_agerestrictions.php	26 Mar 2005 11:25:42 -0000	1.8
+++ class.phpmediadb_data_agerestrictions.php	30 Mar 2005 09:49:43 -0000	1.9
@@ -66,24 +66,23 @@
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
 	 * @return Mixed array $rs contains result of database query
+	 * @return Mixed getMessage() returns the error message
 	 */
 	public function get( $id )
 	{
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement(	'SELECT *
 												FROM MediaAgeRestrictions,
 												WHERE MediaAgeRestrictions.MediaAgeRestrictionID = ?' );
 			$stmt->setString( 1, $id );
 			$rs = $stmt->executeQuery();
-			$this->DATA->SQL->commitTransaction( $conn );
 			return $rs;
 		}
 		catch( Exception $e )
 		{
-			return $this->DATA->SQL->rollbackTransaction( $conn, $e );
+			return $e->getMessage();
 		}
 	}
 
@@ -93,23 +92,21 @@
 	 *
 	 * @access public
 	 * @return Mixed array $rs contains result of database query
+	 * @return Mixed getMessage() returns the error message
 	 */
 	public function getList()
 	{
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement(	'SELECT *
-												FROM MediaAgeRestrictions,
-												WHERE MediaAgeRestrictions.MediaRestrictionID LIKE "%"' );
+												FROM MediaAgeRestrictions' );
 			$rs = $stmt->executeQuery();
-			$this->DATA->SQL->commitTransaction( $conn );
 			return $rs;
 		}
 		catch( Exception $e )
 		{
-			return $this->DATA->SQL->rollbackTransaction( $conn, $e );
+			return $e->getMessage();
 		}
 	}
 
@@ -120,6 +117,7 @@
 	 * @access public
 	 * @param Mixed array $data contains all required data for the sql statement
 	 * @return Integer getLastInsert() returns id from the last created record
+	 * @return Mixed rollbackTransaction() returns the error message
 	 */
 	public function create( $data )
 	{
@@ -147,6 +145,7 @@
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
 	 * @param Mixed array $data contains all required data for the sql statement
+	 * @return Mixed rollbackTransaction() returns the error message
 	 */
 	public function modify( $id, $data )
 	{
@@ -175,6 +174,7 @@
 	 *
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
+	 * @return Mixed rollbackTransaction() returns the error message
 	 */
 	public function delete( $id )
 	{
@@ -202,6 +202,7 @@
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
 	 * @return Boolean $returnValue returns whether the specified record exists
+	 * @return Mixed getMessage() returns the error message
 	 */
 	public function exist( $id )
 	{
@@ -210,7 +211,6 @@
 		try
 		{	
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement( 	'SELECT COUNT(*)
 												FROM MediaAgeRestrictions,
 												WHERE MediaAgeRestrictions.MediaAgeRestrictionID = ?' );
@@ -221,12 +221,12 @@
 			/* check if item exists */
 			if( $rs->get(1) >= 1 )
 				$returnValue = true;
-			$this->DATA->SQL->commitTransaction( $conn );
+				
 			return $returnValue;
 		}
 		catch( Exception $e )
 		{
-			return $this->DATA->SQL->rollbackTransaction( $conn, $e );
+			return $e->getMessage();
 		}
 	}
 



From nobody at sheep.berlios.de  Wed Mar 30 11:49:57 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 30 Mar 2005 11:49:57 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_audios.php,1.7,1.8
Message-ID: <200503300949.j2U9nvL07627@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv19193/_source/tier.data

Modified Files:
	class.phpmediadb_data_audios.php 
Log Message:
* Fixed syntax mistakes

Index: class.phpmediadb_data_audios.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_audios.php,v
retrieving revision 1.7
retrieving revision 1.8
diff -u -d -r1.7 -r1.8
--- class.phpmediadb_data_audios.php	26 Mar 2005 11:28:44 -0000	1.7
+++ class.phpmediadb_data_audios.php	30 Mar 2005 09:49:54 -0000	1.8
@@ -68,14 +68,13 @@
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
 	 * @return Mixed array $rs contains result of database query
-	 * @return Mixed rollbackTransaction() returns the error message
+	 * @return Mixed getMessage() returns the error message
 	 */
 	public function get( $id )
 	{
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement(	'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.ItemPicturesID
 												FROM AudioDatas a,
 												Items b,
@@ -93,12 +92,12 @@
 												AND b.ItemPicturesID = g.ItemPicturesID' );
 			$stmt->setString( 1, $id );
 			$rs = $stmt->executeQuery();
-			$this->DATA->SQL->commitTransaction( $conn );
+			
 			return $rs;
 		}
 		catch( Exception $e )
 		{
-			return $this->DATA->SQL->rollbackTransaction( $conn, $e );
+			return $e->getMessage();
 		}
 	}
 
@@ -109,14 +108,13 @@
 	 *
 	 * @access public
 	 * @return Mixed array $rs contains result of database query
-	 * @return Mixed rollbackTransaction() returns the error message
+	 * @return Mixed getMessage() returns the error message
 	 */
 	public function getList()
 	{
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement(	'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.ItemPicturesID
 												FROM AudioDatas a,
 												Items b,
@@ -124,21 +122,14 @@
 												MediaCodecs d,
 												MediaFormats e,
 												MediaAgeRestrictions f,
-												BinaryDatas g
-												WHERE b.ItemID LIKE "%" 
-												AND a.ItemID = b.ItemID
-												AND b.ItemTypeID = c.ItemTypeID
-												AND b.MediaCodecID = d.MediaCodecID
-												AND b.MediaFormatID = e.MediaFormatID
-												AND b.MediaAgeRestrictionID = f.MediaAgeRestrictionID
-												AND b.ItemPicturesID = g.ItemPicturesID' );
+												BinaryDatas g' );
 			$rs = $stmt->executeQuery();
-			$this->DATA->SQL->commitTransaction( $conn );
+			
 			return $rs;
 		}
 		catch( Exception $e )
 		{
-			return $this->DATA->SQL->rollbackTransaction( $conn, $e );
+			return $e->getMessage();
 		}
 	}
 
@@ -291,7 +282,7 @@
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
 	 * @return Boolean $returnValue returns whether the specified record exists
-	 * @return Mixed rollbackTransaction() returns the error message
+	 * @return Mixed getMessage() returns the error message
 	 */
 	public function exist( $id )
 	{
@@ -301,9 +292,8 @@
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement(	'SELECT COUNT(*)
-												FROM Items,
+												FROM Items
 												WHERE Items.ItemID = ?' );
 			$stmt->setString( 1, $id );
 			$rs = $stmt->executeQuery( ResultSet::FETCHMODE_NUM );
@@ -312,12 +302,12 @@
 			/* check if item exists */
 			if( $rs->get(1) >= 1 )
 				$returnValue = true;
-			$this->DATA->SQL->commitTransaction( $conn );
+				
 			return $returnValue;
 		}
 		catch( Exception $e )
 		{
-			return $this->DATA->SQL->rollbackTransaction( $conn, $e );
+			return $e->getMessage();
 		}
 	}
 



From nobody at sheep.berlios.de  Wed Mar 30 11:50:10 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 30 Mar 2005 11:50:10 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_categories.php,1.5,1.6
Message-ID: <200503300950.j2U9oAL07640@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv19227/_source/tier.data

Modified Files:
	class.phpmediadb_data_categories.php 
Log Message:
* Fixed syntax mistakes

Index: class.phpmediadb_data_categories.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_categories.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- class.phpmediadb_data_categories.php	26 Mar 2005 11:38:14 -0000	1.5
+++ class.phpmediadb_data_categories.php	30 Mar 2005 09:50:06 -0000	1.6
@@ -66,25 +66,24 @@
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
 	 * @return Mixed array $rs contains result of database query
-	 * @return Mixed rollbackTransaction() returns the error message
+	 * @return Mixed getMessage() returns the error message
 	 */
 	public function get( $id )
 	{
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement(	'SELECT *
-												FROM Categories,
+												FROM Categories
 												WHERE Categories.CategoryID = ?' );
 			$stmt->setString( 1, $id );
 			$rs = $stmt->executeQuery();
-			$this->DATA->SQL->commitTransaction( $conn );
+			
 			return $rs;
 		}
 		catch( Exception $e )
 		{
-			return $this->DATA->SQL->rollbackTransaction( $conn, $e );
+			return $e->getMessage();
 		}
 	}
 
@@ -94,24 +93,22 @@
 	 *
 	 * @access public
 	 * @return Mixed array $rs contains result of database query
-	 * @return Mixed rollbackTransaction() returns the error message
+	 * @return Mixed getMessage() returns the error message
 	 */
 	public function getList()
 	{
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement(	'SELECT *
-												FROM Categories,
-												WHERE Categories.CategoryID LIKE "%"' );
+												FROM Categories' );
 			$rs = $stmt->executeQuery();
-			$this->DATA->SQL->commmitTransaction( $conn );
+			
 			return $rs;
 		}
 		catch( Exception $e )
 		{
-			return $this->DATA->SQL->rollbackTransaction( $conn, $e );
+			return $e->getMessage();
 		}
 	}
 
@@ -205,7 +202,7 @@
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
 	 * @return Boolean $returnValue returns whether the specified record exists
-	 * @return Mixed rollbackTransaction() returns the error message
+	 * @return Mixed getMessage() returns the error message
 	 */
 	public function exist( $id )
 	{
@@ -215,9 +212,8 @@
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement(	'SELECT COUNT(*)
-												FROM Categories,
+												FROM Categories
 												WHERE Categories.CategoryID = ?' );
 			$stmt->setString( 1, $id );
 			$rs = $stmt->executeQuery( ResultSet::FETCHMODE_NUM );
@@ -227,12 +223,11 @@
 			if( $rs->get(1) >= 1 )
 				$returnValue = true;
 			
-			$this->DATA->SQL->commitTransaction( $conn );
 			return $returnValue;
 		}
 		catch( Exception $e )
 		{
-			return $this->DATA->SQL->rollbackTransaction( $conn, $e );
+			return $e->getMessage();
 		}
 	}
 
@@ -278,7 +273,6 @@
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement(	'DELETE FROM Categories_has_Items
 												WHERE Categories_has_Items.ItemID = ?' );
 			$stmt->setString( 1, $id );



From nobody at sheep.berlios.de  Wed Mar 30 11:50:22 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 30 Mar 2005 11:50:22 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_codecs.php,1.9,1.10
Message-ID: <200503300950.j2U9oML07651@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv19266/_source/tier.data

Modified Files:
	class.phpmediadb_data_codecs.php 
Log Message:
* Fixed syntax mistakes

Index: class.phpmediadb_data_codecs.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_codecs.php,v
retrieving revision 1.9
retrieving revision 1.10
diff -u -d -r1.9 -r1.10
--- class.phpmediadb_data_codecs.php	26 Mar 2005 11:43:01 -0000	1.9
+++ class.phpmediadb_data_codecs.php	30 Mar 2005 09:50:19 -0000	1.10
@@ -66,25 +66,23 @@
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
 	 * @return Mixed array $rs contains result of database query
-	 * @return Mixed rollbackTransaction() returns the error message
+	 * @return Mixed getMessage() returns the error message
 	 */
 	public function get( $id )
 	{
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement(	'SELECT *
-												FROM MediaCodecs,
+												FROM MediaCodecs
 												WHERE MediaCodecs.MediaCodecID = ?' );
 			$stmt->setString( 1, $id );
 			$rs = $stmt->executeQuery();
-			$this->DATA->SQL->commitTransaction( $conn );
 			return $rs;
 		}
 		catch( Exception $e )
 		{
-			return $this->DATA->SQL->rollbackTransaction( $conn, $e );
+			return $e->getMessage();
 		}
 	}
 
@@ -94,24 +92,22 @@
 	 *
 	 * @access public
 	 * @return Mixed array $rs contains result of database query
-	 * @return Mixed rollbackTransaction() returns the error message
+	 * @return Mixed getMessage() returns the error message
 	 */
 	public function getList()
 	{
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement(	'SELECT *
-												FROM MediaCodecs,
-												WHERE MediaCodecs.MediaCodecID LIKE "%"' );
+												FROM MediaCodecs' );
 			$rs = $stmt->executeQuery();
-			$this->DATA->SQL->commitTransaction( $conn );
+			
 			return $rs;
 		}
 		catch( Exception $e )
 		{
-			return $this->DATA->SQL->rollbackTransaction( $conn, $e );
+			return $e->getMessage();
 		}
 	}
 
@@ -213,7 +209,7 @@
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
 	 * @return Boolean $returnValue returns whether the specified record exists
-	 * @return Mixed rollbackTransaction() returns the error message
+	 * @return Mixed getMessage() returns the error message
 	 */
 	public function exist( $id )
 	{
@@ -223,9 +219,8 @@
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement(	'SELECT COUNT(*)
-												FROM MediaCodecs,
+												FROM MediaCodecs
 												WHERE MediaCodecs.MediaCodecID = ?' );
 			$stmt->setString( 1, $id );
 			$rs = $stmt->executeQuery( ResultSet::FETCHMODE_NUM );
@@ -234,12 +229,12 @@
 			/* check if item exists */
 			if( $rs->get(1) >= 1 )
 				$returnValue = true;
-			$this->DATA->SQL->commitTransaction( $conn );
+				
 			return $returnValue;
 		}
 		catch( Exception $e )
 		{
-			return $this->DATA->SQL->rollbackTransaction( $conn, $e );
+			return $e->getMessage();
 		}
 	}
 



From nobody at sheep.berlios.de  Wed Mar 30 11:50:32 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 30 Mar 2005 11:50:32 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_formats.php,1.9,1.10
Message-ID: <200503300950.j2U9oWL07660@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv19293/_source/tier.data

Modified Files:
	class.phpmediadb_data_formats.php 
Log Message:
* Fixed syntax mistakes

Index: class.phpmediadb_data_formats.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_formats.php,v
retrieving revision 1.9
retrieving revision 1.10
diff -u -d -r1.9 -r1.10
--- class.phpmediadb_data_formats.php	26 Mar 2005 11:44:37 -0000	1.9
+++ class.phpmediadb_data_formats.php	30 Mar 2005 09:50:29 -0000	1.10
@@ -66,25 +66,24 @@
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
 	 * @return Mixed array $rs contains result of database query
-	 * @return Mixed rollbackTransaction() returns the error message
+	 * @return Mixed getMessage() returns the error message
 	 */
 	public function get( $id )
 	{
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement(	'SELECT *
-												FROM MediaFormats,
+												FROM MediaFormats
 												WHERE MediaFormats.MediaFormatID = ?' );
 			$stmt->setString( 1, $id );
 			$rs = $stmt->executeQuery();
-			$this->DATA->SQL->commitTransaction( $conn );
+			
 			return $rs;
 		}
 		catch( Exception $e )
 		{
-			return $this->DATA->SQL->rollbackTransaction( $conn, $e );
+			return $e->getMessage();
 		}
 	}
 
@@ -94,24 +93,22 @@
 	 *
 	 * @access public
 	 * @return Mixed array $rs contains result of database query
-	 * @return Mixed rollbackTransaction() returns the error message
+	 * @return Mixed getMessage() returns the error message
 	 */
 	public function getList()
 	{
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement(	'SELECT *
-												FROM MediaFormats,
-												WHERE MediaFormats.MediaFormatID LIKE "%"' );
+												FROM MediaFormats' );
 			$rs = $stmt->executeQuery();
-			$this->DATA->SQL->commitTransaction( $conn );
+			
 			return $rs;
 		}
 		catch( Exception $e )
 		{
-			return $this->DATA->SQL->rollbackTransaction( $conn, $e );
+			return $e->getMessage();
 		}
 	}
 
@@ -210,7 +207,7 @@
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
 	 * @return Boolean $returnValue returns whether the specified record exists
-	 * @return Mixed rollbackTransaction() returns the error message
+	 * @return Mixed getMessage() returns the error message
 	 */
 	public function exist( $id )
 	{
@@ -220,9 +217,8 @@
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement(	'SELECT COUNT(*)
-												FROM MediaFormats,
+												FROM MediaFormats
 												WHERE MediaFormats.MediaFormatID = ?' );
 			$stmt->setString( 1, $id );
 			$rs = $stmt->executeQuery( ResultSet::FETCHMODE_NUM );
@@ -231,12 +227,12 @@
 			/* check if item exists */
 			if( $rs->get(1) >= 1 )
 				$returnValue = true;
-			$this->DATA->SQL->commitTransaction( $conn );
+				
 			return $returnValue;
 		}
 		catch( Exception $e )
 		{
-			return $this->DATA->SQL->rollbackTransaction( $conn, $e );
+			return $e->getMessage();
 		}
 	}
 



From nobody at sheep.berlios.de  Wed Mar 30 11:50:43 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 30 Mar 2005 11:50:43 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_prints.php,1.7,1.8
Message-ID: <200503300950.j2U9ohL07668@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv19321/_source/tier.data

Modified Files:
	class.phpmediadb_data_prints.php 
Log Message:
* Fixed syntax mistakes

Index: class.phpmediadb_data_prints.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_prints.php,v
retrieving revision 1.7
retrieving revision 1.8
diff -u -d -r1.7 -r1.8
--- class.phpmediadb_data_prints.php	26 Mar 2005 11:50:13 -0000	1.7
+++ class.phpmediadb_data_prints.php	30 Mar 2005 09:50:41 -0000	1.8
@@ -67,14 +67,13 @@
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
 	 * @return Mixed array $rs contains result of database query
-	 * @return Mixed rollbackTransaction() returns the error message
+	 * @return Mixed getMessage() returns the error message
 	 */
 	public function get( $id )
 	{
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement(	'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.ItemPicturesID
 												FROM PrintDatas a,
 												Items b,
@@ -92,12 +91,12 @@
 												AND b.ItemPicturesID = g.ItemPicturesID' );
 			$stmt->setString( 1, $id );
 			$rs = $stmt->executeQuery();
-			$this->DATA->SQL->commitTransaction( $conn );
+			
 			return $rs;
 		}
 		catch ( Exception $e )
 		{
-			return $this->DATA->SQL->rollbackTransaction( $conn, $e);
+			return $e->getMessage();
 		}
 	}
 
@@ -108,14 +107,13 @@
 	 *
 	 * @access public
 	 * @return Mixed array $rs contains result of database query
-	 * @return Mixed rollbackTransaction() returns the error message
+	 * @return Mixed getMessage() returns the error message
 	 */
 	public function getList()
 	{
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement(	'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.ItemPicturesID
 												FROM PrintDatas a,
 												Items b,
@@ -123,21 +121,14 @@
 												MediaCodecs d,
 												MediaFormats e,
 												MediaAgeRestrictions f,
-												BinaryDatas g
-												WHERE b.ItemID LIKE "%"
-												AND a.ItemID = b.ItemID
-												AND b.ItemTypeID = c.ItemTypeID
-												AND b.MediaCodecID = d.MediaCodecID
-												AND b.MediaFormatID = e.MediaFormatID
-												AND b.MediaAgeRestrictionID = f.MediaAgeRestrictionID
-												AND b.ItemPicturesID = g.ItemPicturesID' );
+												BinaryDatas g' );
 			$rs = $stmt->executeQuery();
-			$this->DATA->SQL->commitTransaction( $conn );
+			
 			return $rs;
 		}
 		catch( Exception $e )
 		{
-			return $this->DATA->SQL->rollbackTransaction( $conn, $e );
+			return $e->getMessage();
 		}
 	}
 
@@ -290,7 +281,7 @@
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
 	 * @return Boolean $returnValue returns whether the specified record exists
-	 * @return Mixed rollbackTransaction() returns the error message
+	 * @return Mixed getMessage() returns the error message
 	 */
 	public function exist( $id )
 	{
@@ -300,9 +291,8 @@
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement(	'SELECT COUNT(*)
-												FROM PrintDatas,
+												FROM PrintDatas
 												WHERE PrintDatas.PrintDataID = ?' );
 			$stmt->setString( 1, $id );
 			$rs = $stmt->executeQuery( ResultSet::FETCHMODE_NUM );
@@ -310,13 +300,13 @@
 			
 			/* check if item exists */
 			if( $rs->get(1) >= 1 )
-				$returnValue = true;	
-			$this->DATA->SQL->commitTransaction( $conn );	
+				$returnValue = true;
+			
 			return $returnValue;
 		}
 		catch( Exception $e )
 		{
-			return $this->DATA->SQL->rollbackTransaction( $conn, $e );
+			return $e->getMessage();
 		}
 	}
 



From nobody at sheep.berlios.de  Wed Mar 30 11:50:54 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 30 Mar 2005 11:50:54 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_status.php,1.8,1.9
Message-ID: <200503300950.j2U9osL07676@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv19369/_source/tier.data

Modified Files:
	class.phpmediadb_data_status.php 
Log Message:
* Fixed syntax mistakes

Index: class.phpmediadb_data_status.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_status.php,v
retrieving revision 1.8
retrieving revision 1.9
diff -u -d -r1.8 -r1.9
--- class.phpmediadb_data_status.php	26 Mar 2005 11:51:34 -0000	1.8
+++ class.phpmediadb_data_status.php	30 Mar 2005 09:50:52 -0000	1.9
@@ -66,25 +66,24 @@
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
 	 * @return Mixed array $rs contains result of database query
-	 * @return Mixed rollbackTransaction() returns the error message
+	 * @return Mixed getMessage() returns the error message
 	 */
 	public function get( $id )
 	{
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement(	'SELECT *
-												FROM MediaStatus,
+												FROM MediaStatus
 												WHERE MediaStatus.MediaStatusID = ?' );
 			$stmt->setString( 1, $MediaStatusID );
 			$rs = $stmt->executeQuery();
-			$this->DATA->SQL->commitTransaction( $conn );
+			
 			return $rs;
 		}
 		catch( Exception $e )
 		{
-			return $this->DATA->SQL->rollbackTransaction( $conn, $e );
+			return $e->getMessage();
 		}
 	}
 
@@ -94,24 +93,22 @@
 	 *
 	 * @access public
 	 * @return Mixed array $rs contains result of database query
-	 * @return Mixed rollbackTransaction() returns the error message
+	 * @return Mixed getMessage() returns the error message
 	 */
 	public function getList()
 	{
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement(	'SELECT *
-												FROM MediaStatus,
-												WHERE MediaStatus.MediaStatusID LIKE "%"' );
+												FROM MediaStatus' );
 			$rs = $stmt->executeQuery();
-			$this->DATA->SQL->commitTransaction( $conn );
+			
 			return $rs;
 		}
 		catch( Exception $e )
 		{
-			return $this->DATA->SQL->rollbackTransaction( $conn, $e );
+			return $e->getMessage();
 		}
 	}
 
@@ -213,7 +210,7 @@
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
 	 * @return Boolean $returnValue returns whether the specified record exists
-	 * @return Mixed rollbackTransaction() returns the error message
+	 * @return Mixed getMessage() returns the error message
 	 */
 	public function exist( $id )
 	{
@@ -223,9 +220,8 @@
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement(	'SELECT COUNT(*)
-												FROM MediaStatus,
+												FROM MediaStatus
 												WHERE MediaStatus.MediaStatusID = ?' );
 			$stmt->setString( 1, $id );
 			$rs = $stmt->executeQuery( ResultSet::FETCHMODE_NUM );
@@ -233,13 +229,13 @@
 			
 			/* check if item exists */
 			if( $rs->get(1) >= 1 )
-				$returnValue = true;	
-			$this->DATA->SQL->commitTransaction( $conn );
+				$returnValue = true;
+			
 			return $returnValue;
 		}
 		catch( Exception $e )
 		{
-			return $this->DATA->SQL->rollbackTransaction( $conn, $e );
+			return $e->getMessage();
 		}
 	}
 



From nobody at sheep.berlios.de  Wed Mar 30 11:51:06 2005
From: nobody at sheep.berlios.de (bruf)
Date: Wed, 30 Mar 2005 11:51:06 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_videos.php,1.8,1.9
Message-ID: <200503300951.j2U9p6L07690@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv19400/_source/tier.data

Modified Files:
	class.phpmediadb_data_videos.php 
Log Message:
* Fixed syntax mistakes

Index: class.phpmediadb_data_videos.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_videos.php,v
retrieving revision 1.8
retrieving revision 1.9
diff -u -d -r1.8 -r1.9
--- class.phpmediadb_data_videos.php	26 Mar 2005 11:52:16 -0000	1.8
+++ class.phpmediadb_data_videos.php	30 Mar 2005 09:51:04 -0000	1.9
@@ -67,14 +67,13 @@
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
 	 * @return Mixed array $rs contains result of database query
-	 * @return Mixed rollbackTransaction() returns the error message
+	 * @return Mixed getMessage() returns the error message
 	 */
 	public function get( $id )
 	{
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement(	'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.ItemPicturesID
 												FROM VideoDatas a,
 												Items b,
@@ -92,12 +91,12 @@
 												AND b.ItemPicturesID = g.ItemPicturesID' );
 			$stmt->setString( 1, $id );
 			$rs = $stmt->executeQuery();
-			$this->DATA->SQL->commitTransaction( $conn );
+			
 			return $rs;
 		}
 		catch( Exception $e )
 		{
-			return $this->DATA->SQL->rollbackTransaction( $conn, $e );
+			return $e->getMessage();
 		}
 	}
 
@@ -108,14 +107,13 @@
 	 *
 	 * @access public
 	 * @return Mixed array $rs contains result of database query
-	 * @return Mixed rollbackTransaction() returns the error message
+	 * @return Mixed getMessagen() returns the error message
 	 */
 	public function getList()
 	{
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement(	'SELECT a.*, b.*, c.*, d.*, e.*, f.*, g.ItemPicturesID
 												FROM VideoDatas a,
 												Items b,
@@ -123,21 +121,14 @@
 												MediaCodecs d,
 												MediaFormats e,
 												MediaAgeRestrictions f,
-												BinaryDatas g
-												WHERE b.ItemID LIKE "%"
-												AND a.ItemID = b.ItemID
-												AND b.ItemTypeID = c.ItemTypeID
-												AND b.MediaCodecID = d.MediaCodecID
-												AND b.MediaFormatID = e.MediaFormatID
-												AND b.MediaAgeRestrictionID = f.MediaAgeRestrictionID
-												AND b.ItemPicturesID = g.ItemPicturesID' );
+												BinaryDatas g' );
 			$rs = $stmt->executeQuery();
-			$this->DATA->SQL->commitTransaction( $conn );
+			
 			return $rs;
 		}
 		catch( Exception $e )
 		{
-			return $this->DATA->SQL->rollbackTransaction( $conn, $e );
+			return $e->getMessage();
 		}
 	}
 
@@ -290,7 +281,7 @@
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
 	 * @return Boolean $returnValue returns whether the specified record exists
-	 * @return Mixed rollbackTransaction() returns the error message
+	 * @return Mixed getMessage() returns the error message
 	 */
 	public function exist( $id )
 	{
@@ -300,9 +291,8 @@
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$this->DATA->SQL->openTransaction( $conn );
 			$stmt = $conn->prepareStatement(	'SELECT COUNT(*)
-												FROM VideoDatas,
+												FROM VideoDatas
 												WHERE VideoDatas.VideoDataID = ?' );
 			$stmt->setString( 1, $videoDataId );
 			$rs = $stmt->executeQuery( ResultSet::FETCHMODE_NUM );
@@ -311,12 +301,12 @@
 			/* check if item exists */
 			if( $rs->get(1) >= 1 )
 				$returnValue = true;
-			$this->DATA->SQL->commitTransaction( $conn );
+			
 			return $returnValue;
 		}
 		catch( Exception $e )
 		{
-			return $this->DATA->SQL->rollbackTransaction( $conn, $e );
+			return $e->getMessage();
 		}
 	}
 



From nobody at sheep.berlios.de  Thu Mar 31 12:12:12 2005
From: nobody at sheep.berlios.de (bruf)
Date: Thu, 31 Mar 2005 12:12:12 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_agerestrictions.php,1.9,1.10
Message-ID: <200503311012.j2VACCL21681@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv32535/_source/tier.data

Modified Files:
	class.phpmediadb_data_agerestrictions.php 
Log Message:
* Added method generateDataArray()

Index: class.phpmediadb_data_agerestrictions.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_agerestrictions.php,v
retrieving revision 1.9
retrieving revision 1.10
diff -u -d -r1.9 -r1.10
--- class.phpmediadb_data_agerestrictions.php	30 Mar 2005 09:49:43 -0000	1.9
+++ class.phpmediadb_data_agerestrictions.php	31 Mar 2005 10:12:10 -0000	1.10
@@ -65,7 +65,7 @@
 	 *
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
-	 * @return Mixed array $rs contains result of database query
+	 * @return Mixed array generateDataArray() returns the results of database query
 	 * @return Mixed getMessage() returns the error message
 	 */
 	public function get( $id )
@@ -74,11 +74,11 @@
 		{
 			$conn = $this->DATA->SQL->getConnection();
 			$stmt = $conn->prepareStatement(	'SELECT *
-												FROM MediaAgeRestrictions,
+												FROM MediaAgeRestrictions
 												WHERE MediaAgeRestrictions.MediaAgeRestrictionID = ?' );
 			$stmt->setString( 1, $id );
 			$rs = $stmt->executeQuery();
-			return $rs;
+			return $this->DATA->SQL->generateDataArray( $rs );
 		}
 		catch( Exception $e )
 		{
@@ -91,7 +91,7 @@
 	 * This function returns all records from the table MediaAgeRestrictions
 	 *
 	 * @access public
-	 * @return Mixed array $rs contains result of database query
+	 * @return Mixed array generateDataArray() returns the results of database query
 	 * @return Mixed getMessage() returns the error message
 	 */
 	public function getList()
@@ -102,7 +102,7 @@
 			$stmt = $conn->prepareStatement(	'SELECT *
 												FROM MediaAgeRestrictions' );
 			$rs = $stmt->executeQuery();
-			return $rs;
+			return $this->DATA->SQL->generateDataArray( $rs );
 		}
 		catch( Exception $e )
 		{
@@ -212,7 +212,7 @@
 		{	
 			$conn = $this->DATA->SQL->getConnection();
 			$stmt = $conn->prepareStatement( 	'SELECT COUNT(*)
-												FROM MediaAgeRestrictions,
+												FROM MediaAgeRestrictions
 												WHERE MediaAgeRestrictions.MediaAgeRestrictionID = ?' );
 			$stmt->setString( 1, $id );
 			$rs = $stmt->executeQuery( ResultSet::FETCHMODE_NUM );



From nobody at sheep.berlios.de  Thu Mar 31 12:12:22 2005
From: nobody at sheep.berlios.de (bruf)
Date: Thu, 31 Mar 2005 12:12:22 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_audios.php,1.8,1.9
Message-ID: <200503311012.j2VACML21693@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv32606/_source/tier.data

Modified Files:
	class.phpmediadb_data_audios.php 
Log Message:
* Added method generateDataArray()

Index: class.phpmediadb_data_audios.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_audios.php,v
retrieving revision 1.8
retrieving revision 1.9
diff -u -d -r1.8 -r1.9
--- class.phpmediadb_data_audios.php	30 Mar 2005 09:49:54 -0000	1.8
+++ class.phpmediadb_data_audios.php	31 Mar 2005 10:12:20 -0000	1.9
@@ -67,7 +67,7 @@
 	 *
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
-	 * @return Mixed array $rs contains result of database query
+	 * @return Mixed array generateDataArray() returns the results of database query
 	 * @return Mixed getMessage() returns the error message
 	 */
 	public function get( $id )
@@ -93,7 +93,7 @@
 			$stmt->setString( 1, $id );
 			$rs = $stmt->executeQuery();
 			
-			return $rs;
+			return $this->DATA->SQL->generateDataArray( $rs );
 		}
 		catch( Exception $e )
 		{
@@ -107,7 +107,7 @@
 	 * and all required data from the other tables
 	 *
 	 * @access public
-	 * @return Mixed array $rs contains result of database query
+	 * @return Mixed array generateDataArray() returns the results of database query
 	 * @return Mixed getMessage() returns the error message
 	 */
 	public function getList()
@@ -125,7 +125,7 @@
 												BinaryDatas g' );
 			$rs = $stmt->executeQuery();
 			
-			return $rs;
+			return $this->DATA->SQL->generateDataArray( $rs );
 		}
 		catch( Exception $e )
 		{



From nobody at sheep.berlios.de  Thu Mar 31 12:12:33 2005
From: nobody at sheep.berlios.de (bruf)
Date: Thu, 31 Mar 2005 12:12:33 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_categories.php,1.6,1.7
Message-ID: <200503311012.j2VACXL21700@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv32632/_source/tier.data

Modified Files:
	class.phpmediadb_data_categories.php 
Log Message:
* Added method generateDataArray()

Index: class.phpmediadb_data_categories.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_categories.php,v
retrieving revision 1.6
retrieving revision 1.7
diff -u -d -r1.6 -r1.7
--- class.phpmediadb_data_categories.php	30 Mar 2005 09:50:06 -0000	1.6
+++ class.phpmediadb_data_categories.php	31 Mar 2005 10:12:31 -0000	1.7
@@ -65,7 +65,7 @@
 	 *
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
-	 * @return Mixed array $rs contains result of database query
+	 * @return Mixed array generateDataArray() returns the results of database query
 	 * @return Mixed getMessage() returns the error message
 	 */
 	public function get( $id )
@@ -79,7 +79,7 @@
 			$stmt->setString( 1, $id );
 			$rs = $stmt->executeQuery();
 			
-			return $rs;
+			return $this->DATA->SQL->generateDataArray( $rs );
 		}
 		catch( Exception $e )
 		{
@@ -92,7 +92,7 @@
 	 * This function returns all records from the table Categories
 	 *
 	 * @access public
-	 * @return Mixed array $rs contains result of database query
+	 * @return Mixed array generateDataArray() returns the results of database query
 	 * @return Mixed getMessage() returns the error message
 	 */
 	public function getList()
@@ -104,7 +104,7 @@
 												FROM Categories' );
 			$rs = $stmt->executeQuery();
 			
-			return $rs;
+			return $this->DATA->SQL->generateDataArray( $rs );
 		}
 		catch( Exception $e )
 		{



From nobody at sheep.berlios.de  Thu Mar 31 12:12:44 2005
From: nobody at sheep.berlios.de (bruf)
Date: Thu, 31 Mar 2005 12:12:44 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_codecs.php,1.10,1.11
Message-ID: <200503311012.j2VACiL21711@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv32658/_source/tier.data

Modified Files:
	class.phpmediadb_data_codecs.php 
Log Message:
* Added method generateDataArray()

Index: class.phpmediadb_data_codecs.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_codecs.php,v
retrieving revision 1.10
retrieving revision 1.11
diff -u -d -r1.10 -r1.11
--- class.phpmediadb_data_codecs.php	30 Mar 2005 09:50:19 -0000	1.10
+++ class.phpmediadb_data_codecs.php	31 Mar 2005 10:12:42 -0000	1.11
@@ -65,7 +65,7 @@
 	 *
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
-	 * @return Mixed array $rs contains result of database query
+	 * @return Mixed array generateDataArray() returns the results of database query
 	 * @return Mixed getMessage() returns the error message
 	 */
 	public function get( $id )
@@ -78,7 +78,8 @@
 												WHERE MediaCodecs.MediaCodecID = ?' );
 			$stmt->setString( 1, $id );
 			$rs = $stmt->executeQuery();
-			return $rs;
+			
+			return $this->DATA->SQL->generateDataArray( $rs );
 		}
 		catch( Exception $e )
 		{
@@ -91,7 +92,7 @@
 	 * This function returns all records from the table MediaCodecs
 	 *
 	 * @access public
-	 * @return Mixed array $rs contains result of database query
+	 * @return Mixed array generateDataArray() returns the results of database query
 	 * @return Mixed getMessage() returns the error message
 	 */
 	public function getList()
@@ -103,7 +104,7 @@
 												FROM MediaCodecs' );
 			$rs = $stmt->executeQuery();
 			
-			return $rs;
+			return $this->DATA->SQL->generateDataArray( $rs );
 		}
 		catch( Exception $e )
 		{



From nobody at sheep.berlios.de  Thu Mar 31 12:12:54 2005
From: nobody at sheep.berlios.de (bruf)
Date: Thu, 31 Mar 2005 12:12:54 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_formats.php,1.10,1.11
Message-ID: <200503311012.j2VACsL21717@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv32682/_source/tier.data

Modified Files:
	class.phpmediadb_data_formats.php 
Log Message:
* Added method generateDataArray()

Index: class.phpmediadb_data_formats.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_formats.php,v
retrieving revision 1.10
retrieving revision 1.11
diff -u -d -r1.10 -r1.11
--- class.phpmediadb_data_formats.php	30 Mar 2005 09:50:29 -0000	1.10
+++ class.phpmediadb_data_formats.php	31 Mar 2005 10:12:52 -0000	1.11
@@ -65,7 +65,7 @@
 	 *
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
-	 * @return Mixed array $rs contains result of database query
+	 * @return Mixed array generateDataArray() returns the results of database query
 	 * @return Mixed getMessage() returns the error message
 	 */
 	public function get( $id )
@@ -79,7 +79,7 @@
 			$stmt->setString( 1, $id );
 			$rs = $stmt->executeQuery();
 			
-			return $rs;
+			return $this->DATA->SQL->generateDataArray( $rs );
 		}
 		catch( Exception $e )
 		{
@@ -92,7 +92,7 @@
 	 * This function returns all records from the table MediaStatus
 	 *
 	 * @access public
-	 * @return Mixed array $rs contains result of database query
+	 * @return Mixed array generateDataArray() returns the results of database query
 	 * @return Mixed getMessage() returns the error message
 	 */
 	public function getList()
@@ -104,7 +104,7 @@
 												FROM MediaFormats' );
 			$rs = $stmt->executeQuery();
 			
-			return $rs;
+			return $this->DATA->SQL->generateDataArray( $rs );
 		}
 		catch( Exception $e )
 		{



From nobody at sheep.berlios.de  Thu Mar 31 12:13:05 2005
From: nobody at sheep.berlios.de (bruf)
Date: Thu, 31 Mar 2005 12:13:05 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_prints.php,1.8,1.9
Message-ID: <200503311013.j2VAD5L21736@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv32731/_source/tier.data

Modified Files:
	class.phpmediadb_data_prints.php 
Log Message:
* Added method generateDataArray()

Index: class.phpmediadb_data_prints.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_prints.php,v
retrieving revision 1.8
retrieving revision 1.9
diff -u -d -r1.8 -r1.9
--- class.phpmediadb_data_prints.php	30 Mar 2005 09:50:41 -0000	1.8
+++ class.phpmediadb_data_prints.php	31 Mar 2005 10:13:03 -0000	1.9
@@ -66,7 +66,7 @@
 	 *
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
-	 * @return Mixed array $rs contains result of database query
+	 * @return Mixed array generateDataArray() returns the results of database query
 	 * @return Mixed getMessage() returns the error message
 	 */
 	public function get( $id )
@@ -92,7 +92,7 @@
 			$stmt->setString( 1, $id );
 			$rs = $stmt->executeQuery();
 			
-			return $rs;
+			return $this->DATA->SQL->generateDataArray( $rs );
 		}
 		catch ( Exception $e )
 		{
@@ -106,7 +106,7 @@
 	 * and all required data from the other tables
 	 *
 	 * @access public
-	 * @return Mixed array $rs contains result of database query
+	 * @return Mixed array generateDataArray() returns the results of database query
 	 * @return Mixed getMessage() returns the error message
 	 */
 	public function getList()
@@ -124,7 +124,7 @@
 												BinaryDatas g' );
 			$rs = $stmt->executeQuery();
 			
-			return $rs;
+			return $this->DATA->SQL->generateDataArray( $rs );
 		}
 		catch( Exception $e )
 		{



From nobody at sheep.berlios.de  Thu Mar 31 12:13:16 2005
From: nobody at sheep.berlios.de (bruf)
Date: Thu, 31 Mar 2005 12:13:16 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_sql.php,1.7,1.8
Message-ID: <200503311013.j2VADGL21742@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv32756/_source/tier.data

Modified Files:
	class.phpmediadb_data_sql.php 
Log Message:
* Added method generateDataArray()

Index: class.phpmediadb_data_sql.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_sql.php,v
retrieving revision 1.7
retrieving revision 1.8
diff -u -d -r1.7 -r1.8
--- class.phpmediadb_data_sql.php	27 Mar 2005 00:30:00 -0000	1.7
+++ class.phpmediadb_data_sql.php	31 Mar 2005 10:13:14 -0000	1.8
@@ -152,6 +152,25 @@
 	}
 	
 //-----------------------------------------------------------------------------
+	/**
+	 * This function generates an array an fill in the data from the sql query
+	 *
+	 * @access public
+	 * @param String $rs is the resultset from the sql query
+	 * @return Mixed $dataArray contains the results of the sql query
+	*/
+	public function generateDataArray( $rs )
+	{
+
+		while ($rs->next())
+		{
+			$dataArray[] = $rs->GetRow();
+		}
+
+		return $dataArray;
+	}
+		
+//-----------------------------------------------------------------------------
 } /* end of class phpmediadb_data_sql */
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---
 ?>



From nobody at sheep.berlios.de  Thu Mar 31 12:13:35 2005
From: nobody at sheep.berlios.de (bruf)
Date: Thu, 31 Mar 2005 12:13:35 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_status.php,1.9,1.10
Message-ID: <200503311013.j2VADZL21752@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv278/_source/tier.data

Modified Files:
	class.phpmediadb_data_status.php 
Log Message:
* Added method generateDataArray()

Index: class.phpmediadb_data_status.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_status.php,v
retrieving revision 1.9
retrieving revision 1.10
diff -u -d -r1.9 -r1.10
--- class.phpmediadb_data_status.php	30 Mar 2005 09:50:52 -0000	1.9
+++ class.phpmediadb_data_status.php	31 Mar 2005 10:13:32 -0000	1.10
@@ -65,7 +65,7 @@
 	 *
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
-	 * @return Mixed array $rs contains result of database query
+	 * @return Mixed array generateDataArray() returns the results of database query
 	 * @return Mixed getMessage() returns the error message
 	 */
 	public function get( $id )
@@ -79,7 +79,7 @@
 			$stmt->setString( 1, $MediaStatusID );
 			$rs = $stmt->executeQuery();
 			
-			return $rs;
+			return $this->DATA->SQL->generateDataArray( $rs );
 		}
 		catch( Exception $e )
 		{
@@ -92,7 +92,7 @@
 	 * This function returns all records from the table MediaStatus
 	 *
 	 * @access public
-	 * @return Mixed array $rs contains result of database query
+	 * @return Mixed array generateDataArray() returns the results of database queryry
 	 * @return Mixed getMessage() returns the error message
 	 */
 	public function getList()
@@ -104,7 +104,7 @@
 												FROM MediaStatus' );
 			$rs = $stmt->executeQuery();
 			
-			return $rs;
+			return $this->DATA->SQL->generateDataArray( $rs );
 		}
 		catch( Exception $e )
 		{



From nobody at sheep.berlios.de  Thu Mar 31 12:13:45 2005
From: nobody at sheep.berlios.de (bruf)
Date: Thu, 31 Mar 2005 12:13:45 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_videos.php,1.9,1.10
Message-ID: <200503311013.j2VADjL21758@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv367/_source/tier.data

Modified Files:
	class.phpmediadb_data_videos.php 
Log Message:
* Added method generateDataArray()

Index: class.phpmediadb_data_videos.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_videos.php,v
retrieving revision 1.9
retrieving revision 1.10
diff -u -d -r1.9 -r1.10
--- class.phpmediadb_data_videos.php	30 Mar 2005 09:51:04 -0000	1.9
+++ class.phpmediadb_data_videos.php	31 Mar 2005 10:13:43 -0000	1.10
@@ -66,7 +66,7 @@
 	 *
 	 * @access public
 	 * @param Integer $id contains specified id for the sql statement
-	 * @return Mixed array $rs contains result of database query
+	 * @return Mixed array generateDataArray() returns the results of database query
 	 * @return Mixed getMessage() returns the error message
 	 */
 	public function get( $id )
@@ -92,7 +92,7 @@
 			$stmt->setString( 1, $id );
 			$rs = $stmt->executeQuery();
 			
-			return $rs;
+			return $this->DATA->SQL->generateDataArray( $rs );
 		}
 		catch( Exception $e )
 		{
@@ -106,7 +106,7 @@
 	 * and all required data from the other tables
 	 *
 	 * @access public
-	 * @return Mixed array $rs contains result of database query
+	 * @return Mixed array generateDataArray() returns the results of database query
 	 * @return Mixed getMessagen() returns the error message
 	 */
 	public function getList()
@@ -124,7 +124,7 @@
 												BinaryDatas g' );
 			$rs = $stmt->executeQuery();
 			
-			return $rs;
+			return $this->DATA->SQL->generateDataArray( $rs );
 		}
 		catch( Exception $e )
 		{



From nobody at sheep.berlios.de  Thu Mar 31 17:19:27 2005
From: nobody at sheep.berlios.de (bruf)
Date: Thu, 31 Mar 2005 17:19:27 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_codecs.php,1.11,1.12
Message-ID: <200503311519.j2VFJRL04251@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv7033/_source/tier.data

Modified Files:
	class.phpmediadb_data_codecs.php 
Log Message:
* Added method getListByItem()

Index: class.phpmediadb_data_codecs.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_codecs.php,v
retrieving revision 1.11
retrieving revision 1.12
diff -u -d -r1.11 -r1.12
--- class.phpmediadb_data_codecs.php	31 Mar 2005 10:12:42 -0000	1.11
+++ class.phpmediadb_data_codecs.php	31 Mar 2005 15:19:24 -0000	1.12
@@ -114,6 +114,34 @@
 
 //-----------------------------------------------------------------------------
 	/**
+	 * This function returns all records from the table MediaCodecs for a specified ItemType
+	 *
+	 * @access public
+	 * @param Integer $id contains specified id for the sql statement
+	 * @return Mixed array generateDataArray() returns the results of database query
+	 * @return Mixed getMessage() returns the error message
+	 */
+	public function getListByItem( $id )
+	{
+		try
+		{
+			$conn = $this->DATA->SQL->getConnection();
+			$stmt = $conn->prepareStatement(	'SELECT MediaCodecs.*
+												FROM MediaCodecs, Items
+												WHERE Items.ItemTypeID = ?' );
+			$stmt->setString( 1, $id );
+			$rs = $stmt->executeQuery();
+			
+			return $this->DATA->SQL->generateDataArray( $rs );
+		}
+		catch( Exception $e )
+		{
+			return $e->getMessage();
+		}
+	}
+	
+//-----------------------------------------------------------------------------	
+	/**
 	 * This function creates a new record in the table MediaCodecs
 	 *
 	 * @access public



From nobody at sheep.berlios.de  Thu Mar 31 17:19:36 2005
From: nobody at sheep.berlios.de (bruf)
Date: Thu, 31 Mar 2005 17:19:36 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_formats.php,1.11,1.12
Message-ID: <200503311519.j2VFJaL04260@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv7547/_source/tier.data

Modified Files:
	class.phpmediadb_data_formats.php 
Log Message:
* Added method getListByItem()

Index: class.phpmediadb_data_formats.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_formats.php,v
retrieving revision 1.11
retrieving revision 1.12
diff -u -d -r1.11 -r1.12
--- class.phpmediadb_data_formats.php	31 Mar 2005 10:12:52 -0000	1.11
+++ class.phpmediadb_data_formats.php	31 Mar 2005 15:19:34 -0000	1.12
@@ -111,7 +111,34 @@
 			return $e->getMessage();
 		}
 	}
-
+//-----------------------------------------------------------------------------
+	/**
+	 * This function returns all records from the table MediaFormats for a specified ItemType
+	 *
+	 * @access public
+	 * @param Integer $id contains specified id for the sql statement
+	 * @return Mixed array generateDataArray() returns the results of database query
+	 * @return Mixed getMessage() returns the error message
+	 */
+	public function getListByItem( $id )
+	{
+		try
+		{
+			$conn = $this->DATA->SQL->getConnection();
+			$stmt = $conn->prepareStatement(	'SELECT MediaFormats.*
+												FROM MediaFormats, Items
+												WHERE Items.ItemTypeID = ?' );
+			$stmt->setString( 1, $id );
+			$rs = $stmt->executeQuery();
+			
+			return $this->DATA->SQL->generateDataArray( $rs );
+		}
+		catch( Exception $e )
+		{
+			return $e->getMessage();
+		}
+	}
+	
 //-----------------------------------------------------------------------------
 	/**
 	 * This function creates a new records in the table MediaStatus



From nobody at sheep.berlios.de  Thu Mar 31 17:38:07 2005
From: nobody at sheep.berlios.de (bruf)
Date: Thu, 31 Mar 2005 17:38:07 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_codecs.php,1.12,1.13
Message-ID: <200503311538.j2VFc7L04680@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv32718/_source/tier.data

Modified Files:
	class.phpmediadb_data_codecs.php 
Log Message:
* Renamed getListByItem to getListByItemType
* Fixed syntax mistake

Index: class.phpmediadb_data_codecs.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_codecs.php,v
retrieving revision 1.12
retrieving revision 1.13
diff -u -d -r1.12 -r1.13
--- class.phpmediadb_data_codecs.php	31 Mar 2005 15:19:24 -0000	1.12
+++ class.phpmediadb_data_codecs.php	31 Mar 2005 15:38:04 -0000	1.13
@@ -121,14 +121,14 @@
 	 * @return Mixed array generateDataArray() returns the results of database query
 	 * @return Mixed getMessage() returns the error message
 	 */
-	public function getListByItem( $id )
+	public function getListByItemType( $id )
 	{
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$stmt = $conn->prepareStatement(	'SELECT MediaCodecs.*
-												FROM MediaCodecs, Items
-												WHERE Items.ItemTypeID = ?' );
+			$stmt = $conn->prepareStatement(	'SELECT *
+												FROM MediaCodecs
+												WHERE ItemTypeID = ?' );
 			$stmt->setString( 1, $id );
 			$rs = $stmt->executeQuery();
 			



From nobody at sheep.berlios.de  Thu Mar 31 17:38:19 2005
From: nobody at sheep.berlios.de (bruf)
Date: Thu, 31 Mar 2005 17:38:19 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.data class.phpmediadb_data_formats.php,1.12,1.13
Message-ID: <200503311538.j2VFcJL04684@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data
In directory sheep:/tmp/cvs-serv50/_source/tier.data

Modified Files:
	class.phpmediadb_data_formats.php 
Log Message:
* Renamed getListByItem to getListByItemType
* Fixed syntax mistake

Index: class.phpmediadb_data_formats.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.data/class.phpmediadb_data_formats.php,v
retrieving revision 1.12
retrieving revision 1.13
diff -u -d -r1.12 -r1.13
--- class.phpmediadb_data_formats.php	31 Mar 2005 15:19:34 -0000	1.12
+++ class.phpmediadb_data_formats.php	31 Mar 2005 15:38:17 -0000	1.13
@@ -120,14 +120,14 @@
 	 * @return Mixed array generateDataArray() returns the results of database query
 	 * @return Mixed getMessage() returns the error message
 	 */
-	public function getListByItem( $id )
+	public function getListByItemType( $id )
 	{
 		try
 		{
 			$conn = $this->DATA->SQL->getConnection();
-			$stmt = $conn->prepareStatement(	'SELECT MediaFormats.*
-												FROM MediaFormats, Items
-												WHERE Items.ItemTypeID = ?' );
+			$stmt = $conn->prepareStatement(	'SELECT *
+												FROM MediaFormats
+												WHERE ItemTypeID = ?' );
 			$stmt->setString( 1, $id );
 			$rs = $stmt->executeQuery();
 			



From nobody at sheep.berlios.de  Thu Mar 31 17:53:01 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 31 Mar 2005 17:53:01 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/admin item-session.php,1.7,1.8
Message-ID: <200503311553.j2VFr1L04935@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/admin
In directory sheep:/tmp/cvs-serv26569/admin

Modified Files:
	item-session.php 
Log Message:
itemShow
 * Added display of categories, formats, agerestrictions and codecs

all functions
 * Added functionallity to process all itemtypes

Index: item-session.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/admin/item-session.php,v
retrieving revision 1.7
retrieving revision 1.8
diff -u -d -r1.7 -r1.8
--- item-session.php	24 Mar 2005 20:43:02 -0000	1.7
+++ item-session.php	31 Mar 2005 15:52:58 -0000	1.8
@@ -26,12 +26,10 @@
 	@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'INPUTSIZE', $itemSize );
 	
 	/* get database-vars */
-	/*
 	$categories			= $PHPMEDIADB->BUSINESS->CATEGORIES->getList();
-	$formats			= $PHPMEDIADB->BUSINESS->FORMAT->getList();
+	$formats			= $PHPMEDIADB->BUSINESS->FORMATS->getListByItemType( $sessionItem['type'] );
 	$ageRestrictions	= $PHPMEDIADB->BUSINESS->AGERESTRICTIONS->getList();
-	$codecs				= $PHPMEDIADB->BUSINESS->CODECS->getList();
-	*/
+	$codecs				= $PHPMEDIADB->BUSINESS->CODECS->getListByItemType( $sessionItem['type'] );
 	
 	/* assign database-vars */
 	@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'DATA.CATEGORIES', $categories );
@@ -115,10 +113,56 @@
 	
 	
 		case(PHPMEDIADB_ITEM_VIDEO):
+		/* check data */
+		$errorData = $PHPMEDIADB->BUSINESS->VIDEOS->check( $sessionItem['data'] );
+			
+		if( $errorData === NULL || $errorData === TRUE )
+		{
+			/* no error occurred :) */
+			if( $sessionItem['id'] === NULL )
+				$status = $PHPMEDIADB->BUSINESS->VIDEOS->create( $sessionItem['data'] );
+			else 
+				$status = $PHPMEDIADB->BUSINESS->VIDEOS->modify( $sessionItem['id'], $sessionItem['data'] );
+				
+			@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'MESSAGE', $PHPMEDIADB->PRESENTATION->I18N->getLanguageString( 'MESSAGE_SUCCESS_SAVE' ) );
+			$PHPMEDIADB->PRESENTATION->HTMLSERVICE->displayMain( 'body.message.tpl' );
+			$PHPMEDIADB->PRESENTATION->SESSION->unregister( 'sessionitem' );
+			die();		
+		}
+		else
+		{
+			/* too bad, error occurred */
+			@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'INPUTERROR', $errorData );
+			itemShow( $sessionItem );
+			die();
+		}
 		break;
 	
 	
 		case(PHPMEDIADB_ITEM_PRINT):
+		/* check data */
+		$errorData = $PHPMEDIADB->BUSINESS->PRINTS->check( $sessionItem['data'] );
+			
+		if( $errorData === NULL || $errorData === TRUE )
+		{
+			/* no error occurred :) */
+			if( $sessionItem['id'] === NULL )
+				$status = $PHPMEDIADB->BUSINESS->PRINTS->create( $sessionItem['data'] );
+			else 
+				$status = $PHPMEDIADB->BUSINESS->PRINTS->modify( $sessionItem['id'], $sessionItem['data'] );
+				
+			@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'MESSAGE', $PHPMEDIADB->PRESENTATION->I18N->getLanguageString( 'MESSAGE_SUCCESS_SAVE' ) );
+			$PHPMEDIADB->PRESENTATION->HTMLSERVICE->displayMain( 'body.message.tpl' );
+			$PHPMEDIADB->PRESENTATION->SESSION->unregister( 'sessionitem' );
+			die();		
+		}
+		else
+		{
+			/* too bad, error occurred */
+			@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'INPUTERROR', $errorData );
+			itemShow( $sessionItem );
+			die();
+		}
 		break;
 	}
 }



From nobody at sheep.berlios.de  Thu Mar 31 17:53:30 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 31 Mar 2005 17:53:30 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration/templates body.item.audio.formular.tpl,1.3,1.4
Message-ID: <200503311553.j2VFrUL04943@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/templates
In directory sheep:/tmp/cvs-serv26582/_source/tier.configuration/templates

Modified Files:
	body.item.audio.formular.tpl 
Log Message:
* Changed to display all iteminformations like codecs

Index: body.item.audio.formular.tpl
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/templates/body.item.audio.formular.tpl,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -d -r1.3 -r1.4
--- body.item.audio.formular.tpl	16 Mar 2005 14:57:41 -0000	1.3
+++ body.item.audio.formular.tpl	31 Mar 2005 15:53:28 -0000	1.4
@@ -1,6 +1,6 @@
 <form method="post">
 <div>
-<h1>{$I18N.MEDIA_DATA|default:"%MEDIA_DATA%"}</h1>
+<h1>{$I18N.MEDIA_DATA_AUDIO|default:"%MEDIA_DATA_AUDIO%"}</h1>
 {if $INPUTERROR.general eq "1"}<span class="phpmediadb-body-inputerror">{$I18N.ERROR_OCCURRED|default:"%ERROR_OCCURRED%"} <a href="#errorlist">{$I18N.ERROR_LISTLINK|default:"%ERROR_LISTLINK%"}</a></span><br />{/if}
 <table>
 	<colgroup>
@@ -50,16 +50,16 @@
 		<td>{$I18N.MEDIA_CATEGORY|default:"%MEDIA_CATEGORY%"}</td>
 		<td>
 			<select name="itemdata[Categories][]" size="5" multiple="true">
-{foreach from=$DATA.CATEGORIES item=currentDataItem key=currentDataKey}
+{foreach from=$DATA.CATEGORIES item=currentDataItem}
 {assign var="TEMP" value="0"}
-	{foreach from=$ITEMDATA.Categories item=currentItemItem key=currentItemKey}
-			{if $currentItemItem eq $currentDataKey }
+	{foreach from=$ITEMDATA.Categories item=currentItemItem}
+			{if $currentItemItem eq $currentDataItem.categoryid }
 				{assign var="TEMP" value="1"}
-				<option selected="true" value="{$currentDataKey}">{$currentDataItem}</option>
+				<option selected="true" value="{$currentDataItem.categoryid}">{$currentDataItem.categoryname}</option>
 			{/if}
 	{/foreach}
 			{if $TEMP eq "0" }
-				<option value="{$currentDataKey}">{$currentDataItem}</option>
+				<option value="{$currentDataItem.categoryid}">{$currentDataItem.categoryname}</option>
 			{/if}
 {/foreach}
 			</select>
@@ -80,10 +80,10 @@
 		<td>
 			<select name="itemdata[MediaFormatID]">
 {foreach from=$DATA.MEDIAFORMATS item=currentDataItem key=currentDataKey}
-	{if $currentDataKey eq $ITEMDATA.MediaFormat }
-				<option selected="true" value="{$currentDataKey}">{$currentDataItem}</option>
+	{if $currentDataItem.mediaformatid eq $ITEMDATA.MediaFormatID }
+				<option selected="true" value="{$currentDataItem.mediaformatid}">{$currentDataItem.mediaformatname}</option>
 	{else}
-				<option value="{$currentDataKey}">{$currentDataItem}</option>
+				<option value="{$currentDataItem.mediaformatid}">{$currentDataItem.mediaformatname}</option>
 	{/if}
 {/foreach}
 			</select>
@@ -111,11 +111,11 @@
 		<td>{$I18N.MEDIA_AGERESTRICTION|default:"%MEDIA_AGERESTRICTION%"}</td>
 		<td>
 			<select name="itemdata[MediaAgeRestrictionID]">
-{foreach from=$DATA.AGERESTRICTIONS item=currentDataItem key=currentDataKey}
-	{if $currentDataKey eq $ITEMDATA.AGERESTRICTION }
-				<option selected="true" value="{$currentDataKey}">{$currentDataItem}</option>
+{foreach from=$DATA.AGERESTRICTIONS item=currentDataItem}
+	{if $currentDataItem.mediaagerestrictionid eq $ITEMDATA.MediaAgeRestrictionID }
+				<option selected="true" value="{$currentDataItem.mediaagerestrictionid}">{$currentDataItem.mediaagerestriction}</option>
 	{else}
-				<option value="{$currentDataKey}">{$currentDataItem}</option>
+				<option value="{$currentDataItem.mediaagerestrictionid}">{$currentDataItem.mediaagerestriction}</option>
 	{/if}
 {/foreach}
 			</select>
@@ -126,12 +126,12 @@
 	<tr>
 		<td>{$I18N.MEDIA_CODEC|default:"%MEDIA_CODEC%"}</td>
 		<td>
-			<select name="itemdata[MediaCodecID ]">
-{foreach from=$DATA.CODECS item=currentDataItem key=currentDataKey}
-	{if $currentDataKey eq $ITEMDATA.CODEC }
-				<option selected="true" value="{$currentDataKey}">{$currentDataItem}</option>
+			<select name="itemdata[MediaCodecID]">
+{foreach from=$DATA.CODECS item=currentDataItem}
+	{if $currentDataItem.mediacodecid eq $ITEMDATA.MediaCodecID }
+				<option selected="true" value="{$currentDataItem.mediacodecid}">{$currentDataItem.mediacodecname}</option>
 	{else}
-				<option value="{$currentDataKey}">{$currentDataItem}</option>
+				<option value="{$currentDataItem.mediacodecid}">{$currentDataItem.mediacodecname}</option>
 	{/if}
 {/foreach}
 			</select>



From nobody at sheep.berlios.de  Thu Mar 31 17:53:49 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 31 Mar 2005 17:53:49 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.configuration/templates body.item.audio.show.tpl,NONE,1.1 body.item.print.formular.tpl,NONE,1.1 body.item.print.show.tpl,NONE,1.1 body.item.video.formular.tpl,NONE,1.1 body.item.video.show.tpl,NONE,1.1
Message-ID: <200503311553.j2VFrnL04947@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.configuration/templates
In directory sheep:/tmp/cvs-serv26610/_source/tier.configuration/templates

Added Files:
	body.item.audio.show.tpl body.item.print.formular.tpl 
	body.item.print.show.tpl body.item.video.formular.tpl 
	body.item.video.show.tpl 
Log Message:
* Initial revision

--- NEW FILE: body.item.audio.show.tpl ---

--- NEW FILE: body.item.print.formular.tpl ---
<form method="post">
<div>
<h1>{$I18N.MEDIA_DATA_PRINT|default:"%MEDIA_DATA_PRINT%"}</h1>
{if $INPUTERROR.general eq "1"}<span class="phpmediadb-body-inputerror">{$I18N.ERROR_OCCURRED|default:"%ERROR_OCCURRED%"} <a href="#errorlist">{$I18N.ERROR_LISTLINK|default:"%ERROR_LISTLINK%"}</a></span><br />{/if}
<table>
	<colgroup>
		<col/>
	</colgroup>
	<tr>
		<td>{$I18N.MEDIA_TITLE|default:"%MEDIA_TITLE%"}</td>
		<td>
			<input type="text" name="itemdata[ItemTitle]" maxlength="{$INPUTSIZE.ItemTitle|default:"255"}" value="{$ITEMDATA.ItemTitle}" />
			{if $INPUTERROR.flag.ItemTitle eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>

	<tr>
		<td>{$I18N.MEDIA_ORIGINALTITLE|default:"%MEDIA_ORIGINALTITLE%"}</td>
		<td>
			<input type="text" name="itemdata[ItemOriginalTitle]" maxlength="{$INPUTSIZE.ItemOriginalTitle|default:"255"}" value="{$ITEMDATA.ItemOriginalTitle}" />
			{if $INPUTERROR.flag.ItemOriginalTitle eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>

	<tr>
		<td>{$I18N.MEDIA_MEDIANAME|default:"%MEDIA_MEDIANAME%"}</td>
		<td>
			<input type="text" name="itemdata[ItemMediaName]" maxlength="{$INPUTSIZE.ItemMediaName|default:"255"}" value="{$ITEMDATA.ItemMediaName}" />
			{if $INPUTERROR.flag.ItemMediaName eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>
	
	<tr>
		<td>{$I18N.MEDIA_IDENTIFICATION|default:"%MEDIA_IDENTIFICATION%"}</td>
		<td>
			<input type="text" name="itemdata[ItemIdentification]" maxlength="{$INPUTSIZE.ItemIdentification|default:"255"}" value="{$ITEMDATA.ItemIdentification}" />
			{if $INPUTERROR.flag.ItemIdentification eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>

	<tr>
		<td>{$I18N.MEDIA_RELEASEYEAR|default:"%MEDIA_RELEASEYEAR%"}</td>
		<td>
			<input type="text" name="itemdata[ItemRelease]" maxlength="{$INPUTSIZE.ItemRelease|default:"4"}" value="{$ITEMDATA.ItemRelease}" />
			{if $INPUTERROR.flag.ItemRelease eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>
	
	<tr>
		<td>{$I18N.MEDIA_CATEGORY|default:"%MEDIA_CATEGORY%"}</td>
		<td>
			<select name="itemdata[Categories][]" size="5" multiple="true">
{foreach from=$DATA.CATEGORIES item=currentDataItem}
{assign var="TEMP" value="0"}
	{foreach from=$ITEMDATA.Categories item=currentItemItem}
			{if $currentItemItem eq $currentDataItem.categoryid }
				{assign var="TEMP" value="1"}
				<option selected="true" value="{$currentDataItem.categoryid}">{$currentDataItem.categoryname}</option>
			{/if}
	{/foreach}
			{if $TEMP eq "0" }
				<option value="{$currentDataItem.categoryid}">{$currentDataItem.categoryname}</option>
			{/if}
{/foreach}
			</select>
			{if $INPUTERROR.flag.Categories eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>
	
	<tr>
		<td>{$I18N.MEDIA_MEDIASIZE|default:"%MEDIA_MEDIASIZE%"}</td>
		<td>
			<input type="text" name="itemdata[ItemMediaSize]" maxlength="{$INPUTSIZE.ItemMediaSize|default:"255"}" value="{$ITEMDATA.ItemMediaSize}" />
			{if $INPUTERROR.flag.ItemMediaSize eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>
	
	<tr>
		<td>{$I18N.MEDIA_FORMAT|default:"%MEDIA_FORMAT%"}</td>
		<td>
			<select name="itemdata[MediaFormatID]">
{foreach from=$DATA.MEDIAFORMATS item=currentDataItem key=currentDataKey}
	{if $currentDataItem.mediaformatid eq $ITEMDATA.MediaFormatID }
				<option selected="true" value="{$currentDataItem.mediaformatid}">{$currentDataItem.mediaformatname}</option>
	{else}
				<option value="{$currentDataItem.mediaformatid}">{$currentDataItem.mediaformatname}</option>
	{/if}
{/foreach}
			</select>
			{if $INPUTERROR.flag.MediaFormatID eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>

	<tr>
		<td>{$I18N.MEDIA_IMAGE|default:"%MEDIA_IMAGE%"}</td>
		<td>
			<img src="getbinary.php?itemid={$ITEMDATA.ID}" /><br />
			<input type="file" name="itemdata[BinaryData]" />
		</td>
	</tr>

	<tr>
		<td>{$I18N.MEDIA_PUBLISHER|default:"%MEDIA_PUBLISHER%"}</td>
		<td>
			<input type="text" name="itemdata[PublisherName]" maxlength="{$INPUTSIZE.PublisherName|default:"255"}" value="{$ITEMDATA.PublisherName}" />
			{if $INPUTERROR.flag.PublisherName eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>

	<tr>
		<td>{$I18N.MEDIA_AGERESTRICTION|default:"%MEDIA_AGERESTRICTION%"}</td>
		<td>
			<select name="itemdata[MediaAgeRestrictionID]">
{foreach from=$DATA.AGERESTRICTIONS item=currentDataItem}
	{if $currentDataItem.mediaagerestrictionid eq $ITEMDATA.MediaAgeRestrictionID }
				<option selected="true" value="{$currentDataItem.mediaagerestrictionid}">{$currentDataItem.mediaagerestriction}</option>
	{else}
				<option value="{$currentDataItem.mediaagerestrictionid}">{$currentDataItem.mediaagerestriction}</option>
	{/if}
{/foreach}
			</select>
			{if $INPUTERROR.flag.MediaAgeRestrictionID eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>

	<tr>
		<td>{$I18N.MEDIA_CODEC|default:"%MEDIA_CODEC%"}</td>
		<td>
			<select name="itemdata[MediaCodecID]">
{foreach from=$DATA.CODECS item=currentDataItem}
	{if $currentDataItem.mediacodecid eq $ITEMDATA.MediaCodecID }
				<option selected="true" value="{$currentDataItem.mediacodecid}">{$currentDataItem.mediacodecname}</option>
	{else}
				<option value="{$currentDataItem.mediacodecid}">{$currentDataItem.mediacodecname}</option>
	{/if}
{/foreach}
			</select>
			{if $INPUTERROR.flag.MediaCodecID eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>

	<tr>
		<td>{$I18N.MEDIA_QUANTITY|default:"%MEDIA_QUANTITY%"}</td>
		<td>
			<input type="text" name="itemdata[ItemQuantity]" maxlength="{$INPUTSIZE.ItemQuantity|default:"255"}" value="{$ITEMDATA.ItemQuantity}" />
			{if $INPUTERROR.flag.ItemQuantity eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>
	
	<tr>
		<td></td>
		<td><input type="reset" value="{$I18N.FORM_RESET|default:"%FORM_RESET%"}" /> <input type="submit" name="buttonsave" value="{$I18N.FORM_SUBMIT|default:"%FORM_SUBMIT%"}"/></td>
	</tr>
	
	<tr>
		<td></td>
	</tr>
	
	<tr>
		<td></td>
		<td>
			{$I18N.MEDIA_CREATIONDATE|default:"%MEDIA_CREATIONDATE%"}: {$ITEMDATA.ItemCreationDate|date_format:"%A, %B %e, %Y %H:%M:%S"|default:$I18N.NOT_SET|default:"%NOT_SET%"} <br />
			{$I18N.MEDIA_CREATIONDATE|default:"%MEDIA_MODIFICATIONDATE%"}: {$ITEMDATA.ItemModificationDate|date_format:"%A, %B %e, %Y %H:%M:%S"|default:$I18N.NOT_SET|default:"%NOT_SET%"}
		</td>
	</tr>
	
{if $INPUTERROR.general eq "1"}
	<tr>
		<td colspan="2">
		<a name="errorlist"><h2 class="phpmediadb-body-inputerror">{$I18N.ERROR_TITLE|default:"%ERROR_TITLE%"}</h2></a>
		 <ul>
 	{foreach from=$INPUTERROR.message item=curr_id key=curr_key}
		{if $curr_id.size  eq "1"}<li class="phpmediadb-body-inputerror">{$I18N.INPUT_FIELD} {$curr_key}: {$I18N.ERROR_INPUTSIZE|default:"%ERROR_INPUTSIZE%"}</li>{/if}
		{if $curr_id.regex eq "1"}<li class="phpmediadb-body-inputerror">{$I18N.INPUT_FIELD} {$curr_key}: {$I18N.ERROR_INPUTREGEX|default:"%ERROR_INPUTREGEX%"}</li>{/if}
{/foreach}
		 </ul>
		</td>
	</tr>
{/if}

</table>
</div>
</form>
--- NEW FILE: body.item.print.show.tpl ---

--- NEW FILE: body.item.video.formular.tpl ---
<form method="post">
<div>
<h1>{$I18N.MEDIA_DATA_VIDEO|default:"%MEDIA_DATA_VIDEO%"}</h1>
{if $INPUTERROR.general eq "1"}<span class="phpmediadb-body-inputerror">{$I18N.ERROR_OCCURRED|default:"%ERROR_OCCURRED%"} <a href="#errorlist">{$I18N.ERROR_LISTLINK|default:"%ERROR_LISTLINK%"}</a></span><br />{/if}
<table>
	<colgroup>
		<col/>
	</colgroup>
	<tr>
		<td>{$I18N.MEDIA_TITLE|default:"%MEDIA_TITLE%"}</td>
		<td>
			<input type="text" name="itemdata[ItemTitle]" maxlength="{$INPUTSIZE.ItemTitle|default:"255"}" value="{$ITEMDATA.ItemTitle}" />
			{if $INPUTERROR.flag.ItemTitle eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>

	<tr>
		<td>{$I18N.MEDIA_ORIGINALTITLE|default:"%MEDIA_ORIGINALTITLE%"}</td>
		<td>
			<input type="text" name="itemdata[ItemOriginalTitle]" maxlength="{$INPUTSIZE.ItemOriginalTitle|default:"255"}" value="{$ITEMDATA.ItemOriginalTitle}" />
			{if $INPUTERROR.flag.ItemOriginalTitle eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>

	<tr>
		<td>{$I18N.MEDIA_MEDIANAME|default:"%MEDIA_MEDIANAME%"}</td>
		<td>
			<input type="text" name="itemdata[ItemMediaName]" maxlength="{$INPUTSIZE.ItemMediaName|default:"255"}" value="{$ITEMDATA.ItemMediaName}" />
			{if $INPUTERROR.flag.ItemMediaName eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>
	
	<tr>
		<td>{$I18N.MEDIA_IDENTIFICATION|default:"%MEDIA_IDENTIFICATION%"}</td>
		<td>
			<input type="text" name="itemdata[ItemIdentification]" maxlength="{$INPUTSIZE.ItemIdentification|default:"255"}" value="{$ITEMDATA.ItemIdentification}" />
			{if $INPUTERROR.flag.ItemIdentification eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>

	<tr>
		<td>{$I18N.MEDIA_RELEASEYEAR|default:"%MEDIA_RELEASEYEAR%"}</td>
		<td>
			<input type="text" name="itemdata[ItemRelease]" maxlength="{$INPUTSIZE.ItemRelease|default:"4"}" value="{$ITEMDATA.ItemRelease}" />
			{if $INPUTERROR.flag.ItemRelease eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>
	
	<tr>
		<td>{$I18N.MEDIA_CATEGORY|default:"%MEDIA_CATEGORY%"}</td>
		<td>
			<select name="itemdata[Categories][]" size="5" multiple="true">
{foreach from=$DATA.CATEGORIES item=currentDataItem}
{assign var="TEMP" value="0"}
	{foreach from=$ITEMDATA.Categories item=currentItemItem}
			{if $currentItemItem eq $currentDataItem.categoryid }
				{assign var="TEMP" value="1"}
				<option selected="true" value="{$currentDataItem.categoryid}">{$currentDataItem.categoryname}</option>
			{/if}
	{/foreach}
			{if $TEMP eq "0" }
				<option value="{$currentDataItem.categoryid}">{$currentDataItem.categoryname}</option>
			{/if}
{/foreach}
			</select>
			{if $INPUTERROR.flag.Categories eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>
	
	<tr>
		<td>{$I18N.MEDIA_MEDIASIZE|default:"%MEDIA_MEDIASIZE%"}</td>
		<td>
			<input type="text" name="itemdata[ItemMediaSize]" maxlength="{$INPUTSIZE.ItemMediaSize|default:"255"}" value="{$ITEMDATA.ItemMediaSize}" />
			{if $INPUTERROR.flag.ItemMediaSize eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>
	
	<tr>
		<td>{$I18N.MEDIA_FORMAT|default:"%MEDIA_FORMAT%"}</td>
		<td>
			<select name="itemdata[MediaFormatID]">
{foreach from=$DATA.MEDIAFORMATS item=currentDataItem key=currentDataKey}
	{if $currentDataItem.mediaformatid eq $ITEMDATA.MediaFormatID }
				<option selected="true" value="{$currentDataItem.mediaformatid}">{$currentDataItem.mediaformatname}</option>
	{else}
				<option value="{$currentDataItem.mediaformatid}">{$currentDataItem.mediaformatname}</option>
	{/if}
{/foreach}
			</select>
			{if $INPUTERROR.flag.MediaFormatID eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>

	<tr>
		<td>{$I18N.MEDIA_IMAGE|default:"%MEDIA_IMAGE%"}</td>
		<td>
			<img src="getbinary.php?itemid={$ITEMDATA.ID}" /><br />
			<input type="file" name="itemdata[BinaryData]" />
		</td>
	</tr>

	<tr>
		<td>{$I18N.MEDIA_PUBLISHER|default:"%MEDIA_PUBLISHER%"}</td>
		<td>
			<input type="text" name="itemdata[PublisherName]" maxlength="{$INPUTSIZE.PublisherName|default:"255"}" value="{$ITEMDATA.PublisherName}" />
			{if $INPUTERROR.flag.PublisherName eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>

	<tr>
		<td>{$I18N.MEDIA_AGERESTRICTION|default:"%MEDIA_AGERESTRICTION%"}</td>
		<td>
			<select name="itemdata[MediaAgeRestrictionID]">
{foreach from=$DATA.AGERESTRICTIONS item=currentDataItem}
	{if $currentDataItem.mediaagerestrictionid eq $ITEMDATA.MediaAgeRestrictionID }
				<option selected="true" value="{$currentDataItem.mediaagerestrictionid}">{$currentDataItem.mediaagerestriction}</option>
	{else}
				<option value="{$currentDataItem.mediaagerestrictionid}">{$currentDataItem.mediaagerestriction}</option>
	{/if}
{/foreach}
			</select>
			{if $INPUTERROR.flag.MediaAgeRestrictionID eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>

	<tr>
		<td>{$I18N.MEDIA_CODEC|default:"%MEDIA_CODEC%"}</td>
		<td>
			<select name="itemdata[MediaCodecID]">
{foreach from=$DATA.CODECS item=currentDataItem}
	{if $currentDataItem.mediacodecid eq $ITEMDATA.MediaCodecID }
				<option selected="true" value="{$currentDataItem.mediacodecid}">{$currentDataItem.mediacodecname}</option>
	{else}
				<option value="{$currentDataItem.mediacodecid}">{$currentDataItem.mediacodecname}</option>
	{/if}
{/foreach}
			</select>
			{if $INPUTERROR.flag.MediaCodecID eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>

	<tr>
		<td>{$I18N.MEDIA_QUANTITY|default:"%MEDIA_QUANTITY%"}</td>
		<td>
			<input type="text" name="itemdata[ItemQuantity]" maxlength="{$INPUTSIZE.ItemQuantity|default:"255"}" value="{$ITEMDATA.ItemQuantity}" />
			{if $INPUTERROR.flag.ItemQuantity eq "1" }<span class="phpmediadb-body-inputerror">{$I18N.ERROR_FLAG|default:"*"}</span>{/if}
		</td>
	</tr>
	
	<tr>
		<td></td>
		<td><input type="reset" value="{$I18N.FORM_RESET|default:"%FORM_RESET%"}" /> <input type="submit" name="buttonsave" value="{$I18N.FORM_SUBMIT|default:"%FORM_SUBMIT%"}"/></td>
	</tr>
	
	<tr>
		<td></td>
	</tr>
	
	<tr>
		<td></td>
		<td>
			{$I18N.MEDIA_CREATIONDATE|default:"%MEDIA_CREATIONDATE%"}: {$ITEMDATA.ItemCreationDate|date_format:"%A, %B %e, %Y %H:%M:%S"|default:$I18N.NOT_SET|default:"%NOT_SET%"} <br />
			{$I18N.MEDIA_CREATIONDATE|default:"%MEDIA_MODIFICATIONDATE%"}: {$ITEMDATA.ItemModificationDate|date_format:"%A, %B %e, %Y %H:%M:%S"|default:$I18N.NOT_SET|default:"%NOT_SET%"}
		</td>
	</tr>
	
{if $INPUTERROR.general eq "1"}
	<tr>
		<td colspan="2">
		<a name="errorlist"><h2 class="phpmediadb-body-inputerror">{$I18N.ERROR_TITLE|default:"%ERROR_TITLE%"}</h2></a>
		 <ul>
 	{foreach from=$INPUTERROR.message item=curr_id key=curr_key}
		{if $curr_id.size  eq "1"}<li class="phpmediadb-body-inputerror">{$I18N.INPUT_FIELD} {$curr_key}: {$I18N.ERROR_INPUTSIZE|default:"%ERROR_INPUTSIZE%"}</li>{/if}
		{if $curr_id.regex eq "1"}<li class="phpmediadb-body-inputerror">{$I18N.INPUT_FIELD} {$curr_key}: {$I18N.ERROR_INPUTREGEX|default:"%ERROR_INPUTREGEX%"}</li>{/if}
{/foreach}
		 </ul>
		</td>
	</tr>
{/if}

</table>
</div>
</form>
--- NEW FILE: body.item.video.show.tpl ---



From nobody at sheep.berlios.de  Thu Mar 31 18:25:25 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 31 Mar 2005 18:25:25 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/admin item-session.php,1.8,1.9
Message-ID: <200503311625.j2VGPPL05518@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/admin
In directory sheep:/tmp/cvs-serv12885/admin

Modified Files:
	item-session.php 
Log Message:
itemShow
 * Added translation of iteminformation-data

Index: item-session.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/admin/item-session.php,v
retrieving revision 1.8
retrieving revision 1.9
diff -u -d -r1.8 -r1.9
--- item-session.php	31 Mar 2005 15:52:58 -0000	1.8
+++ item-session.php	31 Mar 2005 16:25:22 -0000	1.9
@@ -31,6 +31,12 @@
 	$ageRestrictions	= $PHPMEDIADB->BUSINESS->AGERESTRICTIONS->getList();
 	$codecs				= $PHPMEDIADB->BUSINESS->CODECS->getListByItemType( $sessionItem['type'] );
 	
+	/* translate data */
+	$categories			= $PHPMEDIADB->BUSINESS->CATEGORIES->translate( $categories );
+	$formats			= $PHPMEDIADB->BUSINESS->FORMATS->translate( $formats );
+	$ageRestrictions	= $PHPMEDIADB->BUSINESS->AGERESTRICTIONS->translate( $ageRestrictions );
+	$codecs				= $PHPMEDIADB->BUSINESS->CODECS->translate( $codecs );
+	
 	/* assign database-vars */
 	@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'DATA.CATEGORIES', $categories );
 	@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'DATA.MEDIAFORMATS', $formats );
@@ -97,7 +103,7 @@
 			else 
 				$status = $PHPMEDIADB->BUSINESS->AUDIOS->modify( $sessionItem['id'], $sessionItem['data'] );
 				
-			@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'MESSAGE', $PHPMEDIADB->PRESENTATION->I18N->getLanguageString( 'MESSAGE_SUCCESS_SAVE' ) );
+			@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'MESSAGE', $PHPMEDIADB->PRESENTATION->I18N->translate( 'MESSAGE_SUCCESS_SAVE' ) );
 			$PHPMEDIADB->PRESENTATION->HTMLSERVICE->displayMain( 'body.message.tpl' );
 			$PHPMEDIADB->PRESENTATION->SESSION->unregister( 'sessionitem' );
 			die();		
@@ -124,7 +130,7 @@
 			else 
 				$status = $PHPMEDIADB->BUSINESS->VIDEOS->modify( $sessionItem['id'], $sessionItem['data'] );
 				
-			@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'MESSAGE', $PHPMEDIADB->PRESENTATION->I18N->getLanguageString( 'MESSAGE_SUCCESS_SAVE' ) );
+			@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'MESSAGE', $PHPMEDIADB->PRESENTATION->I18N->translate( 'MESSAGE_SUCCESS_SAVE' ) );
 			$PHPMEDIADB->PRESENTATION->HTMLSERVICE->displayMain( 'body.message.tpl' );
 			$PHPMEDIADB->PRESENTATION->SESSION->unregister( 'sessionitem' );
 			die();		
@@ -151,7 +157,7 @@
 			else 
 				$status = $PHPMEDIADB->BUSINESS->PRINTS->modify( $sessionItem['id'], $sessionItem['data'] );
 				
-			@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'MESSAGE', $PHPMEDIADB->PRESENTATION->I18N->getLanguageString( 'MESSAGE_SUCCESS_SAVE' ) );
+			@$PHPMEDIADB->PRESENTATION->CONTENTVARS->addNode( 'MESSAGE', $PHPMEDIADB->PRESENTATION->I18N->translate( 'MESSAGE_SUCCESS_SAVE' ) );
 			$PHPMEDIADB->PRESENTATION->HTMLSERVICE->displayMain( 'body.message.tpl' );
 			$PHPMEDIADB->PRESENTATION->SESSION->unregister( 'sessionitem' );
 			die();		



From nobody at sheep.berlios.de  Thu Mar 31 18:26:38 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 31 Mar 2005 18:26:38 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.business class.phpmediadb_business_inspector.php,1.5,1.6
Message-ID: <200503311626.j2VGQcL05527@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business
In directory sheep:/tmp/cvs-serv16677/_source/tier.business

Modified Files:
	class.phpmediadb_business_inspector.php 
Log Message:
phpmediadb_business_inspector::getSize
 * Added check if data exsists
phpmediadb_business_inspector::getRegex
 * Added check if data exsists

Index: class.phpmediadb_business_inspector.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_inspector.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- class.phpmediadb_business_inspector.php	24 Mar 2005 20:43:35 -0000	1.5
+++ class.phpmediadb_business_inspector.php	31 Mar 2005 16:26:36 -0000	1.6
@@ -169,7 +169,10 @@
 		$returnValue = NULL;
 		
 		/* get size */
-		$returnValue = $this->BUSINESS->configuration['input-size'][$type];
+		if( array_key_exists( $type,  $this->BUSINESS->configuration['input-size'] ) )
+			$returnValue = $this->BUSINESS->configuration['input-size'][$type];
+		else
+			$returnValue = NULL;
 		
 		/* return data */
 		return $returnValue;
@@ -190,7 +193,10 @@
 		$returnValue = NULL;
 		
 		/* get size */
-		$returnValue = $this->BUSINESS->configuration['input-regex'][$type];
+		if( array_key_exists( $type,  $this->BUSINESS->configuration['input-regex'] ) )
+			$returnValue = $this->BUSINESS->configuration['input-regex'][$type];
+		else
+			$returnValue = NULL;
 		
 		/* return data */
 		return $returnValue;



From nobody at sheep.berlios.de  Thu Mar 31 18:27:04 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 31 Mar 2005 18:27:04 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.business class.phpmediadb_business_agerestrictions.php,1.5,1.6
Message-ID: <200503311627.j2VGR4L05533@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business
In directory sheep:/tmp/cvs-serv16686/_source/tier.business

Modified Files:
	class.phpmediadb_business_agerestrictions.php 
Log Message:
* Added function translate()

Index: class.phpmediadb_business_agerestrictions.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_agerestrictions.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- class.phpmediadb_business_agerestrictions.php	24 Mar 2005 20:43:35 -0000	1.5
+++ class.phpmediadb_business_agerestrictions.php	31 Mar 2005 16:27:02 -0000	1.6
@@ -181,6 +181,27 @@
 	}
 	
 //-----------------------------------------------------------------------------
+	/**
+	 * Translates the dataitems one item from the database
+	 *
+	 * @access public
+	 * @param integer $data Data of the item (resultset)
+	 * @return bool successstatus (true/false)
+	 */
+	public function translate( $data )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* translate database data */
+		foreach( $data as $key => $value )
+			$returnValue[$key]['mediaagerestriction'] = $this->PHPMEDIADB->PRESENTATION->I18N->translate( $data[$key]['mediaagerestriction'] );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
 } /* end of class phpmediadb_business_agerestrictions */
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---



From nobody at sheep.berlios.de  Thu Mar 31 18:27:09 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 31 Mar 2005 18:27:09 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.business class.phpmediadb_business_categories.php,1.5,1.6 class.phpmediadb_business_codecs.php,1.5,1.6 class.phpmediadb_business_formats.php,1.5,1.6
Message-ID: <200503311627.j2VGR9L05537@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business
In directory sheep:/tmp/cvs-serv16691/_source/tier.business

Modified Files:
	class.phpmediadb_business_categories.php 
	class.phpmediadb_business_codecs.php 
	class.phpmediadb_business_formats.php 
Log Message:
* Added function translate()

Index: class.phpmediadb_business_categories.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_categories.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- class.phpmediadb_business_categories.php	24 Mar 2005 20:43:35 -0000	1.5
+++ class.phpmediadb_business_categories.php	31 Mar 2005 16:27:07 -0000	1.6
@@ -182,6 +182,27 @@
 	}
 	
 //-----------------------------------------------------------------------------
+	/**
+	 * Translates the dataitems one item from the database
+	 *
+	 * @access public
+	 * @param integer $data Data of the item (resultset)
+	 * @return bool successstatus (true/false)
+	 */
+	public function translate( $data )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* translate database data */
+		foreach( $data as $key => $value )
+			$returnValue[$key]['categoryname'] = $this->PHPMEDIADB->PRESENTATION->I18N->translate( $data[$key]['categoryname'] );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
 } /* end of class phpmediadb_business_categories */
 
 //--- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF --- EOF ---

Index: class.phpmediadb_business_codecs.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_codecs.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- class.phpmediadb_business_codecs.php	24 Mar 2005 20:43:35 -0000	1.5
+++ class.phpmediadb_business_codecs.php	31 Mar 2005 16:27:07 -0000	1.6
@@ -100,6 +100,26 @@
 	
 //-----------------------------------------------------------------------------
 	/**
+	 * Returns the complete list of items from the database filtered by
+	 * itemtype
+	 *
+	 * @access public
+	 * @param integer $itemType Data of the item
+	 * @return array list of items
+	 */
+	public function getListByItemType( $itemType )
+	{
+		/* init */
+		$returnValue = null;
+		
+		/* delegate */
+		$returnValue = $this->DATA->CODECS->getListByItemType( $itemType );
+		
+		/* return data */
+		return $returnValue;
+	}
+//-----------------------------------------------------------------------------
+	/**
 	 * Adds one item into the database
 	 *
 	 * @access public
@@ -174,6 +194,27 @@
 		
 		/* delegate */
 		$returnValue = $this->BUSINESS->INSPECTOR->check( PHPMEDIADB_ITEMINFO_CODECS, $data );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Translates the dataitems one item from the database
+	 *
+	 * @access public
+	 * @param integer $data Data of the item (resultset)
+	 * @return bool successstatus (true/false)
+	 */
+	public function translate( $data )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* translate database data */
+		foreach( $data as $key => $value )
+			$returnValue[$key]['mediacodecname'] = $this->PHPMEDIADB->PRESENTATION->I18N->translate( $data[$key]['mediacodecname'] );
 		
 		/* return data */
 		return $returnValue;

Index: class.phpmediadb_business_formats.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.business/class.phpmediadb_business_formats.php,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -d -r1.5 -r1.6
--- class.phpmediadb_business_formats.php	24 Mar 2005 20:43:35 -0000	1.5
+++ class.phpmediadb_business_formats.php	31 Mar 2005 16:27:07 -0000	1.6
@@ -101,6 +101,26 @@
 	
 //-----------------------------------------------------------------------------
 	/**
+	 * Returns the complete list of items from the database filtered by
+	 * itemtype
+	 *
+	 * @access public
+	 * @param integer $itemType Data of the item
+	 * @return array list of items
+	 */
+	public function getListByItemType( $itemType )
+	{
+		/* init */
+		$returnValue = null;
+		
+		/* delegate */
+		$returnValue = $this->DATA->FORMATS->getListByItemType( $itemType );
+		
+		/* return data */
+		return $returnValue;
+	}	
+//-----------------------------------------------------------------------------
+	/**
 	 * Adds one item into the database
 	 *
 	 * @access public
@@ -175,6 +195,27 @@
 		
 		/* delegate */
 		$returnValue = $this->BUSINESS->INSPECTOR->check( PHPMEDIADB_ITEMINFO_FORMATS, $data );
+		
+		/* return data */
+		return $returnValue;
+	}
+	
+//-----------------------------------------------------------------------------
+	/**
+	 * Translates the dataitems one item from the database
+	 *
+	 * @access public
+	 * @param integer $data Data of the item (resultset)
+	 * @return bool successstatus (true/false)
+	 */
+	public function translate( $data )
+	{
+		/* init */
+		$returnValue = false;
+		
+		/* translate database data */
+		foreach( $data as $key => $value )
+			$returnValue[$key]['mediaformatname'] = $this->PHPMEDIADB->PRESENTATION->I18N->translate( $data[$key]['mediaformatname'] );
 		
 		/* return data */
 		return $returnValue;



From nobody at sheep.berlios.de  Thu Mar 31 18:28:25 2005
From: nobody at sheep.berlios.de (mblaschke)
Date: Thu, 31 Mar 2005 18:28:25 +0200
Subject: [phpmediadb-cvs] phpmediadb-cvs/_source/tier.presentation class.phpmediadb_presentation_i18n.php,1.10,1.11
Message-ID: <200503311628.j2VGSPL05569@bat.berlios.de>

Update of /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation
In directory sheep:/tmp/cvs-serv17787/_source/tier.presentation

Modified Files:
	class.phpmediadb_presentation_i18n.php 
Log Message:
* Changed getLanguageString to translate()
* Changed translate() to recursivly translate an array

Index: class.phpmediadb_presentation_i18n.php
===================================================================
RCS file: /cvsroot/phpmediadb/phpmediadb-cvs/_source/tier.presentation/class.phpmediadb_presentation_i18n.php,v
retrieving revision 1.10
retrieving revision 1.11
diff -u -d -r1.10 -r1.11
--- class.phpmediadb_presentation_i18n.php	24 Mar 2005 17:12:36 -0000	1.10
+++ class.phpmediadb_presentation_i18n.php	31 Mar 2005 16:28:22 -0000	1.11
@@ -101,16 +101,42 @@
 
 		return $returnValue;
 	}
-  
+
+//-----------------------------------------------------------------------------
+	public function translate( $langRequest )
+	{
+		/* init */
+		$returnValue = false;
+  	
+		switch( gettype( $langRequest ) )
+		{
+			case 'array';
+				foreach( $langRequest as $key => $value )
+				{
+					$returnValue[$key] = $this->translate( $langRequest[$key] );
+				}
+			break;
+			
+			case 'string':
+				$returnValue = $this->translate_string( $langRequest );
+			break;
+			
+			default:
+				$returnValue = $langRequest;
+			break;
+		}
+		return $returnValue;
+	}
+
 //-----------------------------------------------------------------------------
 	/**
 	 * Returns the i18n string specified by the langID
 	 *
-	 * @access public
+	 * @access protected
 	 * @param String Internal language-i18n-stringcode
 	 * @return mixed Internationalized string
 	 */
-	public function getLanguageString( $langId )
+	protected function translate_string( $langId )
 	{
 		/* init */
 		$returnValue = false;



